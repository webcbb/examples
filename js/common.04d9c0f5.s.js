System.register(["./lib.2b11c7cc.s.js"],(function(t,n){"use strict";var e,r,i,u,o,a,c,s,f,l,h,v,d,p,y,g,m,k,_,w,b,x,S,A,O,T,C,F,R,E,D,$,P,j,M,z,U,K,q,N,L,I,B,W,V,G,H,Q,J,Y,Z,X,tt,nt,et,rt,it,ut,ot,at,ct,st,ft,lt,ht,vt,dt,pt,yt,gt,mt,kt,_t,wt,bt,xt,St,At,Ot,Tt,Ct,Ft,Rt,Et,Dt,$t,Pt,jt,Mt,zt,Ut,Kt,qt,Nt,Lt,It,Bt,Wt,Vt,Gt,Ht,Qt,Jt,Yt,Zt,Xt,tn,nn,en,rn,un,on,an,cn,sn,fn,ln,hn,vn,dn,pn,yn,gn,mn,kn,_n,wn,bn,xn,Sn,An,On,Tn,Cn,Fn,Rn,En,Dn,$n,Pn,jn,Mn,zn,Un,Kn,qn,Nn,Ln,In,Bn,Wn,Vn,Gn,Hn,Qn,Jn,Yn,Zn,Xn,te,ne,ee,re,ie,ue,oe,ae,ce,se,fe,le,he,ve,de,pe,ye,ge,me,ke,_e,we,be,xe,Se,Ae,Oe,Te,Ce,Fe,Re,Ee,De,$e,Pe,je,Me,ze,Ue,Ke,qe,Ne,Le,Ie,Be,We,Ve,Ge,He,Qe,Je,Ye,Ze,Xe,tr,nr,er,rr,ir,ur,or,ar,cr,sr,fr,lr,hr,vr,dr,pr,yr,gr,mr,kr,_r,wr,br,xr,Sr,Ar,Or,Tr,Cr,Fr,Rr,Er,Dr,$r,Pr,jr,Mr,zr,Ur,Kr,qr,Nr,Lr,Ir,Br,Wr,Vr,Gr,Hr,Qr,Jr,Yr,Zr,Xr,ti,ni,ei,ri,ii,ui,oi,ai,ci,si,fi,li,hi,vi,di,pi,yi,gi,mi,ki,_i,wi,bi,xi,Si,Ai,Oi,Ti,Ci,Fi,Ri,Ei,Di,$i,Pi,ji,Mi,zi,Ui,Ki,qi,Ni,Li,Ii,Bi,Wi,Vi,Gi,Hi,Qi,Ji,Yi,Zi,Xi,tu,nu,eu,ru,iu,uu,ou,au,cu,su,fu,lu,hu,vu,du,pu,yu,gu,mu,ku,_u,wu,bu,xu,Su,Au,Ou,Tu,Cu,Fu;function Ru(t){return zu(t)||Ku(t)||to(t)||Mu()}function Eu(t,n){for(var e in n){(u=n[e]).configurable=u.enumerable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,e,u)}if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(n),i=0;i<r.length;i++){var u,o=r[i];(u=n[o]).configurable=u.enumerable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,o,u)}return t}function Du(t,n,e,r,i,u,o){try{var a=t[u](o),c=a.value}catch(t){return void e(t)}a.done?n(c):Promise.resolve(c).then(r,i)}function $u(t){return function(){var n=this,e=arguments;return new Promise((function(r,i){var u=t.apply(n,e);function o(t){Du(u,r,i,o,a,"next",t)}function a(t){Du(u,r,i,o,a,"throw",t)}o(void 0)}))}}function Pu(t,n,e){return(Pu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,e){var r=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=Qu(t)););return t}(t,n);if(r){var i=Object.getOwnPropertyDescriptor(r,n);return i.get?i.get.call(e):i.value}})(t,n,e||t)}function ju(t,n){return zu(t)||function(t,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],r=!0,i=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){i=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}return e}(t,n)||to(t,n)||Mu()}function Mu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zu(t){if(Array.isArray(t))return t}function Uu(t){return function(t){if(Array.isArray(t))return no(t)}(t)||Ku(t)||to(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ku(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function qu(t){var n="function"==typeof Map?new Map:void 0;return(qu=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return Nu(t,arguments,Qu(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Bu(r,t)})(t)}function Nu(t,n,e){return(Nu=Hu()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var i=new(Function.bind.apply(t,r));return e&&Bu(i,e.prototype),i}).apply(null,arguments)}function Lu(t){return(Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iu(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Bu(t,n)}function Bu(t,n){return(Bu=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function Wu(t){var n=Hu();return function(){var e,r=Qu(t);if(n){var i=Qu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Vu(this,e)}}function Vu(t,n){return!n||"object"!==Lu(n)&&"function"!=typeof n?Gu(t):n}function Gu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Qu(t){return(Qu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ju(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function Yu(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zu(t,n,e){return n&&Yu(t.prototype,n),e&&Yu(t,e),t}function Xu(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=to(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,o=!0,a=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,u=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw u}}}}function to(t,n){if(t){if("string"==typeof t)return no(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?no(t,n):void 0}}function no(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function eo(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function ro(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?eo(Object(e),!0).forEach((function(n){io(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):eo(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function io(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function uo(t){var n=Array.from(t),e=n.length;if(e)return 1===e?n[0]:n}function oo(t){return n=t,Array.isArray(n)?new Set(t):null!=t?new Set([t]):new Set;var n}function ao(t,n){var e;return e=n,Array.isArray(e)?n.forEach((function(n){return t.add(n)})):null!=n&&t.add(n),t}function co(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},e=Object.getPrototypeOf(t.prototype);if(null!=e){var r=e.constructor;return n(r)?r:co(r,n)}}function so(t){return t}function fo(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,n){return n};return t?n?function(){for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return e(t.apply(this,i),n.apply(this,i))}:t:n}function lo(){}function ho(t){return function(){return t}}function vo(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(){return n}}function po(t){var n=function(){return(n=ho(t()))()};return function(){return n()}}function yo(t){return null!=t}function go(t){var n=function t(){return t};return n[g]=function(n,e){return t(n,e)},n}function mo(t){return"function"==typeof t&&g in t}function ko(t){return go((function(n,e){return n.pass(e,t)}))}function _o(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return go((function(t,e){return t.call(e,n)}))}function wo(t){return go((function(n,e){var r,i=Xu(t);try{for(i.s();!(r=i.n()).done;){var u=r.value;n.pass(e,u)}}catch(t){i.e(t)}finally{i.f()}}))}function bo(t){return t[Symbol.iterator]()}function xo(t){return regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t,"t0",1);case 1:case"end":return n.stop()}}),n)}))()}function So(t,n){var e=io({},Symbol.iterator,t);if(!n)return e;var r=e;return r.reverse=n,r}function Ao(t,n){var e,r=Xu(t);try{for(r.s();!(e=r.n()).done;){n(e.value)}}catch(t){r.e(t)}finally{r.f()}}function Oo(t){return!!bo(t).next().done}function To(t){var n=bo(t).next();return n.done?void 0:n.value}function Co(t,n,e){var r,i=e,u=Xu(t);try{for(u.s();!(r=u.n()).done;){i=n(i,r.value)}}catch(t){u.e(t)}finally{u.f()}return i}function Fo(t,n){return So(regeneratorRuntime.mark((function e(){var r,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Xu(t),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=10;break}if(u=i.value,!n(u)){e.next=8;break}return e.next=8,u;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))}function Ro(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:so;return So(regeneratorRuntime.mark((function e(){var r,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Xu(t),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=8;break}return u=i.value,e.delegateYield(n(u),"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),r.e(e.t1);case 13:return e.prev=13,r.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})))}function Eo(t,n){return So(regeneratorRuntime.mark((function e(){var r,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Xu(t),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=9;break}return u=i.value,e.next=7,n(u);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))}function Do(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=7;break}return e.next=4,t[n];case 4:++n,e.next=1;break;case 7:case"end":return e.stop()}}),p)}function $o(t){return So((function(){return Do(t)}),(function(){return function(t){return So(regeneratorRuntime.mark((function n(){var e,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=t.length,r=e-1;case 2:if(!(r>=0)){n.next=8;break}return n.next=5,t[r];case 5:--r,n.next=2;break;case 8:case"end":return n.stop()}}),n)})))}(t)}))}function Po(){return k}function jo(t){return $o(Reflect.ownKeys(t))}function Mo(t){var n=jo(t);function e(n){return Eo(n,(function(n){return[n,t[n]]}))}return So((function(){return bo(e(n))}),(function(){return e(n.reverse())}))}function zo(t){if(function(t){return"by"in t}(t)){if(!Uo(t))return t;var n=t,e=n.a,r=n.by,i=n.with;return{a:e,by:function(t){return r.apply(void 0,Uu(i.map((function(n){return t.get(n)}))))}}}if(function(t){return"is"in t}(t)){var u=t;return{a:u.a,by:ho(u.is)}}if(function(t){return"via"in t}(t)){var o=t,a=o.a,c=o.via;return{a:a,by:function(t){return t.get(c)}}}if(function(t){return"as"in t}(t)){if(function(t){return!("a"in t)}(t)&&(t=function(t){return ro(ro({},t),{},{a:t.as})}(t)),!Uo(t)){var s=t.as;return{a:t.a,by:function(t){return new s(t)}}}var f=t,l=f.as,h=f.with;return{a:t.a,by:function(t){return Nu(l,Uu(h.map((function(n){return t.get(n)}))))}}}throw new TypeError("Malformed context value specifier: ".concat(JSON.stringify(t)))}function Uo(t){return"with"in t}function Ko(t,n){return Fo(Eo(n.map((function(n){return po(n.bind(void 0,t))})),(function(t){return t()})),yo)}function qo(t){return po((function(){var n,e=Xu(t);try{for(e.s();!(n=e.n()).done;){var r=(0,n.value)();if(null!=r)return r}}catch(t){e.e(t)}finally{e.f()}}))}function No(t){return P in t}function Lo(t){return t[j]}function Io(t){return new M(t)}function Bo(t){var n;return(n="function"==typeof t?{supply:Io(),receive:function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];t.apply(void 0,r)}}:{supply:t.supply||Io(),receive:function(n){if(!this.supply.isOff){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];t.receive.apply(t,[n].concat(r))}}}).supply.whenOff((function(){return n.receive=lo})),n}function Wo(t){var n=function e(r){var i=t,u=[];n=function(t){return u.push(t)};try{for(;;){i=Vo(i,r);var o=u.shift();if(!o)break;r=o}}finally{n=e}};return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(e)}}function Vo(t,n){var e,r=[],i=Xu(t);try{var u=function(){var t=e.value,i=r.length;r.push(t);var u={onRecurrent:function(n){r[i]=Bo({supply:t.supply,receive:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.apply(void 0,r)}})}};t.receive.apply(t,[u].concat(Uu(n)))};for(i.s();!(e=i.n()).done;)u()}catch(t){i.e(t)}finally{i.f()}return r}function Go(t){return U in t}function Ho(){return K}function Qo(t){var n=Bo(t),e=Wo([n]);return n.supply.whenOff((function(){return e=lo})),function(){return e.apply(void 0,arguments)}}function Jo(t){return function(n){t.to({supply:n.supply,receive:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.receive.apply(n,[t].concat(r)),n.supply.off()}})}}function Yo(t){var n,e,r=new z;return function(i){if(r.size||(e=[],n=Io((function(){return e=void 0})),t.to({supply:n,receive:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),u=1;u<n;u++)i[u-1]=arguments[u];e&&(r.size?e=void 0:e.push(i)),r.send.apply(r,i)}})),i.supply.needs(n),r.on(i).whenOff((function(t){r.size||n.off(t)})),e){var u=Qo(i);e.forEach((function(t){return u.apply(void 0,Uu(t))}))}}}function Zo(t,n){return function(e){var r=[];t.to({supply:e.supply,receive:function(t){var i=function i(u,o){var a=u>=n.length;++u;var c=r[u];if(c){var s=c.supply;return c.supply=o,[c.chain,s]}var f=u<n.length?n[u]:lo,l={chain:{call:function(t,n){h(t.apply(void 0,Uu(n)),n)},pass:function(t,n){h(t(n),[n])},skip:function(){l.supply.off()},onEvent:function(t,n){var e=Io().needs(l.supply);n[U]().to({supply:e,receive:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];h(t.apply(void 0,i),i,e)}})}},supply:o};return r[u]=l,[l.chain,Ho()];function h(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.supply,c=i(u,Io().needs(o)),s=ju(c,2),h=s[0],v=s[1];try{mo(n)?n[g](h,f):a?e.receive.apply(e,[t].concat(Uu(r))):h.pass(f,n)}finally{v.off()}}},u=i(0,Io().needs(e.supply)),o=ju(u,2),a=o[0],c=o[1];try{for(var s=arguments.length,f=new Array(s>1?s-1:0),l=1;l<s;l++)f[l-1]=arguments[l];a.call(n[0],f)}finally{c.off()}}})}}function Xo(t,n,e){return function(r){e?t.to({supply:Io().needs(n).cuts(e),receive:r.receive.bind(r)}):(r.supply.needs(n),t.to(r))}}function ta(t){t.supply.off()}function na(t){return new q(t)}function ea(){throw new Error("No events to send")}function ra(t,n){return new N(t,n)}function ia(t,n){return ra((function(n){return t[U]().to(n)}),n)}function ua(t,n){return No(t)?t[P]():ia(t,n)}function oa(t){var n=Object.keys(t);return ra((function(e){var r=e.supply,i=Qo(e),u=lo,o={};n.forEach((function(n){r.needs(t[n][P]().to((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];o[n]=e,u()})).needs(r))})),r.isOff||(u=function(){return i(o)})}),(function(){var e={};return n.forEach((function(n){return ua(t[n]).once((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e[n]=r}))})),[e]})).share()}function aa(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return ra(r,i).share();function r(t){var e=t.supply,r=Qo(t),i=lo,u=[];n.forEach((function(t,n){e.needs(t[P]().to((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];u[n]=e,i()})).needs(e))})),e.isOff||(i=function(){return r.apply(void 0,u)})}function i(){var t=[];return n.forEach((function(n){return ua(n).once((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return t.push(e)}))})),t}}function ca(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return ra(lo,ho(n))}function sa(t){return go((function(n,e){return n.onEvent(e,ua(t))}))}function fa(t){return Go(t)?t[U]():t[P]()}function la(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?na((function(t){var e=t.supply,r=n.length,i=function(t){--r||e.off(t)},u=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];t.receive.apply(t,[n].concat(r))};n.forEach((function(t){return fa(t).to({supply:Io(i).needs(e),receive:u})}))})).share():I}function ha(t){return na((function(n){var e=n.supply,r=Qo(n),i=Io(),u=0,o=fa(t).tillOff(e,i).thru_((function(t){return++u,ko(t)})),a=[],c=1,s=0;i.whenOff((function(t){u||e.off(t)})),function(t){return na((function(n){var e=n.supply,r=Qo(n),i=0;t[U]().to({supply:e,receive:function(t,n){var u=++i;Promise.resolve().then((function(){return n})).then((function(t){return r(t,u)}),(function(t){return e.off(t)}))}})}))}(o).to({supply:e,receive:function(t,e,o){var f,l=o-c;(a[l]=e,++s>l)&&(s===a.length?(f=a,a=[]):f=a.splice(0,l+1),c+=f.length,s-=f.length,u-=f.length,r.apply(void 0,Uu(f)),!u&&i.isOff&&n.supply.needs(i))}})}))}function va(t){var n=function(e){t.then((function(){return n(e)}),(function(){return n(e)}))};return t.then((function(t){n=function(t){return function(n){try{Qo(n)(t),n.supply.off()}catch(t){n.supply.off(t)}}}(t)})).catch((function(t){var e;e=t,n=function(t){return t.supply.off(e)}})),na((function(t){return n(t)}))}function da(t){return Array.isArray(t)?t:[t]}function pa(t){return new Q(t)}function ya(t){return"string"==typeof t||function(t){return Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&t[1]instanceof et}(t)}function ga(t,n){if("string"==typeof t)return"string"==typeof n?ma(t,n):n[1].url?-1:ma(t,n[0]);var e=ju(t,2),r=e[0],i=e[1].url;return"string"==typeof n?i?1:ma(r,n):ma(i,n[1].url)||ma(r,n[0])}function ma(t,n){return t<n?-1:t>n?1:0}function ka(){var t=new Map,n=new Map;return function(e){var r=t.get(e.url);if(r)return r;for(var i=e.alias,u=0,o=0,a=[i].concat(Uu(e.aliases));o<a.length;o++){var c=a[o],s=n.get(c);if(!s)return t.set(e.url,c),n.set(c,1),c;u||(u=s)}var f="".concat(i).concat(++u);return t.set(e.url,f),n.set(i,u),f}}function _a(t){return new rt(t)}function wa(t){return function(){throw null!=t?t:new TypeError("Context destroyed")}}function ba(t,n){return n.read().keepThru((function(n){return n.length?sa(aa.apply(void 0,Uu(Eo(Eo($o(n),(function(n){return n(t)})),xa)))):_o()}),Sa)}function xa(t){return null==t?ca():function(t){return("object"===Lu(t)||"function"==typeof t)&&No(t)}(t)?ua(t):ca(t)}function Sa(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return _o.apply(void 0,Uu(Ro(n)))}function Aa(t){return(t.ownerDocument||t).defaultView}function Oa(t){return function(n){var e=dt.by(n),r=yt.by(t.newQueue(e)).ref,i=[];return function(t){var n=ju(i,3),u=n[0],o=n[2],a=ju(r,2),c=a[0],s=a[1],f=u||s;if(u===s&&!o||u===c)i[1]=t;else{var l=i=[f=o?c:s,t];f.add((function(t){l[2]=!0;try{l[1]({get config(){return e},postpone:function(n){t.postpone(n)}})}catch(t){e.error(t)}}))}f.schedule(e)}}}function Ta(t){return _t(t)}function Ca(t){return function(n,e){var r=n.get(bt);return n===r?t(r,e):r.get(e)}}function Fa(t,n,e,r){var i=!e,u=r(e?function(t){if(function(t){return void 0===t.value&&void 0===t.writable}(t))return t;var n=Symbol("value"),e=t.value,r=ro(ro({},t),{},{writable:void 0,value:void 0,get:function(){return n in this?this[n]:e}});return t.writable&&(r.set=function(t){this[n]=t}),delete r.writable,delete r.value,r}(e):function(t,n){var e=Symbol("".concat(String(n),":value")),r=t[n];return{configurable:!0,enumerable:!0,get:function(){return e in this?this[e]:r},set:function(t){this[e]=t}}}(t,n));if(!i||!u)return u;Object.defineProperty(t,n,u)}function Ra(t){return t.nodeType===Node.ELEMENT_NODE}function Ea(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(t){return Ct.define.apply(Ct,[t].concat(n))}}function Da(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=function(t){return Mt.define.apply(Mt,[t].concat(n))},i=r;return i[$t]=function(){return Mt.all.apply(Mt,n)},r}function $a(t){var n=function(n){var e=n.get,r=n.set,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wt,u=arguments.length>2?arguments[2]:void 0;return Da(io({},$t,(function(n){var o=t({type:n,key:i,readable:!0,writable:u,enumerable:!1,configurable:!1,get:function(t){return e(t,i)},set:function(t,n){return r(t,n,i)}});return o&&o.componentDef||{}})))},e=function(t,e){return n({get:function(n,e){return t(n,e)}},e,!1)},r=function(n,e,r){return Fa(n,e,r,(function(r){var i=r.get,u=r.set,o=n.constructor,a=t({type:o,key:e,readable:!!r.get,writable:!!r.set,enumerable:!!r.enumerable,configurable:!!r.configurable,get:i?function(t){return i.call(t)}:Pa(e),set:u?function(t,n){return u.call(t,n)}:ja(e)})||{},c=a.get,s=a.set,f=a.configurable,l=a.enumerable,h=a.componentDef,v=void 0===h?{}:h;Mt.define(o,v);var d=ro(ro({},r),{},{configurable:null!=f?f:r.configurable,enumerable:null!=l?l:r.enumerable});return(c||s)&&(d.get=c&&function(){return c(this,e)},d.set=s&&function(t){s(this,t,e)}),d}))};return r.With=function(t,e){return n(t,e,!0)},r.By=e,r.As=function(t,n){return e(ho(t),n)},r.Bind=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wt,r=Symbol("".concat(String(e),":accessor")),i=function(n){var i=n[r];if(i)return i;var u=t(n,e);return n[r]={get:u.get?u.get.bind(u):Pa(e),set:u.set?u.set.bind(u):ja(e)}};return n({get:function(t){return i(t).get()},set:function(t,n){return i(t).set(n)}},e,!0)},r}function Pa(t){return function(){throw new TypeError('"'.concat(String(t),'" is not readable'))}}function ja(t){return function(){throw new TypeError('"'.concat(String(t),'" is not writable'))}}function Ma(t){if(t.hasOwnProperty(Zt))return t[Zt];var n=pa(),e=new L,r=la(n.read().thru((function(t){return t?_o(t):m()})),e),i=co(t,(function(t){return $t in t}));if(i){var u=Ma(i);r.to((function(t){return u.send(t)}))}var o={on:r,send:function(t){e.send(t)},setup:function(t){n.it=t}};return Object.defineProperty(t,Zt,{value:o}),o}function za(t,n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(ro(ro({},e),{},{window:e.window||t.get(Xt)}))}}function Ua(t){return t[Nt]}function Ka(t){if(!t.hasOwnProperty(on))throw new TypeError("Component is not defined: ".concat(t));return t[on]}function qa(t){var n=t.get(Xt).customElements,e=t.get(nn);return new(function(t){Iu(i,t);var r=Wu(i);function i(){return Ju(this,i),r.apply(this,arguments)}return Zu(i,[{key:"define",value:function(t,r){if(ya(t))n.define(X.name(t,e),r);else{var i=Ka(t).elementDef,u=i.name,o=i.extend;u?o&&o.name?n.define(X.name(u,e),r,{extends:o.name}):n.define(X.name(u,e),r):Na(t).resolve(void 0)}}},{key:"whenDefined",value:function(t){if(ya(t))return n.whenDefined(X.name(t,e));var r=Ka(t).elementDef.name;return r?n.whenDefined(X.name(r,e)):Na(t).promise}}]),i}(cn))}function Na(t){return t.hasOwnProperty(sn)?t[sn]:t[sn]=new St}function La(){throw new TypeError("Component destroyed already")}function Ia(t){return{definitions:new L,components:new L,buildElement:function(n){var e=new mn(t,this,n);return e._define(),e}}}function Ba(){for(var t,n=!1,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var u=0,o=r;u<o.length;u++){var a=o[u];switch(a[1]){case"is":n=!0,t||(t=a);break;case"has":t=a;break;case"needs":n=!0}}return n?t:void 0}function Wa(t,n){return ra((function(e){var r,i=ca(),u=Promise.resolve("idle");return oa({clause:n,deps:Va(t,n)}).keepThru_((function(n){var e=ju(n.clause,1)[0],o=n.deps;if(!e)return _o();var a=ju(e,3),c=a[0],s=a[2];if(c.feature===r)return sa(i);if(s!==(r=c.feature))return sa(i=t.get(Sn.of(r)).keepThru_((function(t){return t.to(u),u=t.stage,t})));var f=new An(t,c,o).to(u),l=ca(f);return sa(i=ra((function(t){return l.to(t).whenOff((function(){u=f.unload()}))})).share())})).to(e)})).keepThru((e=null,function(t){return e===t?m():(e=t,t?_o(t):_o())}));var e}function Va(t,n){return n.keepThru_((function(n){if(!n)return _o();var e=oo(ju(n,1)[0].def.needs);return e.size?sa(aa.apply(void 0,Uu(Eo(e,(function(n){return t.get(Sn.of(n))})))).keepThru_(Ga)):_o()}))}function Ga(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return _o.apply(void 0,Uu(Fo(Eo(n,(function(t){return t[0]})),yo)))}function Ha(t){return Ct.define((function t(){Ju(this,t)}),{needs:t})}function Qa(t){var n=pa(0),e=t.values,r=new(function(i){Iu(o,i);var u=Wu(o);function o(){var n;return Ju(this,o),(n=u.call(this)).get=e.get,t.provide({a:nn,by:ka}),t.provide({a:bt,is:Gu(n)}),n}return Zu(o,[{key:"whenDefined",value:function(t){return function(t,n){if(n.hasOwnProperty($n))return n[$n];var e=va(Promise.resolve(t.whenReady()).then((function(){return t.get(cn).whenDefined(n)})).then((function(){return Ka(n)})));return n[$n]=e}(this,t)}},{key:"whenReady",value:function(t){var e=this;return(this.whenReady=n.read().thru((function(t){return t?_o(e):m()})).once().F)(t)}},{key:"load",value:function(t){var n,e=this,i=ra((function(n){var i=r.get(Dn).request(t),u=pa({status:{feature:t,ready:!1}});e.get(Sn.of(t)).to({supply:n.supply,receive:function(t,n){var e=n;u.it={status:{feature:e.request.feature,ready:e.ready},down:e.down},e.ready||e.init().then((function(){u.it={status:{feature:e.request.feature,ready:!0},down:e.down}})).catch(console.error)}}).whenOff((function(){i.unuse()})),u.read(n)})).share(),u=i.to((function(t){var e=t.down;n=e}));return new(function(t){Iu(r,t);var e=Wu(r);function r(){return Ju(this,r),e.apply(this,arguments)}return Zu(r,[{key:"read",value:function(t){return(this.read=i.tillOff(u).keepThru((function(t){return t.status})).F)(t)}},{key:"dismiss",value:function(t){return u.off(t),n}},{key:"down",get:function(){return n}}]),r}(Dt))}}]),o}(bt));return{bootstrapContext:r,complete:function(){n.it=1}}}function Ja(t){return[Pn,t]}function Ya(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!1===n)return lo;if(!0===n||"function"==typeof n){var e=Ja(t),r=!0===n?Za:n;return function(t,n,i){return r(t,e,n,i)}}return function(t,e,r){return Za(t,n,e,r)}}function Za(t,n,e,r){Lt.of(t).updateState(n,e,r)}function Xa(t){for(var n,e=0;e<t.length;++e){var r=t[e];r<="Z"&&r>="A"?(n||(n=t.substring(0,e)),n+="-"+r.toLowerCase()):n&&(n+=r)}return n||t}function tc(t,n){var e=t.observedAttributes;if(Array.isArray(e)){var r=new Set(e);Ao(n,(function(t){return r.add(t)})),n=r}return Array.from(n)}function nc(t,n){var e=t.prototype.attributeChangedCallback;return e?function(t,r,i){var u=n.get(t);u?u(Lt.of(this).component,i,r):e.call(this,t,r,i)}:function(t,e,r){n.get(t)(Lt.of(this).component,r,e)}}function ec(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Da({define:function(t){var e,r=t.get(jn),i=Xu(n);try{for(i.s();!(e=i.n()).done;){var u=e.value;if("string"==typeof u){var o=Xa(u);r.declareAttribute({name:o,change:Ya(o)})}else for(var a=0,c=Object.entries(u);a<c.length;a++){var s=ju(c[a],2),f=s[0],l=s[1],h=Xa(f);r.declareAttribute({name:h,change:Ya(h,l)})}}}catch(t){i.e(t)}finally{i.f()}}})}function rc(t){var n=t.get(Wn);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=pa(lo),r=function(t){e.it(t)};return n.renderBy(r,In.fulfill({on:e.on()},t)),function(t){e.it=function(n){return t(n)}}}}function ic(t,n){var e=function(t,n){var e=t.shadowRoot;if(e)return e;if("attachShadow"in t)return t.attachShadow(n);return}(t.element,n);return e&&(e[Nt]=t,t.whenConnected((function(){return t.dispatchEvent(new Hn("wesib:shadowAttached",{bubbles:!0}))}))),e}function uc(t){return function(n,e){var r,i=Xu(e);try{for(i.s();!(r=i.n()).done;){var u=r.value;t.delete(u)}}catch(t){i.e(t)}finally{i.f()}var o,a=Xu(n);try{for(a.s();!(o=a.n()).done;){var c=o.value;t.add(c)}}catch(t){a.e(t)}finally{a.f()}}}function oc(t,n,e,r,i){return void 0===r&&(r=e(t,i)),{instance:r,convertTo:function(r){return oc(r,n,e,void 0,t)},attachTo:function(r){return oc(r,n,e,t.aspect(n)||e(r))}}}function ac(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return oc(t,n,ho(null),e)}function cc(t){return{instance:t,convertTo:function(){return this}}}function sc(t){if(!t)return lc;for(var n=vc(t),e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(!r.length)return n;var u=Eo(r,vc);return function(t,e){var r=n(t,e),i=Co(Ro([[r],Fo(Eo(u,(function(n){return n(t,e)})),yo)]),(function(t,n){return n.applyAspect?function(e){return t(e)||n.applyAspect(e)}:t}),lo);return hc(r)?{applyAspect:i}:{set:r.set.bind(r),get:r.get.bind(r),applyAspect:i}}}function fc(t){return t?(n=t,Array.isArray(n)?sc.apply(void 0,Uu(t)):sc(t)):sc();var n}function lc(){return oe}function hc(t){return!t.set}function vc(t){return"function"==typeof t?t:ho(t)}function dc(t){return Xn in t}function pc(t){var n=Array.from(t);if(!n.length)return _o("on");var e=n.map((function(t){return t.parent.aspect(_e)}));return sa(aa.apply(void 0,Uu(e)).keepThru_(yc))}function yc(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return gc.apply(void 0,Uu(Ro(n)))}function gc(){for(var t=!1,n=!1,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var u=0,o=r;u<o.length;u++){var a=o[u];switch(a){case"off":return"off";case"ro":t=!0;break;case"-on":n=!0;break;case"-ro":n=!0,t=!0}}return n?t?"-ro":"-on":t?"ro":"on"}function mc(t){var n=ju(t,2);return[n[0],ju(n[1],1)[0]]}function kc(t){var n=ju(t.cs,1)[0],e=ju(t.model,1)[0],r=ju(t.mode,1)[0];if(!_e.hasData(r))return _o();var i={};return Ao(n.entries(),(function(t){var n=ju(t,2),e=n[0],r=n[1];i[e]=r.aspect(Ae)})),sa(oa(i).keepThru((function(t){var n=ro({},e);return Ao(Mo(t),(function(t){var e=ju(t,2),r=e[0],i=ju(e[1],1)[0];n[r]=i})),ko(n)})))}function _c(){return Pe}function wc(t){return No(t)?ho(ua(t)):"function"==typeof t?function(n){return ua(t(n))}:function(n){return n.read().keepThru(function(t,n){return function(){var e=n.validate(t);return null==e?_o():Array.isArray(e)?_o.apply(void 0,Uu(e)):_o(e)}}(n,t))}}function bc(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=n.length;return 1===r?n[0]:r?function(t){var e=new Me(t);return n.forEach((function(t){return e.from(t)})),e}:_c}function xc(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?new qe(n):Ke}function Sc(t){return sa(aa.apply(void 0,Uu(Eo(t,(function(t){return t.aspect(Ue)})))))}function Ac(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return _o.apply(void 0,Uu(Ro(Eo(n,(function(t){return t[0]})))))}function Oc(t,n){var e=n.aspect(me);return oa({hasFocus:n.aspect(Be)||ca(!1),edited:e?e.input().keepThru((function(t){return!!t.event})):ca(!1)}).keepThru((function(n){var e=ju(n.hasFocus,1)[0],r=ju(n.edited,1)[0];return function(t,n,e){t=ro(ro({},t),{},n?{hasFocus:n,touched:!0}:{hasFocus:n});e&&(t=ro(ro({},t),{},{edited:e,touched:!0}));return t}(t.it,e,r)}))}function Tc(t){return t.controls.read().tillOff(t).keepThru_((function(t){return sa(aa.apply(void 0,Uu(function(t){return Eo(t,(function(t){return t.aspect(Ge)}))}(t))))}),Cc)}function Cc(){for(var t={hasFocus:!1,touched:!1,edited:!1},n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return Ao(e,(function(n){var e=ju(n,1)[0],r=e.hasFocus,i=e.touched,u=e.edited;i&&(t.touched=!0),r&&(t.hasFocus=t.touched=!0),u&&(t.edited=t.touched=!0)})),t}function Fc(t){return t&&"object"===Lu(t)&&nr in t}function Rc(t,n){Ao(Mo(t),(function(t){var e=ju(t,2),r=e[0],i=e[1];null!=i&&(n[r]=i)}))}function Ec(t,n){return t.aspect(ue)({node:n})}function Dc(t){return!t.ok}function $c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ns,e=void 0===n?ne:n;return function(t){var n=function(t){return[t,e]};return oa({md:t.aspect(_e),vl:t.aspect(Ue),st:t.aspect(Ge)}).keepThru((function(t){var e=ju(t.md,1)[0],r=ju(t.vl,1)[0],i=ju(t.st,1)[0],u=i.hasFocus,o=i.touched,a=i.edited,c=[];return _e.hasData(e)||c.push(n("disabled")),"ro"!==e&&"-ro"!==e||c.push(n("readonly")),r.ok||c.push(n("invalid")),r.has("missing")&&c.push(n("missing")),r.has("incomplete")&&c.push(n("incomplete")),u&&c.push(n("has-focus")),o&&c.push(n("touched")),a&&c.push(n("edited")),_o.apply(void 0,c)}))}}function Pc(t){return e(t,{isIdentifier:!0})}function jc(t){return Array.isArray(t)}function Mc(t){return!!t.length}function zc(t,n){return t===n||("object"===Lu(t)?t.is(n):"object"===Lu(n)&&n.is(t))}function Uc(t,n){return Kc(Math.round(t),n)}function Kc(t,n){return Math.max(Math.min(t,n),0)}function qc(t,n,e){var r=e;return r<0?r+=1:r>1&&(r-=1),255*(r<1/6?t+6*r*(n-t):r<.5?n:r<2/3?t+(n-t)*(2/3-r)*6:t)}function Nc(t,n,e){var r=2*e-1,i=t.rgb,u=n.rgb,o=i.a-u.a,a=((r*o==-1?r:(r+o)/(1+r*o))+1)/2,c=1-a;return new ar({r:i.r*a+u.r*c,g:i.g*a+u.g*c,b:i.b*a+u.b*c,a:i.a*e+u.a*(1-e)},t)}function Lc(t){if(null==t)return[void 0,0];switch(Lu(t)){case"object":return[t,t.priority];case"string":if(t.endsWith(ir))return[t.substring(0,t.length-ir.length).trim(),1]}return[t,0]}function Ic(t,n,e){return t?new hr(t,n,e):e.dim.zero.prioritize(e.priority||0)}function Bc(t,n,e){return e.type?new dr(t,n,e,t):t}function Wc(t,n){return n?1===n?t.prioritize(t.priority):new pr(t,"*",n,t):t.dim.zero.prioritize(t.priority)}function Vc(t,n){return 1===n?t.prioritize(t.priority):new pr(t,"/",n,t)}function Gc(t){var n=t.pt,e=t.noPt,r={get zero(){return i},get pt(){return n()},get noPt(){return e()},of:function(t,n){return t?new hr(t,n,{dim:this}):i},by:function(t){if(function(t){return"object"===Lu(t)&&("dimension"===t.type||"calc"===t.type||0===t.type)}(t))return t.toDim(this)}},i=new gr(r).usual;return r}function Hc(){return wr}function Qc(t,n){if(!n)return wr;if("string"!=typeof n){if(No(n))return Yc(n);if(Go(n))return Yc(Jc(n));if("function"==typeof n){var e=n(t);if("string"!=typeof e){if(No(e))return Yc(e);if(Go(e))return Yc(Jc(e))}return ca(Zc(e))}}return ca(Zc(n))}function Jc(t){return ua(t,vo({}))}function Yc(t){return ua(t).keepThru(Zc,(function(t){return n&&function(t,n){var e,r=bo(Xc(n)),i=Xu(Xc(t));try{for(i.s();!(e=i.n()).done;){var u=ju(e.value,2),o=u[0],a=u[1],c=r.next().value;if(!c||o!==c[0]||!zc(a,c[1]))return!1}}catch(t){i.e(t)}finally{i.f()}return!r.next().value}(t,n)?m():n=ro({},t)}),so);var n}function Zc(t){return"string"==typeof t?{$$css:t}:t}function Xc(t){return Fo(Mo(t),yo)}function ts(t,n){return Yc(oa({base:t,addendum:n}).keepThru((function(t){return function(t,n){return Co(Mo(n),(function(t,n){var e=ju(n,2);return function(t,n,e){ns(t[n])<=ns(e)&&(delete t[n],t[n]=e);return t}(t,e[0],e[1])}),ro({},t))}(ju(t.base,1)[0],ju(t.addendum,1)[0])})))}function ns(t){switch(Lu(t)){case"string":return t.endsWith(ir)?1:0;case"object":return t.priority;default:return 0}}function es(t){return">"===t||"+"===t||"~"===t}function rs(t){if(!jc(t))return[is(t)];var n,e,r=[],i=Xu(t);try{for(i.s();!(e=i.n()).done;){var u=e.value,o=n;n&&(r.push(n),n=void 0);var a=void 0;if(es(u)){if(n=u,!o)continue;a={}}else a=is(u);r.push(a)}}catch(t){i.e(t)}finally{i.f()}return n&&r.push(n,{}),r}function is(t){return"string"==typeof t?t?{s:t}:{}:us(t)}function us(t){var n=t.ns||void 0,e=t.i||void 0,r=function(t){if(!t)return;if(ya(t))return[t];var n=t.filter((function(t){return!!t}));return Mc(n)?n.sort(ga):void 0}(t.c),i=function(t){if(!t)return;if(function(t){return"string"!=typeof t[0]}(t)){var n=t.map(os);return Mc(n)?n:void 0}return[os(t)]}(t.u);return{ns:n,e:("*"!==t.e||!n&&!e&&!r&&i&&as(i[0]))&&t.e||void 0,i:e,c:r,u:i,s:t.s||void 0,$:cs(t.$)}}function os(t){if(!as(t))return t;if(t.length<3)return t;var n=Ru(t),e=n[0],r=n[1],i=n.slice(2);return jc(i[0])?[e,r].concat(Uu(i.map(rs))):[e,r,rs(i)]}function as(t){return t.length>1&&(":"===t[0]||"::"===t[0])}function cs(t){if(t)return Mc(t=jc(t)?Array.from(new Set(Ro(t,ss))).sort():Array.from(ss(t)))?t:void 0}function ss(t){if(!t)return br;var n,e,r=t.indexOf("="),i=r<0?t:t.substring(0,r),u=new Set,o=Xu(i.split(":"));try{for(o.s();!(e=o.n()).done;){var a=e.value;n?n+=":"+a:n=a,u.add(n)}}catch(t){o.e(t)}finally{o.f()}return r>=0&&u.add(t),u}function fs(t){if(!t.length)return xr;for(var n,e=0;;){var r=t[e++];if(!es(r))return[n?[n,r]:[r],t.slice(e)];n=r}}function ls(t,n){return t&&n.every((function(n){return t.find((function(t){return function(t,n){if("string"==typeof t)return"string"==typeof n?t===n:!n[1].url&&n[0]===t;var e=ju(t,2),r=e[0],i=e[1].url;return"string"==typeof n?!i&&r===n:r===n[0]&&i===n[1].url}(n,t)}))}))}function hs(t){return rs(t)}function vs(t){return ds(t,Ar)}function ds(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or,e=n.qualify,r=n.nsAlias,i=void 0===r?ka():r,u={qualify:e,nsAlias:i};return t.reduce((function(t,n){return es(n)?t+n:(t&&!es(t[t.length-1])&&(t+=" "),t+ps(n,u))}),"")}function ps(t,n){var r=n.qualify,i=n.nsAlias,u=t.ns,o=t.e,a=t.i,c=t.c,s=t.s,f=t.u,l=t.$,h=!1,v="";if(a&&(h=!0,v+="#".concat(Pc(tt.name(a,i)))),c&&(h=!0,v=c.reduce((function(t,n){return"".concat(t,".").concat(Pc(nt.name(n,i)))}),v)),f){h=!0;var d={nsAlias:i};v=f.reduce((function(t,n){return function(t,n,r){if(as(n)){if(t+=n[0]+n[1],n.length>2){t+="("+ds(n[2],r);for(var i=3;i<n.length;++i)t+=","+ds(n[i],r);t+=")"}return t}var u=ju(n,4),o=u[0],a=u[1],c=u[2],s=u[3];t+="["+Pc(o),a&&(t+=a+e(c,{quotes:"double",wrap:!0}));s&&(t+=" "+s);return t+"]"}(t,n,d)}),v)}if(s&&(h=!0,v+=s),r&&l&&(v=l.reduce((function(t,n){return t+r(n)}),v)),u){var p=function(t,n){return"string"==typeof t?t:t.url?n(t):void 0}(u,i);v=p?"".concat(p,"|").concat(o||"*").concat(v):y()}else v=y();return v;function y(){return h?"".concat(o?X.name(o,i):"").concat(v):"".concat(o?X.name(o,i):"*").concat(v)}}function ys(t,n){var e,r=ju(n,2),i=r[0],u=ju(r[1],2),o=u[0],a=u[1],c="",s=function(t){t&&(c&&(c+=" and "),c+=t)},f=Xu(o);try{for(f.s();!(e=f.n()).done;){s(ju(Lc(t[e.value]),1)[0])}}catch(t){f.e(t)}finally{f.f()}return s(a),c?[i,c]:[i]}function gs(t){return Co(Fo(Mo(t),ms),(function(t,n){var e=ju(n,2),r=e[0],i=e[1];return t[r]=i,t}),{})}function ms(t){return"@"===String(t[0])[0]}function ks(t,n){var e=t.$;if(!e)return t;var r,i=[],u=Xu(e);try{for(u.s();!(r=u.n()).done;){var o=r.value;"@"===o[0]?_s(n,o):i.push(o)}}catch(t){u.e(t)}finally{u.f()}return i.length===e.length?t:Mc(i)?ro(ro({},t),{},{$:i}):ro(ro({},t),{},{$:void 0})}function _s(t,n){var e,r,i=n.indexOf("=");i<0?e=n:(e=n.substring(0,i),r=n.substring(i+1));var u=e.indexOf(":"),o=u<0?e:e.substring(0,u),a=t.get(o);if(a){var c=ju(a,2),s=c[0],f=c[1];s.add(e),r&&(a[1]=f?"".concat(f," and ").concat(r):r)}else t.set(o,[(new Set).add(e),r])}function ws(t,n,e,r){if(!e.startsWith(Rr))return 0;var i=new _r(e.substring(Rr.length)),u=String(i);return r&&(u+=" ".concat(r)),t.addGlobal("@import",u,n),1}function bs(t,n,e,r){return"@namespace"!==e?0:(t.addGlobal("@namespace",String(r),n),1)}function xs(t,n,e,r){if(!e.startsWith(Er))return 0;var i=e.substring(Er.length);return t.addGlobal("@namespace","".concat(i," ").concat(r),n),1}function Ss(t,n){var e=t.addStyle();Ao(Fo(Mo(n),As),(function(t){var n=ju(t,2),i=n[0],u=ju(Lc(n[1]),2),o=u[0],a=u[1];e.set(r(i),"".concat(o),a)})),t.render(n,{writer:e})}function As(t){var n=ju(t,2),e=n[0];if(null==n[1])return!1;var r=String(e)[0];return r>="a"&&r<="z"||r>="A"&&r<="Z"}function Os(t,n){var e=n.$$css;if(e){var r=t.addStyle();r.replace(e),t.render(n,{writer:r})}else t.render(n)}function Ts(t){if("function"==typeof t)return{create:function(){return{render:t}}};if(function(t){return"create"in t}(t))return{order:t.order,needs:t.needs,create:function(n){return function(t){return"function"==typeof t?{render:t}:t}(t.create(n))}};var n=t.render.bind(t);return{order:t.order,needs:t.needs,create:function(){return{render:n}}}}function Cs(t,n){var e=t.order||0,r=n.order||0;return e>r?1:e<r?-1:0}function Fs(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ta;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.node,i=void 0===r?t:r,u=e.error;return n(ro(ro({},e),{},{node:i,error:u&&u.bind(e)}))}}function Rs(t){var n;null===(n=t.parentNode)||void 0===n||n.removeChild(t)}function Es(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!0===t.pretty||null==t.pretty?$r:t.pretty||!1,e=t.scheduler,r=void 0===e?kt:e,i=new L,u=function(t){return(u=i.on().F)(t)},o=n?new jr(n):Pr,a=0;return ro(ro({},t),{},{pretty:n,scheduler:r,onSheet:u,addSheet:function(){return new Kr(String(++a),o,i)}})}function Ds(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.document,r=void 0===e?(null===(t=n.parent)||void 0===t?void 0:t.ownerDocument)||window.document:e,i=n.parent,u=void 0===i?r.head:i,o=Es(n),a=Fs(u,n.scheduler),c=a(),s=new Map,f=o.onSheet((function(t){var n=t.id,e=t.css,i=s.get(n);null==e?(s.delete(n),Rs(i)):i?i.textContent=e:((i=r.createElement("style")).setAttribute("type","text/css"),i.textContent=e,u.appendChild(i),s.set(n,i),f.whenOff((function(){return c((function(){return Rs(i)}))})))}));return ro(ro({},n),{},{scheduler:a,addSheet:function(t){return f.needs(t),this.addSheet=o.addSheet.bind(o),this.addSheet(t)}})}function $s(t,n){var e=n.rootSelector,r=void 0===e?{e:"body"}:e,i=n.scheduler,u=void 0===i?Ta:i,o=n.nsAlias,a=void 0===o?ka():o,c=Io(),s={nsAlias:a},f=function(t){var n=new Map;return e(t.renderer),n.delete(Ss),[].concat(Uu(n.values()),[Ts(Ss)]).sort(Cs);function e(t){t&&(jc(t)?t.forEach(r):r(t))}function r(t){if(!n.has(t)){var r=Ts(t);n.set(t,r),e(r.needs)}}}(n),l=Co(Eo(t,p),(function(t,n){return Io().cuts(n).cuts(t)}),Io()),h=function(){var n=Io();return fa(t).to({supply:n,receive:function(t,e){e.forEach((function(t){return p(t).needs(n)}))}})}();return c.needs(l).needs(h).cuts(l).cuts(h);function v(t,n,e){return new(function(){function r(){Ju(this,r)}return Zu(r,[{key:"nsAlias",value:function(t){return a(t)}},{key:"render",value:function(r,i){n(i?v(t,n,{sheet:e.sheet,writer:i.writer||e.writer,selector:i.selector||e.selector}):this,r)}},{key:"addStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selector,n=e.writer;return n.isGroup?n.addStyle(d(t)):n}},{key:j,get:function(){return c}},{key:"rule",get:function(){return t}},{key:"sheet",get:function(){return e.sheet}},{key:"writer",get:function(){return e.writer}},{key:"selector",get:function(){return e.selector}}]),r}())}function d(t){return function(t,n){return ds(hs(t),n)}(t,s)}function p(t){var e,i=ju(function(t){var n=f.map((function(n){return n.create(t)}));return[n.reduce((function(t,n){return n.read?ua(n.read(t)):t}),t.read()),function t(e){return function(r,i){var u,o=e+1;u=o===f.length?lo:t(o);var a=v(r.rule,u,r);n[e].render(a,i)}}(0)]}(t),2),o=i[0],a=i[1],c=function(t){var n=t.selector;if(!n.length)return hs(r);if(es(n[0]))return[].concat(Uu(hs(r)),Uu(n));return n}(t),s=u();return o.to((function(r){s((function(){null==e||e.clear();var i=v(t,a,{get sheet(){return e||(e=n.addSheet(i)),e},get writer(){return this.sheet},selector:c});i.render(r),null==e||e.done()}))})).whenOff((function(){s((function(){var t=e;if(t)return e=void 0,t.remove()}))}))}}function Ps(t,n){return $s(t,ro(ro({},n),{},{renderer:(e=n.renderer,r=[Cr,Dr,Fr,Os],e&&(jc(e)?r.push.apply(r,Uu(e)):r.push(e)),r)}));var e,r}function js(t,n){var e=function(t){return us(t)}(n);return new Wr(t,(function(t){return function(t,n){if(!t.length)return!1;var e=t[t.length-1];return(!n.ns||e.ns===n.ns)&&((!n.e||e.e===n.e)&&((!n.i||e.i===n.i)&&(!(n.c&&!ls(e.c,n.c))&&!(n.$&&!ls(e.$,n.$)))))}(t.selector,e)}))}function Ms(t){return Array.from(zs(t))}function zs(t){var n,e,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t;case 2:n=Xu(t.rules.nested),i.prev=3,n.s();case 5:if((e=n.n()).done){i.next=10;break}return r=e.value,i.delegateYield(Ms(r),"t0",8);case 8:i.next=5;break;case 10:i.next=15;break;case 12:i.prev=12,i.t1=i.catch(3),n.e(i.t1);case 15:return i.prev=15,n.f(),i.finish(15);case 18:case"end":return i.stop()}}),y,null,[[3,12,15,18]])}function Us(t,n,e,r){var i=ju(fs(n),2),u=i[0],o=i[1];if(!o)return t._spec.it=function(t,n){var e=t._spec.it;if(!n)return e;if(t.empty)return function(t){return Qc(t,n)};return function(t){return ts(e(t),Qc(t,n))}}(t,e),t;var a=vs(u),c=t.rules.nested._rule(a);if(c)return Us(c,o,e,r);var s=new Hr(t.root,[].concat(Uu(t.selector),Uu(u)),u),f=Us(s,o,e,!1);return t.rules.nested._add(a,s,r),f}function Ks(t){return No(t)?t:ca(t)}function qs(t){for(var n={},e=0,r=Object.keys(t);e<r.length;e++){var i=r[e];n[i]=t[i][0]}return n}function Ns(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?Ws(n.map(Ls)):Xr}function Ls(t){return"function"==typeof t?function(t){var n,e,r=function(){return e||(e=Vs(t()))};return io(n={},Symbol.iterator,(function(){return r()[Symbol.iterator]()})),io(n,U,(function(){return r()[U]()})),n}(t):Vs(t)}function Is(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?Ws(n.map(Bs)):Xr}function Bs(t){return"function"==typeof t?function(t){var n,e=new Set,r=na((function(n){var r=Vs(t());Gs(r,e,n),r[U]().to({supply:n.supply.whenOff((function(){return e.clear()})),receive:function(t,r,i){i.forEach((function(t){return e.delete(t)})),r.forEach((function(t){return e.add(t)})),n.receive(t,r,i)}})})).share();return io(n={},U,(function(){return r})),io(n,Symbol.iterator,(function(){return e.values()})),n}(t):Vs(t)}function Ws(t){var n;if(1===t.length){var e=t[0];return e instanceof Ir?e:new Wr(e)}return new Wr((io(n={},Symbol.iterator,regeneratorRuntime.mark((function n(){var e,r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=Xu(t),n.prev=1,e.s();case 3:if((r=e.n()).done){n.next=8;break}return i=r.value,n.delegateYield(i,"t0",6);case 6:n.next=3;break;case 8:n.next=13;break;case 10:n.prev=10,n.t1=n.catch(1),e.e(n.t1);case 13:return n.prev=13,e.f(),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,10,13,16]])}))),io(n,U,(function(){return na((function(n){t.forEach((function(t){return fa(t).to({supply:Io().needs(n.supply),receive:function(t,e,r){n.receive(t,e,r)}})}))})).share()})),n))}function Vs(t){return t instanceof Lr?t.rules.self:Go(t)?t:function(t){var n,e=new Set,r=na((function(n){var r=Ho(),i=n.supply;i.cuts(r).whenOff((function(){return e.clear()})),t.then((function(t){if(!i.isOff){var u=t instanceof Lr?t.rules:t;Gs(u,e,n),r=fa(u).to({receive:function(t,r,i){i.forEach((function(t){return e.delete(t)})),r.forEach((function(t){return e.add(t)})),n.receive(t,r,i)}}).needs(i)}})).catch((function(t){return i.off(t)}))})).share();return io(n={},U,(function(){return r})),io(n,Symbol.iterator,(function(){return e.values()})),n}(t)}function Gs(t,n,e){var r=[];if(Ao(t,(function(t){r.push(t),n.add(t)})),r.length){var i=new z;i.on(e),i.send(r,[])}}function Hs(t){var n=t.$,e=t.n,r=t.t,i=t.v,u=t.x,o=void 0===u?[]:u,a=t.p,c=void 0===a?{}:a,s=t.pl;return{$:n,n:e,t:r,v:i,x:o,p:c,pl:void 0===s?[]:s}}function Qs(t,n){var e=t.p,r=t.pl,i=n.n||n.v,u=e[i];(!u||!u.n&&n.n)&&(e[i]=n),r.push(n)}function Js(t){var n=t.delimiterOf;return function(t,e){if(!(262144&n(t.s[t.i])))return!1;var r="";for(++t.i;t.i<t.s.length;){var i=t.s[t.i++];if(524288&n(i))break;r+=i}return e(r),!0}}function Ys(t){return t.dateTime?Zs:ti}function Zs(t,n){return t.s=t.s.substring(t.i),t.i=0,!!ni.test(t.s)&&(n(t.s.substring(t.i,t.i+=29)),!0)}function Xs(t){var n=t.delimiterOf;return function(t){var e=t.s[t.i];return t.d=n(e),e}}function tf(t){var n=t.delimiterOf;return function(t,e){var r="";for(++t.i;t.i<t.s.length;++t.i){var i=t.s[t.i];if("\\"===i){var u=t.s[++t.i];r+=u||i}else{if(65536&n(i))return++t.i,void e(r);r+=i}}e(r)}}function nf(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.named,r=void 0===e||e,i=n.tagged,u=void 0===i||i,o=n.extra,a=void 0===o||o,c=n.next,s=void 0===c?Xs(t):c,f=Js(t),l=Ys(t),h=tf(t),v=a?nf(t,{next:s,tagged:!1,named:!1,extra:!1}):ti;return function(t,n){for(var e,i,o,a="",c="raw";t.i<t.s.length;){var d=s(t);if(t.d){if(12&t.d)break;if(null==i){if(16&t.d){i=a?"":d,++t.i;continue}if(65536&t.d){!u&&a||h(t,(function(t){a?(c="tagged-string",e=a):c="quoted-string",a="",i=t}));break}if(!a&&f(t,(function(t){c="angle-bracketed-string",i=t})))break;i=a,a=""}else{if(65536&t.d){!u&&i||h(t,(function(t){i?(c="tagged-string",e=i):c="quoted-string",i=t}));break}if(!i&&f(t,(function(t){c="angle-bracketed-string",i=t})))break}}if(null==i){if(!a&&l(t,(function(t){return i=t}))){c="date-time";break}r?a+=d:i=d}else{if(!i&&l(t,(function(t){return i=t}))){c="date-time";break}i+=d}++t.i}if(null==i){if(!a)return!1;o=Hs({$:c,v:a})}else o=Hs({$:c,n:a||void 0,t:e,v:i});for(;v(t,(function(t){return o.x.push(t)})););return n(o),!0}}function ef(t){var n=t.delimiterOf;return function(t){var e=t.s[t.i];return"\\"!==e?(t.d=n(e),e):(++t.i,t.i<t.s.length?(e=t.s[t.i],t.d=n(e)?1:0):t.d=1,e)}}function rf(t){var n=t.delimiterOf;return function(t){var e=t.i;do{var r=t.s[t.i];if(!(2&n(r)))break;t.i++}while(t.i<t.s.length);return t.i!==e}}function uf(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.delimiterOf,r=rf(t),i=nf(t,ro(ro({},n),{},{tagged:!1}));return function(t,n){return!!(8&e(t.s[t.i]))&&(++t.i,r(t),i(t,n))}}function of(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.delimit,e=t.dateTime,r=n?ro(ro({},ei),n):ei;return{dateTime:e,delimiterOf:function(t){return r[t]||(t>="\0"&&t<=" "||"\x7f"===t?1:0)}}}function af(t){var n=t?of(t):ri,e=function(t){var n=t.delimiterOf,e=rf(t);return function(t){return!!(4&n(t.s[t.i]))&&(t.i++,e(t),!0)}}(n),r=uf(n),i=nf(n),u=(null==t?void 0:t.comments)?function(t){var n=t.delimiterOf,e=rf(t),r={next:ef(t)},i=nf(t,r),u=uf(t,r);return function(t,r){if(!(131072&n(t.s[t.i])))return!1;var o;for(++t.i;e(t)||u(t,(function(t){o||(o=Hs({$:"raw",v:""})),Qs(o,t)}))||i(t,(function(t){return o=t})););return++t.i,r(o||Hs({$:"raw",v:""})),!0}}(ii):ti;return function(t){for(var n=[],o={i:0,s:t};o.i<o.s.length&&(e(o)||r(o,(function(t){n.length||n.push(Hs({$:"raw",v:""})),Qs(n[n.length-1],t)}))||u(o,(function(t){return n.push(t)}))||i(o,(function(t){return n.push(t)}))););return n}}function cf(t){if(!t)return'""';for(var n,e=ri.delimiterOf,r=!1,i=0;i<t.length;++i){var u=t[i],o=e(u);o?(32&o&&(n||(n=t.substring(0,i)),n+="\\"+u),r=!0):n&&(n+=u)}return r?'"'.concat(n||t,'"'):t}function sf(t,n){return t(n)}function ff(t){return function(n,e){return function e(r,i){var u=t[r];return u?fa(u((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return e(r+1,t)}),i)):n(i)}(0,e)}}function lf(t){var n=t.get(Xt),e=t.get(ai);return function(t,n){return e(r,new Request(t,n))};function r(t){return na((function(e){var r,i=new L;if("AbortController"in n){var u=new n.AbortController,o=u.signal;r=Io((function(t){t===ci&&u.abort()})),e.supply.whenOff((function(){return r.off(ci)})).needs(r),i.on({supply:r,receive:function(t,n){e.receive(t,n)}});var a=t.signal;a&&(new ot(a).on("abort").once((function(){return u.abort()})),a.aborted&&u.abort()),t=new Request(t,{signal:o})}else r=i.on(e);n.fetch(t).then((function(t){i.send(t),r.off()})).catch((function(t){return r.off(t)}))}))}}function hf(t){var n=t.get(bt).get(tn),e=t.element,r=!0;if(e!==n)for(;;){var i=e.parentNode;if(!i)return;var u=i[Nt];if(u)return[u,r];if(i===n)return;r=!1,e=i}}function vf(t,n,e,r,i){var u,o,a=i.deep,c=i.all,s=new L,f=a?gi:void 0,l=new Set,h=a?df:$o;return"string"==typeof e?o=e:t.whenDefined(e).then((function(n){var e=n.elementDef.name;if(u=void 0,e&&(o=X.name(e,t.get(nn)),s.size)){var i=v();if(i.size){var a=Array.from(Fo(Eo(i,(function(t){return r(t)})),yo));a.length&&s.send(a,[])}}})).catch(console.error),c||n.addEventListener("wesib:component",(function(t){var n=t.target;if(l.has(n)){var e=r(n);s.send([e],[])}})),new(function(e){Iu(o,e);var i=Wu(o);function o(){return Ju(this,o),i.apply(this,arguments)}return Zu(o,[{key:"onUpdate",value:function(e){var r=t.get(un)(d);return(this.onUpdate=na((function(t){var e=!s.size,i=s.on(t);return e&&(v(),r.observe(n,f)),i.whenOff((function(){s.size||(r.disconnect(),u=void 0,l.clear())}))})).F)(e)}},{key:"read",value:function(t){var n=this;return(this.read=ia(this.onUpdate().thru((function(){return n})),vo(this)).F)(t)}},{key:"track",value:function(t){var n=this,e=this.onUpdate();return(this.track=ra((function(t){var r=new L;r.on(t),r.send(Array.from(n),[]),e.to(t)})).F)(t)}},{key:"first",value:function(t){return(this.first=ua(this.read()).keepThru((function(t){return ko(To(t))})).F)(t)}},{key:Symbol.iterator,value:function(){return bo(u||(u=Fo(Eo(s.size?l:v(),(function(t){return r(t)})),yo)))}}]),o}(yi));function v(){u=void 0;var t=function(){var t=o;if(!t)return new Set;if(a)return new Set($o(n.querySelectorAll(t)));return new Set(Fo($o(n.children),(function(n){return n.matches(t)})))}();return s.size&&(l=t),t}function d(t){var n=[],e=[];t.forEach((function(t){Ao(Fo(Eo(h(t.removedNodes),y),yo),(function(t){return e.push(t)})),Ao(Fo(Eo(h(t.addedNodes),p),yo),(function(t){return n.push(t)}))})),(n.length||e.length)&&s.send(n,e)}function p(t){if(Ra(t))return o&&t.matches(o)&&!l.has(t)?(l.add(t),r(t)):void 0}function y(t){if(Ra(t)&&l.delete(t))return r(t,!0)}}function df(t){return Ro($o(t),(function(t){return[t].concat(Uu(df(t.childNodes)))}))}function pf(t,n,e){var r=n[xi];return r||e?r:new Si(t,n)}function yf(t){return new URL(t.hash.substring(1),t.origin)}function gf(t,n,e,r){t(r)}function mf(t){return null==t||"object"!==Lu(t)?{data:t}:t[Ei]}function kf(t){var n=t.get(Xt),e=n.document,r=n.history,i=new ot(n),u=t.get(Di),o=t.get(Ci),a=pa(u.init());a.read((function(t){return t.apply()}));var c=Promise.resolve();return i.on("popstate").to((function(t){var n=u.popState(t,a);n&&i.dispatch(new Pi("wesib:enterPage",{when:null!=t.state?"return":"enter",to:n.page}))})),i.on("hashchange").to((function(){var t=u.hashChange(a);t&&i.dispatch(new Pi("wesib:enterPage",{when:"enter",to:t.page}))})),new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"onEnter",value:function(t){return(this.onEnter=i.on("wesib:enterPage").F)(t)}},{key:"onLeave",value:function(t){return(this.onLeave=i.on("wesib:leavePage").F)(t)}},{key:"onStay",value:function(t){return(this.onStay=i.on("wesib:stayOnPage").F)(t)}},{key:"on",value:function(t){return(this.on=la(this.onEnter(),this.onLeave(),this.onStay()).F)(t)}},{key:"read",value:function(t){return(this.read=a.read().keepThru((function(t){return t.page})).F)(t)}},{key:"go",value:function(t){r.go(t)}},{key:"open",value:function(t){return l("pre-open","open",t)}},{key:"replace",value:function(t){return l("pre-replace","replace",t)}},{key:"update",value:function(t){return u.update(a,s(t)).page}},{key:"with",value:function(t,n){return function t(n){return{with:function(e,r){return t(fo(n,(function(t){return t.put(e,r)})))},open:function(t){return l("pre-open","open",t,n)},replace:function(t){return l("pre-replace","replace",t,n)},pretend:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,n){return n};"function"==typeof t?(r=t,e=void 0):e=t;var i=f(e),u=a.it,o=h("pretend",u,i,n);try{return v("pretend",u,i,o)?r(u.page,o.page):void 0}finally{o.stay(a.it.page)}}}}((function(e){return e.put(t,n)}))}},{key:"page",get:function(){return a.it.page}},{key:"length",get:function(){return r.length}}]),e}(Ui));function s(t){return"string"==typeof t?new URL(t,e.baseURI):t||a.it.page.url}function f(t){return null==t||"string"==typeof t||t instanceof URL?{url:s(t)}:t.url instanceof URL?t:ro(ro({},t),{},{url:s(t.url)})}function l(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lo,o=f(e),s=c=c.then(l,l);return s;function l(){var t=void 0;try{var e=d();return e?(t=e,u[n](t,a),i.dispatch(new Pi("wesib:enterPage",{when:n,to:t.page})),t.page):e}catch(n){throw p(t,n),n}}function d(){if(c!==s)return p();var n=a.it,e=h(t,n,o,r),u=new ji("wesib:leavePage",{when:t,from:n.page,to:e.page});return i.dispatch(u)&&c===s&&v(t,n,o,e)?e:p(e)}function p(t,n){return t&&t.stay(a.it.page),i.dispatch(new Mi("wesib:stayOnPage",{from:a.it.page,to:o,reason:n})),null}}function h(t,n,e,r){var i=u.newEntry(e);try{n.transfer(i,t),r(i.page)}catch(t){throw i.stay(a.it.page),t}return i}function v(t,n,e,r){var i=!1;return o((function(t){var n=t.url,r=t.data,u=t.title;i=!0,e.url=n,e.data=r,e.title=u}),t,n.page,r.page),i}}function _f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.select,e=void 0===n?"a":n,r=t.pick,i=void 0===r?{all:!0,deep:!0}:r;return Da({define:function(n){n.whenComponent((function(n){var r=Of(n,t),u=bf(t),o=n.get(Ui),a=n.get(Ai);n.whenConnected((function(){var t=new Map;o.read().tillOff(n).consume((function(o){return a.select(e,i).read().keepThru_((function(t){return sa(aa.apply(void 0,Uu(Eo(t,(function(t){return u({node:t,context:n,page:o})})))))})).consume((function(){for(var e=arguments.length,i=new Array(e),u=0;u<e;u++)i[u]=arguments[u];var a=wf(i),c=new Map,s=Io();return a.forEach((function(e){var i,u=t.get(e);u?(c.set(e,u),i=u):(i=r({node:e,context:n,page:o}),c.set(e,i)),i.supply().needs(s)})),t=c,s}))}))}))}))}})}function wf(t){var n=0,e=[];return t.forEach((function(t){var r=ju(t,2),i=r[0],u=r[1];u>n?(n=u,e=[i]):u===n&&e.push(i)})),e}function bf(t){return t.weigh?function(n){var e=t.weigh(n);if("number"==typeof e)return ca(n.node,e);var r=ua(e).keepThru_((function(t){return _o(n.node,t)}));return ra((function(t){r.to({supply:Io().needs(t.supply).whenOff((function(){(r=ca(n.node,0)).to(t)})),receive:t.receive.bind(t)})}))}:xf}function xf(t){var n=t.node,e=t.page,r=n.element,i=r.getAttribute("href");return ca(n,null==i?-1:function t(n,e){if(n.origin!==e.origin)return-1;var r=Sf(n),i=Sf(e);if(n.hash){if(r!==i)return-1;var u=Af(n,e);return u<0||Af(e,n)<0?-1:n.pathname.length+u+t(yf(n),yf(e))}var o=Af(n,e);if(o)return o<0||r!==i?-1:n.pathname.length+o;if(!i.startsWith(r))return-1;return n.pathname.length}(new URL(i,r.ownerDocument.baseURI),e.url))}function Sf(t){var n=t.pathname;return n.endsWith("/")?n:n+"/"}function Af(t,n){var e=t.searchParams,r=n.searchParams,i=0;return e.forEach((function(t,n){if(!function(t){return t.startsWith("__")&&t.endsWith("__")}(n)){var u=new Set(r.getAll(n));i>=0&&(e.getAll(n).every((function(t){return u.has(t)}))?i+=1:i=-1)}})),i}function Of(t,n){var e=t.get(Vn),r=n.render,i=n.active,u=void 0===i?qi:i,o=nt.name(u,t.get(nn)),a=n.activate?n.activate.bind(n):lo;return function(t){var n,i=t.node.element,u=i[Ki]||(i[Ki]=e(r)),c=function(n){u((function(){return function(t,n){var e=n.node.element.classList;t?e.add(o):e.remove(o)}(n,t)})),a(n,t)};return c(!0),{supply:function(){var t=n=Io((function(){n===t&&c(!1)}));return t}}}}function Tf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handle?t.handle.bind(t):Ff(t),e=oo(t.event||"click");return Da({define:function(t){t.whenComponent((function(t){t.whenConnected((function(){var r,i=t.get(Ui),u=Xu(e);try{for(u.s();!(r=u.n()).done;){var o=r.value;t.on(o).to((function(e){i.read().once((function(r){return n({event:e,page:r,context:t,navigation:i})}))}))}}catch(t){u.e(t)}finally{u.f()}}))}))}})}function Cf(t){return t.target.getAttribute("href")}function Ff(t){var n=t.href?t.href.bind(t):Cf;return function(t){var e=t.event,r=t.page,i=t.navigation,u=n(e);if(null!=u){var o=e.target,a=r.url,c=new URL(u,o.ownerDocument.baseURI);c.origin===a.origin&&(e.preventDefault(),a.href!==c.href&&i.open(u).catch(console.error))}}}function Rf(t,n,e){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ef;"function"==typeof e?(i=e,r=null):r=e||null;var u=n.ownerDocument;if(Ra(t)){var o=u.createElement(t.tagName.toLowerCase());return t.getAttributeNames().forEach((function(n){return o.setAttribute(n,t.getAttribute(n))})),i(t,o),n.insertBefore(o,r),o}var a=u.importNode(t,!1);return n.insertBefore(a,r),a}function Ef(t,n){Ao($o(t.childNodes),(function(t){return Rf(t,n)}))}function Df(t){var n;return function(e){var r,i=function(t){return new URL("",t.url).href}(e);if(n){if(n.url===i)return n.on;n.sup.off()}var u=Io().whenOff((function(){n=void 0,r=void 0})),o=na((function(n){if(!r){var i=t(e),o=pa(),a=i.to((function(t){o.it=t})).whenOff((function(t){null!=t&&u.off(t)}));u.cuts(a).cuts(o),r={on:o.read().thru_((function(t){return t?_o(t):m()})),num:0}}var c=r;return++c.num,c.on.tillOff(u).to(n).whenOff((function(t){--c.num||Promise.resolve().then((function(){c.num||c!==r||u.off(t)})).catch(console.error)}))}));return n={url:i,on:o,sup:u},o}}function $f(t){var n=t.get(Xt),e=t.get(si),r=t.get(Wi),i=t.get(Bi),u=new n.DOMParser;return function(t){var n=new URL(t.url.href);r(n);var o=new Request(n.href,{mode:"same-origin",credentials:"same-origin",headers:new Headers({Accept:"text/html"})});return na((function(t){return i(a,o).to(t)}));function a(r){return function(t,n){var e,r=null===(e=t.get(Li))||void 0===e?void 0:e.fragments;r&&r.length&&n.headers.set("Accept-Fragment",Co(r,(function(t,n){return(t?t+", ":"")+(null!=n.tag?"tag="+cf(n.tag):"id="+cf(n.id))}),""))}(t,r),na((function(i){var o=new z;o.on(i),o.send({page:t}),ha(e(r).thru_((function(t){return Promise.all([t,t.text()])}))).thru_((function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return wo(n)}),(function(e){var r=ju(e,2),i=r[0],o=r[1];if(!i.ok)return{ok:!1,page:t,response:i,error:i.status};try{return{ok:!0,page:t,response:i,document:Pf(u,n,i,o)}}catch(n){return{ok:!1,page:t,response:i,error:n}}})).to(i)}))}}}function Pf(t,n,e,r){var i=t.parseFromString(r,ui(e.headers.get("Content-Type")||"text/html")[0].v);if(i.head){var u=i.head.querySelector("base");if(u)u.href=new URL(u.getAttribute("href"),n).href;else{var o=i.createElement("base");o.href=n.href,i.head.appendChild(o)}}return i}function jf(t){var n;return null===(n=t.querySelector("meta[name=wesib-app-rev]"))||void 0===n?void 0:n.getAttribute("content")}function Mf(t){var n=t.get(Xt).document;return function(t){return t().thru_((function(t){if(t.ok){var e=new Set(Eo(zf(n,$o(n.scripts)),(function(t){return ju(t,1)[0]})));Ao(Fo(zf(t.document,$o(t.document.querySelectorAll("script"))),(function(t){var n=ju(t,1)[0];return!e.has(n)})),(function(t){var r=ju(t,2),i=r[0];Rf(r[1],n.head,(function(t,n){return n.src=i})),e.add(i)}))}return t}))}}function zf(t,n){return Eo(Fo(n,(function(t){return!!t.src})),(function(n){return[new URL(n.src,t.baseURI).href,n]}))}function Uf(t){var n=t.get(Xt).document;return function(t){return t().thru_((function(t){if(!t.ok)return t;var e=t.document.querySelectorAll("link[rel=stylesheet]");if(!e.length)return t;var r=n.head,i=null,u=n.querySelectorAll("link[rel=stylesheet]"),o=new Map,a=u.item(0);return a&&(r=a.parentNode,i=a,Ao($o(u),(function(t){return o.set(new URL(t.href,n.baseURI).href,t)}))),Ao($o(e),(function(t){var e=new URL(t.href,n.baseURI).href,u=o.get(e);u?(To(o.keys())===e?(r=u.parentNode,i=u.nextSibling):r.insertBefore(u,i),o.delete(e)):Rf(t,r,i,(function(t,n){return n.href=e}))})),Ao(o.values(),(function(t){return t.parentNode.removeChild(t)})),t}))}}function Kf(t){var n=t.get(Xt).document;return function(t){return t().thru_((function(t){if(t.ok){var e=t.document.getElementsByTagName("title").item(0);e&&e.textContent&&(n.title=e.textContent)}return t}))}}function qf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onResponse?t.onResponse.bind(t):lo,e=t.contentKey?t.contentKey.bind(t):Nf;return Da({feature:{needs:[Yi]},define:function(r){r.whenComponent((function(r){var i,u=t.fragment,o=t.render,a=r.get(Xt).document,c=r.get(Vn)(o),s=r.get(Ui),f=e(s.page);i=u?ho(u):function(){var t=r.element,n=t.id,e=t.tagName;return n?{id:n}:{tag:e}},r.whenConnected((function(){var t=a.createRange();t.selectNodeContents(r.contentRoot),s.read().once((function(u){u.put(Gi,{fragment:i(),receiver:{supply:Io().needs(r),receive:function(i,u){return function(i){var u=e(i.page);if(u===f)return;if(!i.ok)return void c((function(){return n({context:r,range:t,response:i})}));f=u,c((function(){t.deleteContents();var e=a.createDocumentFragment(),u=i.fragment;u&&(Ef(u,e),t.insertNode(e)),n({context:r,range:t,response:i})}))}(u)}}})}))}))}))}})}function Nf(t){var n=t.url;return new URL("",n).href}function Lf(t,n){return Io(t.get(di).provide({a:Xi,by:function(){return{root:t,control:n}}})).needs(t).needs(n)}function If(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0,r=t.context;return ro(ro({},n),{},{document:n.document||r.get(Xt).document,parent:n.parent||r.contentRoot,rootSelector:[],scheduler:n.scheduler||Bf(r,e),nsAlias:n.nsAlias||r.get(nn),renderer:t.renderer(n)})}function Bf(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.get(Vn);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(ro(ro({},t),n))}}function Wf(t){var n=t.get(nn),e=t.get(Lt),r=e.get(ln),i=r.name?X.name(r.name,n):"component",u="".concat(i,"#").concat(++iu),o=eu.name(n(eu),u,nt);return e.element.classList.add(o),o}function Vf(t){if("string"!=typeof t[0]){var n=Ru(t),e=n[0],r=e.ns,i=e.e,u=e.i,o=e.c,a=e.u,c=e.s,s=e.$,f=n.slice(1);if(!r&&!i&&!u&&!o&&!c&&a){var l,h=Ru(ju(a,1)[0]),v=h[0],d=h[1],p=h.slice(2);if(":"===v&&"host"===d)return p.length?(l=Array.from(p[0]))[0].$=s:l=s?[{$:s}]:[],[f,l]}}return[t]}function Gf(t,n){var e=n.ns,r=n.e,i=n.i,u=n.c,o=n.u,a=n.s,c=Ru(t),s=c[0],f=c.slice(1);return[{ns:s.e||s.ns?s.ns:e,e:s.e||s.ns?s.e:r,i:s.i||i,c:s.c?u?[].concat(Uu(s.c),Uu(u)):s.c:u,u:s.u?o?[].concat(Uu(s.u),Uu(o)):s.u:o,s:(s.s||"")+(a||"")||void 0,$:s.$}].concat(Uu(f))}function Hf(t){return $a((function(n){var e=n.get;return{componentDef:{define:function(n){n.whenComponent((function(n){n.whenReady((function(r){var i=r.component,u=e(i),o="function"==typeof u?u.bind(i):u;n.get(ou).produce(o,t)}))}))}}}}))}function Qf(t,n){return function(e){return Ns(t(e),n(e))}}function Jf(t){var n=t.$layoutBreakpoint;return{"@media:sm":"(max-width: ".concat(n,")")}}function Yf(t){var n=t.ref(yu).read(),e=t.root.rules;return Ns(e.add({e:"a"},n.keepThru(Zf)),e.add({e:"a",s:":visited"},n.keepThru(Zf)),e.add({e:"a",s:":hover"},{textDecoration:"underline"}),e.add({e:"a",s:":active"},{textDecoration:"underline dotted"}),e.add({e:"a",s:":focus"},{textDecoration:"underline dotted"}))}function Zf(t){return{color:t.$color,fontWeight:t.$linkFontWeight,textDecoration:"none"}}function Xf(t){var n=t.ref(yu).read();return Ns(t.root.add(n.keepThru(tl)).add(n.keepThru(Jf)),t.style(Yf))}function tl(t){var n=t.$color,e=t.$fontFace,r=t.$fontSize,i=t.$lineHeight,u=t.$fontWeight;return{color:n,font:"normal ".concat(u," ").concat(r,"/").concat(i," ").concat(e)}}function nl(t){var n=t.ref(yu).read(),e=t.root.rules;return Ns(e.add({e:"html"},{height:"100%",margin:0,padding:0}),e.add({e:"body"},n.keepThru(el)),t.style(Xf))}function el(t){return{backgroundColor:t.$bgColor,height:"100%",margin:0,padding:0}}function rl(t){var n=t.global,e=n.$color,r=n.$bgColor,i=n.$fontFace,u=n.$fontSize,o=n.$lineHeight,a=n.$fontWeight;return{$color:e,$bgColor:r.hsl.set((function(t){return{l:.8*t.l}})),$roBgColor:r.hsl.set((function(t){return{l:.94*t.l}})),$fontFace:i,$fontSize:u,$errorFontSize:u.mul(.8),$lineHeight:o,$fontWeight:a,$borderColor:r,$marginV:u.div(4),$marginH:u.div(4),$paddingV:u.div(2),$paddingH:u,$borderW:mr.of(1,"px")}}function il(t){var n=t.ref(gu).read(),e=t.root.rules,r=kr.of(4,"px");return Ns(e.add({u:[":","host"],$:ku},n.keepThru((function(t){var n=t.$color,e=t.$errorFontSize;return{display:"none",fontSize:e,padding:e.div(2),borderLeft:"".concat(r," dotted ").concat(n),paddingLeft:e.sub(r)}}))),e.add({u:[":","host",{c:[_u,["touched",ne]],u:[":","not",{c:["has-focus",ne]}]}],$:ku},{display:"block"}),e.add({u:[":","host",{c:_u,u:[[":","not",{u:["code","~=","missing"]}],[":","not",{u:["code","~=","incomplete"]}]]}],$:ku},{display:"block"}))}function ul(t){var n=t.$fontSize;return{flex:"1 1 auto",padding:0,margin:"0 0 0 ".concat(n.div(2))}}function ol(t){var n=t.ref(yu).read(),e=t.root.rules;return Ns(e.add({u:[":","host"],$:Su},n.keepThru(al)),e.add({u:[":","host"],$:Su},n.keepThru((function(t){return{flex:"0 1 200px",height:"100%",background:cl(t)}}))),e.add({u:[":","host"],$:[Su,"@media:sm"]},{flex:"0 1 100%"}),e.add([{u:[":","host"],$:Su},{e:"a",$:Su}],n.keepThru(sl)),e.add([{u:[":","host"],$:Su},{e:"a",c:["active",Yn],$:Su}],n.keepThru(fl)))}function al(t){var n=t.$fontSize;return{padding:0,margin:"0 ".concat(n.div(2)," 0 0")}}function cl(t){return t.$bgColor.hsl.set((function(t){return{l:.8*t.l}}))}function sl(t){var n=t.$fontSize;return{display:"block",margin:0,padding:"".concat(n.div(2)," ").concat(n),border:0,outline:0,background:cl(t)}}function fl(t){var n=t.$fontSize,e=t.$color,r=t.$bgColor,i=kr.of(4,"px");return{background:r,borderLeft:"".concat(i," solid ").concat(e),paddingLeft:n.sub(i)}}function ll(t){return function(n){var e=n.ref(yu).read(),r=n.root.rules;return Ns(r.add({u:[":","host"],$:Ou},{height:"100%",display:"flex",flexFlow:"row wrap",alignItems:"stretch",alignContent:"flex-start"}).add(e.keepThru(Jf)),r.add({u:[":","host"],$:[Ou,"@media:sm"]},{height:"auto"}),r.add([{u:[":","host"],$:Ou},{e:t,$:Ou}],e.keepThru(ul)))}}function hl(t){var n=t.$color,e=t.$fontFace,r=t.$fontSize,i=t.$lineHeight,u=t.$fontWeight,o=t.$marginV,a=t.$marginH,c=t.$paddingV,s=t.$paddingH,f=t.$bgColor,l=t.$borderColor,h=t.$borderW;return{color:n,font:"normal ".concat(u," ").concat(r,"/").concat(i," ").concat(e),padding:"".concat(c," ").concat(s),margin:"".concat(o," ").concat(a),backgroundColor:f,border:"0 none",outline:"".concat(h," solid ").concat(l),boxShadow:"inset 1px 1px 2px -2px black",boxSizing:"border-box",width:"100%"}}function vl(t){return{backgroundColor:t.$roBgColor}}function dl(t){var n=t.$color;return{outlineColor:Nc(t.$borderColor,n,.5)}}function pl(t){var n=t.$color,e=t.$borderW,r=t.$borderColor;return{outline:"".concat(e.mul(2)," dashed ").concat(Nc(r,n,.25))}}return t({A:function(t){return $a((function(n){var e=n.type,r=n.key,i=function(t,n,e){var r,i;if("string"==typeof e)i=Ya(r=Xa(e));else{if(e&&e.name)r=Xa(e.name);else{if("string"!=typeof n)throw new TypeError("Attribute name is required as property key is not a string: "+"".concat(t.constructor.name,".prototype.").concat(String(n)));r=Xa(n)}i=Ya(r,e&&e.updateState)}return{name:r,change:i}}(e.prototype,r,t),u=i.name;return{componentDef:{define:function(t){t.get(jn).declareAttribute(i)}},get:function(t){return Lt.of(t).element.getAttribute(u)},set:function(t,n){var e=Lt.of(t).element;null!=n?e.setAttribute(u,n):e.removeAttribute(u)}}}))},C:Da,D:Xf,P:Hf,R:function(t){return $a((function(n){var e=n.get;return{componentDef:{define:function(n){n.whenComponent((function(n){n.whenReady((function(){var r=n.component,i=e(r).bind(r);n.get(Wn).renderBy(i,t)}))}))}}}}))},a:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn;return Da({setup:function(n){n.perComponent({a:Gn,by:function(n){return n.get(Qn)(n,t)}}),n.perComponent({a:Kt,by:function(t){return t.get(Gn,{or:null})}})}})},d:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.aspects;return new $e(t,{aspects:e})},e:oa,g:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.aspects;return new Le(t,{get:function(){return this.element.value},set:function(t){this.element.value=t},aspects:e})},i:hl,j:function t(n){return n?n.read().keepThru((function(t){return t?_o():{missing:"missing"}})):t},l:$c,m:Lf,n:Lo,p:function(t){var n=t.ref(gu).read(),e=t.root.rules;return Ns(e.add({e:"input"},n.thru(hl)),e.add({e:"input",s:"[readonly]"},n.thru(vl)),e.add({e:"input",s:"[disabled]"},n.thru(vl)),e.add({e:"input",s:":focus"},n.thru(dl)),e.add({e:"input",c:[["invalid",ne],["touched",ne]]},n.keepThru(pl)),e.add({e:"input",c:[["missing",ne],["touched",ne]]},{outlineStyle:"dotted"}),e.add({e:"input",c:[["incomplete",ne],["touched",ne]]},{outlineStyle:"dotted"}))},r:vl,s:Ns,_noneIterable:void 0,_InNamespaceAliaser:void 0,_mutatorMap:void 0,_InRenderScheduler:void 0,_mutatorMap2:void 0,_InData:void 0,_mutatorMap3:void 0,_InStyledElement:void 0,_mutatorMap4:void 0,_Rules:void 0,_a:void 0,_a$1:void 0}),{setters:[function(t){e=t.c,r=t.h,i=t._}],execute:function(){p=regeneratorRuntime.mark(Do),y=regeneratorRuntime.mark(zs),g=Symbol("next-call"),m=go((function(t){return t.skip()})),io(u={},Symbol.iterator,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),io(u,"reverse",(function(){return this})),k=u,_=Symbol("context-key"),b=function(t){Iu(e,t);var n=Wu(e);function e(t){return Ju(this,e),n.call(this,"".concat(t.name,":seed"))}return Zu(e,[{key:"grow",value:function(t){var n=t.seeder,e=t.seed;n.isEmpty(e)&&t.hasFallback||t.insert(e)}},{key:"seedKey",get:function(){return this}}]),e}(w=function(){function t(n){Ju(this,t),this.name=n}return Zu(t,[{key:"toString",value:function(){return"ContextKey(".concat(this.name,")")}},{key:_,get:function(){return this}}]),t}()),x=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"There is no value with key ".concat(t);return Ju(this,e),(r=n.call(this,i)).key=t,r}return e}(qu(Error)),S=function t(){Ju(this,t)},A=function(){function t(n){Ju(this,t),this._seeds=new Map,this._initial=null==n?lo:"function"==typeof n?n:function(t){return n.get(t)}}return Zu(t,[{key:"provide",value:function(t){var n=zo(t),e=n.a[_].seedKey,r=n.by;return ju(this._seeding(e),1)[0].provide(r)}},{key:"_seeding",value:function(t){var n=this,e=this._seeds.get(t);if(e)return e;var r=t.seeder(),i=[r,function(e){return r.seed(e,n._initial(t,e))}];return this._seeds.set(t,i),i}},{key:"seed",value:function(t,n){return(0,ju(this._seeding(n),2)[1])(t)}},{key:"seedIn",value:function(t,n){return this.newValues(n).get.bind(t)}},{key:"newValues",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!t&&this._nonCachedValues)return this._nonCachedValues;var n=new Map,e=this,r=function(r){Iu(o,r);var u=Wu(o);function o(){return Ju(this,o),u.apply(this,arguments)}return Zu(o,[{key:"get",value:function(r,u){var o=r[_],a=n.get(o);if(null!=a)return a;var c=ju(i(this,o,u),2),s=c[0],f=c[1];return t&&f&&(n.set(o,s),f({key:o,context:this,registry:e})),s}}]),o}(S);return t?new r:this._nonCachedValues=new r;function i(t,n){var e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=u(t,n),o=ju(i,2),a=o[0],c=o[1],s="or"in r,f=lo,l={context:t,key:n,seeder:a,seed:c,hasFallback:s,get or(){return r.or},insert:function(t){e=t},fillBy:function(t){return t(l),e},setup:function(t){var n=f;f=function(e){n(e),t(e)}}};if(n.grow(l),null!=e)return[e,f];if(!s)throw new x(n);return[r.or]}function u(t,n){var r=n.seedKey,i=ju(e._seeding(r),2),u=i[0],o=i[1];return r!==n?[u,t.get(r)]:[u,o(t)]}}},{key:"append",value:function(n){var e=this;return new t((function(t,r){var i=ju(e._seeding(t),2),u=i[0],o=i[1];return u.combine(o(r),n.seed(r,t),r)}))}}]),t}(),O=function(){function t(){Ju(this,t),this._providers=[]}return Zu(t,[{key:"provide",value:function(t){var n=this;return this._providers.push(t),function(){var e=n._providers.indexOf(t);e>=0&&n._providers.splice(e,1)}}},{key:"seed",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Po();return Ro([n,Ko(t,this._providers)])}},{key:"isEmpty",value:function(t){return Oo(t)}},{key:"combine",value:function(t,n){return Ro([t,n])}}]),t}(),T=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"seeder",value:function(){return new O}}]),e}(b),F=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey,o=i.byDefault,a=void 0===o?vo():o;return Ju(this,e),(r=n.call(this,t,u)).byDefault=a,r}return Zu(e,[{key:"grow",value:function(t){var n=Array.from(t.seed);if(n.length)t.insert(n);else if(!t.hasFallback){var e=this.byDefault(t.context,this);e&&t.insert(Array.from(e))}}}]),e}(C=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey;return Ju(this,e),(r=n.call(this,t)).seedKey=u||new T(Gu(r)),r}return e}(w)),R=function(){function t(){Ju(this,t),this._providers=[]}return Zu(t,[{key:"provide",value:function(t){var n=this;return this._providers.unshift(t),function(){var e=n._providers.lastIndexOf(t);e>=0&&n._providers.splice(e,1)}}},{key:"seed",value:function(t,n){var e=this._providers.length;if(!e)return n||lo;var r=function(n){return po(n.bind(void 0,t))};if(!n&&1===e)return r(this._providers[0]);var i=this._providers.map(r);return n&&i.push(n),qo(i)}},{key:"isEmpty",value:function(t){return null==t()}},{key:"combine",value:function(t,n){return t===lo?n:n===lo?t:qo([n,t])}}]),t}(),E=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"seeder",value:function(){return new R}}]),e}(b),$=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey,o=i.byDefault,a=void 0===o?lo:o;return Ju(this,e),(r=n.call(this,t,{seedKey:u})).byDefault=a,r}return Zu(e,[{key:"grow",value:function(t){var n=t.seed();null!=n?t.insert(n):t.hasFallback||t.insert(this.byDefault(t.context,this))}}]),e}(D=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey;return Ju(this,e),(r=n.call(this,t)).seedKey=u||new E(Gu(r)),r}return e}(w)),P=Symbol("after-event"),j=Symbol("events-supply"),M=function(){function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lo;Ju(this,t),this._off=function(t){n._whenOff=function(n){return n(t)},n._off=lo,e(t)},this._whenOff=function(t){var e=n._off;n._off=function(n){e(n),t(n)}}}return Zu(t,[{key:"off",value:function(t){return this._off(t),this}},{key:"whenOff",value:function(t){return this._whenOff(t),this}},{key:"whenDone",value:function(){var t=this;return new Promise((function(n,e){return t.whenOff((function(t){return void 0===t?n():e(t)}))}))}},{key:"cuts",value:function(t){return Lo(t).needs(this),this}},{key:"needs",value:function(t){var n=this;return Lo(t).whenOff((function(t){return n._off(t)})),this}},{key:"isOff",get:function(){return this._off===lo}},{key:j,get:function(){return this}}]),t}(),z=function(){function t(){var n=this;Ju(this,t);var e=this._rcs=new Set;this.send=Wo(e),this[j]=Io((function(){e.clear(),delete n._rcs}))}return Zu(t,[{key:"on",value:function(t){var n=Bo(t),e=n.supply.needs(this),r=this._rcs;return r&&!e.isOff&&(r.add(n),e.whenOff((function(){return r.delete(n)}))),e}},{key:"done",value:function(t){return Lo(this).off(t),this}},{key:"size",get:function(){return this._rcs?this._rcs.size:0}}]),t}(),U=Symbol("on-event"),K=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"off",value:function(){return this}},{key:"whenOff",value:function(t){return t(),this}},{key:"cuts",value:function(t){return Lo(t).off(),this}},{key:"needs",value:function(){return this}},{key:"isOff",get:function(){return!0}}]),e}(M)),N=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ea;return Ju(this,e),(r=n.call(this,t))._rcn=0,r._or=i,r}return Zu(e,[{key:P,value:function(){return this}},{key:"to",value:function(t){var n=this;if(!t)return this;var e=lo,r=Bo(t);if(r.supply.isOff)return r.supply;var i=Io().needs(r.supply),u=!1;return this._on({supply:i,receive:function(t){u=!0;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n._last=i,e.apply(void 0,[t].concat(i))}}),++this._rcn,i.isOff&&!u||(r.receive.apply(r,[{onRecurrent:function(t){e=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return t.apply(void 0,r)}}}].concat(Uu(this._last||(this._last=this._or())))),e=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return r.receive.apply(r,[t].concat(e))}),i.whenOff((function(t){--n._rcn||(n._last=void 0),r.supply.off(t)})),i}},{key:"once",value:function(t){return(this.once=ra(Jo(this)).F)(t)}},{key:"tillOff",value:function(t,n){return ra(Xo(this,t,n))}},{key:"share",value:function(){return ra(Yo(this))}},{key:"keepThru",value:function(){return this.keepThru_.apply(this,arguments).share()}},{key:"keepThru_",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return ra(Zo(this,n))}},{key:"F",get:function(){return this.to.bind(this)}}]),e}(q=function(){function t(n){Ju(this,t),this._on=n}return Zu(t,[{key:U,value:function(){return this}},{key:"to",value:function(t){if(!t)return this;var n=Bo(t),e=n.supply;return e.isOff||this._on(n),e}},{key:"then",value:function(t,n){return function(t,n,e){return new Promise((function(r,i){Jo(t)({supply:Io(e?function(t){try{r(e(t))}catch(t){i(t)}}:i),receive:n?function(t){try{for(var e=arguments.length,u=new Array(e>1?e-1:0),o=1;o<e;o++)u[o-1]=arguments[o];r(n.apply(void 0,u))}catch(t){i(t)}}:function(t,n){return r(n)}})}))}(this,t,n)}},{key:"once",value:function(t){return(this.once=na(Jo(this)).F)(t)}},{key:"tillOff",value:function(t,n){return na(Xo(this,t,n))}},{key:"consume",value:function(t){var n=Ho(),e=Io((function(t){return n.off(t)}));return this.to({supply:e,receive:function(e){var r=n;try{for(var i=arguments.length,u=new Array(i>1?i-1:0),o=1;o<i;o++)u[o-1]=arguments[o];n=Lo(t.apply(void 0,u)||Ho())}finally{n!==r&&r.off()}}}),e}},{key:"share",value:function(){return na(Yo(this))}},{key:"thru",value:function(){return this.thru_.apply(this,arguments).share()}},{key:"thru_",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return na(Zo(this,n))}},{key:"F",get:function(){return this.to.bind(this)}}]),t}()),L=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"on",value:function(t){var n=this;return(this.on=na((function(t){return Pu(Qu(e.prototype),"on",n).call(n,t)})).F)(t)}},{key:U,value:function(){return this.on()}}]),e}(z),I=na(ta),B=function(){function t(n){var e=this;Ju(this,t),this._drop=n,this.emitter=new L,this._nested=new Map,this.emitter.on((function(t,n,r){var i=t[0],u=e._nested.get(i);u&&u.emitter.send(t.slice(1),n,r)}))}return Zu(t,[{key:"on",value:function(t){var n=this,e=this.emitter.on(t);return Io((function(t){e.off(t),n._dropIfEmpty()})).needs(e)}},{key:"nest",value:function(n,e){var r=this,i=this._nested.get(n);if(i||e)return i;var u=new t((function(){return r._remove(n)}));return this._nested.set(n,u),u}},{key:"done",value:function(t){var n,e=Xu(this._nested.values());try{for(e.s();!(n=e.n()).done;){n.value.done(t)}}catch(t){e.e(t)}finally{e.f()}this.emitter.done(t)}},{key:"_remove",value:function(t){this._nested.delete(t),this._dropIfEmpty()}},{key:"_dropIfEmpty",value:function(){!this._nested.size&&this.emitter.size<=1&&this._drop()}}]),t}(),W=function(){function t(){Ju(this,t),this._root=new B(lo)}return Zu(t,[{key:"on",value:function(t,n){return this._entry(t).on(n)}},{key:"send",value:function(t,n,e){this._root.emitter.send(t,n,e)}},{key:"done",value:function(t,n){var e=this._entry(t,!0);e&&e.done(n)}},{key:"_entry",value:function(t,n){var e,r=this._root,i=Xu(t);try{for(i.s();!(e=i.n()).done;){var u=e.value,o=r.nest(u,n);if(!o)return;r=o}}catch(t){i.e(t)}finally{i.f()}return r}}]),t}(),V=function(){function t(n,e){var r=this;Ju(this,t),this._trackers=n,this._path=e,this.update=function(t,n,e){r._trackers.send([].concat(Uu(r._path),Uu(da(t))),n,e)}}return Zu(t,[{key:"onUpdate",value:function(t){var n=this;return(this.onUpdate=na((function(t){return n._trackers.on(n._path,t)})).F)(t)}},{key:U,value:function(){return this.onUpdate()}},{key:"track",value:function(n){return(n=da(n)).length?new t(this._trackers,[].concat(Uu(this._path),Uu(n))):this}},{key:"done",value:function(t){this._trackers.done(this._path,t)}},{key:"_tracker",get:function(){return this}}]),t}(),G=function(){function t(){Ju(this,t),this._tracker=new V(new W,[])}return Zu(t,[{key:"onUpdate",value:function(t){return(this.onUpdate=this._tracker.onUpdate().F)(t)}},{key:U,value:function(){return this.onUpdate()}},{key:"track",value:function(t){var n=this._tracker.track(t);return n===this._tracker?this:n}},{key:"done",value:function(t){this._tracker.done(t)}},{key:"update",get:function(){return this._tracker.update}}]),t}(),Q=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this))._it=t,r._on=new L,r}return Zu(e,[{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:j,get:function(){return Lo(this._on)}},{key:"it",get:function(){return this._it},set:function(t){var n=this._it;n!==t&&(this._it=t,this._on.send(t,n))}}]),e}(H=function(){function t(){Ju(this,t),this._by=Ho()}return Zu(t,[{key:"read",value:function(t){var n=this;return(this.read=ra((function(t){return n.on({supply:(e=t).supply,receive:function(t,n){e.receive({onRecurrent:function(n){t.onRecurrent((function(t){return n(t)}))}},n)}});var e}),(function(){return[n.it]})).F)(t)}},{key:U,value:function(){return this.on()}},{key:P,value:function(){return this.read()}},{key:"by",value:function(t,n){var e=this,r=function(t){return(No(t)?t[P]():t[U]()).to((function(t){return e.it=t}))};if(this.byNone(),n){var i=t;this._by=fa(i).consume((function(){var t=n.apply(void 0,arguments);if(t)return r(t)}))}else{var u=t;this._by=r(u)}return this._by.whenOff((function(){return e._by=Ho()})),this}},{key:"byNone",value:function(t){return this._by.off(t),this}},{key:"done",value:function(t){return Lo(this).off(t),this}}]),t}()),t("V",function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this))._on=new L,r._it=t,r}return Zu(e,[{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:"sync",value:function(t,n,e){var r,i,u=this,o=function(t){return s(u,t)};"string"==typeof t?("in"===t&&(o=function(t){return s(t,u)}),r=n,i=e):(r=t,i=n);var a=i;if(!a)return o(r);var c=r;return(No(c)?ua(c):fa(c)).consume((function(){var t=a.apply(void 0,arguments);return t&&o(t)}));function s(t,n){var e=t.read((function(t){n.it=t})),r=n.on((function(n){t.it=n}));return Io((function(t){r.off(t),e.off(t)})).needs(e).needs(r)}}},{key:j,get:function(){return Lo(this._on)}},{key:"it",get:function(){return this._it},set:function(t){var n=this.it;n!==t&&(this._it=t,this._on.send(t,n))}}]),e}(H)),Z=new(Y=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"applyAlias",value:function(t,n){return"".concat(n,"-").concat(t)}}]),e}(J=function(){function t(){Ju(this,t)}return Zu(t,[{key:"name",value:function(t,n){if("string"==typeof t)return t;var e=ju(t,2),r=e[0],i=e[1];return i.name(n(i),r,this)}}]),t}())),X=new Y,tt=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"applyAlias",value:function(t,n){return"".concat(n,":").concat(t)}}]),e}(J)),nt=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"applyAlias",value:function(t,n){return"".concat(t,"@").concat(n)}}]),e}(J)),et=function(){function t(n){Ju(this,t),this.url=n;for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];this.aliases=r}return Zu(t,[{key:"name",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z;return e.applyAlias(n,t,this)}},{key:"alias",get:function(){return this.aliases[0]||"ns"}}]),t}(),rt=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"to",value:function(t,n){if(!t)return this;var e=Bo(t),r=e.supply;return r.isOff||this._on(e,n),r}},{key:"once",value:function(t,n){return(this.once=_a(Jo(this)).F)(t,n)}},{key:"tillOff",value:function(t,n){return _a(Xo(this,t,n))}},{key:"capture",value:function(t,n){var e=this;return(this.capture=_a((function(t,n){return null==n?e.to(t,!0):"object"===Lu(n)&&null==n.capture?e.to(t,ro(ro({},n),{},{capture:!0})):e.to(t,n)})).F)(t,n)}},{key:"instead",value:function(t,n){var e=this;return(this.instead=_a((function(t,n){var r=Bo(t);return e.to({supply:r.supply,receive:function(t,n){n.preventDefault(),r.receive(t,n)}},n)})).F)(t,n)}},{key:"just",value:function(t,n){var e=this;return(this.just=_a((function(t,n){var r=Bo(t);return e.to({supply:r.supply,receive:function(t,n){n.stopPropagation(),r.receive(t,n)}},n)})).F)(t,n)}},{key:"last",value:function(t,n){var e=this;return(this.last=_a((function(t,n){var r=Bo(t);return e.to({supply:r.supply,receive:function(t,n){n.stopImmediatePropagation(),r.receive(t,n)}},n)})).F)(t,n)}},{key:"passive",value:function(t,n){var e=this;return(this.passive=_a((function(t,n){return null==n?e.to(t,{passive:!0}):"boolean"==typeof n?e.to(t,{capture:n,passive:!0}):null==n.passive?e.to(t,ro(ro({},n),{},{passive:!0})):e.to(t,n)})).F)(t,n)}},{key:"F",get:function(){return this.to.bind(this)}}]),e}(q),ut={onRecurrent:lo},ot=function(){function t(n){Ju(this,t),this[it]=Io(),this._target=n}return Zu(t,[{key:"on",value:function(t){var n=this;return _a((function(e,r){var i=e.supply;if(i.needs(Lo(n)),!i.isOff){var u=function(t){return e.receive(ut,t)};n._target.addEventListener(t,u,r),e.supply.whenOff((function(){return n._target.removeEventListener(t,u)}))}}))}},{key:"dispatch",value:function(t){return!Lo(this).isOff&&this._target.dispatchEvent(t)}},{key:"done",value:function(t){return Lo(this).off(t),this}}]),t}(),it=j,at=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.call(this,"context-supply")}return Zu(e,[{key:"grow",value:function(t){t.insert(t.seed()||(t.hasFallback?t.or:null)||t.context[j])}}]),e}(D)),ct=function(){function t(){Ju(this,t),this._providers=pa([])}return Zu(t,[{key:"provide",value:function(t){var n=this;return this._providers.it=[].concat(Uu(this._providers.it),[t]),function(){var e=n._providers.it,r=e.indexOf(t);r>=0&&(n._providers.it=e.slice(0,r).concat(e.slice(r+1)))}}},{key:"seed",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ca();return this.combine(n,ba(t,this._providers))}},{key:"isEmpty",value:function(){return!1}},{key:"combine",value:function(t,n){return aa(t,n).keepThru(Sa)}}]),t}(),st=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"seeder",value:function(){return new ct}},{key:"upKey",get:function(){return this}}]),e}(b),ft=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this,t.name+":up"))._key=t,i.grow=function(t){var n=t.fillBy(r);if(n){var e=t.context.get(at,{or:null});e&&t.insert(n.tillOff(e))}},i}return Zu(e,[{key:"seedKey",get:function(){return this._key.seedKey}}]),e}(w),ht=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey,o=i.byDefault,a=void 0===o?lo:o;return Ju(this,e),(r=n.call(this,t,u)).byDefault=function(t,n){return a(t,n)||function(){throw new x(Gu(r))}},r.upKey=r.createUpKey((function(t){t.insert(t.seed.keepThru((function(){var n;return arguments.length?(n=arguments.length-1)<0||arguments.length<=n?void 0:arguments[n]:t.hasFallback&&t.or?sa(t.or):sa(ca(r.byDefault(t.context,Gu(r))))})))})),r}return Zu(e,[{key:"grow",value:function(t){var n;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ca(t.or):t.or}:void 0).to((function(t){return n=t})).whenOff((function(t){return n=wa(t)})),t.insert((function(){return n.apply(void 0,arguments)}))}}]),e}(lt=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey;return Ju(this,e),(r=n.call(this,t)).seedKey=u||new st(Gu(r)),r}return Zu(e,[{key:"createUpKey",value:function(t){return new ft(this,t)}}]),e}(w)),vt=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey,o=i.byDefault,a=void 0===o?lo:o;return Ju(this,e),(r=n.call(this,t,u)).byDefault=a,r}return Zu(e,[{key:"grow",value:function(t){var n=this,e=t.seed.keepThru((function(){var e,r;if(arguments.length)return ko((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]);if(t.hasFallback)r=t.or;else{var i=n.byDefault(t.context,n);r=i&&ca(i)}return sa(null!=r?r:ra((function(){throw new x(n)})))})),r=t.context.get(at,{or:null});t.insert(r?e.tillOff(r):e)}},{key:"upKey",get:function(){return this}}]),e}(lt),dt={by:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{get node(){return n.node},get window(){return t||(t=n.window||n.node&&Aa(n.node)||window)},error:function(){var t;n&&n.error?n.error.apply(n,arguments):(t=console).error.apply(t,arguments)}}}},pt=Symbol("render-q"),yt=function(){function t(n,e){Ju(this,t),this.q=n,this.schedule=this.doSchedule,this.ref=e||[this,this]}return Zu(t,[{key:"add",value:function(t){this.q.add(t)}},{key:"doSchedule",value:function(t){var n=this;this.schedule=function(){};var e=[],r={get config(){return t},postpone:function(t){e.unshift(t)}};this.q.schedule((function(){var t=n.reset();t.suspend(),n.exec(r),n.ref[1]=n.ref[0],e.forEach((function(t){return n.q.add(t)})),r.postpone=function(t){return n.q.post(t)},n.exec(r),t.resume()}))}},{key:"exec",value:function(t){for(;;){var n=this.q.pull();if(!n)break;n(t)}}},{key:"reset",value:function(){return this.ref[0]=t.by(this.q.reset(),this.ref)}},{key:"suspend",value:function(){var t=this;this.schedule=function(n){t.scheduled=n,t.schedule=function(){}}}},{key:"resume",value:function(){this.scheduled?this.doSchedule(this.scheduled):this.schedule=this.doSchedule}}],[{key:"by",value:function(n,e){return n[pt]||(n[pt]=new t(n,e))}}]),t}(),gt={by:function(t){var n=t.schedule,e=t.replace,r=void 0===e?function(){}:e,i=[];return{schedule:n,add:function(t){i.push(t)},post:function(t){i.unshift(t)},pull:function(){return i.shift()},reset:function(){var t=gt.by({schedule:n,replace:r});return r(t),t}}}},mt=new WeakMap,kt=function(t){var n=dt.by(t);return function(t){var e=[],r={get config(){return n},postpone:function(t){e.push(t)}};for(u(t);;){var i=e.pop();if(!i)break;u(i)}function u(t){try{t(r)}catch(t){n.error(t)}}}},_t=Oa({newQueue:function(t){var n=t.window,e=mt.get(n);if(e)return e;var r=gt.by({schedule:function(t){return n.requestAnimationFrame(t)},replace:function(t){return mt.set(n,t)}});return mt.set(n,r),r}}),wt=new $("bootstrap-context"),bt=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,null,[{key:_,get:function(){return wt}}]),e}(S),xt=function(){function t(n){Ju(this,t),this.symbol=n}return Zu(t,[{key:"own",value:function(t){return t.hasOwnProperty(this.symbol)?t[this.symbol]:void 0}},{key:"of",value:function(t){var n=this.own(t),e=co(t),r=e&&this.of(e);return n?r?this.merge([r,n]):n:r}},{key:"define",value:function(t,n){var e=this,r=this.own(t),i=Eo(n,(function(n){return e.meta(n,t)})),u=this.merge(r?Ro([[r],i]):i);return Object.defineProperty(t,this.symbol,{configurable:!0,value:u}),t}}]),t}(),St=function(){function t(){var n=this;Ju(this,t),this.promise=new Promise((function(t,e){n._resolve=t,n._reject=e}))}return Zu(t,[{key:"resolve",value:function(t){this._resolve(t)}},{key:"reject",value:function(t){this._reject(t)}}]),t}(),At=Symbol("feature-def"),Ot=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.call(this,At)}return Zu(e,[{key:"merge",value:function(t){return Co(t,(function(t,n){return{needs:uo(ao(oo(t.needs),n.needs)),has:uo(ao(oo(t.has),n.has)),setup:fo(t.setup,n.setup),init:fo(t.init,n.init)}}),{})}},{key:"meta",value:function(t,n){var e=t[At];return null==e?t:this.meta("function"==typeof e?t[At](n):e,n)}}]),e}(xt)),Tt=io({},At,(function(){return{}})),Ct={of:function(t){return Ot.of(t)||{}},for:function(t,n){return Ot.meta(n,t)},merge:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Ot.merge(n)},all:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Co(n,(function(t,n){return io({},At,(function(e){return Ct.merge(Ct.for(e,t),Ct.for(e,n))}))}),Tt)},define:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return Ot.define(t,e)}},Ft=new $("feature-context"),Rt=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"whenDefined",value:function(t){return this.get(bt).whenDefined(t)}},{key:"load",value:function(t){return this.get(bt).load(t)}}],[{key:_,get:function(){return Ft}}]),e}(bt),Et=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this,"Circular feature needs: "+t.reduce((function(t,n){var e=ju(n,3),r=e[0],i=e[1],u=e[2];return(t||r.name)+" ".concat(i," ").concat(u.name)}),""))).needs=t,r}return e}(qu(Error)),Dt=function(){function t(){Ju(this,t)}return Zu(t,[{key:P,value:function(){return this.read()}}]),t}(),$t=Symbol("component-def"),Pt=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.call(this,$t)}return Zu(e,[{key:"merge",value:function(t){return Co(t,(function(t,n){return ro(ro(ro({},t),n),{},{setup:fo(t.setup,n.setup),define:fo(t.define,n.define),feature:t.feature?n.feature?Ct.merge(t.feature,n.feature):t.feature:n.feature})}),{})}},{key:"meta",value:function(t,n){var e=t[$t];return null!=e?this.meta("function"==typeof e?t[$t](n):e,n):null!=t[At]?{feature:Ct.for(n,t)}:ya(t)?{name:t}:t}}]),e}(xt)),jt=io({},$t,(function(){return{}})),Mt={of:function(t){return Pt.of(t)||{}},for:function(t,n){return Pt.meta(n,t)},merge:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Pt.merge(n)},all:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Co(n,(function(t,n){return io({},$t,(function(e){return Mt.merge(Mt.for(e,t),Mt.for(e,n))}))}),jt)},define:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return Pt.define(t,e)}},zt=new $("component-context"),Ut=new $("component-event-dispatcher",{byDefault:function(t){var n=t.get(zt),e=new ot(n.element);return Lo(e).needs(n),{dispatch:function(t){return e.dispatch(t)},on:function(t){return e.on(t)}}}}),Kt=new $("content-root",{byDefault:function(t){return t.get(zt).element}}),qt=new(function(t){Iu(e,t);var n=Wu(e);function e(){var t;return Ju(this,e),(t=n.call(this,"state-updater")).upKey=t.createUpKey((function(t){return t.insert(t.seed.keepThru((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(e.length){var i=e.reduce((function(t,n){return fo(n,t)}),lo);return function(t,n,e){return i(da(t),n,e)}}return t.hasFallback&&t.or?sa(t.or):lo})))})),t}return Zu(e,[{key:"grow",value:function(t){var n;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ca(t.or):t.or}:void 0).to((function(t){return n=t})).whenOff((function(){return n=lo})),t.insert((function(t,e,r){return n(t,e,r)}))}}]),e}(lt)),Nt=Symbol("component-context"),Lt=function(t){Iu(e,t);var n=Wu(e);function e(){var t;return Ju(this,e),(t=n.call(this)).updateState=function(n,e,r){t.get(qt)(n,e,r)},t}return Zu(e,[{key:"on",value:function(t){return this.get(Ut).on(t)}},{key:"dispatchEvent",value:function(t){this.get(Ut).dispatch(t)}},{key:"contentRoot",get:function(){return this.get(Kt)}}],[{key:"of",value:function(t){var n=t[Nt];if(!n)throw TypeError("No component context found in ".concat(t));return n}},{key:_,get:function(){return zt}}]),e}(S),It=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"context",get:function(){return Lt.of(this.target)}}]),e}(qu(Event)),Bt=function(){function t(){Ju(this,t)}return Zu(t,[{key:"component",get:function(){return this.context.component}},{key:"element",get:function(){return this.context.element}}]),t}(),Wt=Symbol("anonymous-component-property"),Vt=new $("bootstrap-context-registry"),Gt=function(t){Iu(e,t);var n=Wu(e);function e(){var t;return Ju(this,e),(t=n.call(this)).provide({a:e,is:Gu(t)}),t.values=t.newValues(),t}return Zu(e,null,[{key:"create",value:function(){return new e}},{key:_,get:function(){return Vt}}]),e}(A),Ht=new $("component-context-registry",{byDefault:Ca((function(){return new Qt}))}),Qt=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,null,[{key:_,get:function(){return Ht}}]),e}(A),Jt=new $("definition-context-registry",{byDefault:Ca((function(t){return new Yt(t)}))}),Yt=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,null,[{key:_,get:function(){return Jt}}]),e}(A),Zt=Symbol("post-def-setup"),t("B",Xt=new $("window",{byDefault:function(){return window}})),tn=new $("bootstrap-root",{byDefault:function(t){return t.get(Xt).document.body}}),nn=new $("default-namespace-aliaser"),en=new(function(t){Iu(e,t);var n=Wu(e);function e(){var t;return Ju(this,e),(t=n.call(this,"default-render-scheduler")).upKey=t.createUpKey((function(t){return t.insert(t.seed.keepThru((function(){var n;return arguments.length?za(t.context,(n=arguments.length-1)<0||arguments.length<=n?void 0:arguments[n]):t.hasFallback&&t.or?sa(t.or):za(t.context,Ta)})))})),t}return Zu(e,[{key:"grow",value:function(t){var n;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ca(t.or):t.or}:void 0).to((function(e){return n=za(t.context,e)})).whenOff((function(t){return n=wa(t)})),t.insert((function(){return n.apply(void 0,arguments)}))}}]),e}(lt)),rn=new(function(t){Iu(e,t);var n=Wu(e);function e(){var t;return Ju(this,e),(t=n.call(this,"element-adapter")).upKey=t.createUpKey((function(t){return t.insert(t.seed.keepThru((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=e.reduce((function(t,n){return function(e){return t(e)||n(e)}}),Ua);return i!==Ua?i:t.hasFallback&&t.or?sa(t.or):Ua})))})),t}return Zu(e,[{key:"grow",value:function(t){var n;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ca(t.or):t.or}:void 0).to((function(t){return n=t})).whenOff((function(t){return n=wa(t)})),t.insert((function(t){return n(t)}))}}]),e}(lt)),un=new ht("element-observer",{byDefault:Ca((function(t){var n=t.get(rn),e=function(t){Iu(r,t);var e=Wu(r);function r(t){var i;return Ju(this,r),i=e.call(this,(function(e){e.forEach((function(t){Ao($o(t.removedNodes),(function(t){var n;return null===(n=function(t){var n;return null===(n=t[Nt])||void 0===n?void 0:n.mount}(t))||void 0===n?void 0:n.checkConnected()})),Ao(Fo($o(t.addedNodes),Ra),(function(t){var e,r;return null===(r=null===(e=n(t))||void 0===e?void 0:e.mount)||void 0===r?void 0:r.checkConnected()}))})),t(e,Gu(i))}))}return Zu(r,[{key:"observe",value:function(t,n){Pu(Qu(r.prototype),"observe",this).call(this,t,ro(ro({},n),{},{childList:!0}))}}]),r}(qu(MutationObserver));return function(t){return new e(t)}}))}),on=Symbol("definition-context"),an=new $("custom-elements",{byDefault:Ca(qa)}),cn=function(){function t(){Ju(this,t)}return Zu(t,null,[{key:_,get:function(){return an}}]),t}(),sn=Symbol("component-resolver"),fn=new $("definition-context"),ln=new $("element-def",{byDefault:function(t){var n=t.get(fn).componentType,e=Mt.of(n),r=e.name,i=e.extend,u={get type(){return i&&i.type||t.get(Xt).HTMLElement},get name(){return i&&i.name}};return{get name(){return r},get extend(){return u}}}}),hn=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"connectTo",value:function(t){var n=this.mountTo(t);return n.connect(),n}},{key:"elementDef",get:function(){return this.get(ln)}}],[{key:_,get:function(){return fn}}]),e}(S),vn=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;Ju(this,e),(i=n.call(this))._definitionContext=t,i.element=r,i._status=pa(0);var u=t._newComponentRegistry();return u.provide({a:Lt,is:Gu(i)}),i.get=u.newValues().get,i}return Zu(e,[{key:"_component",value:function(){throw new TypeError("Component is not constructed yet. Consider to use a `whenReady()` callback")}},{key:"whenReady",value:function(t){var n=this;return(this.whenReady=this._status.read().thru_((function(t){return t?_o(n):m()})).once().F)(t)}},{key:"settle",value:function(){2===this._status.it&&(this._status.it=3)}},{key:"whenSettled",value:function(t){var n=this;return(this.whenSettled=this._status.read().thru_((function(t){return t>=3?ko(n):m()})).once().F)(t)}},{key:"whenConnected",value:function(t){var n=this;return(this.whenConnected=this._status.read().thru_((function(t){return t>=4?ko(n):m()})).once().F)(t)}},{key:"destroy",value:function(t){try{this._status.done(t)}finally{delete this.component[Nt],delete this.element[Nt],this._component=La,n=this.element,(e=n.parentNode)&&e.removeChild(n)}var n,e}},{key:"_createComponent",value:function(){var t=this,n=this._definitionContext._whenComponent,e=0;this.element[Nt]=this,n.readNotifier.once((function(n){return e=n(t,e)})),this.whenConnected((function(){n.readNotifier.to({supply:Io().needs(t),receive:function(n,r){e=r(t,e)}})})),this._definitionContext._elementBuilder.components.send(this);var r=function(t){var n=t.componentType,e=n.prototype,r=e[Nt];e[Nt]=t;try{var i=new n(t);return i[Nt]=t,i}finally{e[Nt]=r}}(this);return this._component=ho(r),this._status.it=1,this}},{key:"_connect",value:function(){this._status.it=4}},{key:"_created",value:function(){var t=this;this._status.it<2&&(this._status.it=2),this.whenConnected((function(){return t.dispatchEvent(new It("wesib:component",{bubbles:!0}))}))}},{key:"componentType",get:function(){return this._definitionContext.componentType}},{key:"component",get:function(){return this._component()}},{key:"settled",get:function(){return this._status.it>=3&&!Lo(this).isOff}},{key:"connected",get:function(){return this._status.it>=4&&!Lo(this).isOff}},{key:j,get:function(){return Lo(this._status)}}]),e}(Lt),dn=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this)).context=t,r}return Zu(e,[{key:"connect",value:function(){this.context._connect()}},{key:"checkConnected",value:function(){var t=this.context.element,n=t.ownerDocument,e=null!=n&&n.contains(t);return e!==this.connected&&(e?this.connect():this.context.destroy()),e}},{key:"connected",get:function(){return this.context.connected}}]),e}(Bt),pn=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this,t,r)).mount=i.mount=new dn(Gu(i)),i}return e}(vn),yn=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"mount",get:function(){}}]),e}(vn),gn=function t(){Ju(this,t);var n=pa(0),e=new L;this.onCreated=na((function(t){var r=n.it+1;e.on({supply:t.supply,receive:function(n,e,i){i<r&&t.receive({onRecurrent:function(t){n.onRecurrent((function(n){return t(n)}))}},e)}}),++n.it})),this.readNotifier=n.read().keepThru_((function(t){return function(n,r){return e.send(n,r),t}}))},mn=function(t){Iu(e,t);var n=Wu(e);function e(t,r,i){var u,o,a;Ju(this,e),(u=n.call(this))._bsContext=t,u._elementBuilder=r,u.componentType=i,u._whenComponent=new gn,u._ready=pa(!1),u._whenReady=u._ready.read().thru((function(t){return t?_o():m()})),u._def=Mt.of(i);var c=new Yt(t.get(Yt).seedIn(Gu(u)));c.provide({a:hn,is:Gu(u)}),u.get=c.newValues().get,u._perTypeRegistry=new Qt(c.seedIn(Gu(u)));var s=u.whenReady().F,f=u.whenComponent().F,l={get componentType(){return i},get whenReady(){return s},get whenComponent(){return f},perDefinition:function(t){return c.provide(t)},perComponent:function(t){return u._perTypeRegistry.provide(t)}};return null===(a=(o=u._def).setup)||void 0===a||a.call(o,l),Ma(i).setup(l),u}return Zu(e,[{key:"whenReady",value:function(t){return(this.whenReady=this._whenReady.thru_(ho(this)).once().F)(t)}},{key:"mountTo",value:function(t){if(t[Nt])throw new Error("Element ".concat(String(t)," already bound to component"));var n=new pn(this,t);n._createComponent();var e=n.mount;return e.checkConnected(),n._created(),n.settle(),e}},{key:"whenComponent",value:function(t){return(this.whenComponent=this._whenComponent.onCreated.F)(t)}},{key:"perComponent",value:function(t){return this._perTypeRegistry.provide(t)}},{key:"_newComponentRegistry",value:function(){return this._bsContext.get(Qt).append(this._perTypeRegistry)}},{key:"_elementType",value:function(){throw new Error("Custom element class is not constructed yet. Consider to use a `whenReady()` callback")}},{key:"_define",value:function(){var t,n,e;null===(n=(t=this._def).define)||void 0===n||n.call(t,this),this._elementBuilder.definitions.send(this),this._elementType=ho(function(t){Iu(r,t);var n=Wu(r);function r(){var t;Ju(this,r),t=n.call(this);var i=new yn(e,Gu(t));return i._createComponent(),i._created(),t}return Zu(r,[{key:"connectedCallback",value:function(){var t;null===(t=Pu(Qu(r.prototype),"connectedCallback",this))||void 0===t||t.call(this),this[Nt]._connect()}},{key:"disconnectedCallback",value:function(){var t;this[Nt].destroy(),null===(t=Pu(Qu(r.prototype),"disconnectedCallback",this))||void 0===t||t.call(this)}}]),r}((e=this).get(ln).extend.type)),this.componentType[on]=this,this._ready.it=!0}},{key:"elementType",get:function(){return this._elementType()}}]),e}(hn),kn=new $("element-builder",{byDefault:Ca(Ia)}),_n=ho(lo),wn=function(){function t(n){var e=this;Ju(this,t),this._context=n,this._definitionQueue=[],n.whenReady((function(){e._definitionQueue.forEach((function(t){return t()})),delete e._definitionQueue}))}return Zu(t,[{key:"define",value:function(t){var n=this;this._definitionQueue.push((function(){var e=n._context.get(kn).buildElement(t);n.customElements.define(t,e.elementType)}))}},{key:"customElements",get:function(){return this._context.get(cn)}}]),t}(),bn=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i,u,o;Ju(this,e),(i=n.call(this))._bsContext=t,i._loader=r,i._unloader=(u=[],o=function(t){var n=t();return u.push(n),n},{supply:Io((function(){o=_n,Ao($o(u).reverse(),(function(t){return t()})),u.length=0})),add:function(t){return o(t)}});var a=new A(t);return a.provide({a:Rt,is:Gu(i)}),i.get=a.newValues().get,i._componentRegistry=new wn(Gu(i)),i}return Zu(e,[{key:"whenReady",value:function(t){var n=this;return(this.whenReady=oa({st:this._loader.state,bs:pa().by(this._bsContext.whenReady())}).thru((function(t){var e=ju(t.st,1)[0];return ju(t.bs,1)[0]&&e?ko(n):m()})).once().F)(t)}},{key:"onDefinition",value:function(t){return(this.onDefinition=this._bsContext.get(kn).definitions.on().tillOff(this._unloader.supply).F)(t)}},{key:"onComponent",value:function(t){return(this.onComponent=this._bsContext.get(kn).components.on().tillOff(this._unloader.supply).F)(t)}},{key:"provide",value:function(t){var n=this;return this._unloader.add((function(){return n._bsContext.get(Gt).provide(t)}))}},{key:"perDefinition",value:function(t){var n=this;return this._unloader.add((function(){return n._bsContext.get(Yt).provide(t)}))}},{key:"perComponent",value:function(t){var n=this;return this._unloader.add((function(){return n._bsContext.get(Qt).provide(t)}))}},{key:"setupDefinition",value:function(t){return function(t,n){var e=Ma(t).on;return na((function(t){e.to({supply:t.supply.needs(n.supply),receive:function(e,r){var i=r.whenReady().tillOff(n.supply).F,u=r.whenComponent().tillOff(n.supply).F;t.receive(e,{get componentType(){return r.componentType},get whenReady(){return i},get whenComponent(){return u},perDefinition:function(t){return n.add((function(){return r.perDefinition(t)}))},perComponent:function(t){return n.add((function(){return r.perComponent(t)}))}})}})}))}(t,this._unloader)}},{key:"define",value:function(t){this._componentRegistry.define(t)}},{key:"feature",get:function(){return this._loader.request.feature}}]),e}(Rt),xn=Symbol("feature-key"),Sn=function(t){Iu(e,t);var n=Wu(e);function e(t){return Ju(this,e),n.call(this,"feature:".concat(t.name))}return Zu(e,[{key:"upKey",get:function(){return this}}],[{key:"of",value:function(t){return t.hasOwnProperty(xn)?t[xn]:t[xn]=new e(t)}}]),Zu(e,[{key:"grow",value:function(t){t.insert(Wa(t.context.get(bt),t.seed.keepThru(Ba)))}}]),e}(lt),An=function(){function t(n,e,r){var i=this;Ju(this,t),this.bsContext=n,this.request=e,this.deps=r,this.state=pa(!1),this.down=new Promise((function(t){return i._down=t})),this._stage=Promise.resolve(new Tn(this))}var n,e,r;return Zu(t,[{key:"to",value:function(t){var n=this._stage;return this._stage=t.then((function(t){return n.then((function(n){return n[t]()}))})),this}},{key:"setup",value:(r=$u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._stage=this._stage.then((function(t){return t.setup()}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"init",value:(e=$u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._stage=this._stage.then((function(t){return t.init()}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"unload",value:(n=$u(regeneratorRuntime.mark((function t(){var n,e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._stage,delete this._stage,t.next=4,n;case 4:return e=t.sent,t.next=7,e.stop();case 7:return r=t.sent,this._down(),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"stage",get:function(){return this._stage.then((function(t){return t.after}))}},{key:"ready",get:function(){return this.state.it}}]),t}(),Tn=function(t){Iu(r,t);var n,e=Wu(r);function r(){return Ju(this,r),e.apply(this,arguments)}return Zu(r,[{key:"setup",value:(n=$u(regeneratorRuntime.mark((function t(){var n,e,r,i,u,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perDep((function(t){return t.setup()}));case 2:return e=this.loader,r=e.bsContext,i=e.request.def,u=new bn(r,this.loader),o=u._unloader.supply,null===(n=i.setup)||void 0===n||n.call(i,u),t.abrupt("return",new Cn(this.loader,u,(function(){return Promise.resolve(o.off())})));case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"init",value:function(){return this.setup().then((function(t){return t.init()}))}},{key:"after",get:function(){return"idle"}}]),r}(On=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};Ju(this,t),this.loader=n,this._stop=e}return Zu(t,[{key:"idle",value:function(){return Promise.resolve(this)}},{key:"stop",value:function(){var t=this;return this._stop().then((function(){return t.after}))}},{key:"perDep",value:function(t){var n=this.loader.deps;return Promise.all(n.map((function(n){return t(n)})))}}]),t}()),Cn=function(t){Iu(r,t);var n,e=Wu(r);function r(t,n,i){var u;return Ju(this,r),(u=e.call(this,t,i))._context=n,u}return Zu(r,[{key:"setup",value:function(){return Promise.resolve(this)}},{key:"init",value:(n=$u(regeneratorRuntime.mark((function t(){var n,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perDep((function(t){return t.init()}));case 2:return e=this.loader.request.def,null===(n=e.init)||void 0===n||n.call(e,this._context),t.abrupt("return",new Fn(this));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"after",get:function(){return"setup"}}]),r}(On),Fn=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),r=n.call(this,t.loader,(function(){return t.stop()})),t.loader.state.it=!0,r}return Zu(e,[{key:"after",get:function(){return"init"}}]),Zu(e,[{key:"setup",value:function(){return Promise.resolve(this)}},{key:"init",value:function(){return Promise.resolve(this)}}]),e}(On),Rn=function(){function t(n,e,r){Ju(this,t),this._requester=n,this.feature=e,this._revoke=r,this._uses=0,this.def=function(t){var n=Ct.of(t);if($t in t){n=Ct.merge(n,{init:function(n){n.define(t)}});var e=Mt.of(t).feature;e&&(n=Ct.merge(n,e))}return n}(e)}return Zu(t,[{key:"request",value:function(t){var n=this,e=this._requester,r=e.registry,i=[this,"is",this.feature];this._revokeBy(r.provide({a:Sn.of(this.feature),is:i}));var u,o=Xu(oo(this.def.has));try{var a=function(){var i=u.value,o=[n,"has",i];n._revokeBy(r.provide({a:Sn.of(i),is:o}));var a=e.request(i,[].concat(Uu(t),[o]));n._revokeBy((function(){return a.unuse()}))};for(o.s();!(u=o.n()).done;)a()}catch(t){o.e(t)}finally{o.f()}var c,s=Xu(oo(this.def.needs));try{var f=function(){var i=c.value,u=[n,"needs",i],o=e.request(i,[].concat(Uu(t),[u]));n._revokeBy((function(){return o.unuse()})),n._revokeBy(r.provide({a:Sn.of(i),is:u}))};for(s.s();!(c=s.n()).done;)f()}catch(t){s.e(t)}finally{s.f()}return this._uses=1,this}},{key:"reuse",value:function(t){if(!this._uses)throw new Et(t.map((function(t){var n=ju(t,3);return[n[0].feature,n[1],n[2]]})));return++this._uses,this}},{key:"unuse",value:function(){--this._uses||this._revoke()}},{key:"_revokeBy",value:function(t){this._revoke=fo(t,this._revoke)}}]),t}(),En=new $("feature-requester",{byDefault:Ca((function(t){return new Dn(t)}))}),Dn=function(){function t(n){Ju(this,t),this._map=new Map,this.registry=n.get(Gt)}return Zu(t,[{key:"request",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this._map.get(t);if(r)return r.reuse(e);var i=new Rn(this,t,(function(){return n._map.delete(t)}));return this._map.set(t,i),i.request(e)}}],[{key:_,get:function(){return En}}]),t}(),$n=Symbol("when-defined"),Pn=Symbol("attribute"),jn=new $("attribute-registry",{byDefault:function(t){return new Mn(t.get(hn))}}),Mn=function(){function t(n){var e=this;Ju(this,t),this._context=n,this.attrs=new Map,n.whenReady((function(t){var n=t.elementType;return e.define(n)})),n.whenComponent((function(t){var n=t.mount;n&&e.mount(n)}))}return Zu(t,[{key:"declareAttribute",value:function(t){var n=t.name,e=t.change;this.attrs.set(n,fo(this.attrs.get(n),e))}},{key:"define",value:function(t){var n=this.attrs;n.size&&(Object.defineProperty(t,"observedAttributes",{configurable:!0,enumerable:!0,value:tc(t,n.keys())}),Object.defineProperty(t.prototype,"attributeChangedCallback",{configurable:!0,enumerable:!0,value:nc(t,n)}))}},{key:"mount",value:function(t){var n=t.element,e=this.attrs,r=Array.from(e.keys());r.length&&new(0,this._context.get(Xt).MutationObserver)((function(t){return t.forEach((function(t){var r=t.attributeName;return e.get(r)(Lt.of(n).component,n.getAttribute(r),t.oldValue)}))})).observe(n,{attributes:!0,attributeFilter:r,attributeOldValue:!0})}}]),t}(),zn=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.call(this,"component-state")}return Zu(e,[{key:"grow",value:function(t){var n,e=t.seed();if(null!=e)n=e,t.insert(n);else{if(t.hasFallback)return;n=new Un,Lo(t.context.get(Lt)).whenOff((function(t){return n.done(t)})),t.insert(n)}t.setup((function(t){t.registry.provide({a:qt,is:n.update})}))}}]),e}(D)),Un=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,null,[{key:_,get:function(){return zn}}]),e}(G),qn=function(t){Iu(e,t);var n=Wu(e);function e(t,r,i){var u;return Ju(this,e),(u=n.call(this))._context=t,u._name=r,u._path=i,u[Kn]=Io(),u}return Zu(e,[{key:"on",value:function(t){return(this.on=this._context.get(Un).track(this._path).onUpdate().thru((function(t,n,e){return _o(n,e)})).tillOff(this).F)(t)}},{key:"it",get:function(){return this._context.element.getAttribute(this._name)},set:function(t){Lo(this).isOff||(null==t?this._context.element.removeAttribute(this._name):this._context.element.setAttribute(this._name,t))}}]),e}(H),Kn=j,Nn=Symbol("dom-property"),Ln=Symbol("render"),In={spec:function(t,n){return function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return"function"==typeof t?t.apply(void 0,e):t}(n,t)},fulfill:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.on,r=void 0===e?n.on:e,i=t.error;return{on:r,error:i?i.bind(t):n.error&&n.error.bind(n)}},trigger:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.on,r=void 0===e?[]:e;if("object"===Lu(r)&&Go(r))return fa(r).tillOff(t);var i=t.get(Un).track(r).onUpdate().tillOff(t);return Array.isArray(r)&&!r.length?i.thru_((function(t){return t[0]===Ln?m:_o()})):i}},Bn=function(){function t(n){Ju(this,t),this._context=n,this._renders=new Set}return Zu(t,[{key:"renderBy",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=In.spec(this._context,e),i=In.trigger(this._context,r),u=this._context.get(en)(ro(ro({},In.fulfill(r)),{},{node:this._context.element})),o="connected"===r.when,a=1,c=function(){return a&&h()},s=o?function(){return n._context.connected&&h()}:function(){return n._context.settled&&h()},f=i.to(s).needs(this._context).whenOff(d);(o?this._context.whenConnected():this._context.whenSettled()).to(c);var l=kt();return this._renders.add(v),f.whenOff((function(){return n._renders.delete(v)}));function h(){a=2,u(p)}function v(){l(p)}function d(){2===a&&u(lo),a=-1}function p(n){if(a>0)for(a=0;;){var e=t(n);if(e===t||"function"!=typeof e)break;t=e}}}},{key:"renderNow",value:function(){this._renders.forEach((function(t){return t()}))}}]),t}(),Wn=new $("element-render-ctl",{byDefault:function(t){return new Bn(t.get(Lt))}}),Vn=new $("element-render-scheduler",{byDefault:rc}),Gn=new $("shadow-content-root"),Hn=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"shadowRoot",get:function(){return this.target.shadowRoot}}]),e}(qu(Event)),Qn=new ht("shadow-root-builder",{byDefault:function(){return ic}}),Jn={mode:"open"},Yn=new et("https://wesib.github.io/ns","b","wesib"),Zn=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this))._added=new Set(t),r._removed=new Set,r._added.forEach((function(t){return r.add(t)})),r}return Zu(e,[{key:"add",value:function(t){return this.has(t)||(this._added.add(t),this._removed.delete(t),Pu(Qu(e.prototype),"add",this).call(this,t)),this}},{key:"delete",value:function(t){return!!Pu(Qu(e.prototype),"delete",this).call(this,t)&&(this._added.delete(t),this._removed.add(t),!0)}},{key:"clear",value:function(){var t=this;this._added.clear(),this.forEach((function(n){return t._removed.add(n)})),Pu(Qu(e.prototype),"clear",this).call(this)}},{key:"delta",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return uc(this)(t,n),this}},{key:"redelta",value:function(t){return("function"==typeof t?t:uc(t))(Array.from(this._added),Array.from(this._removed)),this}},{key:"undelta",value:function(){return this._added.clear(),this._removed.clear(),this}}]),e}(qu(Set)),Xn=Symbol("in-aspect"),te={instance:null,convertTo:lo},ne=new et("https://surol.github.io/input-aspects/ns","inasp","input-aspects"),ee={applyTo:function(){return cc(ka())}},o={},(a={})[Xn]=a[Xn]||{},a[Xn].get=function(){return ee},io(o,"to",(function(t){return{applyAspect:function(n){return n===ee?cc(t):void 0}}})),Eu(o,a),re=o,ie={applyTo:function(){return cc(Ta)}},c={},(s={})[Xn]=s[Xn]||{},s[Xn].get=function(){return ie},io(c,"to",(function(t){return{applyAspect:function(n){return n===ie?cc(t):void 0}}})),Eu(c,s),ue=c,oe={applyAspect:function(){}},ae=function(t){Iu(e,t);var n=Wu(e);function e(){var t;return Ju(this,e),(t=n.apply(this,arguments))._aspects=new Map,t}return Zu(e,[{key:"aspect",value:function(t){return this._aspect(t[Xn]).instance}},{key:"setup",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lo;return dc(t)?n(this.aspect(t),this):t(this),this}},{key:"convert",value:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return new ce(this,sc.apply(void 0,[t].concat(e)))}},{key:"_aspect",value:function(t){var n=this._aspects.get(t);if(n)return n;var e=this._applyAspect(t)||t.applyTo(this);return this._aspects.set(t,e),e}},{key:"_applyAspect",value:function(t){}}]),e}(H),ce=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;Ju(this,e),(i=n.call(this))._on=new L,i._supply=Io().needs(t);var u,o,a,c,s=0,f=r(t,Gu(i));return hc(f)?(o=so,a=so,c=function(n){var e=t._aspect(n);return e.attachTo?e.attachTo(Gu(i)):e.convertTo(Gu(i))}):(o=f.set,a=f.get,c=function(n){return t._aspect(n).convertTo(Gu(i))}),i._applyAspect=function(t){var n;return(null===(n=f.applyAspect)||void 0===n?void 0:n.call(f,t))||c(t)},i._it=pa([o(t.it),0]),Lo(i._it).needs(i._supply),i._it.on((function(t,n){var e=ju(t,1)[0],r=ju(n,1)[0];e!==r&&i._on.send(e,r)})).cuts(i._on),t.on((function(t){t!==u&&(i._it.it=[o(t),++s])})).cuts(Gu(i)),i._it.on((function(n){var e=ju(n,2),r=e[0],i=e[1];if(i!==s){s=i,u=a(r);try{t.it=u}finally{u=void 0}}})),i}return Zu(e,[{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:j,get:function(){return this._supply}},{key:"it",get:function(){return this._it.it[0]},set:function(t){var n=ju(this._it.it,2),e=n[0],r=n[1];t!==e&&(this._it.it=[t,r+1])}}]),e}(ae),se=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this))._control=t,r}return Zu(e,[{key:"on",value:function(t){return(this.on=this._control.on().F)(t)}},{key:j,get:function(){return this._supply||(this._supply=Io().needs(this._control))}},{key:"it",get:function(){return this._control.it},set:function(t){this._control.it=t}}]),e}(ae),le={applyTo:function(t){return ac(t,he)}},he=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"_applyAspect",value:function(t){return t===le?ac(this,e,this):Pu(Qu(e.prototype),"_applyAspect",this).call(this,t)}}],[{key:Xn,get:function(){return le}}]),e}(fe=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i,u=t.aspects;return Ju(this,e),(r=n.call(this))._aspectConversion=fc(u)((i=Gu(r),new se(i)),Gu(r)),r}return Zu(e,[{key:"_applyAspect",value:function(t){return this._aspectConversion.applyAspect(t)||Pu(Qu(e.prototype),"_applyAspect",this).call(this,t)}}]),e}(ae)),ve=function(){function t(){Ju(this,t)}return Zu(t,[{key:U,value:function(){return this.on()}},{key:P,value:function(){return this.read()}}]),t}(),de={applyTo:function(t){return cc(new ye(t))}},ye=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this))._control=t,r._map=new Map,r._on=new L,Lo(r._on).needs(r._control),r}return Zu(e,[{key:"add",value:function(t){var n=this,e=this._map.get(t);if(e)return e;var r=Io((function(){n._map.delete(t),n._on.send([],[t])}));return this._map.set(t,r),this._on.send([t],[]),r.needs(this._control).needs(t.parent)}},{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:"read",value:function(t){var n=this,e=function(){return n._map.keys()};return(this.read=ia(this.on().thru(e),(function(){return[e()]})).F)(t)}}]),e}(pe=function(){function t(){Ju(this,t)}return Zu(t,[{key:U,value:function(){return this.on()}},{key:P,value:function(){return this.read()}}],[{key:Xn,get:function(){return de}}]),t}()),ge={applyTo:function(t){return ac(t,me)}},me=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"_applyAspect",value:function(t){return t===ge?ac(this,e,this):Pu(Qu(e.prototype),"_applyAspect",this).call(this,t)}}],[{key:Xn,get:function(){return ge}}]),e}(fe),ke={applyTo:function(t){return oc(t,_e,(function(t){return new xe(t)}))}},_e=function(){function t(){Ju(this,t)}return Zu(t,[{key:U,value:function(){return this.on()}},{key:P,value:function(){return this.read()}},{key:"done",value:function(t){return this.own.done(t),this}}],[{key:"hasData",value:function(t){return"off"!==t&&"-"!==t[0]}},{key:Xn,get:function(){return ke}}]),t}(),we=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this))._tracker=pa(t?function(t){return null!=t.getAttribute("disabled")?"off":null!=t.getAttribute("readonly")?"ro":"on"}(t.element):"on"),r}return Zu(e,[{key:"on",value:function(t){return(this.on=this._tracker.on().F)(t)}},{key:j,get:function(){return Lo(this._tracker)}},{key:"it",get:function(){return this._tracker.it},set:function(t){switch(t){case"off":case"ro":case"-on":case"-ro":break;default:t="on"}this._tracker.it=t}}]),e}(H),be=function(){function t(){var n=this;Ju(this,t),this._all=new Set,this._on=new L;var e=ia(this._on.on().thru((function(){return n._all})),vo(this._all));this.read=e.keepThru((function(t){return sa(aa.apply(void 0,Uu(t)))}),yc)}return Zu(t,[{key:"add",value:function(t){var n=this,e=Io((function(){n._all.delete(t),n._on.send()}));return this._all.add(t),this._on.send(),e}}]),t}(),xe=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;Ju(this,e),(r=n.call(this))._control=t,r._derived=new be;var i=t.aspect(me);return r.own=new we(i),Lo(r.own).needs(t),r.derive(t.aspect(pe).read().keepThru_(pc)),i&&r.read((function(t){return function(t,n){switch(n){case"off":t.setAttribute("disabled","");break;case"ro":case"-ro":t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly","");break;default:t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly",""),t.removeAttribute("readonly")}}(i.element,t)})),r}return Zu(e,[{key:"read",value:function(t){var n="on";return(this.read=ia(oa({derived:this._derived.read,own:this.own}).thru((function(t){var e,r=ju(t.derived,1)[0],i=ju(t.own,1)[0];if("off"===i||"off"===r)e="off";else{var u=!1;"-"===i[0]&&(u=!0,i=i.substring(1)),"-"===r[0]&&(u=!0,r=r.substring(1)),e="ro"===r?"ro":i,u&&(e="-"+e)}return n===e?m():_o(n=e)})),vo(n)).F)(t)}},{key:"on",value:function(t){var n="on";return(this.on=this.read().thru((function(t){var e=n;return e===t?m():_o(n=t,e)})).F)(t)}},{key:"derive",value:function(t){return this._derived.add(ua(No(t)?t:t(this._control)).tillOff(this._control)).needs(this._control)}}]),e}(_e),Se={applyTo:function(t){return oc(t,Ae,(function(t){return oa({value:t,mode:t.aspect(_e)}).keepThru((function(t){var n=ju(t.value,1)[0],e=ju(t.mode,1)[0];return _e.hasData(e)?_o(n):_o()}))}))}},f={},(l={})[Xn]=l[Xn]||{},l[Xn].get=function(){return Se},Eu(f,l),Ae=f,Oe={applyTo:function(t){return ac(t,Te)}},Te=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"_applyAspect",value:function(t){return t===Oe?ac(this,e,this):Pu(Qu(e.prototype),"_applyAspect",this).call(this,t)}}],[{key:Xn,get:function(){return Oe}}]),e}(he),Ce=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"remove",value:function(t){this.set(t,void 0)}}]),e}(ve),Fe={},Re=function(){function t(n){Ju(this,t),this._map=n}return Zu(t,[{key:"get",value:function(t){var n=this._map.get(t);return n&&n[0]}},{key:Symbol.iterator,value:function(){return xo(Eo(this._map.values(),(function(t){return ju(t,1)[0]})))}},{key:"entries",value:function(){return xo(Eo(this._map.entries(),(function(t){var n=ju(t,2);return[n[0],ju(n[1],1)[0]]})))}}]),t}(),Ee=function(){function t(n){Ju(this,t),this._controls=n,this._supply=Io(),this._map=new Map}return Zu(t,[{key:"set",value:function(t,n,e,r){var i,u=this._map.get(t);if(n){i=Io();var o=this.newEntry(t,n,i),a=!0;u&&(u[0]===n?a=!1:r.push([t,u])),a?(this.modify().set(t,o),e.push([t,o])):this._map.set(t,o)}else i=Ho(),u&&(r.push([t,u]),this.modify().delete(t));return u&&u[1].off(Fe),i}},{key:"newEntry",value:function(t,n,e){var r=this;return[n,Io((function(n){n!==Fe&&r._controls.remove(t)})).needs(this._supply).needs(e).whenOff((function(t){return e.off(t===Fe?void 0:t)}))]}},{key:"modify",value:function(){if(this._shot){var t=new Map;Ao(this._map.entries(),(function(n){var e=ju(n,2),r=e[0],i=e[1];return t.set(r,i)})),this._shot=void 0,this._map=t}return this._map}},{key:"snapshot",value:function(){return this._shot||(this._shot=new Re(this._map))}},{key:"clear",value:function(){var t=this,n=[],e=[];return Ao(this._map.keys(),(function(r){return t.set(r,void 0,n,e)})),e}}]),t}(),De=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;Ju(this,e),(r=n.call(this))._group=t,r._updates=new L;return r._map=new Ee(Gu(r)),r._map._supply.needs(t.read((function(t){r.read().once((function(n){var e=new Set;Ao(Mo(t),(function(t){var r=ju(t,2),i=r[0],u=r[1];e.add(i);var o=n.get(i);o&&(o.it=u)})),Ao(n.entries(),(function(t){var n=ju(t,2),r=n[0],i=n[1];e.has(r)||(i.it=void 0)}))}))}))),r}return Zu(e,[{key:"on",value:function(t){return(this.on=this._updates.on().thru((function(t,n){return _o(t.map(mc),n.map(mc))})).F)(t)}},{key:"read",value:function(t){var n=this;return(this.read=ia(this._updates.on().thru((function(){return n._map.snapshot()})),(function(){return[n._map.snapshot()]})).F)(t)}},{key:"set",value:function(t,n){var e,r=this,i=this._group,u=[],o=[];return"object"===Lu(t)?(e=Io(),Ao(Mo(t),(function(t){var n=ju(t,2),i=n[0],a=n[1];r._map.set(i,a,u,o).needs(e)}))):e=this._map.set(t,n,u,o),(u.length||o.length)&&(this._updates.send(u,o),u.length&&function(){var t;u.forEach((function(n){var e=ju(n,2),r=e[0],u=ju(e[1],2),o=u[0],a=u[1];o.aspect(pe).add({parent:i}).needs(a).cuts(a);var c=o.it;if(t)t[r]=c;else{var s=i.it;s[r]!==c&&(t=ro(ro({},s),{},io({},r,c)))}})),t&&(i.it=t);u.forEach((function(t){var n=ju(t,2),e=n[0],r=ju(n[1],2),u=r[0],o=r[1];u.read().tillOff(o).to((function(t){i.it[e]!==t&&(i.it=ro(ro({},i.it),{},io({},e,t)))})).cuts(o)}))}()),e}},{key:"clear",value:function(){var t=this._map.clear();t.length&&this._updates.send([],t)}}]),e}(Ce),$e=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this,r))._model=pa(t),i.controls=new De(Gu(i)),Lo(Gu(i)).whenOff((function(){return i.controls.clear()})),i}return Zu(e,[{key:"on",value:function(t){return(this.on=this._model.on().F)(t)}},{key:"_applyAspect",value:function(t){return t===Ae[Xn]?{instance:(n=this,oa({cs:n.controls,model:n,mode:n.aspect(_e)}).keepThru_(kc)),convertTo:lo}:Pu(Qu(e.prototype),"_applyAspect",this).call(this,t);var n}},{key:j,get:function(){return Lo(this._model)}},{key:"it",get:function(){return this._model.it},set:function(t){this._model.it=t}}]),e}(Te),Pe=ca(),je={},Me=function(){function t(n){Ju(this,t);var e=new L,r=new Map,i=new Map,u=lo,o=lo;this._messages=ra((function(t){var n=ua(e,vo()).to(t).whenOff((function(){u=lo,o=lo}));o=function(t,e){var r=t.to((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(e.length)i.set(t,e);else if(!i.delete(t))return;u()})).needs(e).whenOff((function(n){n!==je&&e.off(n),i.delete(t)&&u()}));n.whenOff((function(){return r.off(je)}))},Ao(r.entries(),(function(t){var n=ju(t,2),e=n[0],r=n[1];return o(e,r)})),u=function(){e.send.apply(e,Uu(Ro(i.values(),so)))},i.size&&u()})).share().tillOff(n),this.from=function(t){var e=wc(t)(n),i=Io((function(){r.delete(e)}));return r.set(e,i),o(e,i),i.needs(n)}}return Zu(t,[{key:P,value:function(){return this._messages}}]),t}(),ze={applyTo:function(t){return oc(t,Ue,(function(t,n){var e=new Ne(t);if(n){var r=n.aspect(Ue);e.by(r.read().keepThru((function(t){return _o.apply(void 0,Uu(t.messages()))})))}return e}))}},t("h",Ue=function(){function t(){Ju(this,t)}return Zu(t,[{key:P,value:function(){return this.read()}}],[{key:Xn,get:function(){return ze}}]),t}()),Ke=io({get ok(){return!0},messages:function(){return[]},has:function(){return!1},hasBut:function(){return!1}},Symbol.iterator,(function(){return[][Symbol.iterator]()})),qe=function(){function t(n){var e=this;Ju(this,t),this._byCode=new Map,this._all=[],Ao(n,(function(t){var n=!1;Ao(Mo(t),(function(r){var i=ju(r,2),u=i[0];if(i[1]){n=!0;var o=e._byCode.get(u);o?o.push(t):e._byCode.set(u,[t])}})),n&&e._all.push(t)}))}return Zu(t,[{key:"messages",value:function(t){return null==t?this._all:this._byCode.get(t)||[]}},{key:"has",value:function(t){return null==t||this._byCode.has(t)}},{key:"hasBut",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this._all.some((function(t){return n.every((function(n){return!t[n]}))}))}},{key:Symbol.iterator,value:function(){return this._all[Symbol.iterator]()}},{key:"ok",get:function(){return!this._all.length}}]),t}(),Ne=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;Ju(this,e),(r=n.call(this))._messages=new Me(t);var i=t.aspect(he);return i&&r._messages.from(function(t){return t.controls.read().keepThru(Sc,Ac)}(i)),r}return Zu(e,[{key:"by",value:function(){return this._messages.from(bc.apply(void 0,arguments))}},{key:"read",value:function(t){return(this.read=ua(this._messages).keepThru(xc).F)(t)}}]),e}(Ue),Le=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i,u=r.aspects,o=r.get,a=r.set;Ju(this,e),(i=n.call(this,{aspects:u})).element=t,i._input=new L;var c=Gu(i);i._get=o,i._set=a,i._value=i.it;var s=i._update=function(t,n){return f({value:t},n)};function f(t,n){for(;;){c._value=t.value;var e=void 0;c._update=function(n,r){e=[ro(ro({},t),{},{value:n}),r]};try{c._input.send(t,n)}finally{c._update=s}if(!e)break;var r=ju(e,2);t=r[0],n=r[1]}}return i.events=new ot(t),Lo(i.events).needs(Gu(i)),i.listenForInput((function(t){return f(t,i._value)})),i}return Zu(e,[{key:"input",value:function(t){var n=this;return(this.input=ia(this._input.on().thru(so),(function(){return[{value:n.it}]})).F)(t)}},{key:"on",value:function(t){return(this.on=this._input.on().thru((function(t,n){var e=t.value;return e===n?m():_o(e,n)})).F)(t)}},{key:"listenForInput",value:function(t){var n=this,e=function(e){return t({value:n.it,event:e})};this.events.on("input").to(e),this.events.on("change").to(e)}},{key:j,get:function(){return Lo(this._input)}},{key:"it",get:function(){return this._get()},set:function(t){var n=this.it;t!==n&&(this._set(t),this._update(this._get(),n))}}]),e}(me),Ie={applyTo:function(t){return oc(t,Be,(function(t){var n=t.aspect(me);return n&&new We(n)}))}},We=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;Ju(this,e),r=n.call(this);var i=t.element,u=t.events,o=i.getRootNode?i.getRootNode():i.ownerDocument;return r._it=pa(o.activeElement===i),Lo(Gu(r)).needs(t),u.on("focus").to((function(){return r._it.it=!0})),u.on("blur").to((function(){return r._it.it=!1})),r.on({receive:function(t,n){t.onRecurrent(lo),n?i.focus():i.blur()}}),r}return Zu(e,[{key:"on",value:function(t){return(this.on=this._it.on().F)(t)}},{key:j,get:function(){return Lo(this._it)}},{key:"it",get:function(){return this._it.it},set:function(t){this._it.it=t}}]),e}(Be=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,null,[{key:Xn,get:function(){return Ie}}]),e}(H)),Ve={applyTo:function(t){return oc(t,Ge,(function(t){var n=t.aspect(he);return null!=n?new Je(n):new Qe(t)}))}},He={hasFocus:!1,touched:!1,edited:!1},Qe=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this))._flags=pa(He),Lo(r._flags).needs(t),r._flags.by(Oc(r._flags,t)),r}return Zu(e,[{key:"read",value:function(t){return(this.read=this._flags.read().F)(t)}},{key:"markTouched",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._flags.it;return t?n.touched||(this._flags.it=ro(ro({},n),{},{touched:t})):n.touched&&(this._flags.it=ro(ro({},n),{},{touched:n.hasFocus,edited:!1})),this}},{key:"markEdited",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._flags.it;return t?n.edited||(this._flags.it=ro(ro({},n),{},{touched:!0,edited:t})):n.edited&&(this._flags.it=ro(ro({},n),{},{edited:t})),this}}]),e}(Ge=function(){function t(){Ju(this,t)}return Zu(t,[{key:P,value:function(){return this.read()}}],[{key:Xn,get:function(){return Ve}}]),t}()),Je=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this))._container=t,r}return Zu(e,[{key:"read",value:function(t){return(this.read=Tc(this._container).F)(t)}},{key:"markEdited",value:function(t){return this._container.controls.read().once((function(n){return Ao(n,(function(n){return n.aspect(Ge).markEdited(t)}))})),this}},{key:"markTouched",value:function(t){return this._container.controls.read().once((function(n){return Ao(n,(function(n){return n.aspect(Ge).markTouched(t)}))})),this}}]),e}(Ge),Ye={applyTo:function(t){var n=t.aspect(me);return n?cc(n.element):te}},t("I",(h={},(v={})[Xn]=v[Xn]||{},v[Xn].get=function(){return Ye},io(h,"to",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{applyAspect:function(n){return n===Ye?cc(t):void 0}}})),Eu(h,v),Ze=h)),Xe={applyTo:function(t){return{instance:new er(t),convertTo:lo}}},t("k",tr=function(){function t(){Ju(this,t)}return Zu(t,[{key:P,value:function(){return this.read()}}],[{key:Xn,get:function(){return Xe}}]),t}()),nr=Symbol("reason"),er=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;Ju(this,e),(r=n.call(this))._control=t,r._sources=pa([new Map]);var i=t.aspect(Ze);return i&&r.applyTo(i,r.schedule),Lo(t).whenOff((function(t){return r.done(t)})),r}return Zu(e,[{key:"read",value:function(t){return(this.read=this._sources.read().tillOff(this._control).keepThru_((function(t){var n=ju(t,1)[0];return sa(aa.apply(void 0,Uu(n.keys())))}),(function(){for(var t={},n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.forEach((function(n){return Rc(ju(n,1)[0],t)})),t})).F)(t)}},{key:"track",value:function(t){var n=this;return(this.track=ra((function(t){t.supply.needs(n._control);var e=new Zn,r=new z,i=!1;return r.on(t),n.read((function(t){var n=new Set(e),u=[];Ao(Fo(Mo(t),(function(t){return!!ju(t,2)[1]})),(function(t){var e=ju(t,1)[0];n.delete(e)||u.push(e)})),(!i||u.length||n.size)&&(e.delta(u,n),i=!0,e.redelta((function(t,n){return r.send(t,n)})).undelta())}))})).F)(t)}},{key:"specs",value:function(t){return ua(No(t)?t:t(this._control))}},{key:"resolve",value:function(t){var n=this._control.aspect(re);return this.specs(t).keepThru((function(){for(var t={},e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach((function(e){ya(e)?t[nt.name(e,n)]=!0:Rc(e,t)})),t}))}},{key:"add",value:function(t){var n=this,e=Lo(this._control);if(e.isOff)return e;var r=Io(),i=ra((function(e){var i=n.resolve(t).to({receive:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.receive.apply(e,[t].concat(r))}});e.supply.whenOff((function(t){r.off(io({},nr,t))})),r.needs(i).whenOff((function(t){Fc(t)&&i.off(t[nr])}))})).share(),u=ju(this._sources.it,1)[0];return u.set(i,r),r.whenOff((function(t){Fc(t)||(u.delete(i),n._sources.it=[u])})),this._sources.it=[u],r.needs(e)}},{key:"applyTo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ec(this._control,t),e=t.classList,r=new Zn,i=function(){r.redelta((function(t,n){e.remove.apply(e,Uu(n)),e.add.apply(e,Uu(t))})).undelta()};return this.track((function(t,e){r.delta(t,e),n(i)})).whenOff((function(){r.size&&(r.clear(),n(i))}))}},{key:"done",value:function(t){return Ao(this._sources.it[0].values(),(function(n){return n.off(t)})),this._sources.done(t),this}},{key:"schedule",get:function(){return this._schedule||(this._schedule=Ec(this._control,this._control.aspect(Ze)))}}]),e}(tr),rr=[["has-error",ne]],ir="!important",ar=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this,r)).r=Uc(t.r,255),i.g=Uc(t.g,255),i.b=Uc(t.b,255),i.a=null!=t.a?Kc(t.a,1):1,i}return Zu(e,[{key:"by",value:function(t){return sr.by(t)||this}},{key:"is",value:function(t){return"object"===Lu(t)&&t.type===this.type&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a&&t.priority===this.priority}},{key:"prioritize",value:function(t){return this.priority===t?this:new e(this,{priority:t})}},{key:"set",value:function(t){"function"==typeof t&&(t=t(this));var n=t,r=n.r,i=void 0===r?this.r:r,u=n.g,o=void 0===u?this.g:u,a=n.b,c=void 0===a?this.b:a,s=n.a;return new e({r:i,g:o,b:c,a:void 0===s?this.a:s},this)}},{key:"toString",value:function(){var t="".concat(this.r,", ").concat(this.g,", ").concat(this.b);return 1===this.a?"rgb(".concat(t,")"):"rgba(".concat(t,", ").concat(this.a,")")}},{key:"type",get:function(){return"rgb"}},{key:"rgb",get:function(){return this}},{key:"hsl",get:function(){var t=this.a,n=100*this.r/255,e=100*this.g/255,r=100*this.b/255,i=Math.max(n,e,r),u=Math.min(n,e,r),o=Math.round((i+u)/2);if(i===u)return new cr({h:0,s:0,l:o,a:t},this);var a,c=i-u,s=Math.round(o>50?100*c/(200-i-u):100*c/(i+u));switch(i){case n:a=(e-r)/c+(e<r?6:0);break;case e:a=(r-n)/c+2;break;default:a=(n-e)/c+4}return a*=60,a=Math.round(a),new cr({h:a,s:s,l:o,a:t},this)}}]),e}(or=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return e}(ur=function(){function t(n){Ju(this,t),this.priority=n&&n.priority||0}return Zu(t,[{key:"important",value:function(){return this.prioritize(1)}},{key:"usual",value:function(){return this.prioritize(0)}}]),t}())),cr=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i,u;return Ju(this,e),(i=n.call(this,r)).h=(u=t.h,(u%=360)<0?360+u:u),i.s=Kc(t.s,100),i.l=Kc(t.l,100),i.a=null!=t.a?Kc(t.a,1):1,i}return Zu(e,[{key:"by",value:function(t){return sr.by(t)||this}},{key:"is",value:function(t){return"object"===Lu(t)&&t.type===this.type&&t.h===this.h&&t.s===this.s&&t.l===this.l&&t.a===this.a&&t.priority===this.priority}},{key:"prioritize",value:function(t){return this.priority===t?this:new e(this,{priority:t})}},{key:"set",value:function(t){"function"==typeof t&&(t=t(this));var n=t,r=n.h,i=void 0===r?this.h:r,u=n.s,o=void 0===u?this.s:u,a=n.l,c=void 0===a?this.l:a,s=n.a;return new e({h:i,s:o,l:c,a:void 0===s?this.a:s},this)}},{key:"toString",value:function(){var t="".concat(this.h,", ").concat(this.s,"%, ").concat(this.l,"%");return 1===this.a?"hsl(".concat(t,")"):"hsla(".concat(t,", ").concat(this.a,")")}},{key:"type",get:function(){return"hsl"}},{key:"rgb",get:function(){var t=this.a,n=this.s/100,e=this.l/100;if(!n){var r=255*e;return new ar({r:r,g:r,b:r,a:t},this)}var i=e<.5?e*(1+n):e+n-e*n,u=2*e-i,o=this.h/360;return new ar({r:qc(u,i,o+1/3),g:qc(u,i,o),b:qc(u,i,o-1/3),a:t},this)}},{key:"hsl",get:function(){return this}}]),e}(or),sr={by:function(t){if("object"===Lu(t)&&("rgb"===t.type||"hsl"===t.type))return t}},lr={map:function(t,n){var e={},r={from:n,get:function(r){if(r in e)return e[r];var i=function(t){switch(Lu(t)){case"function":return t;case"object":return t.by.bind(t)}var n=Lu(t);return function(e){return Lu(e)===n?e:t}}(t[r])(n[r],this,r);return e[r]=i,i}};return Ao(jo(t),(function(t){return r.get(t)})),e},by:function(t){return lr.map.bind(void 0,t)}},hr=function(t){Iu(e,t);var n=Wu(e);function e(t,r,i){var u;return Ju(this,e),(u=n.call(this,i)).val=t,u.unit=r,u}return Zu(e,[{key:"toDim",value:function(t){var n=this.dim;if(t===n||t===n.pt||t===("%"===this.unit?t.pt:n.noPt))return this}},{key:"is",value:function(t){return t===this||"object"===Lu(t)&&t.type===this.type&&this.unit===t.unit&&this.val===t.val&&this.priority===t.priority}},{key:"prioritize",value:function(t){return this.priority===t?this:new e(this.val,this.unit,{dim:this.dim,priority:t})}},{key:"add",value:function(t,n){return"number"==typeof t&&(t=Ic(t,n||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?Ic(this.val+t.val,this.unit,this):Bc(this,"+",t)}},{key:"sub",value:function(t,n){return"number"==typeof t&&(t=Ic(t,n||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?Ic(this.val-t.val,this.unit,this):Bc(this,"-",t)}},{key:"mul",value:function(t){return 1===t?this:Ic(this.val*t,this.unit,this)}},{key:"div",value:function(t){return 1===t?this:Ic(this.val/t,this.unit,this)}},{key:"negate",value:function(){return Ic(-this.val,this.unit,this)}},{key:"toFormula",value:function(){return"".concat(this.val).concat(this.unit)}},{key:"type",get:function(){return"dimension"}}]),e}(fr=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this,t)).dim=t.dim,r}return Zu(e,[{key:"by",value:function(t){return this.dim.by(t)||this}},{key:"toString",value:function(){return this.toFormula()}}]),e}(ur)),dr=function(t){Iu(e,t);var n=Wu(e);function e(t,r,i,u){return Ju(this,e),n.call(this,t,r,i.usual(),u)}return Zu(e,[{key:"prioritize",value:function(t){return this.priority===t?this:new e(this.left,this.op,this.right,{dim:this.dim,priority:t})}},{key:"toDim",value:function(t){var n=this.left.toDim(t);if(n){var r=this.right.toDim(t);if(r)return n===this.left&&r===this.right?this:new e(n,this.op,r,{dim:t,priority:this.priority})}}},{key:"negate",value:function(){return"-"===this.op?new e(this.right,this.op,this.left,this):new e(this.left.negate(),"-",this.right,this)}},{key:"toFormula",value:function(){return"(".concat(this.left.toFormula()," ").concat(this.op," ").concat(this.right.toFormula(),")")}}]),e}(vr=function(t){Iu(e,t);var n=Wu(e);function e(t,r,i,u){var o;return Ju(this,e),(o=n.call(this,u)).left=t.usual(),o.op=r,o.right=i,o}return Zu(e,[{key:"is",value:function(t){return this===t||"object"===Lu(t)&&t.type===this.type&&(this.op===t.op&&this.left.is(t.left)&&zc(this.right,t.right)&&this.priority===t.priority)}},{key:"add",value:function(t,n){return"number"==typeof t&&(t=Ic(t,n,this)),Bc(this,"+",t)}},{key:"sub",value:function(t,n){return"number"==typeof t&&(t=Ic(t,n,this)),Bc(this,"-",t)}},{key:"mul",value:function(t){return Wc(this,t)}},{key:"div",value:function(t){return Vc(this,t)}},{key:"toString",value:function(){return"calc"+Pu(Qu(e.prototype),"toString",this).call(this)}},{key:"type",get:function(){return"calc"}}]),e}(fr)),pr=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"prioritize",value:function(t){return this.priority===t?this:new e(this.left,this.op,this.right,{dim:this.dim,priority:t})}},{key:"toDim",value:function(t){var n=this.left.toDim(t);if(n)return n===this.left?this:new e(n,this.op,this.right,{dim:t,priority:this.priority})}},{key:"mul",value:function(t){return("*"===this.op?Wc(this.left,this.right*t):Vc(this.left,this.right/t)).prioritize(this.priority)}},{key:"div",value:function(t){return("/"===this.op?Vc(this.left,this.right*t):Wc(this.left,this.right/t)).prioritize(this.priority)}},{key:"negate",value:function(){return new e(this.left,this.op,-this.right,this)}},{key:"toFormula",value:function(){return"(".concat(this.left.toFormula()," ").concat(this.op," ").concat(this.right,")")}}]),e}(vr),yr=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this,r))._byPriority=t,i}return Zu(e,[{key:"toDim",value:function(t){return t.zero.prioritize(this.priority)}},{key:"is",value:function(t){return this===t||("object"===Lu(t)?t.type===this.type&&t.priority===this.priority:0===t||"0"===t?0===this.priority:"0 !important"===t&&1===this.priority)}},{key:"add",value:function(t,n){return"number"==typeof t&&(t=Ic(t,n,this)),t.prioritize(this.priority)}},{key:"sub",value:function(t,n){return"number"==typeof t&&(t=Ic(t,n,this)),t.negate().prioritize(this.priority)}},{key:"mul",value:function(){return this}},{key:"div",value:function(){return this}},{key:"negate",value:function(){return this}},{key:"prioritize",value:function(t){return this._byPriority.get(t)}},{key:"important",value:function(){return this._byPriority.important}},{key:"usual",value:function(){return this._byPriority.usual}},{key:"toFormula",value:function(){return"0"}},{key:"type",get:function(){return 0}}]),e}(fr),gr=function(){function t(n){Ju(this,t),this.dim=n,this.usual=new yr(this,{dim:n}),this.important=new yr(this,{dim:n,priority:1})}return Zu(t,[{key:"get",value:function(t){switch(t){case 0:return this.usual;case 1:return this.important}return new yr(this,{dim:this.dim,priority:t})}}]),t}(),mr=Gc({pt:function(){return kr},noPt:function(){return mr}}),kr=Gc({pt:function(){return kr},noPt:function(){return mr}}),_r=function(t){Iu(r,t);var n=Wu(r);function r(t,e){var i;return Ju(this,r),(i=n.call(this,e)).url=t,i}return Zu(r,[{key:"by",value:function(t){return r.by(t)||this}},{key:"prioritize",value:function(t){return t===this.priority?this:new r(this.url,{priority:t})}},{key:"is",value:function(t){return"object"===Lu(t)&&"url"===t.type&&t.url===this.url&&t.priority===this.priority}},{key:"toString",value:function(){return"url('".concat(e(this.url),"')")}},{key:"type",get:function(){return"url"}}],[{key:"by",value:function(t){switch(Lu(t)){case"string":var n=ju(Lc(t),2);return new r(n[0],{priority:n[1]});case"object":if("url"===t.type)return t}}}]),r}(ur),wr=ca({}),br=new Set,xr=[[]],Sr=[],Ar={qualify:function(t){return"@".concat(Pc(t))}},Or={},-65535,Tr=function(){function t(n){Ju(this,t),this._rule=n}return Zu(t,[{key:"read",value:function(t){for(var n=this._rule.outer;n;)t=ts(n.read().keepThru(gs),t),n=n.outer;return t}},{key:"render",value:function(t,n){var e=t.selector,r=t.writer;if(r.isGroup){var i=r,u=function(t){var n,e=new Map,r=[],i=Xu(t);try{for(i.s();!(n=i.n()).done;){var u=n.value;es(u)?r.push(u):r.push(ks(u,e))}}catch(t){i.e(t)}finally{i.f()}if(e.size)return[e,hs(r)]}(e);if(u){var o,a=ju(u,2),c=a[0],s=a[1],f=Xu(c);try{for(f.s();!(o=f.n()).done;){var l=ju(ys(n,o.value),2),h=l[0],v=l[1];if(!v){r=i.addStyle(h);break}r=i=i.addGroup(h,v)}}catch(t){f.e(t)}finally{f.f()}t.render(n,{writer:r,selector:s})}else t.render(n)}else t.render(n)}}]),t}(),Rr="@import:",Er="@namespace:",Dr={order:-65535,needs:Fr={order:-65534,needs:Cr={order:-65535,create:function(t){return new Tr(t)}},render:function(t,n){var e,r=!t.rule.selector.length,i=t.sheet,u=0,o=0,a=Xu(Mo(n));try{for(a.s();!(e=a.n()).done;){var c=ju(e.value,2),s=c[0],f=c[1],l=String(s);if("@"===l[0]){var h=ju(Lc(f),1)[0],v=r?ws(i,u,l,h):0;u+=v,o+=v;var d=_r.by(h);d&&(o+=bs(i,o,l,d),o+=xs(i,o,l,d))}}}catch(t){a.e(t)}finally{a.f()}t.render(n)}},render:function(t,n){var e=Fo(Eo($o(t.selector),(function(t){return!es(t)&&t.ns&&"string"!=typeof t.ns?t.ns:null})),yo);function r(n,e){var r=t.nsAlias(e);return n["@namespace:".concat(r)]=new _r(e.url),n}t.render(Oo(e)?n:Co(e,r,ro({},n)))}},$r={indent:"  "},Pr={nv:"",eol:"",pre:"",indent:function(){return this}},jr=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Ju(this,t),this._config=n,this.pre=e}return Zu(t,[{key:"indent",value:function(){return new t(this._config,this.pre+this._config.indent)}},{key:"nv",get:function(){return" "}},{key:"eol",get:function(){return"\n"}}]),t}(),Mr=function(){function t(n,e){Ju(this,t),this.f=n,this.selector=e,this.body="",this.nf=n.indent()}return Zu(t,[{key:"set",value:function(t,n,e){var r=e>=1?" !important":"",i=this.nf,u=i.pre,o=i.nv,a=i.eol;this.body&&(this.body+=";".concat(a)),this.body+="".concat(u).concat(t,":").concat(o).concat(n).concat(r)}},{key:"replace",value:function(t){this.body=t.trim(),this.body.endsWith(";")&&(this.body=this.body.substr(0,this.body.length-1))}},{key:"toString",value:function(){var t=this.f,n=t.pre,e=t.nv,r=t.eol;if(this.body){var i=r?";".concat(r):"";return"".concat(n).concat(this.selector).concat(e,"{").concat(r).concat(this.body).concat(i).concat(n,"}")}return""}},{key:"isGroup",get:function(){return!1}}]),t}(),zr=function(){function t(n){Ju(this,t),this.nf=n,this._nested=[]}return Zu(t,[{key:"addGroup",value:function(t,n,e){return this._add(new Ur(this.nf,t,n),e)}},{key:"addStyle",value:function(t,n){return this._add(new Mr(this.nf,t),n)}},{key:"toString",value:function(){var t,n="",e=Xu(this._nested);try{for(e.s();!(t=e.n()).done;){var r=t.value,i=String(r);i&&(n&&(n+=this.nf.eol),n+=i)}}catch(t){e.e(t)}finally{e.f()}return n}},{key:"_add",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._nested.length;return this._nested.splice(n,0,t),t}},{key:"isGroup",get:function(){return!0}}]),t}(),Ur=function(t){Iu(e,t);var n=Wu(e);function e(t,r,i){var u;return Ju(this,e),(u=n.call(this,t.indent())).f=t,u.name=r,u.params=i,u}return Zu(e,[{key:"toString",value:function(){var t=Pu(Qu(e.prototype),"toString",this).call(this);if(!t)return"";var n=this.f,r=n.pre,i=n.nv,u=n.eol;return"".concat(r).concat(this.name," ").concat(this.params).concat(i,"{").concat(u).concat(t).concat(u).concat(r,"}")}}]),e}(zr),Kr=function(t){Iu(e,t);var n=Wu(e);function e(t,r,i){var u;return Ju(this,e),(u=n.call(this,r)).id=t,u.f=r,u.sender=i,u}return Zu(e,[{key:"addGlobal",value:function(t,n,e){this._add("".concat(this.f.pre).concat(t," ").concat(n,";"),e)}},{key:"clear",value:function(){this._nested.length=0}},{key:"remove",value:function(){this.clear(),this.sender.send({id:this.id})}},{key:"done",value:function(){this.sender.send({id:this.id,css:this.toString()})}}]),e}(zr),qr=function(){function t(n){Ju(this,t),this._target=n}return Zu(t,[{key:"set",value:function(t,n,e){this._target.style.setProperty(t,n,e>=1?"important":void 0)}},{key:"replace",value:function(t){this._target.style.cssText=t}},{key:"isGroup",get:function(){return!1}}]),t}(),Nr=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this,t.sheet))._element=t,r}return Zu(e,[{key:"addGlobal",value:function(t,n,e){this._add("".concat(t," ").concat(n,";"),e)}},{key:"clear",value:function(){for(var t=this._target.cssRules;t.length;)this._target.deleteRule(t.length-1)}},{key:"remove",value:function(){Rs(this._element)}},{key:"done",value:function(){}}]),e}(function(){function t(n){Ju(this,t),this._target=n}return Zu(t,[{key:"addGroup",value:function(n,e,r){return new t(this._add("".concat(n," ").concat(e,"{}"),r))}},{key:"addStyle",value:function(t,n){return new qr(this._add("".concat(t,"{}"),n))}},{key:"_add",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._target.cssRules.length,e=this._target.insertRule(t,n);return this._target.cssRules[e]}},{key:"isGroup",get:function(){return!0}}]),t}()),Lr=function(){function t(){Ju(this,t)}return Zu(t,[{key:P,value:function(){return this.read()}},{key:"add",value:function(t){return this.rules.add([],t)}},{key:"clear",value:function(){return this.set()}}]),t}(),Br=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return e}(Ir=function(){function t(){Ju(this,t)}return Zu(t,[{key:P,value:function(){return this.read()}},{key:U,value:function(){return this.onUpdate()}}]),t}()),Wr=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this))._list=t,r?(i._buildList=function(){return Fo(t,r)},i._filterArray=function(t){return t.filter(r)}):(i._buildList=function(){return t},i._filterArray=so),i}return Zu(e,[{key:"read",value:function(t){return(this.read=ia(this.onUpdate().thru(ho(this)),vo(this)).F)(t)}},{key:"onUpdate",value:function(t){var n=this;return(this.onUpdate=na((function(t){var e=n._ruleSet||(n._ruleSet=new Set(n._buildList()));fa(n._list).to({supply:t.supply.whenOff((function(){return n._ruleSet=void 0})),receive:function(r,i,u){i=n._filterArray(i),((u=n._filterArray(u)).length||i.length)&&(u.forEach((function(t){return e.delete(t)})),i.forEach((function(t){return e.add(t)})),t.receive(r,i,u))}})})).share().F)(t)}},{key:Symbol.iterator,value:function(){return this._ruleSet?this._ruleSet.values():xo(this._buildList())}},{key:"grab",value:function(t){return js(this,t)}}]),e}(Ir),Vr=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i,u,o,a,c;return Ju(this,e),(i=n.call(this))._root=t,i.nested=r,i._updates=new L,i.self=(u=t,o=Gu(i),a=new L,c=[u],o.onUpdate((function(t,n){n[0]===u&&(c.length=0,a.send([],[u]))})).cuts(a),new Wr(new(function(){function t(){Ju(this,t)}return Zu(t,[{key:U,value:function(){return a.on()}},{key:Symbol.iterator,value:function(){return xo(c)}}]),t}()))),i}return Zu(e,[{key:"read",value:function(t){return(this.read=ia(this._updates.on().thru(ho(this)),vo(this)).F)(t)}},{key:"onUpdate",value:function(t){return(this.onUpdate=this._updates.on().F)(t)}},{key:Symbol.iterator,value:function(){return zs(this._root)}},{key:"grab",value:function(t){return js(this,t)}},{key:"add",value:function(t,n){return Us(this._root,hs(t),n,!0)}},{key:"get",value:function(t){return this._get(hs(t))}},{key:"_get",value:function(t){var n=ju(fs(t),2),e=n[0],r=n[1];if(!r)return this._root;var i=this.nested._rule(vs(e));return i?i.rules.get(r):void 0}},{key:"watch",value:function(t){var n=this,e=hs(t);return ra((function(t){var r=pa({}),i=n.read().consume((function(){var t=n._get(e);return t&&t.read((function(t){return r.it=t})).whenOff((function(){return r.it={}}))}));return r.read(t).cuts(i)})).share()}},{key:"_add",value:function(t,n){var e=this;t.rules.onUpdate((function(t,n){return e._updates.send(t,n)})),n&&this._updates.send(Ms(t),[])}},{key:"_remove",value:function(t){var n=Ms(this._root);this._updates.send([],n),n.forEach((function(n){n.rules._updates.done(t),n._spec.done(t)}))}}]),e}(Br),Gr=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this))._updates=new L,r._byKey=new Map,r._all=new Vr(t,Gu(r)),r}return Zu(e,[{key:"read",value:function(t){return(this.read=ia(this._updates.on().thru(ho(this)),vo(this)).F)(t)}},{key:"onUpdate",value:function(t){return(this.onUpdate=this._updates.on().F)(t)}},{key:Symbol.iterator,value:function(){return this._byKey.values()}},{key:"grab",value:function(t){return js(this,t)}},{key:"_rule",value:function(t){return this._byKey.get(t)}},{key:"_add",value:function(t,n,e){var r=this;this._byKey.set(t,n),n.rules.onUpdate((function(e,i){i[0]===n&&(r._byKey.delete(t),r._updates.send([],[n]))})),e&&this._updates.send([n],[]),this._all._add(n,e)}}]),e}(Ir),Hr=function(t){Iu(e,t);var n=Wu(e);function e(t,r,i){var u,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Hc;return Ju(this,e),(u=n.call(this))._root=t||Gu(u),u._selector=r,u._key=i,u._spec=pa(o),u._nested=new Gr(Gu(u)),u}return Zu(e,[{key:"read",value:function(t){var n=this;return(this.read=this._spec.read().keepThru((function(t){return sa(t(n))})).F)(t)}},{key:"set",value:function(t){return this._spec.it=t?function(n){return Qc(n,t)}:Hc,this}},{key:"remove",value:function(t){return this.rules._remove(t),this}},{key:"root",get:function(){return this._root}},{key:"outer",get:function(){if(void 0!==this._outer)return this._outer;var t=function(t){var n=t.length-1;if(n<=0)return n?void 0:Sr;do{switch(t[--n]){case">":return t.slice(0,n);case"+":case"~":--n;continue;default:return t.slice(0,n+1)}}while(n>0)}(this.selector);return this._outer=t&&this.root.rules.get(t)||null}},{key:"selector",get:function(){return this._selector}},{key:"key",get:function(){return this._key}},{key:"empty",get:function(){return this._spec.it===Hc}},{key:"rules",get:function(){return this._nested._all}}]),e}(Lr),Qr=[],Jr=function(t){Iu(e,t);var n=Wu(e);function e(t,r,i){var u;return Ju(this,e),(u=n.call(this))._root=t,u._selector=r,u._map=i,u}return Zu(e,[{key:"read",value:function(t){return(this.read=oa({ms:this._map(this._root),ps:this._root.rules.watch(this._selector)}).keepThru((function(t){var n=ju(t.ms,1)[0],e=ju(t.ps,1)[0];return ko(lr.map(n,e))})).F)(t)}},{key:"add",value:function(t){return this._root.rules.add(this._selector,t),this}},{key:"set",value:function(t){return this._root.rules.add(this._selector).set(t),this}}]),e}(function(){function t(){Ju(this,t)}return Zu(t,[{key:P,value:function(){return this.read()}},{key:"clear",value:function(){return this.set()}}]),t}()),Yr={by:function(t,n){var e;return e="function"==typeof n?function(t){return Ks(n(t))}:ho(Ks(n)),function(n){return new Jr(n,t,e)}}},Zr=function(){function t(n){Ju(this,t),this.refs=n}return Zu(t,[{key:"read",value:function(t){var n=oa(this.refs);return(this.read=n.keepThru(qs).F)(t)}},{key:P,value:function(){return this.read()}}],[{key:"by",value:function(n,e){for(var r={},i=0,u=Object.keys(n);i<u.length;i++){var o=u[i];r[o]=n[o](e)}return new t(r)}}]),t}(),Xr=new Wr((io(d={},U,(function(){return I})),io(d,Symbol.iterator,(function(){return[][Symbol.iterator]()})),d)),ti=function(){return!1},ni=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d\d (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d\d\d\d \d\d:\d\d:\d\d GMT/,ei={" ":7,"\t":7,",":5,";":9,'"':65569,"\\":33,"<":262145,">":524289,"=":17,"(":1,")":1,"/":1,":":1,"?":1,"@":1,"[":1,"]":1,"{":1,"}":1},ri=of(),ii=of({delimit:{":":17,"(":131105,")":37," ":3,"\t":3,"=":1,",":1}}),ui=af(),ai=new(oi=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this,t)).upKey=r.createUpKey((function(t){return t.insert(t.seed.keepThru((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.length?ko(ff(e)):t.hasFallback&&t.or?sa(t.or):sf})))})),r}return Zu(e,[{key:"grow",value:function(t){var n;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ca(t.or):t.or}:void 0).to((function(t){return n=t})).whenOff((function(t){return n=wa(t)})),t.insert((function(t,e){return n(t,e)}))}}]),e}(lt))("http-fetch-agent"),ci={},si=new ht("http-fetch",{byDefault:Ca(lf)}),fi=new $("hierarchy-root",{byDefault:function(t){var n=t.get(tn);return new ot(n).on("wesib:component").to((function(t){return t.context.get(hi).issue()})),pa()}}),li=new $("hierarchy-updates",{byDefault:function(t){return new hi(t.get(Lt))}}),hi=function(){function t(n){Ju(this,t);var e=new L,r=n.get(bt).get(fi);this.on=e.on(),this.send=function(){return e.send(n)},this.issue=function(){var e=hf(n);e?e[0].get(t).send():r.it=n}}return Zu(t,null,[{key:_,get:function(){return li}}]),t}(),vi=new $("hierarchy-context",{byDefault:function(t){return new pi(t.get(Lt))}}),pi=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;Ju(this,e),(r=n.call(this)).context=t;var i=r._parent=pa();t.whenConnected(lo).cuts(i);var u,o=r._registry=(u=r.up(),new A((function(t){return function(t){return"upKey"in t}(t)?u.keepThru((function(n){return n?sa(n.get(t)):_o()})):void 0})));return r.get=o.newValues().get,r}return Zu(e,[{key:"provide",value:function(t){var n=this._registry.provide(t);return Lo(this).whenOff(n),n}},{key:"up",value:function(t){var n=this;return(this.up=ra((function(t){var e=t.supply;e.needs(n);var r=pa();r.by(n._parent),e.cuts(r);var i=Io().needs(e),u=Io().needs(e),o=function(){var t=hf(n.context);if(t){var e=ju(t,2),o=e[0],a=e[1];r.it=o.get(di),i.off(),a&&u.off()}else r.it=void 0};n.context.get(bt).get(fi).read({supply:i,receive:function(){return n.context.connected&&o()}}),r.read().tillOff(u).consume((function(t){return t&&t.context.get(hi).on.to(o)})),r.read(t),n.context.whenConnected({supply:Io().needs(e),receive:o})})).share().F)(t)}},{key:"inside",value:function(t){return this._parent.it=t&&t.get(di),this}}]),e}(di=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:j,get:function(){return Lo(this.context)}}],[{key:_,get:function(){return vi}}]),e}(S)),yi=function(){function t(){Ju(this,t)}return Zu(t,[{key:U,value:function(){return this.onUpdate()}},{key:P,value:function(){return this.read()}}]),t}(),gi={subtree:!0},mi=function(){function t(n,e){Ju(this,t),this._bs=n,this.element=e,this._emitters=new Map}return Zu(t,[{key:"observe",value:function(t,n){var e=this,r=this,i=this.observer,u=this._emitter(t),o=Bo(n),a=u.on({supply:Io((function(){e._emitters.delete(t),i.disconnect(),e._emitters.size?c():e._observer=void 0})).needs(o.supply),receive:function(t,n,e){return o.receive(t,n,e)}});return i.disconnect(),c(),a;function c(){r._update(i.takeRecords()),i.observe(r.element,{attributes:!0,attributeOldValue:!0,attributeFilter:Array.from(r._emitters.keys())})}}},{key:"_update",value:function(t){var n=this;t.forEach((function(t){var e=t.attributeName,r=n._emitters.get(e);r&&r.send(n.element.getAttribute(e),t.oldValue)}))}},{key:"_emitter",value:function(t){var n=new L;return this._emitters.set(t,n),n}},{key:"observer",get:function(){var t=this;if(this._observer)return this._observer;var n=this._bs.get(Xt).MutationObserver;return this._observer=new n((function(n){return t._update(n)}))}}]),t}(),ki=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this))._observer=t,i._name=r,i._updates=new L,i}return Zu(e,[{key:"on",value:function(t){var n=this,e=Ho();return(this.on=na((function(t){n._updates.size||(e=n._observer.observe(n._name,(function(t,e){return n._updates.send(t,e)}))),t.supply.needs(e),n._updates.on(t).whenOff((function(t){n._updates.size||e.off(t)}))})).F)(t)}},{key:j,get:function(){return Lo(this._updates)}},{key:"it",get:function(){return this._observer.element.getAttribute(this._name)},set:function(t){null!=t?this._observer.element.setAttribute(this._name,t):this._observer.element.removeAttribute(this._name)}}]),e}(H),_i=function(){function t(n,e){Ju(this,t),this._attrs=new Map,this._observer=new mi(n,e)}return Zu(t,[{key:"get",value:function(t){var n=this._attrs.get(t);if(n)return n;var e=new ki(this._observer,t);return this._attrs.set(t,e),e}}]),t}(),wi=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this))._element=t,i._key=r,i._updates=new L,i}return Zu(e,[{key:"on",value:function(t){return(this.on=this._updates.on().F)(t)}},{key:"bind",value:function(t){var n,e=this;t.get(Un).track((n=this._key,[Nn,n])).onUpdate().to({supply:Lo(this),receive:function(t,n,r,i){return e._updates.send(r,i)}})}},{key:j,get:function(){return Lo(this._updates)}},{key:"it",get:function(){return this._element[this._key]},set:function(t){this._element[this._key]=t}}]),e}(H),bi=function(){function t(n){Ju(this,t),this._element=n,this._props=new Map}return Zu(t,[{key:"bind",value:function(t){this._context=t,this._props.forEach((function(n){return n.bind(t)}))}},{key:"get",value:function(t){var n=this._props.get(t);if(n)return n;var e=new wi(this._element,t);return this._context&&e.bind(this._context),this._props.set(t,e),e}}]),t}(),xi=Symbol("element-node"),Si=function(){function t(n,e){var r=this;Ju(this,t),this._bs=n,this.element=e,this._attrs=new _i(n,e),this._props=new bi(e),e[xi]=this;var i=e[Nt];i?this._bind(i):e.addEventListener("wesib:component",(function(t){return r._bind(t.context)}))}return Zu(t,[{key:"select",value:function(t,n){return function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r.all)return vf(t,n,e,(function(n,e){return pf(t,n,e)}),r);var i=t.get(rn);return vf(t,n,e,(function(n,e){return i(n)&&pf(t,n,e)}),r)}(this._bs,this.element,t,n)}},{key:"attribute",value:function(t){return this._attrs.get(t)}},{key:"property",value:function(t){return this._props.get(t)}},{key:"_bind",value:function(t){this._props.bind(t)}},{key:"context",get:function(){return this.element[Nt]}},{key:"parent",get:function(){var t=this.element.parentNode;return t&&pf(this._bs,t)}}]),t}(),t("c",Ai=new $("component-node",{byDefault:function(t){return pf(t.get(bt),t.get(Lt).element)}})),Oi=Symbol("page-param"),Ti=function(){function t(){Ju(this,t)}return Zu(t,[{key:"byDefault",value:function(t,n){}},{key:Oi,get:function(){return this}}]),t}(),Ci=new(function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this,t)).upKey=r.createUpKey((function(t){var n=t.context.get(Xt).document;t.insert(t.seed.keepThru((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.length?u:t.hasFallback&&t.or?sa(t.or):gf;function u(t,e,i,u){return function u(o,a){var c=r[o];if(!c)return t(a);c((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=t.url,r=void 0===e?a.url:e,i=t.title,c=void 0===i?a.title:i,s=t.data,f=void 0===s?a.data:s;return u(o+1,{url:new URL(String(r),n.baseURI),title:c,data:f,get visited(){return a.visited},get current(){return a.current},get:function(t){return a.get(t)},put:function(t,n){a.put(t,n)}})}),e,i,a)}(0,u)}})))})),r}return Zu(e,[{key:"grow",value:function(t){var n;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ca(t.or):t.or}:void 0).to((function(t){return n=t})).whenOff((function(t){return n=wa(t)})),t.insert((function(t,e,r,i){return n(t,e,r,i)}))}}]),e}(lt))("navigation-agent"),Fi=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return e}(S),Ri=new $("nav-history",{byDefault:Ca((function(t){return new Di(t)}))}),Ei="wesib:navigation:data",Di=function(){function t(n){Ju(this,t),this._context=n,this._entries=new Map,this._lastId=0;var e=n.get(Xt);this._document=e.document,this._location=e.location,this._history=e.history,this._uid=btoa(String(Math.random()))}return Zu(t,[{key:"init",value:function(){var t=this,n=mf(this._history.state).data,e=this.newEntry({url:new URL(this._location.href),data:n,title:this._document.title});return this._entries.set(e.id,e),e.schedule((function(){e.enter("init"),t._history.replaceState(t._historyState(e),"")})),e}},{key:"newEntry",value:function(t){return new $i(this._context,++this._lastId,t)}},{key:"open",value:function(t,n){var e=t.page,r=e.title,i=void 0===r?"":r,u=e.url;this._history.pushState(this._historyState(t),i,u.href),this._enter("open",t,n)}},{key:"_enter",value:function(t,n,e){var r=e.it;this._entries.set(n.id,n);try{for(var i=r.next;i;i=i.next)this._forget(i)}finally{n.prev=r,r.next=n,n.schedule((function(){try{r.leave()}finally{n.enter(t)}})),e.it=n}}},{key:"replace",value:function(t,n){var e=this,r=n.it,i=t.page,u=i.title,o=void 0===u?"":u,a=i.url;this._history.replaceState(this._historyState(t),o,a.href),this._entries.set(t.id,t);var c=r.prev;c&&(t.prev=c,c.next=t),t.schedule((function(){try{r.leave()}finally{try{e._forget(r)}finally{t.enter("replace")}}})),n.it=t}},{key:"popState",value:function(t,n){var e=t.state;if(null==e)return null==this._history.state?this._changeHash(n):void 0;var r,i=n.it,u=mf(e),o=u.uid,a=u.data,c=u.id,s=o===this._uid&&null!=c?this._entries.get(c):void 0;return s?r=s:(r=this.newEntry({url:new URL(this._location.href),data:a,title:this._document.title}),i.transfer(r,"return"),this._entries.set(r.id,r),this._history.replaceState(this._historyState(r),"")),r.schedule((function(){try{i.leave()}finally{r.enter("return")}})),n.it=r,r}},{key:"hashChange",value:function(t){if(null==this._history.state)return this._changeHash(t)}},{key:"update",value:function(t,n){var e=t.it,r=new $i(this._context,++this._lastId,ro(ro({},e.page),{},{url:n}),e);return this._entries.set(r.id,r),this._history.replaceState(this._historyState(r),"",n.href),this._entries.delete(e.id),t.it=r}},{key:"_changeHash",value:function(t){var n=t.it,e=this.newEntry({url:new URL(this._location.href),data:null,title:this._document.title});try{n.transfer(e,"enter")}finally{this._history.replaceState(this._historyState(e),""),this._enter("enter",e,t)}return e}},{key:"_forget",value:function(t){this._entries.delete(t.id),t.forget()}},{key:"_historyState",value:function(t){var n=t.id,e=t.page.data;return io({},Ei,{uid:this._uid,id:n,data:e})}}],[{key:_,get:function(){return Ri}}]),t}(),$i=function(){function t(n,e,r,i){Ju(this,t),this._bsContext=n,this.id=e,this._status=0,this._update=lo,this._params=i?i._params:new Map;var u=this;this.page={get url(){return r.url},get title(){return r.title},get data(){return r.data},get visited(){return!!u._status},get current(){return 2===u._status},get:function(t){return u.get(t)},put:function(t,n){u.put(t,n)}}}return Zu(t,[{key:"get",value:function(t){var n=t[Oi],e=this._params.get(n);if(e)return e.get();var r=n.byDefault(this.page,this._newContext());return r&&this._init(n,r)}},{key:"put",value:function(t,n){var e=t[Oi],r=this._params.get(e);return r?(r.put(n),r.get()):this._init(e,e.create(this.page,n,this._newContext()))}},{key:"_newContext",value:function(){var t=new A(this._bsContext);return new(function(n){Iu(r,n);var e=Wu(r);function r(){var n;return Ju(this,r),(n=e.apply(this,arguments)).get=t.newValues().get,n}return r}(Fi))}},{key:"_init",value:function(t,n){return this._params.set(t,n),this.page.current&&n.enter&&n.enter(this.page,"init"),n.get()}},{key:"transfer",value:function(t,n){Ao(this._params.entries(),(function(e){var r=ju(e,2),i=r[0],u=r[1];if(u.transfer){var o=u.transfer(t.page,n);o&&t._params.set(i,o)}}))}},{key:"stay",value:function(t){Ao(this._params.values(),(function(n){return n.stay&&n.stay(t)}))}},{key:"enter",value:function(t){var n=this;this._status=2,Ao(this._params.values(),(function(e){return e.enter&&e.enter(n.page,t)}))}},{key:"leave",value:function(){this._status=1,Ao(this._params.values(),(function(t){return t.leave&&t.leave()}))}},{key:"forget",value:function(){Ao(this._params.values(),(function(t){return t.forget&&t.forget()})),this._params.clear()}},{key:"schedule",value:function(t){this._update=t}},{key:"apply",value:function(){var t=this._update;this._update=lo,t()}}]),t}(),Pi=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this,t,ro(ro({},r),{},{cancelable:!1}))).when=r.when,i.to=r.to,i}return e}(qu(Event)),ji=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this,t,ro(ro({},r),{},{cancelable:!0}))).when=r.when,i.from=r.from,i.to=r.to,i}return e}(qu(Event)),Mi=function(t){Iu(e,t);var n=Wu(e);function e(t,r){var i;return Ju(this,e),(i=n.call(this,t,ro(ro({},r),{},{cancelable:!0}))).from=r.from,i.to=r.to,i.reason=r.reason,i}return Zu(e,[{key:"when",get:function(){return"stay"}}]),e}(qu(Event)),zi=new $("navigation",{byDefault:Ca(kf)}),Ui=function(){function t(){Ju(this,t)}return Zu(t,[{key:U,value:function(){return this.on()}},{key:P,value:function(){return this.read()}},{key:"back",value:function(){this.go(-1)}},{key:"forward",value:function(){this.go(1)}},{key:"reload",value:function(){this.go()}}],[{key:_,get:function(){return zi}}]),t}(),Ki=Symbol("nav-link-render-schedule"),qi=["active",Yn],Ni=function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return e}(qu(Error)),Li=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"create",value:function(t,n){return{get:function(){return n},put:lo}}}]),e}(Ti)),Ii=function(){function t(n,e){Ju(this,t),this._navigation=n,this._loader=e,this._map=new Map}return Zu(t,[{key:Symbol.iterator,value:function(){return bo(Ro(this._map.values()))}},{key:"handle",value:function(){var t=this,n=Io(),e=Ho();return{get:function(){},put:function(n){t._add(n)},transfer:function(n,e){if("pretend"!==e){var r=t._transfer();return n.put(Li,r),r.handle()}},enter:function(r,i){if("init"!==i){e=Io().needs(n);var u=na((function(n){var i=new L,u=i.on(n);return t._loader(r).tillOff(e).to((function(t){return i.send(t)})).whenOff((function(t){void 0===t||t instanceof Ni||i.send({ok:!1,page:r,error:t})})),u})).share();Ao(t,(function(t){var n=t.fragment,e=t.receiver;return function(t,n){return n?t.thru_((function(t){return t.ok?ro(ro({},t),{},{fragment:(null!=n.tag?t.document.getElementsByTagName(n.tag)[0]:t.document.getElementById(n.id))||void 0}):t})):t}(u,n).to({supply:Io().needs(e.supply),receive:function(t,n){e.receive(t,n)}})}))}},leave:function(){e.off(new Ni("page left"))},stay:function(){n.off(new Ni("navigation cancelled"))},forget:function(){n.off(new Ni("page forgotten"))}}}},{key:"_add",value:function(t){var n=this,e=ro(ro({},t),{},{receiver:Bo(t.receiver)}),r=e.receiver.supply,i=this._map.get(r);i?i.push(e):(this._map.set(r,[e]),r.whenOff((function(){return n._map.delete(r)})))}},{key:"_transfer",value:function(){var n,e=new t(this._navigation,this._loader),r=Xu(this._map.entries());try{for(r.s();!(n=r.n()).done;){var i=ju(n.value,2),u=i[0],o=i[1];e._map.set(u,Array.from(o))}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"fragments",get:function(){var t,n=[],e=Xu(this);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(!r.fragment)return[];n.push(r.fragment)}}catch(t){e.e(t)}finally{e.f()}return n}}]),t}(),Bi=new oi("page-load-agent"),Wi=new ht("page-load-url",{byDefault:ho(lo)}),Vi=new $("page-loader",{byDefault:Ca($f)}),Gi=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.apply(this,arguments)}return Zu(e,[{key:"create",value:function(t,n,e){var r=new Ii(e.get(Ui),Df(e.get(Vi))),i=r.handle();return t.put(Li,r),i.put(n),i}}]),e}(Ti)),Hi=new $("page-cache-buster",{byDefault:Ca((function(t){return new Qi(t)}))}),"__wesib_app_rev__",Qi=function(){function t(n){Ju(this,t);var e=jf(n.get(Xt).document);if(e){var r=n.get(Ui);this.urlModifier=ca((function(t){return t.searchParams.set("__wesib_app_rev__",e)})),this.agent=ca((function(t,n){return t(new Request(n.url,n)).thru_((function(t){if(t.ok){var n=jf(t.document);if(n&&n!==e){var i=new URL(t.page.url.href);i.searchParams.set("__wesib_app_rev__",n),r.update(i),r.reload()}}return t}))}))}else this.urlModifier=ca(),this.agent=ca()}return Zu(t,null,[{key:_,get:function(){return Hi}}]),t}(),Ji={setup:function(t){t.provide({a:Wi,by:function(t){return t.urlModifier},with:[Qi]}),t.provide({a:Bi,by:function(t){return t.agent},with:[Qi]}),t.provide({a:Bi,by:Mf}),t.provide({a:Bi,by:Uf}),t.provide({a:Bi,by:Kf})}},Yi=function(){function t(){Ju(this,t)}return Zu(t,null,[{key:At,get:function(){return Ji}}]),t}(),t("f",Zi=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.call(this,"default-in-aspects")}return Zu(e,[{key:"upKey",get:function(){return this}}]),Zu(e,[{key:"grow",value:function(t){var n=t.context.get(nn),e=t.context.get(Vn);t.insert(t.seed.keepThru((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return sc.apply(void 0,r.concat([ue.to(e),re.to(n)]))})).tillOff(t.context.get(at)))}}]),e}(lt))),Xi=new vt("input-from-control",{byDefault:function(){return{}}}),tu=new $("component-style-producer",{byDefault:Ca((function(){return $s}))}),nu=new F("component-styp-renderer"),eu=new et("https://wesib.github.io/ns/element-id-class","elic","element-id-class"),ru=new $("unique-element-class",{byDefault:Wf}),iu=0,uu=new $("component-styp-format",{byDefault:function(t){return new au(t.get(Lt))}}),au=function(t){Iu(e,t);var n=Wu(e);function e(t){var r;return Ju(this,e),(r=n.call(this)).context=t,r}return Zu(e,[{key:"format",value:function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.parent,e=void 0===n?document.head:n;return ro(ro({},t),{},{scheduler:Fs(e,t.scheduler),addSheet:function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.append(document.createTextNode("")),e.appendChild(t),new Nr(t)}})}(this.config(t))}},{key:"config",value:function(t){return If(this,t,{when:"connected"})}}]),e}(ou=function(){function t(){Ju(this,t)}return Zu(t,[{key:"produce",value:function(t,n){var e=this.newProducer(t,n),r=Io();return this.context.whenSettled((function(){e().needs(r).cuts(r)})),r}},{key:"newProducer",value:function(t,n){var e,r=this,i=Is(t),u=Lo(this.context);return e=function(){return r.context.get(tu)(i,r.format(n)).needs(u)},u.whenOff((function(){e=ho(u)})),function(){return e()}}},{key:"renderer",value:function(t){var n=this.context.get(Gn,{or:null}),e=t.renderer,r=ao(oo(e),this.context.get(nu)),i=t.hostSelector?hs(t.hostSelector)[0]:void 0;return r.add(n?function(t){return{order:-100,render:function(n,e){var r=n.selector;if(r.length){if(t){var i=ju(Vf(r),2),u=i[0],o=i[1];o&&(r=o.length?[{u:[[":","host",Gf(o,t)]]}].concat(Uu(u)):[{u:[[":","host",[t]]]}].concat(Uu(u)))}}else r=[t||{u:[[":","host"]]}];n.render(e,{selector:r})}}}(i):function(t){return{order:-100,render:function(n,e){var r=n.selector;if(r.length){var i=ju(Vf(r),2),u=i[0],o=i[1];r=o&&o.length?[].concat(Uu(Gf(o,t)),Uu(u)):[t].concat(Uu(u))}else r=[t];n.render(e,{selector:r})}}}(i||{c:[this.context.get(ru)]})),uo(r)}}],[{key:_,get:function(){return uu}}]),t}()),cu=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.when,o=void 0===u?"settled":u;return Ju(this,e),(r=n.call(this)).context=t,r.when=o,r}return Zu(e,[{key:"format",value:function(t){return Ds(this.config(t))}},{key:"config",value:function(t){return If(this,t,{when:this.when})}}]),e}(ou),su={setup:function(t){t.provide({a:tu,is:Ps})}},fu=function(){function t(){Ju(this,t)}return Zu(t,null,[{key:At,get:function(){return su}}]),t}(),lu=new(function(t){Iu(e,t);var n=Wu(e);function e(){return Ju(this,e),n.call(this,"theme-style")}return Zu(e,[{key:"grow",value:function(t){var n,e=new Map,r=Xu(t.seed);try{for(r.s();!(n=r.n()).done;){var i=n.value,u=void 0,o=void 0,a=void 0;"function"==typeof i?(u=o=i,a=!0):(u=i.style,o=i.provide.bind(i),a=!1);var c=e.get(u);if(c){var s=ju(c,2),f=s[0],l=s[1];e.set(u,[a?Qf(o,f):Qf(f,o),a||l])}else e.set(u,[o,a])}}catch(t){r.e(t)}finally{r.f()}!e.size&&t.hasFallback||t.insert((function(t){var n=e.get(t);if(!n)return t;var r=ju(n,2),i=r[0];return r[1]?i:Qf(t,i)}))}}]),e}(C)),hu=new $("theme",{byDefault:Ca((function(t){return new du(t.get(lu))}))}),t("T",vu=function(){function t(){Ju(this,t)}return Zu(t,[{key:"ref",value:function(t){return t(this.root)}}],[{key:_,get:function(){return hu}}]),t}()),du=function(t){Iu(e,t);var n=Wu(e);function e(t){var r,i;return Ju(this,e),(r=n.call(this))._styles=t,r.root=new Hr(void 0,Qr,[],i?function(t){return Qc(t,i)}:void 0),r._rules=new Map,r}return Zu(e,[{key:"style",value:function(){for(var t=this,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return Is.apply(void 0,Uu(e.reduce(i,[])));function i(n,e){var r=t._rules.get(e);if(r)n.push(r);else{var i=t._styles(e)(t);t._rules.set(e,i),n.push(i)}return n}}}]),e}(vu),t("E",pu=new et("https://wesib.github.io/examples","bex","wesib-examples")),t("b",yu=Yr.by({$:"settings"},{$color:new ar({r:161,g:185,b:142}),$bgColor:new ar({r:40,g:43,b:36}),$fontFace:"'Exo 2', sans-serif",$fontSize:kr.of(1,"em"),$lineHeight:1.2,$fontWeight:"400",$linkFontWeight:"600",$layoutBreakpoint:mr.of(576,"px")})),t("F",gu=Yr.by({$:"settings:form"},(function(t){return Zr.by({global:yu},t).read().keepThru(rl)}))),mu=function(){var t,n=function(){function t(n){Ju(this,t),this._context=n}return Zu(t,[{key:"style",value:function(){return this._context.get(vu).style(il)}}]),t}();return i([Hf()],n.prototype,"style",null),n=i([Da(["in-error",pu],ec("code"),(t=function(t){var n=t.control.control,e=t.aspects,r=t.context;return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ja(n);return new qn(t,n,e)}(r,"code").read().keepThru_((function(t){return t?t.trim().split(/\s+/):[]})).keepThru((function(t){return n.convert(Ze.to(r.element),e).setup(tr,(function(n){n.add($c()),n.add(function(){var t,n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.mark,i=e.when;return t=i?Array.isArray(i)?i.length?function(t){return i.every((function(n){return t.has(n)}))}:Dc:function(t){return t.has(i)}:Dc,n=r?Array.isArray(r)?r.length?r:rr:[r]:rr,function(e){return e.aspect(Ue).read().keepThru((function(e){return t(e)?_o.apply(void 0,Uu(n)):_o()}))}}({when:t}))}))}))},Da({define:function(n){n.whenComponent((function(n){oa({parent:(0,n.get(di).up)().keepThru_((function(t){return t?sa(t.get(Xi)):ko({})})),aspects:n.get(Zi)}).keepThru_((function(e){var r=ju(e.parent,1)[0],i=ju(e.aspects,1)[0];if(r.control){var u=t({control:r,context:n,aspects:i});if(u)return u instanceof ae?_o(u):sa(u)}return _o()})).consume((function(t,e){if(t){var r=Lf(n,t);return(e||Lo(t)).needs(r),r}}))}))}})))],n)}(),ku="bex:in-error",_u=["has-error",ne],wu=function(){var t=function t(){Ju(this,t)};return t=i([Ea({needs:[mu]})],t)}(),bu=function(){var t=function t(){Ju(this,t)};return t=i([Da(["main",pu],qf({onResponse:function(t){var n=t.response,e=t.range;n.ok||(e.deleteContents(),null==n.ok?e.insertNode(document.createTextNode("Loading...")):e.insertNode(document.createTextNode("Error. ".concat(n.error))))}}))],t)}(),xu=function(){var t=function(){function t(n){Ju(this,t),this._theme=n.get(vu)}return Zu(t,[{key:"style",value:function(){return this._theme.style(ol)}}]),t}();return i([Hf()],t.prototype,"style",null),t=i([Da(["nav",pu],Tf(),_f())],t)}(),Su="bex:nav",Au=function(){var t=function(){function t(n){Ju(this,t),this._context=n}var n;return Zu(t,[{key:"style",value:(n=$u(regeneratorRuntime.mark((function t(){var n,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._context.get(bt).whenDefined(bu);case 2:return n=t.sent,e=n.elementDef.name,t.abrupt("return",this._context.get(vu).style(ll(e)));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}]),t}();return i([Hf()],t.prototype,"style",null),t=i([Da({name:["container",pu],feature:{needs:[bu,xu]}})],t)}(),Ou="bex:container",Tu=function(){var t=function t(){Ju(this,t)};return t=i([Ea({needs:[Au,Yi,fu]})],t)}(),Cu=function(){var t=function t(){Ju(this,t)};return t=i([Ea({setup:function(t){t.perComponent({a:ou,as:cu})},init:function(t){t.whenReady((function(){$s(t.get(vu).style(nl),Ds())}))}})],t)}(),t("o",Fu=function(){var t=function t(){Ju(this,t)};return t=i([Ea({needs:[Cu,wu,Tu]})],t)}()),t("q",function(){for(var t=Gt.create(),n=Qa(t),e=n.bootstrapContext,r=n.complete,i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];var a=1===u.length?u[0]:Ha(u);return e.get(Dn).request(a),e.get(Sn.of(a)).to((function(t){t.init().then(r).catch(console.error)})),e}(Fu))}}}));//# sourceMappingURL=common.04d9c0f5.s.js.map
