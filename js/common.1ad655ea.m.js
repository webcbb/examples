import{a2 as e,a3 as t,a4 as n,a5 as o,a6 as s,J as r,a7 as a,a8 as i,L as d,a9 as l,aa as c,$ as u,ab as h,t as $,D as g,f,R as p,ac as b}from"./lib.b60fe0fe.m.js";import{R as m,P as x,C as y,i as v,H as C,I as _,D as k,T as w,A as S,F as z,a as F,b as W,N as L,p as D,B as H,c as N,d as E,e as B,f as R,g as T,S as V,h as A}from"./wesib.bbda94b4.m.js";const I=new e("https://wesib.github.io/examples","bex","wesib-examples"),O=t.by({$:"settings"},{$color:new n({r:161,g:185,b:142}),$bgColor:new n({r:40,g:43,b:36}),$fontFace:"'Exo 2', sans-serif",$fontSize:o.of(1,"em"),$lineHeight:1.2,$fontWeight:"400",$linkFontWeight:"600",$layoutBreakpoint:s.of(576,"px")});function j({$layoutBreakpoint:e}){return{"@media:sm":`(max-width: ${e})`}}function J(e){const t=e.ref(O).read.keep,{root:{rules:n}}=e;return r(n.add({e:"a"},t.thru(M)),n.add({e:"a",s:":visited"},t.thru(M)),n.add({e:"a",s:":hover"},{textDecoration:"underline"}),n.add({e:"a",s:":active"},{textDecoration:"underline dotted"}),n.add({e:"a",s:":focus"},{textDecoration:"underline dotted"}))}function M({$color:e,$linkFontWeight:t}){return{color:e,fontWeight:t,textDecoration:"none"}}function P(e){const t=e.ref(O).read.keep;return r(e.root.add(t.thru(U)).add(t.thru(j)),e.style(J))}function U({$color:e,$fontFace:t,$fontSize:n,$lineHeight:o,$fontWeight:s}){return{color:e,font:`normal ${s} ${n}/${o} ${t}`}}function q(e){const t=e.ref(O).read.keep,{root:{rules:n}}=e;return r(n.add({e:"html"},{height:"100%",margin:0,padding:0}),n.add({e:"body"},t.thru(G)),e.style(P))}function G({$bgColor:e}){return{backgroundColor:e,height:"100%",margin:0,padding:0}}const K=t.by({$:"settings:form"},e=>a.by({global:O},e).read.keep.thru(Q));function Q({global:{$color:e,$bgColor:t,$fontFace:n,$fontSize:o,$lineHeight:r,$fontWeight:a}}){return{$color:e,$bgColor:t.hsl.set(({l:e})=>({l:.8*e})),$roBgColor:t.hsl.set(({l:e})=>({l:.94*e})),$fontFace:n,$fontSize:o,$errorFontSize:o.mul(.8),$lineHeight:r,$fontWeight:a,$borderColor:t,$marginV:o.div(4),$marginH:o.div(4),$paddingV:o.div(2),$paddingH:o,$borderW:s.of(1,"px")}}let X=class{constructor(e){this._context=e,this._validity=d(),this._cssClasses=new l,this._codes=new Set,v(e)(e=>this.validity=e),this._context.get(C).get(_).consume(({control:e})=>e&&e.aspect(c).track((e,t)=>this.updateCssClasses(e,t)))}get validity(){return this._validity}set validity(e){const t=this._validity;this._validity=e,this._context.updateState("validity",e,t)}updateCssClasses(e,t){this._cssClasses.clear(),this._cssClasses.delta(e,t),this._context.updateState("cssClasses",this._cssClasses,this._cssClasses)}setCode(e){this._codes=new Set(e.trim().split(/\s+/))}render(){const e=this._context.element,{classList:t}=e,n=u.name(Y,this._context.get(k)),o={add:e=>t.add(e),delete:e=>t.remove(e)};return()=>{h(this._codes,e=>!this.validity.has(e))?t.remove(n):t.add(n),this._cssClasses.redelta(o).undelta()}}style(){return this._context.get(w).style(Z)}};i([S("code")],X.prototype,"setCode",null),i([m()],X.prototype,"render",null),i([x()],X.prototype,"style",null),X=i([y(["in-error",I])],X);const Y=["has-error",I];function Z(e){const t=e.ref(K).read.keep,{root:{rules:n}}=e,s=o.of(4,"px");return r(n.add({u:[":","host"],$:"bex:in-error"},t.thru(({$color:e,$errorFontSize:t})=>({display:"none",fontSize:t,padding:t.div(2),borderLeft:`${s} dotted ${e}`,paddingLeft:t.sub(s)}))),n.add({u:[":","host",{c:Y,u:[":","not",{c:"inap-has-focus"}]}],$:"bex:in-error"},{display:"block"}),n.add({u:[":","host",{c:Y,u:[[":","not",{u:["code","~=","missing"]}],[":","not",{u:["code","~=","incomplete"]}]]}],$:"bex:in-error"},{display:"block"}))}let ee=class{};ee=i([z({needs:[F,X,W]})],ee);let te=class{constructor(e){this._context=e,this._response=$(),this._response.on((t,n)=>e.updateState("response",t,n));const t=e.get(L);e.whenOn(n=>{t.read.once(t=>{t.put(D,{fragment:{tag:e.element.tagName},receiver:{supply:n,receive:(e,t)=>this._response.it=t}})})})}render(){const e=this._context.get(H).document,t=e.createRange();return t.selectNodeContents(this._context.element),()=>{const n=this._response.it;if(n)if(t.deleteContents(),n.ok){const o=e.createDocumentFragment(),{fragment:s}=n;s&&(N(s,o),t.insertNode(o))}else null==n.ok?t.insertNode(e.createTextNode("Loading...")):t.insertNode(e.createTextNode(`Error. ${n.error}`))}}};function ne({$fontSize:e}){return{flex:"1 1 auto",padding:0,margin:`0 0 0 ${e.div(2)}`}}i([m()],te.prototype,"render",null),te=i([y(["main",I])],te);let oe=class{constructor(e){this._theme=e.get(w);const t=e.get(k),n=u.name(ie,t),o=e.get(E),s=e.get(L);e.whenOn(e=>{const t=o.select("a",{all:!0}),r=new Map;t.track.tillOff(e)((t,o)=>{o.forEach(e=>{const t=r.get(e);t&&(r.delete(e),t.off())}),t.forEach(t=>{const o=t.element,a=new g(o).on("click").instead(()=>{o.classList.contains(n)||s.open(o.getAttribute("href")||"")}).needs(e);r.set(t,a)})}),f({links:t,page:s})({supply:e,receive(e,{links:[t],page:[o]}){const s=se(o.url);let r,a="";t.forEach(e=>{const t=e.element,o=se(new URL(t.href));t.classList.remove(n),s.startsWith(o)&&a.length<o.length&&(r=t,a=o)}),r&&r.classList.add(n)}})})}style(){return this._theme.style(re)}};function se(e){const t=e.pathname;return t.endsWith("/")?t:t+"/"}i([x()],oe.prototype,"style",null),oe=i([y(["nav",I])],oe);function re(e){const t=e.ref(O).read.keep,{root:{rules:n}}=e;return r(n.add({u:[":","host"],$:"bex:nav"},t.thru(ae)),n.add({u:[":","host"],$:"bex:nav"},t.thru(e=>({flex:"0 1 200px",height:"100%",background:de(e)}))),n.add({u:[":","host"],$:["bex:nav","@media:sm"]},{flex:"0 1 100%"}),n.add([{u:[":","host"],$:"bex:nav"},{e:"a",$:"bex:nav"}],t.thru(le)),n.add([{u:[":","host"],$:"bex:nav"},{e:"a",c:ie,$:"bex:nav"}],t.thru(ce)))}function ae({$fontSize:e}){return{padding:0,margin:`0 ${e.div(2)} 0 0`}}const ie=["nav-active",I];function de({$bgColor:e}){return e.hsl.set(({l:e})=>({l:.8*e}))}function le(e){const{$fontSize:t}=e;return{display:"block",margin:0,padding:`${t.div(2)} ${t}`,border:0,outline:0,background:de(e)}}function ce({$fontSize:e,$color:t,$bgColor:n}){const s=o.of(4,"px");return{background:n,borderLeft:`${s} solid ${t}`,paddingLeft:e.sub(s)}}let ue=class{constructor(e){this._context=e}async style(){const{elementDef:{name:e}}=await this._context.get(B).whenDefined(te);return this._context.get(w).style(function(e){return t=>{const n=t.ref(O).read.keep,{root:{rules:o}}=t;return r(o.add({u:[":","host"],$:"bex:container"},{height:"100%",display:"flex",flexFlow:"row wrap",alignItems:"stretch",alignContent:"flex-start"}).add(n.thru(j)),o.add({u:[":","host"],$:["bex:container","@media:sm"]},{height:"auto"}),o.add([{u:[":","host"],$:"bex:container"},{e,$:"bex:container"}],n.thru(ne)))}}(e))}};i([x()],ue.prototype,"style",null),ue=i([y({name:["container",I],feature:{needs:[te,oe]}})],ue);let he=class{};he=i([z({needs:[ue,F,R,T,V,W]})],he);let $e=class{};$e=i([z({needs:W,init:function(e){e.whenReady(()=>{p(e.get(w).style(q))})}})],$e);let ge=class{};function fe(e){const t=e.ref(K).read.keep,{root:{rules:n}}=e;return r(n.add({e:"input"},t.thru(pe)),n.add({e:"input",s:"[readonly]"},t.thru(be)),n.add({e:"input",s:"[disabled]"},t.thru(be)),n.add({e:"input",s:":focus"},t.thru(me)),n.add({e:"input",c:["inap-invalid","inap-touched"]},t.thru(xe)),n.add({e:"input",c:["inap-missing","inap-touched"]},{outlineStyle:"dotted"}),n.add({e:"input",c:["inap-incomplete","inap-touched"]},{outlineStyle:"dotted"}))}function pe({$color:e,$fontFace:t,$fontSize:n,$lineHeight:o,$fontWeight:s,$marginV:r,$marginH:a,$paddingV:i,$paddingH:d,$bgColor:l,$borderColor:c,$borderW:u}){return{color:e,font:`normal ${s} ${n}/${o} ${t}`,padding:`${i} ${d}`,margin:`${r} ${a}`,backgroundColor:l,border:"0 none",outline:`${u} solid ${c}`,boxShadow:"inset 1px 1px 2px -2px black",boxSizing:"border-box",width:"100%"}}function be({$roBgColor:e}){return{backgroundColor:e}}function me({$color:e,$borderColor:t}){return{outlineColor:b(t,e,.5)}}function xe({$color:e,$borderW:t,$borderColor:n}){return{outline:`${t.mul(2)} dashed ${b(n,e,.25)}`}}ge=i([z({needs:[$e,ee,he]})],ge);const ye=A(ge);export{ge as A,P as D,I as E,K as F,fe as I,O as T,ye as e,pe as i,be as r};
//# sourceMappingURL=common.1ad655ea.m.js.map
