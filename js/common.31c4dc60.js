import{c as t,h as e,_ as n}from"./lib.03dbf718.js";function s(t){return t}function r(){}function i(t){return null!=t}function o(t){return()=>t}function u(t){let e=()=>(e=o(t()))();return()=>e()}function c(...t){return()=>t}const a=Symbol("next-call");function h(t){const e=()=>e;return e[a]=(e,n)=>t(e,n),e}function l(t){return h((e,n)=>e.pass(n,t))}function d(...t){return h((e,n)=>e.call(n,t))}const f=h(t=>t.skip());function p(t){return t[Symbol.iterator]()}function g(t){return function*(){yield*t}()}function y(t,e){const n={[Symbol.iterator]:t};if(!e)return n;const s=n;return s.reverse=e,s}function _(t,e){for(const n of t)e(n)}function m(t){return!!p(t).next().done}function b(t){return p(t).next().value}function w(t,e,n){let s=n;for(const n of t)s=e(s,n);return s}function v(t,e){return y((function*(){for(const n of t)e(n)&&(yield n)}))}function x(t,e=s){return y((function*(){for(const n of t)yield*e(n)}))}function k(t,e){return y((function*(){for(const n of t)yield e(n)}))}function O(t){return y((function*(){for(let e=0;e<t.length;++e)yield t[e]}),()=>function(t){return y((function*(){for(let e=t.length-1;e>=0;--e)yield t[e]}))}(t))}const $={*[Symbol.iterator](){},reverse(){return this}};function S(t){return O(Reflect.ownKeys(t))}function T(t){const e=S(t);function n(e){return k(e,e=>[e,t[e]])}return y(()=>p(n(e)),()=>n(e.reverse()))}const C=Symbol("context-key");class F{constructor(t){this.name=t}get[C](){return this}toString(){return`ContextKey(${this.name})`}}class A extends F{constructor(t){super(t.name+":seed")}get seedKey(){return this}grow(t){const{seeder:e,seed:n}=t;e.isEmpty(n)&&t.hasFallback||t.insert(n)}}class j extends Error{constructor(t,e="There is no value with key "+t){super(e),this.key=t}}function D(t){if(function(t){return"by"in t}(t)){if(!E(t))return t;const{a:e,by:n,with:s}=t;return{a:e,by:t=>n(...s.map(e=>t.get(e)))}}if(function(t){return"is"in t}(t)){const{a:e,is:n}=t;return{a:e,by:o(n)}}if(function(t){return"via"in t}(t)){const{a:e,via:n}=t;return{a:e,by:t=>t.get(n)}}if(function(t){return"as"in t}(t)){if(function(t){return!("a"in t)}(t)&&(t=function(t){return Object.assign(Object.assign({},t),{a:t.as})}(t)),!E(t)){const{as:e}=t;return{a:t.a,by:t=>new e(t)}}const{as:e,with:n}=t;return{a:t.a,by:t=>new e(...n.map(e=>t.get(e)))}}throw new TypeError("Malformed context value specifier: "+JSON.stringify(t))}function E(t){return"with"in t}class R{}class z{constructor(t){this._seeds=new Map,this._initial=null==t?r:"function"==typeof t?t:e=>t.get(e)}provide(t){const{a:{[C]:{seedKey:e}},by:n}=D(t),[s]=this._seeding(e);return s.provide(n)}_seeding(t){const e=this._seeds.get(t);if(e)return e;const n=t.seeder(),s=[n,e=>n.seed(e,this._initial(t,e))];return this._seeds.set(t,s),s}seed(t,e){const[,n]=this._seeding(e);return n(t)}seedIn(t,e){return this.newValues(e).get.bind(t)}newValues(t=!0){if(!t&&this._nonCachedValues)return this._nonCachedValues;const e=new Map,n=this;class s extends R{get({[C]:s},i){const o=e.get(s);if(null!=o)return o;const[u,c]=function(t,e,s={}){const[i,o]=function(t,e){const{seedKey:s}=e,[r,i]=n._seeding(s);if(s!==e)return[r,t.get(s)];return[r,i(t)]}(t,e);let u;const c="or"in s;let a=r;const h={context:t,key:e,seeder:i,seed:o,hasFallback:c,get or(){return s.or},insert(t){u=t},fillBy:t=>(t(h),u),setup(t){const e=a;a=n=>{e(n),t(n)}}};if(e.grow(h),null!=u)return[u,a];if(!c)throw new j(e);return[s.or]}(this,s,i);return t&&c&&(e.set(s,u),c({key:s,context:this,registry:n})),u}}return t?new s:this._nonCachedValues=new s}append(t){return new z((e,n)=>{const[s,r]=this._seeding(e);return s.combine(r(n),t.seed(n,e),n)})}}class U{constructor(){this._providers=[]}provide(t){return this._providers.push(t),()=>{const e=this._providers.indexOf(t);e>=0&&this._providers.splice(e,1)}}seed(t,e=function(){return $}()){return x([e,K(t,this._providers)])}isEmpty(t){return m(t)}combine(t,e){return x([t,e])}}class P extends A{seeder(){return new U}}class M extends F{constructor(t,{seedKey:e}={}){super(t),this.seedKey=e||new P(this)}}function K(t,e){return v(k(e.map(e=>u(e.bind(void 0,t))),t=>t()),i)}class q extends M{constructor(t,{seedKey:e,byDefault:n=c()}={}){super(t,e),this.byDefault=n}grow(t){const e=Array.from(t.seed);if(e.length)t.insert(e);else if(!t.hasFallback){const e=this.byDefault(t.context,this);e&&t.insert(Array.from(e))}}}class N{constructor(){this._providers=[]}provide(t){return this._providers.unshift(t),()=>{const e=this._providers.lastIndexOf(t);e>=0&&this._providers.splice(e,1)}}seed(t,e){const{length:n}=this._providers;if(!n)return e||r;const s=e=>u(e.bind(void 0,t));if(!e&&1===n)return s(this._providers[0]);const i=this._providers.map(s);return e&&i.push(e),L(i)}isEmpty(t){return null==t()}combine(t,e){return t===r?e:e===r?t:L([e,t])}}function L(t){return u(()=>{for(const e of t){const t=e();if(null!=t)return t}})}class B extends A{seeder(){return new N}}class I extends F{constructor(t,{seedKey:e}={}){super(t),this.seedKey=e||new B(this)}}class W extends I{constructor(t,{seedKey:e,byDefault:n=r}={}){super(t,{seedKey:e}),this.byDefault=n}grow(t){const e=t.seed();null!=e?t.insert(e):t.hasFallback||t.insert(this.byDefault(t.context,this))}}const V=Symbol("after-event");function G(t){return V in t}const H=Symbol("events-supply");class Q{constructor(t=r){this._off=e=>{this._whenOff=t=>t(e),this._off=r,t(e)},this._whenOff=t=>{const e=this._off;this._off=n=>{e(n),t(n)}}}get isOff(){return this._off===r}get[H](){return this}off(t){return this._off(t),this}whenOff(t){return this._whenOff(t),this}cuts(t){return J(t).needs(this),this}needs(t){return J(t).whenOff(t=>this._off(t)),this}}function J(t){return t[H]}function Z(t){return new Q(t)}function X(t){let e;return e="function"==typeof t?{supply:Z(),receive(e,...n){t(...n)}}:{supply:t.supply||Z(),receive(e,...n){this.supply.isOff||t.receive(e,...n)}},e.supply.whenOff(()=>e.receive=r),e}function Y(t){let e=function n(s){let r=t;const i=[];e=t=>i.push(t);try{for(;;){r=tt(r,s);const t=i.shift();if(!t)break;s=t}}finally{e=n}};return(...t)=>e(t)}function tt(t,e){const n=[];for(const s of t){const t=n.length;n.push(s);const r={onRecurrent(e){n[t]=X({supply:s.supply,receive(t,...n){e(...n)}})}};s.receive(r,...e)}return n}class et{constructor(){const t=this._rcs=new Set;this.send=Y(t),this[H]=Z(()=>{t.clear(),delete this._rcs})}get size(){return this._rcs?this._rcs.size:0}on(t){const e=X(t),n=e.supply.needs(this),{_rcs:s}=this;return s&&!n.isOff&&(s.add(e),n.whenOff(()=>s.delete(e))),n}done(t){return J(this).off(t),this}}const nt=Symbol("on-event");function st(t){return nt in t}class rt extends Q{get isOff(){return!0}off(){return this}whenOff(t){return t(),this}cuts(t){return J(t).off(),this}needs(){return this}}const it=new rt;function ot(){return it}function ut(t){const e=X(t);let n=Y([e]);return e.supply.whenOff(()=>n=r),(...t)=>n(...t)}function ct(t){return e=>t.to({supply:e.supply,receive:(t,...n)=>{e.receive(t,...n),e.supply.off()}})}function at(t){const e=new et;let n,s;return r=>{if(e.size||(s=[],n=Z(()=>s=void 0),t.to({supply:n,receive(t,...n){s&&(e.size?s=void 0:s.push(n)),e.send(...n)}})),r.supply.needs(n),e.on(r).whenOff(t=>{e.size||n.off(t)}),s){const t=ut(r);s.forEach(e=>t(...e))}}}function ht(t,e){return n=>{const s=[];t.to({supply:n.supply,receive(t,...i){const o=(i,u)=>{const c=i>=e.length;++i;const h=s[i];if(h){const t=h.supply;return h.supply=u,[h.chain,t]}const l=i<e.length?e[i]:r,d={chain:{call(t,e){f(t(...e),e)},pass(t,e){f(t(e),[e])},skip(){d.supply.off()},onEvent(t,e){const n=Z().needs(d.supply);e[nt]().to({supply:n,receive(e,...s){f(t(...s),s,n)}})}},supply:u};return s[i]=d,[d.chain,ot()];function f(e,s,r=d.supply){const[u,h]=o(i,Z().needs(r));try{"function"==typeof(f=e)&&a in f?e[a](u,l):c?n.receive(t,...s):u.pass(l,e)}finally{h.off()}var f}},[u,c]=o(0,Z().needs(n.supply));try{u.call(e[0],i)}finally{c.off()}}})}}function lt(t,e,n){return s=>{n?t.to({supply:Z().needs(e).cuts(n),receive:s.receive.bind(s)}):(s.supply.needs(e),t.to(s))}}function dt({supply:t}){t.off()}class ft{constructor(t){this._on=t}get F(){return this.to.bind(this)}[nt](){return this}to(t){if(!t)return this;const e=X(t),{supply:n}=e;return n.isOff||this._on(e),n}then(t,e){return function(t,e,n){return new Promise((s,r)=>{ct(t)({supply:Z(n?t=>{try{s(n(t))}catch(t){r(t)}}:r),receive:e?(t,...n)=>{try{s(e(...n))}catch(t){r(t)}}:(t,e)=>s(e)})})}(this,t,e)}once(t){return(this.once=pt(ct(this)).F)(t)}tillOff(t,e){return pt(lt(this,t,e))}consume(t){let e=ot();const n=Z(t=>e.off(t));return this.to({supply:n,receive(n,...s){const r=e;try{e=J(t(...s)||ot())}finally{e!==r&&r.off()}}}),n}share(){return pt(at(this))}thru(...t){return this.thru_(...t).share()}thru_(...t){return pt(ht(this,t))}}function pt(t){return new ft(t)}function gt(){throw new Error("No events to send")}class yt extends ft{constructor(t,e=gt){super(t),this._rcn=0,this._or=e}get F(){return this.to.bind(this)}[V](){return this}to(t){if(!t)return this;let e=r;const n=X(t);if(n.supply.isOff)return n.supply;const s=Z().needs(n.supply);let i=!1;return this._on({supply:s,receive:(t,...n)=>{i=!0,this._last=n,e(t,...n)}}),++this._rcn,s.isOff&&!i||(n.receive({onRecurrent(t){e=(e,...n)=>t(...n)}},...this._last||(this._last=this._or())),e=(t,...e)=>n.receive(t,...e)),s.whenOff(t=>{--this._rcn||(this._last=void 0),n.supply.off(t)}),s}once(t){return(this.once=_t(ct(this)).F)(t)}tillOff(t,e){return _t(lt(this,t,e))}share(){return _t(at(this))}keepThru(...t){return this.keepThru_(...t).share()}keepThru_(...t){return _t(ht(this,t))}}function _t(t,e){return new yt(t,e)}function mt(t,e){return _t(e=>t[nt]().to(e),e)}function bt(t,e){return G(t)?t[V]():mt(t,e)}function wt(t){const e=Object.keys(t);return _t((function(n){const{supply:s}=n,i=ut(n);let o=r;const u={};e.forEach(e=>{s.needs(t[e][V]().to((...t)=>{u[e]=t,o()}).needs(s))}),s.isOff||(o=()=>i(u))}),(function(){const n={};return e.forEach(e=>bt(t[e]).once((...t)=>n[e]=t)),[n]})).share()}function vt(...t){return _t((function(e){const{supply:n}=e,s=ut(e);let i=r;const o=[];t.forEach((t,e)=>{n.needs(t[V]().to((...t)=>{o[e]=t,i()}).needs(n))}),n.isOff||(i=()=>s(...o))}),(function(){const e=[];return t.forEach(t=>bt(t).once((...t)=>e.push(t))),e})).share()}function xt(...t){return _t(r,o(t))}function kt(t){return h((e,n)=>e.onEvent(n,bt(t)))}class Ot extends et{on(t){return(this.on=pt(t=>super.on(t)).F)(t)}[nt](){return this.on()}}const $t=pt(dt);function St(t){return st(t)?t[nt]():t[V]()}function Tt(...t){return t.length?pt(e=>{const{supply:n}=e;let s=t.length;const r=t=>{--s||n.off(t)},i=(t,...n)=>{e.receive(t,...n)};t.forEach(t=>St(t).to({supply:Z(r).needs(n),receive:i}))}).share():$t}function Ct(t){return pt(e=>{const{supply:n}=e,s=ut(e),r=Z();let i=0;const o=St(t).tillOff(n,r).thru_(t=>(++i,l(t)));let u=[],c=1,a=0;r.whenOff(t=>{i||n.off(t)}),function(t){return pt(e=>{const{supply:n}=e,s=ut(e);let r=0;t[nt]().to({supply:n,receive(t,e){const i=++r;Promise.resolve().then(()=>e).then(t=>s(t,i),t=>n.off(t))}})})}(o).to({supply:n,receive(t,n,o){const h=o-c;if(u[h]=n,++a,a>h){let t;a===u.length?(t=u,u=[]):t=u.splice(0,h+1),c+=t.length,a-=t.length,i-=t.length,s(...t),!i&&r.isOff&&e.supply.needs(r)}}})})}function Ft(t){let e=n=>{t.then(()=>e(n),()=>e(n))};return t.then(t=>{e=function(t){return e=>{try{ut(e)(t),e.supply.off()}catch(t){e.supply.off(t)}}}(t)}).catch(t=>{var n;n=t,e=({supply:t})=>t.off(n)}),pt(t=>e(t))}function At(t){return Array.isArray(t)?t:[t]}class jt{constructor(t){this._drop=t,this.emitter=new Ot,this._nested=new Map,this.emitter.on((t,e,n)=>{const s=t[0],r=this._nested.get(s);r&&r.emitter.send(t.slice(1),e,n)})}on(t){const e=this.emitter.on(t);return Z(t=>{e.off(t),this._dropIfEmpty()}).needs(e)}nest(t,e){const n=this._nested.get(t);if(n||e)return n;const s=new jt(()=>this._remove(t));return this._nested.set(t,s),s}done(t){for(const e of this._nested.values())e.done(t);this.emitter.done(t)}_remove(t){this._nested.delete(t),this._dropIfEmpty()}_dropIfEmpty(){!this._nested.size&&this.emitter.size<=1&&this._drop()}}class Dt{constructor(){this._root=new jt(r)}on(t,e){return this._entry(t).on(e)}send(t,e,n){this._root.emitter.send(t,e,n)}done(t,e){const n=this._entry(t,!0);n&&n.done(e)}_entry(t,e){let n=this._root;for(const s of t){const t=n.nest(s,e);if(!t)return;n=t}return n}}class Et{constructor(t,e){this._trackers=t,this._path=e,this.update=(t,e,n)=>{this._trackers.send([...this._path,...At(t)],e,n)}}get _tracker(){return this}onUpdate(t){return(this.onUpdate=pt(t=>this._trackers.on(this._path,t)).F)(t)}[nt](){return this.onUpdate()}track(t){return(t=At(t)).length?new Et(this._trackers,[...this._path,...t]):this}done(t){this._trackers.done(this._path,t)}}class Rt{constructor(){this._tracker=new Et(new Dt,[])}onUpdate(t){return(this.onUpdate=this._tracker.onUpdate().F)(t)}[nt](){return this.onUpdate()}get update(){return this._tracker.update}track(t){const e=this._tracker.track(t);return e===this._tracker?this:e}done(t){this._tracker.done(t)}}class zt{constructor(){this._by=ot()}read(t){return(this.read=_t(t=>{return this.on({supply:(e=t).supply,receive(t,n){e.receive({onRecurrent(e){t.onRecurrent(t=>e(t))}},n)}});var e},()=>[this.it]).F)(t)}[nt](){return this.on()}[V](){return this.read()}by(t,e){const n=t=>(G(t)?t[V]():t[nt]()).to(t=>this.it=t);if(this.byNone(),e){const s=t;this._by=St(s).consume((...t)=>{const s=e(...t);if(s)return n(s)})}else{const e=t;this._by=n(e)}return this._by.whenOff(()=>this._by=ot()),this}byNone(t){return this._by.off(t),this}done(t){return J(this).off(t),this}}class Ut extends zt{constructor(t){super(),this._it=t,this._on=new Ot}get[H](){return J(this._on)}on(t){return(this.on=this._on.on().F)(t)}get it(){return this._it}set it(t){const e=this._it;e!==t&&(this._it=t,this._on.send(t,e))}}function Pt(t){return new Ut(t)}class Mt extends zt{constructor(t){super(),this._on=new Ot,this._it=t}on(t){return(this.on=this._on.on().F)(t)}get[H](){return J(this._on)}get it(){return this._it}set it(t){const e=this.it;e!==t&&(this._it=t,this._on.send(t,e))}sync(t,e,n){let s,r,i=t=>c(this,t);"string"==typeof t?("in"===t&&(i=t=>c(t,this)),s=e,r=n):(s=t,r=e);const o=r;if(!o)return i(s);const u=s;return(G(u)?bt(u):St(u)).consume((...t)=>{const e=o(...t);return e&&i(e)});function c(t,e){const n=t.read(t=>{e.it=t}),s=e.on(e=>{t.it=e});return Z(t=>{s.off(t),n.off(t)}).needs(n).needs(s)}}}class Kt{name(t,e){if("string"==typeof t)return t;const[n,s]=t;return s.name(e(s),n,this)}}class qt extends Kt{applyAlias(t,e){return`${e}-${t}`}}const Nt=new qt,Lt=new qt;class Bt extends Kt{applyAlias(t,e){return`${e}:${t}`}}const It=new Bt;class Wt extends Kt{applyAlias(t,e){return`${t}@${e}`}}const Vt=new Wt;class Gt{constructor(t,...e){this.url=t,this.aliases=e}get alias(){return this.aliases[0]||"ns"}name(t,e,n=Nt){return n.applyAlias(e,t,this)}}function Ht(t){return"string"==typeof t||function(t){return Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&t[1]instanceof Gt}(t)}function Qt(t,e){if("string"==typeof t)return"string"==typeof e?Jt(t,e):e[1].url?-1:Jt(t,e[0]);const[n,{url:s}]=t;return"string"==typeof e?s?1:Jt(n,e):Jt(s,e[1].url)||Jt(n,e[0])}function Jt(t,e){return t<e?-1:t>e?1:0}function Zt(){const t=new Map,e=new Map;return function(n){const s=t.get(n.url);if(s)return s;const r=n.alias;let i=0;for(const s of[r,...n.aliases]){const r=e.get(s);if(!r)return t.set(n.url,s),e.set(s,1),s;i||(i=r)}const o=r+ ++i;return t.set(n.url,o),e.set(r,i),o}}class Xt extends ft{get F(){return this.to.bind(this)}to(t,e){if(!t)return this;const n=X(t),{supply:s}=n;return s.isOff||this._on(n,e),s}once(t,e){return(this.once=Yt(ct(this)).F)(t,e)}tillOff(t,e){return Yt(lt(this,t,e))}capture(t,e){return(this.capture=Yt((t,e)=>null==e?this.to(t,!0):"object"==typeof e&&null==e.capture?this.to(t,Object.assign(Object.assign({},e),{capture:!0})):this.to(t,e)).F)(t,e)}instead(t,e){return(this.instead=Yt((t,e)=>{const n=X(t);return this.to({supply:n.supply,receive(t,e){e.preventDefault(),n.receive(t,e)}},e)}).F)(t,e)}just(t,e){return(this.just=Yt((t,e)=>{const n=X(t);return this.to({supply:n.supply,receive(t,e){e.stopPropagation(),n.receive(t,e)}},e)}).F)(t,e)}last(t,e){return(this.last=Yt((t,e)=>{const n=X(t);return this.to({supply:n.supply,receive(t,e){e.stopImmediatePropagation(),n.receive(t,e)}},e)}).F)(t,e)}passive(t,e){return(this.passive=Yt((t,e)=>null==e?this.to(t,{passive:!0}):"boolean"==typeof e?this.to(t,{capture:e,passive:!0}):null==e.passive?this.to(t,Object.assign(Object.assign({},e),{passive:!0})):this.to(t,e)).F)(t,e)}}function Yt(t){return new Xt(t)}var te;const ee={onRecurrent:r};class ne{constructor(t){this[te]=Z(),this._target=t}on(t){return Yt((e,n)=>{const{supply:s}=e;if(s.needs(J(this)),!s.isOff){const s=t=>e.receive(ee,t);this._target.addEventListener(t,s,n),e.supply.whenOff(()=>this._target.removeEventListener(t,s))}})}dispatch(t){return!J(this).isOff&&this._target.dispatchEvent(t)}done(t){return J(this).off(t),this}}function se(t){return()=>{throw null!=t?t:new TypeError("Context destroyed")}}te=H;class re extends I{constructor(){super("context-supply")}grow(t){t.insert(t.seed()||(t.hasFallback?t.or:null)||t.context[H])}}const ie=new re;class oe{constructor(){this._providers=Pt([])}provide(t){return this._providers.it=[...this._providers.it,t],()=>{const e=this._providers.it,n=e.indexOf(t);n>=0&&(this._providers.it=e.slice(0,n).concat(e.slice(n+1)))}}seed(t,e=xt()){return this.combine(e,function(t,e){return e.read().keepThru(e=>e.length?kt(vt(...k(k(O(e),e=>e(t)),ue))):d(),ce)}(t,this._providers))}isEmpty(){return!1}combine(t,e){return vt(t,e).keepThru(ce)}}function ue(t){return null==t?xt():function(t){return("object"==typeof t||"function"==typeof t)&&G(t)}(t)?bt(t):xt(t)}function ce(...t){return d(...x(t))}class ae extends A{get upKey(){return this}seeder(){return new oe}}class he extends F{constructor(t,e){super(t.name+":up"),this._key=t,this.grow=t=>{const n=t.fillBy(e);if(n){const e=t.context.get(ie,{or:null});e&&t.insert(n.tillOff(e))}}}get seedKey(){return this._key.seedKey}}class le extends F{constructor(t,{seedKey:e}={}){super(t),this.seedKey=e||new ae(this)}createUpKey(t){return new he(this,t)}}class de extends le{constructor(t,{seedKey:e,byDefault:n=r}={}){super(t,e),this.byDefault=(t,e)=>n(t,e)||(()=>{throw new j(this)}),this.upKey=this.createUpKey(t=>{t.insert(t.seed.keepThru((...e)=>e.length?e[e.length-1]:t.hasFallback&&t.or?kt(t.or):kt(xt(this.byDefault(t.context,this)))))})}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?xt(t.or):t.or}:void 0).to(t=>e=t).whenOff(t=>e=se(t)),t.insert((...t)=>e(...t))}}class fe extends le{constructor(t,{seedKey:e,byDefault:n=r}={}){super(t,e),this.byDefault=n}get upKey(){return this}grow(t){const e=t.seed.keepThru((...e)=>{if(e.length)return l(e[e.length-1]);let n;if(t.hasFallback)n=t.or;else{const e=this.byDefault(t.context,this);n=e&&xt(e)}return kt(null!=n?n:_t(()=>{throw new j(this)}))}),n=t.context.get(ie,{or:null});t.insert(n?e.tillOff(n):e)}}const pe={by(t={}){let e;return{get node(){return t.node},get window(){return e||(e=t.window||t.node&&((n=t.node).ownerDocument||n).defaultView||window);var n},error(...e){t&&t.error?t.error(...e):console.error(...e)}}}};const ge=Symbol("render-q");class ye{constructor(t,e){this.q=t,this.schedule=this.doSchedule,this.ref=e||[this,this]}static by(t,e){return t[ge]||(t[ge]=new ye(t,e))}add(t){this.q.add(t)}doSchedule(t){this.schedule=()=>{};const e=[],n={get config(){return t},postpone(t){e.unshift(t)}};this.q.schedule(()=>{const t=this.reset();t.suspend(),this.exec(n),this.ref[1]=this.ref[0],e.forEach(t=>this.q.add(t)),n.postpone=t=>this.q.post(t),this.exec(n),t.resume()})}exec(t){for(;;){const e=this.q.pull();if(!e)break;e(t)}}reset(){return this.ref[0]=ye.by(this.q.reset(),this.ref)}suspend(){this.schedule=t=>{this.scheduled=t,this.schedule=()=>{}}}resume(){this.scheduled?this.doSchedule(this.scheduled):this.schedule=this.doSchedule}}function _e(t){return e=>{const n=pe.by(e),s=ye.by(t.newQueue(n)).ref;let r=[];return t=>{const[e,,i]=r,[o,u]=s;let c=e||u;if(e===u&&!i||e===o)r[1]=t;else{const e=r=[c=i?o:u,t];c.add(t=>{e[2]=!0;try{e[1]({get config(){return n},postpone(e){t.postpone(e)}})}catch(t){n.error(t)}})}c.schedule(n)}}}const me={by({schedule:t,replace:e=(()=>{})}){const n=[];return{schedule:t,add(t){n.push(t)},post(t){n.unshift(t)},pull:()=>n.shift(),reset(){const n=me.by({schedule:t,replace:e});return e(n),n}}}},be=new WeakMap,we=t=>{const e=pe.by(t);return t=>{const n=[],s={get config(){return e},postpone(t){n.push(t)}};for(r(t);;){const t=n.pop();if(!t)break;r(t)}function r(t){try{t(s)}catch(t){e.error(t)}}}};let ve=_e({newQueue({window:t}){const e=be.get(t);if(e)return e;const n=me.by({schedule:e=>t.requestAnimationFrame(e),replace:e=>be.set(t,e)});return be.set(t,n),n}});function xe(t){return ve(t)}const ke=new W("bootstrap-context");class Oe extends R{static get[C](){return ke}}function $e(t){return(e,n)=>{const s=e.get(Oe);return e===s?t(s,n):s.get(n)}}function Se(t){return Array.isArray(t)}class Te{constructor(t){this.items=null==t?new Set:Se(t)?new Set(t):new Set([t])}get value(){return this.items.size<2?b(this.items):Array.from(this.items)}[Symbol.iterator](){return this.items[Symbol.iterator]()}add(...t){return this.addAll(t)}addAll(t){return _(t,t=>this.items.add(t)),this}get size(){return this.items.size}merge(t){return Se(t)?this.addAll(t):null!=t&&this.items.add(t),this}}function Ce(t,e=(()=>!0)){const n=Object.getPrototypeOf(t.prototype);if(null==n)return;const s=n.constructor;return e(s)?s:Ce(s,e)}function Fe(t,e,n,s){const r=!n,i=s(n?function(t){if(function(t){return void 0===t.value&&void 0===t.writable}(t))return t;const e=Symbol("value"),n=t.value,s=Object.assign(Object.assign({},t),{writable:void 0,value:void 0,get(){return e in this?this[e]:n}});return t.writable&&(s.set=function(t){this[e]=t}),delete s.writable,delete s.value,s}(n):function(t,e){const n=Symbol(String(e)+":value"),s=t[e];return{configurable:!0,enumerable:!0,get(){return n in this?this[n]:s},set(t){this[n]=t}}}(t,e));if(!r||!i)return i;Object.defineProperty(t,e,i)}function Ae(t,e,n=((t,e)=>e)){return t?e?function(...s){return n(t.apply(this,s),e.apply(this,s))}:t:e}function je(t){return t.nodeType===Node.ELEMENT_NODE}class De{constructor(t){this.symbol=t}own(t){return t.hasOwnProperty(this.symbol)?t[this.symbol]:void 0}of(t){const e=this.own(t),n=Ce(t),s=n&&this.of(n);return e?s?this.merge([s,e]):e:s}define(t,e){const n=this.own(t),s=k(e,e=>this.meta(e,t)),r=this.merge(n?x([[n],s]):s);return Object.defineProperty(t,this.symbol,{configurable:!0,value:r}),t}}class Ee{constructor(){this.promise=new Promise((t,e)=>{this._resolve=t,this._reject=e})}resolve(t){this._resolve(t)}reject(t){this._reject(t)}}const Re=Symbol("feature-def");class ze extends De{constructor(){super(Re)}merge(t){return w(t,(t,e)=>({needs:new Te(t.needs).merge(e.needs).value,has:new Te(t.has).merge(e.has).value,setup:Ae(t.setup,e.setup),init:Ae(t.init,e.init)}),{})}meta(t,e){const n=t[Re];return null==n?t:this.meta("function"==typeof n?t[Re](e):n,e)}}const Ue=new ze,Pe={[Re]:()=>({})},Me={of:t=>Ue.of(t)||{},for:(t,e)=>Ue.meta(e,t),merge:(...t)=>Ue.merge(t),all:(...t)=>w(t,(t,e)=>({[Re]:n=>Me.merge(Me.for(n,t),Me.for(n,e))}),Pe),define:(t,...e)=>Ue.define(t,e)};function Ke(...t){return e=>Me.define(e,...t)}const qe=new W("feature-context");class Ne extends Oe{static get[C](){return qe}whenDefined(t){return this.get(Oe).whenDefined(t)}load(t){return this.get(Oe).load(t)}}class Le extends Error{constructor(t){super("Circular feature needs: "+t.reduce((t,[e,n,s])=>(t||e.name)+` ${n} ${s.name}`,"")),this.needs=t}}class Be{[V](){return this.read()}}const Ie=Symbol("component-def");class We extends De{constructor(){super(Ie)}merge(t){return w(t,(t,e)=>Object.assign(Object.assign(Object.assign({},t),e),{setup:Ae(t.setup,e.setup),define:Ae(t.define,e.define),feature:t.feature?e.feature?Me.merge(t.feature,e.feature):t.feature:e.feature}),{})}meta(t,e){const n=t[Ie];return null!=n?this.meta("function"==typeof n?t[Ie](e):n,e):null!=t[Re]?{feature:Me.for(e,t)}:Ht(t)?{name:t}:t}}const Ve=new We,Ge={[Ie]:()=>({})},He={of:t=>Ve.of(t)||{},for:(t,e)=>Ve.meta(e,t),merge:(...t)=>Ve.merge(t),all:(...t)=>w(t,(t,e)=>({[Ie]:n=>He.merge(He.for(n,t),He.for(n,e))}),Ge),define:(t,...e)=>Ve.define(t,e)};function Qe(...t){const e=e=>He.define(e,...t);return e[Ie]=()=>He.all(...t),e}const Je=new W("component-context"),Ze=new W("component-event-dispatcher",{byDefault(t){const e=t.get(Je),n=new ne(e.element);return J(n).needs(e),{dispatch:t=>n.dispatch(t),on:t=>n.on(t)}}}),Xe=new W("content-root",{byDefault:t=>t.get(Je).element});class Ye extends le{constructor(){super("state-updater"),this.upKey=this.createUpKey(t=>t.insert(t.seed.keepThru((...e)=>{if(e.length){const t=e.reduce((t,e)=>Ae(e,t),r);return(e,n,s)=>t(At(e),n,s)}return t.hasFallback&&t.or?kt(t.or):r})))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?xt(t.or):t.or}:void 0).to(t=>e=t).whenOff(()=>e=r),t.insert((t,n,s)=>e(t,n,s))}}const tn=new Ye,en=Symbol("component-context");class nn extends R{constructor(){super(),this.updateState=(t,e,n)=>{this.get(tn)(t,e,n)}}static get[C](){return Je}static of(t){const e=t[en];if(!e)throw TypeError("No component context found in "+t);return e}get contentRoot(){return this.get(Xe)}on(t){return this.get(Ze).on(t)}dispatchEvent(t){this.get(Ze).dispatch(t)}}class sn extends Event{get context(){return nn.of(this.target)}}const rn=Symbol("anonymous-component-property");function on(t){const e=({get:e,set:n},s=rn,r)=>Qe({[Ie](i){const o=t({type:i,key:s,readable:!0,writable:r,enumerable:!1,configurable:!1,get:t=>e(t,s),set:(t,e)=>n(t,e,s)});return o&&o.componentDef||{}}}),n=(t,n)=>e({get:(e,n)=>t(e,n)},n,!1),s=(e,n,s)=>Fe(e,n,s,s=>{const{get:r,set:i}=s,o=e.constructor,{get:u,set:c,configurable:a,enumerable:h,componentDef:l={}}=t({type:o,key:n,readable:!!s.get,writable:!!s.set,enumerable:!!s.enumerable,configurable:!!s.configurable,get:r?t=>r.call(t):un(n),set:i?(t,e)=>i.call(t,e):cn(n)})||{};He.define(o,l);const d=Object.assign(Object.assign({},s),{configurable:null!=a?a:s.configurable,enumerable:null!=h?h:s.enumerable});return(u||c)&&(d.get=u&&function(){return u(this,n)},d.set=c&&function(t){c(this,t,n)}),d});return s.With=(t,n)=>e(t,n,!0),s.By=n,s.As=(t,e)=>n(o(t),e),s.Bind=(t,n=rn)=>{const s=Symbol(String(n)+":accessor"),r=e=>{const r=e[s];if(r)return r;const i=t(e,n);return e[s]={get:i.get?i.get.bind(i):un(n),set:i.set?i.set.bind(i):cn(n)}};return e({get:t=>r(t).get(),set:(t,e)=>r(t).set(e)},n,!0)},s}function un(t){return()=>{throw new TypeError(`"${String(t)}" is not readable`)}}function cn(t){return()=>{throw new TypeError(`"${String(t)}" is not writable`)}}const an=new W("bootstrap-context-registry");class hn extends z{constructor(){super(),this.provide({a:hn,is:this}),this.values=this.newValues()}static get[C](){return an}static create(){return new hn}}const ln=new W("component-context-registry",{byDefault:$e(()=>new dn)});class dn extends z{static get[C](){return ln}}const fn=new W("definition-context-registry",{byDefault:$e(t=>new pn(t))});class pn extends z{static get[C](){return fn}}const gn=Symbol("post-def-setup");function yn(t){if(t.hasOwnProperty(gn))return t[gn];const e=Pt(),n=new Ot,s=Tt(e.read().thru(t=>t?d(t):f()),n),r=Ce(t,t=>Ie in t);if(r){const t=yn(r);s.to(e=>t.send(e))}const i={on:s,send(t){n.send(t)},setup(t){e.it=t}};return Object.defineProperty(t,gn,{value:i}),i}const _n=new W("window",{byDefault:()=>window}),mn=new W("bootstrap-root",{byDefault:t=>t.get(_n).document.body}),bn=new W("default-namespace-aliaser");class wn extends le{constructor(){super("default-render-scheduler"),this.upKey=this.createUpKey(t=>t.insert(t.seed.keepThru((...e)=>e.length?vn(t.context,e[e.length-1]):t.hasFallback&&t.or?kt(t.or):vn(t.context,xe))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?xt(t.or):t.or}:void 0).to(n=>e=vn(t.context,n)).whenOff(t=>e=se(t)),t.insert((...t)=>e(...t))}}function vn(t,e){return(n={})=>e(Object.assign(Object.assign({},n),{window:n.window||t.get(_n)}))}const xn=new wn;class kn extends le{constructor(){super("element-adapter"),this.upKey=this.createUpKey(t=>t.insert(t.seed.keepThru((...e)=>{const n=e.reduce((t,e)=>n=>t(n)||e(n),On);return n!==On?n:t.hasFallback&&t.or?kt(t.or):On})))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?xt(t.or):t.or}:void 0).to(t=>e=t).whenOff(t=>e=se(t)),t.insert(t=>e(t))}}function On(t){return t[en]}const $n=new kn,Sn=new de("element-observer",{byDefault:$e(t=>{const e=t.get($n);class n extends MutationObserver{constructor(t){super(n=>{n.forEach(t=>{_(O(t.removedNodes),t=>{var e;return null===(e=function(t){var e;return null===(e=t[en])||void 0===e?void 0:e.mount}(t))||void 0===e?void 0:e.checkConnected()}),_(v(O(t.addedNodes),je),t=>{var n,s;return null===(s=null===(n=e(t))||void 0===n?void 0:n.mount)||void 0===s?void 0:s.checkConnected()})}),t(n,this)})}observe(t,e){super.observe(t,Object.assign(Object.assign({},e),{childList:!0}))}}return t=>new n(t)})});const Tn=Symbol("definition-context");function Cn(t){if(!t.hasOwnProperty(Tn))throw new TypeError("Component is not defined: "+t);return t[Tn]}const Fn=new W("custom-elements",{byDefault:$e((function(t){const e=t.get(_n).customElements,n=t.get(bn);return new class extends An{define(t,s){if(Ht(t))return void e.define(Lt.name(t,n),s);const r=Cn(t),{name:i,extend:o}=r.elementDef;i?o&&o.name?e.define(Lt.name(i,n),s,{extends:o.name}):e.define(Lt.name(i,n),s):Dn(t).resolve(void 0)}whenDefined(t){if(Ht(t))return e.whenDefined(Lt.name(t,n));const s=Cn(t),{name:r}=s.elementDef;return r?e.whenDefined(Lt.name(r,n)):Dn(t).promise}}}))});class An{static get[C](){return Fn}}const jn=Symbol("component-resolver");function Dn(t){return t.hasOwnProperty(jn)?t[jn]:t[jn]=new Ee}const En=new W("definition-context"),Rn=new W("element-def",{byDefault(t){const e=t.get(En).componentType,{name:n,extend:s}=He.of(e),r={get type(){return s&&s.type||t.get(_n).HTMLElement},get name(){return s&&s.name}};return{get name(){return n},get extend(){return r}}}});class zn extends R{static get[C](){return En}get elementDef(){return this.get(Rn)}connectTo(t){const e=this.mountTo(t);return e.connect(),e}}class Un extends nn{constructor(t,e){super(),this._definitionContext=t,this.element=e,this._status=Pt(0);const n=t._newComponentRegistry();n.provide({a:nn,is:this}),this.get=n.newValues().get}get componentType(){return this._definitionContext.componentType}get component(){return this._component()}get settled(){return this._status.it>=3&&!J(this).isOff}get connected(){return this._status.it>=4&&!J(this).isOff}get[H](){return J(this._status)}_component(){throw new TypeError("Component is not constructed yet. Consider to use a `whenReady()` callback")}whenReady(t){return(this.whenReady=this._status.read().thru_(t=>t?d(this):f()).once().F)(t)}settle(){2===this._status.it&&(this._status.it=3)}whenSettled(t){return(this.whenSettled=this._status.read().thru_(t=>t>=3?l(this):f()).once().F)(t)}whenConnected(t){return(this.whenConnected=this._status.read().thru_(t=>t>=4?l(this):f()).once().F)(t)}destroy(t){try{this._status.done(t)}finally{delete this.component[en],delete this.element[en],this._component=Pn,function(t){const{parentNode:e}=t;e&&e.removeChild(t)}(this.element)}}_createComponent(){const t=this._definitionContext._whenComponent;let e=0;this.element[en]=this,t.readNotifier.once(t=>e=t(this,e)),this.whenConnected(()=>{t.readNotifier.to({supply:Z().needs(this),receive:(t,n)=>{e=n(this,e)}})}),this._definitionContext._elementBuilder.components.send(this);const n=function(t){const e=t.componentType,n=e.prototype,s=n[en];n[en]=t;try{const r=new e(t);return r[en]=t,r}finally{n[en]=s}}(this);return this._component=o(n),this._status.it=1,this}_connect(){this._status.it=4}_created(){this._status.it<2&&(this._status.it=2),this.whenConnected(()=>this.dispatchEvent(new sn("wesib:component",{bubbles:!0})))}}function Pn(){throw new TypeError("Component destroyed already")}class Mn extends class{get component(){return this.context.component}get element(){return this.context.element}}{constructor(t){super(),this.context=t}get connected(){return this.context.connected}connect(){this.context._connect()}checkConnected(){const t=this.context.element,e=t.ownerDocument,n=null!=e&&e.contains(t);return n!==this.connected&&(n?this.connect():this.context.destroy()),n}}class Kn extends Un{constructor(t,e){super(t,e),this.mount=this.mount=new Mn(this)}}class qn extends Un{get mount(){}}class Nn{constructor(){const t=Pt(0),e=new Ot;this.onCreated=pt(n=>{const s=t.it+1;e.on({supply:n.supply,receive:(t,e,r)=>{r<s&&n.receive({onRecurrent(e){t.onRecurrent(t=>e(t))}},e)}}),++t.it}),this.readNotifier=t.read().keepThru_(t=>(n,s)=>(e.send(n,s),t))}}class Ln extends zn{constructor(t,e,n){var s,r;super(),this._bsContext=t,this._elementBuilder=e,this.componentType=n,this._whenComponent=new Nn,this._ready=Pt(!1),this._whenReady=this._ready.read().thru(t=>t?d():f()),this._def=He.of(n);const i=new pn(t.get(pn).seedIn(this));i.provide({a:zn,is:this}),this.get=i.newValues().get,this._perTypeRegistry=new dn(i.seedIn(this));const o=this.whenReady().F,u=this.whenComponent().F,c={get componentType(){return n},get whenReady(){return o},get whenComponent(){return u},perDefinition:t=>i.provide(t),perComponent:t=>this._perTypeRegistry.provide(t)};null===(r=(s=this._def).setup)||void 0===r||r.call(s,c),yn(n).setup(c)}get elementType(){return this._elementType()}whenReady(t){return(this.whenReady=this._whenReady.thru_(o(this)).once().F)(t)}mountTo(t){if(t[en])throw new Error(`Element ${t} already bound to component`);const e=new Kn(this,t);e._createComponent();const{mount:n}=e;return n.checkConnected(),e._created(),e.settle(),n}whenComponent(t){return(this.whenComponent=this._whenComponent.onCreated.F)(t)}perComponent(t){return this._perTypeRegistry.provide(t)}_newComponentRegistry(){return this._bsContext.get(dn).append(this._perTypeRegistry)}_elementType(){throw new Error("Custom element class is not constructed yet. Consider to use a `whenReady()` callback")}_define(){var t,e;null===(e=(t=this._def).define)||void 0===e||e.call(t,this),this._elementBuilder.definitions.send(this),this._elementType=o(function(t){const e=t.get(Rn);class n extends e.extend.type{constructor(){super();const e=new qn(t,this);e._createComponent(),e._created()}connectedCallback(){var t;null===(t=super.connectedCallback)||void 0===t||t.call(this),this[en]._connect()}disconnectedCallback(){var t;this[en].destroy(),null===(t=super.disconnectedCallback)||void 0===t||t.call(this)}}return n}(this)),this.componentType[Tn]=this,this._ready.it=!0}}const Bn=new W("element-builder",{byDefault:$e((function(t){return{definitions:new Ot,components:new Ot,buildElement(e){const n=new Ln(t,this,e);return n._define(),n}}}))});const In=o(r);class Wn{constructor(t){this._context=t,this._definitionQueue=[],t.whenReady(()=>{this._definitionQueue.forEach(t=>t()),delete this._definitionQueue})}get customElements(){return this._context.get(An)}define(t){this._definitionQueue.push(()=>{const e=this._context.get(Bn).buildElement(t);this.customElements.define(t,e.elementType)})}}class Vn extends Ne{constructor(t,e){super(),this._bsContext=t,this._loader=e,this._unloader=function(){const t=[];let e=e=>{const n=e();return t.push(n),n};return{supply:Z(()=>{e=In,_(O(t).reverse(),t=>t()),t.length=0}),add:t=>e(t)}}();const n=new z(t);n.provide({a:Ne,is:this}),this.get=n.newValues().get,this._componentRegistry=new Wn(this)}get feature(){return this._loader.request.feature}whenReady(t){return(this.whenReady=wt({st:this._loader.state,bs:Pt().by(this._bsContext.whenReady())}).thru(({st:[t],bs:[e]})=>e&&t?l(this):f()).once().F)(t)}onDefinition(t){return(this.onDefinition=this._bsContext.get(Bn).definitions.on().tillOff(this._unloader.supply).F)(t)}onComponent(t){return(this.onComponent=this._bsContext.get(Bn).components.on().tillOff(this._unloader.supply).F)(t)}provide(t){return this._unloader.add(()=>this._bsContext.get(hn).provide(t))}perDefinition(t){return this._unloader.add(()=>this._bsContext.get(pn).provide(t))}perComponent(t){return this._unloader.add(()=>this._bsContext.get(dn).provide(t))}setupDefinition(t){return function(t,e){const{on:n}=yn(t);return pt(t=>{n.to({supply:t.supply.needs(e.supply),receive(n,s){const r=s.whenReady().tillOff(e.supply).F,i=s.whenComponent().tillOff(e.supply).F;t.receive(n,{get componentType(){return s.componentType},get whenReady(){return r},get whenComponent(){return i},perDefinition:t=>e.add(()=>s.perDefinition(t)),perComponent:t=>e.add(()=>s.perComponent(t))})}})})}(t,this._unloader)}define(t){this._componentRegistry.define(t)}}const Gn=Symbol("feature-key");class Hn extends le{static of(t){return t.hasOwnProperty(Gn)?t[Gn]:t[Gn]=new Hn(t)}get upKey(){return this}constructor(t){super("feature:"+t.name)}grow(t){var e,n;t.insert((e=t.context.get(Oe),n=t.seed.keepThru(Qn),_t(t=>{let s,r=xt(),i=Promise.resolve("idle");return wt({clause:n,deps:Jn(e,n)}).keepThru_(({clause:[t],deps:n})=>{if(!t)return d();const[o,,u]=t;if(o.feature===s)return kt(r);if(s=o.feature,u!==s)return kt(r=e.get(Hn.of(s)).keepThru_(t=>(t.to(i),i=t.stage,t)));const c=new Xn(e,o,n).to(i),a=xt(c);return kt(r=_t(t=>a.to(t).whenOff(()=>{i=c.unload()})).share())}).to(t)}).keepThru(function(){let t=null;return e=>t===e?f():(t=e,e?d(e):d())}())))}}function Qn(...t){let e,n=!1;for(const s of t)switch(s[1]){case"is":n=!0,e||(e=s);break;case"has":e=s;break;case"needs":n=!0}return n?e:void 0}function Jn(t,e){return e.keepThru_(e=>{if(!e)return d();const[{def:n}]=e,s=new Te(n.needs);return s.size?kt(vt(...k(s,e=>t.get(Hn.of(e)))).keepThru_(Zn)):d()})}function Zn(...t){return d(...v(k(t,t=>t[0]),i))}class Xn{constructor(t,e,n){this.bsContext=t,this.request=e,this.deps=n,this.state=Pt(!1),this.down=new Promise(t=>this._down=t),this._stage=Promise.resolve(new ts(this))}get stage(){return this._stage.then(t=>t.after)}get ready(){return this.state.it}to(t){const e=this._stage;return this._stage=t.then(t=>e.then(e=>e[t]())),this}async setup(){await(this._stage=this._stage.then(t=>t.setup()))}async init(){await(this._stage=this._stage.then(t=>t.init()))}async unload(){const t=this._stage;delete this._stage;const e=await t,n=await e.stop();return this._down(),n}}class Yn{constructor(t,e=(()=>Promise.resolve())){this.loader=t,this._stop=e}idle(){return Promise.resolve(this)}stop(){return this._stop().then(()=>this.after)}perDep(t){const{deps:e}=this.loader;return Promise.all(e.map(e=>t(e)))}}class ts extends Yn{get after(){return"idle"}async setup(){var t;await this.perDep(t=>t.setup());const{bsContext:e,request:{def:n}}=this.loader,s=new Vn(e,this.loader),r=s._unloader.supply;return null===(t=n.setup)||void 0===t||t.call(n,s),new es(this.loader,s,()=>Promise.resolve(r.off()))}init(){return this.setup().then(t=>t.init())}}class es extends Yn{constructor(t,e,n){super(t,n),this._context=e}get after(){return"setup"}setup(){return Promise.resolve(this)}async init(){var t;await this.perDep(t=>t.init());const{request:{def:e}}=this.loader;return null===(t=e.init)||void 0===t||t.call(e,this._context),new ns(this)}}class ns extends Yn{get after(){return"init"}constructor(t){super(t.loader,()=>t.stop()),t.loader.state.it=!0}setup(){return Promise.resolve(this)}init(){return Promise.resolve(this)}}class ss{constructor(t,e,n){this._requester=t,this.feature=e,this._revoke=n,this._uses=0,this.def=function(t){let e=Me.of(t);if(Ie in t){e=Me.merge(e,{init(e){e.define(t)}});const{feature:n}=He.of(t);n&&(e=Me.merge(e,n))}return e}(e)}request(t){const e=this._requester,{registry:n}=e,s=[this,"is",this.feature];this._revokeBy(n.provide({a:Hn.of(this.feature),is:s}));for(const s of new Te(this.def.has)){const r=[this,"has",s];this._revokeBy(n.provide({a:Hn.of(s),is:r}));const i=e.request(s,[...t,r]);this._revokeBy(()=>i.unuse())}for(const s of new Te(this.def.needs)){const r=[this,"needs",s],i=e.request(s,[...t,r]);this._revokeBy(()=>i.unuse()),this._revokeBy(n.provide({a:Hn.of(s),is:r}))}return this._uses=1,this}reuse(t){if(!this._uses)throw new Le(t.map(([{feature:t},e,n])=>[t,e,n]));return++this._uses,this}unuse(){--this._uses||this._revoke()}_revokeBy(t){this._revoke=Ae(t,this._revoke)}}const rs=new W("feature-requester",{byDefault:$e(t=>new is(t))});class is{constructor(t){this._map=new Map,this.registry=t.get(hn)}static get[C](){return rs}request(t,e=[]){const n=this._map.get(t);if(n)return n.reuse(e);const s=new ss(this,t,()=>this._map.delete(t));return this._map.set(t,s),s.request(e)}}const os=Symbol("when-defined");const us=new q("attribute-descriptor"),cs=Symbol("attribute");function as(t){return[cs,t]}function hs(t,e=!0){if(!1===e)return r;if(!0===e||"function"==typeof e){const n=as(t),s=!0===e?ls:e;return(t,e,r)=>s(t,n,e,r)}return(t,n,s)=>ls(t,e,n,s)}function ls(t,e,n,s){nn.of(t).updateState(e,n,s)}function ds(t){let e;for(let n=0;n<t.length;++n){const s=t[n];s<="Z"&&s>="A"?(e||(e=t.substring(0,n)),e+="-"+s.toLowerCase()):e&&(e+=s)}return e||t}const fs=new W("attribute-registry");class ps{constructor(t){this._context=t}static get[C](){return fs}get attrs(){if(this._attrs)return this._attrs;const t=new Map;return this._context.get(us).forEach(e=>{const{name:n,change:s}=e;t.set(n,Ae(t.get(n),s))}),this._attrs=t}define(t){const e=this.attrs;e.size&&(Object.defineProperty(t,"observedAttributes",{configurable:!0,enumerable:!0,value:gs(t,e.keys())}),Object.defineProperty(t.prototype,"attributeChangedCallback",{configurable:!0,enumerable:!0,value:ys(t,e)}))}mount(t){const e=t.element,n=this.attrs,s=Array.from(n.keys());s.length&&new(0,this._context.get(_n).MutationObserver)(t=>t.forEach(t=>{const s=t.attributeName;return n.get(s)(nn.of(e).component,e.getAttribute(s),t.oldValue)})).observe(e,{attributes:!0,attributeFilter:s,attributeOldValue:!0})}}function gs(t,e){const n=t.observedAttributes;return Array.from(Se(n)?new Te(n).addAll(e).items:e)}function ys(t,e){const n=t.prototype.attributeChangedCallback;return n?function(t,s,r){const i=e.get(t);i?i(nn.of(this).component,r,s):n.call(this,t,s,r)}:function(t,n,s){e.get(t)(nn.of(this).component,s,n)}}const _s={setup(t){t.perDefinition({as:ps}),t.onDefinition(t=>{t.whenReady(({elementType:e})=>t.get(ps).define(e))}),t.onComponent(t=>{const e=t.mount;e&&t.get(ps).mount(e)})}};class ms{static get[Re](){return _s}}function bs(t){return on(({type:e,key:n})=>{const s=function(t,e,n){let s,r;if("string"==typeof n)s=ds(n),r=hs(s);else{if(n&&n.name)s=ds(n.name);else{if("string"!=typeof e)throw new TypeError(`Attribute name is required as property key is not a string: ${t.constructor.name}.prototype.${String(e)}`);s=ds(e)}r=hs(s,n&&n.updateState)}return{name:s,change:r}}(e.prototype,n,t),{name:r}=s;return{componentDef:{feature:{needs:ms},setup(t){t.perDefinition({a:us,is:s})}},get:t=>nn.of(t).element.getAttribute(r),set(t,e){const{element:n}=nn.of(t);null!=e?n.setAttribute(r,e):n.removeAttribute(r)}}})}class ws extends I{constructor(){super("component-state")}grow(t){const e=t.seed();let n;if(null!=e)n=e,t.insert(n);else{if(t.hasFallback)return;n=new xs,J(t.context.get(nn)).whenOff(t=>n.done(t)),t.insert(n)}t.setup(({registry:t})=>{t.provide({a:tn,is:n.update})})}}const vs=new ws;class xs extends Rt{static get[C](){return vs}}var ks;class Os extends zt{constructor(t,e,n){super(),this._context=t,this._name=e,this._path=n,this[ks]=Z()}get it(){return this._context.element.getAttribute(this._name)}set it(t){J(this).isOff||(null==t?this._context.element.removeAttribute(this._name):this._context.element.setAttribute(this._name,t))}on(t){return(this.on=this._context.get(xs).track(this._path).onUpdate().thru((t,e,n)=>d(e,n)).tillOff(this).F)(t)}}ks=H;const $s=Symbol("dom-property");const Ss=Symbol("render"),Ts={spec:(t,e)=>function(t,...e){return"function"==typeof t?t(...e):t}(e,t),fulfill(t,e={}){const{on:n=e.on,error:s}=t;return{on:n,error:s?s.bind(t):e.error&&e.error.bind(e)}},trigger(t,e={}){const{on:n=[]}=e;if("object"==typeof n&&st(n))return St(n).tillOff(t);const s=t.get(xs).track(n).onUpdate().tillOff(t);return Array.isArray(n)&&!n.length?s.thru_(t=>t[0]===Ss?f:d()):s}};class Cs{constructor(t){this._context=t,this._renders=new Set}renderBy(t,e={}){const n=Ts.spec(this._context,e),s=Ts.trigger(this._context,n),i=this._context.get(xn)(Object.assign(Object.assign({},Ts.fulfill(n)),{node:this._context.element})),o="connected"===n.when;let u=1;const c=o?()=>this._context.connected&&l():()=>this._context.settled&&l(),a=s.to(c).needs(this._context).whenOff((function(){2===u&&i(r);u=-1}));(o?this._context.whenConnected():this._context.whenSettled()).to(()=>u&&l());const h=we();return this._renders.add(d),a.whenOff(()=>this._renders.delete(d));function l(){u=2,i(f)}function d(){h(f)}function f(e){if(u>0)for(u=0;;){const n=t(e);if(n===t||"function"!=typeof n)break;t=n}}}renderNow(){this._renders.forEach(t=>t())}}const Fs=new W("element-render-ctl",{byDefault:t=>new Cs(t.get(nn))});const As=new W("element-render-scheduler",{byDefault:function(t){const e=t.get(Fs);return(t={})=>{const n=Pt(r);return e.renderBy(t=>{n.it(t)},Ts.fulfill({on:n.on()},t)),t=>{n.it=e=>t(e)}}}});function js(t){return on(({get:e})=>({componentDef:{define(n){n.whenComponent(n=>{n.whenReady(()=>{const{component:s}=n,r=e(s).bind(s);n.get(Fs).renderBy(r,t)})})}}}))}const Ds=new W("shadow-content-root");class Es extends Event{get shadowRoot(){return this.target.shadowRoot}}const Rs=new de("shadow-root-builder",{byDefault:()=>zs});function zs(t,e){const n=function(t,e){const n=t.shadowRoot;if(n)return n;if("attachShadow"in t)return t.attachShadow(e);return}(t.element,e);return n&&(n[en]=t,t.whenConnected(()=>t.dispatchEvent(new Es("wesib:shadowAttached",{bubbles:!0})))),n}const Us={mode:"open"};function Ps(t=Us){return Qe({setup(e){e.perComponent({a:Ds,by:e=>e.get(Rs)(e,t)}),e.perComponent({a:Xe,by:t=>t.get(Ds,{or:null})})}})}const Ms=new Gt("https://wesib.github.io/ns","b","wesib");class Ks extends Set{constructor(t){super(),this._added=new Set(t),this._removed=new Set,this._added.forEach(t=>this.add(t))}add(t){return this.has(t)||(this._added.add(t),this._removed.delete(t),super.add(t)),this}delete(t){return!!super.delete(t)&&(this._added.delete(t),this._removed.add(t),!0)}clear(){this._added.clear(),this.forEach(t=>this._removed.add(t)),super.clear()}delta(t,e=[]){return qs(this)(t,e),this}redelta(t){return("function"==typeof t?t:qs(t))(Array.from(this._added),Array.from(this._removed)),this}undelta(){return this._added.clear(),this._removed.clear(),this}}function qs(t){return(e,n)=>{for(const e of n)t.delete(e);for(const n of e)t.add(n)}}const Ns=Symbol("in-aspect"),Ls={instance:null,convertTo:r};function Bs(t,e,n,s,r){return void 0===s&&(s=n(t,r)),{instance:s,convertTo:s=>Bs(s,e,n,void 0,t),attachTo:s=>Bs(s,e,n,t.aspect(e)||n(s))}}function Is(t,e,n=null){return Bs(t,e,o(null),n)}function Ws(t){return{instance:t,convertTo(){return this}}}const Vs=new Gt("https://surol.github.io/input-aspects/ns","inasp","input-aspects"),Gs={applyTo:()=>Ws(Zt())},Hs={get[Ns](){return Gs},to:t=>({applyAspect:e=>e===Gs?Ws(t):void 0})},Qs={applyTo:()=>Ws(xe)},Js={get[Ns](){return Qs},to:t=>({applyAspect:e=>e===Qs?Ws(t):void 0})};function Zs(t,...e){if(!t)return tr;const n=nr(t);if(!e.length)return n;const s=k(e,nr);return(t,e)=>{const o=n(t,e),u=w(x([[o],v(k(s,n=>n(t,e)),i)]),(t,e)=>e.applyAspect?n=>t(n)||e.applyAspect(n):t,r);return er(o)?{applyAspect:u}:{set:o.set.bind(o),get:o.get.bind(o),applyAspect:u}}}function Xs(t){return t?(e=t,Array.isArray(e)?Zs(...t):Zs(t)):Zs();var e}const Ys={applyAspect(){}};function tr(){return Ys}function er(t){return!t.set}function nr(t){return"function"==typeof t?t:o(t)}class sr extends zt{constructor(){super(...arguments),this._aspects=new Map}aspect(t){return this._aspect(t[Ns]).instance}setup(t,e=r){return Ns in t?e(this.aspect(t),this):t(this),this}convert(t,...e){return new rr(this,Zs(t,...e))}_aspect(t){const e=this._aspects.get(t);if(e)return e;const n=this._applyAspect(t)||t.applyTo(this);return this._aspects.set(t,n),n}_applyAspect(t){}}class rr extends sr{constructor(t,e){super(),this._on=new Ot,this._supply=Z().needs(t);let n,r=0;const i=e(t,this);let o,u,c;er(i)?(o=s,u=s,c=e=>{const n=t._aspect(e);return n.attachTo?n.attachTo(this):n.convertTo(this)}):(o=i.set,u=i.get,c=e=>t._aspect(e).convertTo(this)),this._applyAspect=t=>{var e;return(null===(e=i.applyAspect)||void 0===e?void 0:e.call(i,t))||c(t)},this._it=Pt([o(t.it),0]),J(this._it).needs(this._supply),this._it.on(([t],[e])=>{t!==e&&this._on.send(t,e)}).cuts(this._on),t.on(t=>{t!==n&&(this._it.it=[o(t),++r])}).cuts(this),this._it.on(([e,s])=>{if(s!==r){r=s,n=u(e);try{t.it=n}finally{n=void 0}}})}get[H](){return this._supply}get it(){return this._it.it[0]}set it(t){const[e,n]=this._it.it;t!==e&&(this._it.it=[t,n+1])}on(t){return(this.on=this._on.on().F)(t)}}class ir extends sr{constructor(t){super(),this._control=t}get[H](){return this._supply||(this._supply=Z().needs(this._control))}get it(){return this._control.it}set it(t){this._control.it=t}on(t){return(this.on=this._control.on().F)(t)}}class or extends sr{constructor({aspects:t}){super(),this._aspectConversion=Xs(t)(new ir(this),this)}_applyAspect(t){return this._aspectConversion.applyAspect(t)||super._applyAspect(t)}}const ur={applyTo:t=>Is(t,cr)};class cr extends or{static get[Ns](){return ur}_applyAspect(t){return t===ur?Is(this,cr,this):super._applyAspect(t)}}class ar{[nt](){return this.on()}[V](){return this.read()}}const hr={applyTo:t=>Ws(new dr(t))};class lr{static get[Ns](){return hr}[nt](){return this.on()}[V](){return this.read()}}class dr extends lr{constructor(t){super(),this._control=t,this._map=new Map,this._on=new Ot,J(this._on).needs(this._control)}add(t){const e=this._map.get(t);if(e)return e;const n=Z(()=>{this._map.delete(t),this._on.send([],[t])});return this._map.set(t,n),this._on.send([t],[]),n.needs(this._control).needs(t.parent)}on(t){return(this.on=this._on.on().F)(t)}read(t){const e=()=>this._map.keys();return(this.read=mt(this.on().thru(e),()=>[e()]).F)(t)}}const fr={applyTo:t=>Is(t,pr)};class pr extends or{static get[Ns](){return fr}_applyAspect(t){return t===fr?Is(this,pr,this):super._applyAspect(t)}}const gr={applyTo:t=>Bs(t,yr,t=>new br(t))};class yr{static get[Ns](){return gr}[nt](){return this.on()}[V](){return this.read()}static hasData(t){return"off"!==t&&"-"!==t[0]}done(t){return this.own.done(t),this}}class _r extends zt{constructor(t){super(),this._tracker=Pt(t?function(t){return null!=t.getAttribute("disabled")?"off":null!=t.getAttribute("readonly")?"ro":"on"}(t.element):"on")}get[H](){return J(this._tracker)}get it(){return this._tracker.it}set it(t){switch(t){case"off":case"ro":case"-on":case"-ro":break;default:t="on"}this._tracker.it=t}on(t){return(this.on=this._tracker.on().F)(t)}}class mr{constructor(){this._all=new Set,this._on=new Ot;const t=mt(this._on.on().thru(()=>this._all),c(this._all));this.read=t.keepThru(t=>kt(vt(...t)),vr)}add(t){const e=Z(()=>{this._all.delete(t),this._on.send()});return this._all.add(t),this._on.send(),e}}class br extends yr{constructor(t){super(),this._control=t,this._derived=new mr;const e=t.aspect(pr);this.own=new _r(e),J(this.own).needs(t),this.derive(t.aspect(lr).read().keepThru_(wr)),e&&this.read(t=>function(t,e){switch(e){case"off":t.setAttribute("disabled","");break;case"ro":case"-ro":t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly","");break;default:t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly",""),t.removeAttribute("readonly")}}(e.element,t))}read(t){let e="on";return(this.read=mt(wt({derived:this._derived.read,own:this.own}).thru(({derived:[t],own:[n]})=>{let s;if("off"===n||"off"===t)s="off";else{let e=!1;"-"===n[0]&&(e=!0,n=n.substring(1)),"-"===t[0]&&(e=!0,t=t.substring(1)),s="ro"===t?"ro":n,e&&(s="-"+s)}return e===s?f():d(e=s)}),c(e)).F)(t)}on(t){let e="on";return(this.on=this.read().thru(t=>{const n=e;return n===t?f():d(e=t,n)}).F)(t)}derive(t){return this._derived.add(bt(G(t)?t:t(this._control)).tillOff(this._control)).needs(this._control)}}function wr(t){const e=Array.from(t);return e.length?kt(vt(...e.map(({parent:t})=>t.aspect(yr))).keepThru_(vr)):d("on")}function vr(...t){return function(...t){let e=!1,n=!1;for(const s of t)switch(s){case"off":return"off";case"ro":e=!0;break;case"-on":n=!0;break;case"-ro":n=!0,e=!0}return n?e?"-ro":"-on":e?"ro":"on"}(...x(t))}const xr={applyTo:t=>Bs(t,kr,t=>wt({value:t,mode:t.aspect(yr)}).keepThru(({value:[t],mode:[e]})=>yr.hasData(e)?d(t):d()))},kr={get[Ns](){return xr}},Or={applyTo:t=>Is(t,$r)};class $r extends cr{static get[Ns](){return Or}_applyAspect(t){return t===Or?Is(this,$r,this):super._applyAspect(t)}}class Sr extends ar{remove(t){this.set(t,void 0)}}const Tr={};class Cr{constructor(t){this._map=t}get(t){const e=this._map.get(t);return e&&e[0]}[Symbol.iterator](){return g(k(this._map.values(),([t])=>t))}entries(){return g(k(this._map.entries(),([t,[e]])=>[t,e]))}}class Fr{constructor(t){this._controls=t,this._supply=Z(),this._map=new Map}set(t,e,n,s){const r=this._map.get(t);let i;if(e){i=Z();const o=this.newEntry(t,e,i);let u=!0;r&&(r[0]===e?u=!1:s.push([t,r])),u?(this.modify().set(t,o),n.push([t,o])):this._map.set(t,o)}else i=ot(),r&&(s.push([t,r]),this.modify().delete(t));return r&&r[1].off(Tr),i}newEntry(t,e,n){return[e,Z(e=>{e!==Tr&&this._controls.remove(t)}).needs(this._supply).needs(n).whenOff(t=>n.off(t===Tr?void 0:t))]}modify(){if(this._shot){const t=new Map;_(this._map.entries(),([e,n])=>t.set(e,n)),this._shot=void 0,this._map=t}return this._map}snapshot(){return this._shot||(this._shot=new Cr(this._map))}clear(){const t=[],e=[];return _(this._map.keys(),n=>this.set(n,void 0,t,e)),e}}class Ar extends Sr{constructor(t){super(),this._group=t,this._updates=new Ot;this._map=new Fr(this),this._map._supply.needs(t.read(t=>{this.read().once(e=>{const n=new Set;_(T(t),([t,s])=>{n.add(t);const r=e.get(t);r&&(r.it=s)}),_(e.entries(),([t,e])=>{n.has(t)||(e.it=void 0)})})}))}on(t){return(this.on=this._updates.on().thru((t,e)=>d(t.map(jr),e.map(jr))).F)(t)}read(t){return(this.read=mt(this._updates.on().thru(()=>this._map.snapshot()),()=>[this._map.snapshot()]).F)(t)}set(t,e){const n=this._group,s=[],r=[];let i;return"object"==typeof t?(i=Z(),_(T(t),([t,e])=>{this._map.set(t,e,s,r).needs(i)})):i=this._map.set(t,e,s,r),(s.length||r.length)&&(this._updates.send(s,r),s.length&&function(){let t;s.forEach(([e,[s,r]])=>{s.aspect(lr).add({parent:n}).needs(r).cuts(r);const i=s.it;if(t)t[e]=i;else{const s=n.it;s[e]!==i&&(t=Object.assign(Object.assign({},s),{[e]:i}))}}),t&&(n.it=t);s.forEach(([t,[e,s]])=>{e.read().tillOff(s).to(e=>{n.it[t]!==e&&(n.it=Object.assign(Object.assign({},n.it),{[t]:e}))}).cuts(s)})}()),i}clear(){const t=this._map.clear();t.length&&this._updates.send([],t)}}function jr([t,[e]]){return[t,e]}class Dr extends $r{constructor(t,e){super(e),this._model=Pt(t),this.controls=new Ar(this),J(this).whenOff(()=>this.controls.clear())}get[H](){return J(this._model)}get it(){return this._model.it}set it(t){this._model.it=t}on(t){return(this.on=this._model.on().F)(t)}_applyAspect(t){return t===kr[Ns]?{instance:(e=this,wt({cs:e.controls,model:e,mode:e.aspect(yr)}).keepThru_(Er)),convertTo:r}:super._applyAspect(t);var e}}function Er({cs:[t],model:[e],mode:[n]}){if(!yr.hasData(n))return d();const s={};return _(t.entries(),([t,e])=>{s[t]=e.aspect(kr)}),kt(wt(s).keepThru(t=>{const n=Object.assign({},e);return _(T(t),([t,[e]])=>{n[t]=e}),l(n)}))}function Rr(t,{aspects:e}={}){return new Dr(t,{aspects:e})}const zr=xt();function Ur(){return zr}function Pr(t){return G(t)?o(bt(t)):"function"==typeof t?e=>bt(t(e)):e=>e.read().keepThru(function(t,e){return()=>{const n=e.validate(t);return null==n?d():Array.isArray(n)?d(...n):d(n)}}(e,t))}const Mr={};class Kr{constructor(t){const e=new Ot,n=new Map,i=new Map;let o=r,u=r;this._messages=_t(t=>{const a=bt(e,c()).to(t).whenOff(()=>{o=r,u=r});u=(t,e)=>{const n=t.to((...e)=>{if(e.length)i.set(t,e);else if(!i.delete(t))return;o()}).needs(e).whenOff(n=>{n!==Mr&&e.off(n),i.delete(t)&&o()});a.whenOff(()=>n.off(Mr))},_(n.entries(),([t,e])=>u(t,e)),o=()=>{e.send(...x(i.values(),s))},i.size&&o()}).share().tillOff(t),this.from=e=>{const s=Pr(e)(t),r=Z(()=>{n.delete(s)});return n.set(s,r),u(s,r),r.needs(t)}}[V](){return this._messages}}const qr={applyTo:t=>Bs(t,Nr,(t,e)=>{const n=new Wr(t);if(e){const t=e.aspect(Nr);n.by(t.read().keepThru(t=>d(...t.messages())))}return n})};class Nr{static get[Ns](){return qr}[V](){return this.read()}}const Lr={get ok(){return!0},messages:()=>[],has:()=>!1,hasBut:()=>!1,[Symbol.iterator]:()=>[][Symbol.iterator]()};class Br{constructor(t){this._byCode=new Map,this._all=[],_(t,t=>{let e=!1;_(T(t),([n,s])=>{if(s){e=!0;const s=this._byCode.get(n);s?s.push(t):this._byCode.set(n,[t])}}),e&&this._all.push(t)})}get ok(){return!this._all.length}messages(t){return null==t?this._all:this._byCode.get(t)||[]}has(t){return null==t||this._byCode.has(t)}hasBut(...t){return this._all.some(e=>t.every(t=>!e[t]))}[Symbol.iterator](){return this._all[Symbol.iterator]()}}function Ir(...t){return t.length?new Br(t):Lr}class Wr extends Nr{constructor(t){super(),this._messages=new Kr(t);const e=t.aspect(cr);e&&this._messages.from(function(t){return t.controls.read().keepThru(Vr,Gr)}(e))}by(...t){return this._messages.from(function(...t){const e=t.length;return 1===e?t[0]:e?e=>{const n=new Kr(e);return t.forEach(t=>n.from(t)),n}:Ur}(...t))}read(t){return(this.read=bt(this._messages).keepThru(Ir).F)(t)}}function Vr(t){return kt(vt(...k(t,t=>t.aspect(Nr))))}function Gr(...t){return d(...x(k(t,t=>t[0])))}function Hr(t){return t?t.read().keepThru(t=>t?d():{missing:"missing"}):Hr}class Qr extends pr{constructor(t,{aspects:e,get:n,set:s}){super({aspects:e}),this.element=t,this._input=new Ot;const r=this;this._get=n,this._set=s,this._value=this.it;const i=this._update=(t,e)=>o({value:t},e);function o(t,e){for(;;){let n;r._value=t.value,r._update=(e,s)=>{n=[Object.assign(Object.assign({},t),{value:e}),s]};try{r._input.send(t,e)}finally{r._update=i}if(!n)break;[t,e]=n}}this.events=new ne(t),J(this.events).needs(this),this.listenForInput(t=>o(t,this._value))}get[H](){return J(this._input)}get it(){return this._get()}set it(t){const e=this.it;t!==e&&(this._set(t),this._update(this._get(),e))}input(t){return(this.input=mt(this._input.on().thru(s),()=>[{value:this.it}]).F)(t)}on(t){return(this.on=this._input.on().thru(({value:t},e)=>t===e?f():d(t,e)).F)(t)}listenForInput(t){const e=e=>t({value:this.it,event:e});this.events.on("input").to(e),this.events.on("change").to(e)}}function Jr(t,{aspects:e}={}){return new Qr(t,{get(){return this.element.value},set(t){this.element.value=t},aspects:e})}const Zr={applyTo:t=>Bs(t,Xr,t=>{const e=t.aspect(pr);return e&&new Yr(e)})};class Xr extends zt{static get[Ns](){return Zr}}class Yr extends Xr{constructor(t){super();const{element:e,events:n}=t,s=e.getRootNode?e.getRootNode():e.ownerDocument;this._it=Pt(!!s&&s.activeElement===e),J(this).needs(t),n.on("focus").to(()=>this._it.it=!0),n.on("blur").to(()=>this._it.it=!1),this.on({receive(t,n){t.onRecurrent(r),n?e.focus():e.blur()}})}get[H](){return J(this._it)}get it(){return this._it.it}set it(t){this._it.it=t}on(t){return(this.on=this._it.on().F)(t)}}const ti={applyTo:t=>Bs(t,ei,t=>{const e=t.aspect(cr);return null!=e?new ri(e):new si(t)})};class ei{static get[Ns](){return ti}[V](){return this.read()}}const ni={hasFocus:!1,touched:!1,edited:!1};class si extends ei{constructor(t){super(),this._flags=Pt(ni),J(this._flags).needs(t),this._flags.by(function(t,e){const n=e.aspect(pr);return wt({hasFocus:e.aspect(Xr)||xt(!1),edited:n?n.input().keepThru(({event:t})=>!!t):xt(!1)}).keepThru(({hasFocus:[e],edited:[n]})=>function(t,e,n){t=e?Object.assign(Object.assign({},t),{hasFocus:e,touched:!0}):Object.assign(Object.assign({},t),{hasFocus:e});n&&(t=Object.assign(Object.assign({},t),{edited:n,touched:!0}));return t}(t.it,e,n))}(this._flags,t))}read(t){return(this.read=this._flags.read().F)(t)}markTouched(t=!0){const e=this._flags.it;return t?e.touched||(this._flags.it=Object.assign(Object.assign({},e),{touched:t})):e.touched&&(this._flags.it=Object.assign(Object.assign({},e),{touched:e.hasFocus,edited:!1})),this}markEdited(t=!0){const e=this._flags.it;return t?e.edited||(this._flags.it=Object.assign(Object.assign({},e),{touched:!0,edited:t})):e.edited&&(this._flags.it=Object.assign(Object.assign({},e),{edited:t})),this}}class ri extends ei{constructor(t){super(),this._container=t}read(t){return(this.read=(e=this._container,e.controls.read().tillOff(e).keepThru_(t=>kt(vt(...function(t){return k(t,t=>t.aspect(ei))}(t))),ii)).F)(t);var e}markEdited(t){return this._container.controls.read().once(e=>_(e,e=>e.aspect(ei).markEdited(t))),this}markTouched(t){return this._container.controls.read().once(e=>_(e,e=>e.aspect(ei).markTouched(t))),this}}function ii(...t){const e={hasFocus:!1,touched:!1,edited:!1};return _(t,([{hasFocus:t,touched:n,edited:s}])=>{n&&(e.touched=!0),t&&(e.hasFocus=e.touched=!0),s&&(e.edited=e.touched=!0)}),e}const oi={applyTo(t){const e=t.aspect(pr);return e?Ws(e.element):Ls}},ui={get[Ns](){return oi},to:(t=null)=>({applyAspect:e=>e===oi?Ws(t):void 0})},ci={applyTo:t=>({instance:new di(t),convertTo:r})};class ai{static get[Ns](){return ci}[V](){return this.read()}}const hi=Symbol("reason");function li(t){return t&&"object"==typeof t&&hi in t}class di extends ai{constructor(t){super(),this._control=t,this._sources=Pt([new Map]);const e=t.aspect(ui);e&&this.applyTo(e,this.schedule),J(t).whenOff(t=>this.done(t))}get schedule(){return this._schedule||(this._schedule=pi(this._control,this._control.aspect(ui)))}read(t){return(this.read=this._sources.read().tillOff(this._control).keepThru_(([t])=>kt(vt(...t.keys())),(...t)=>{const e={};return t.forEach(([t])=>fi(t,e)),e}).F)(t)}track(t){return(this.track=_t(t=>{t.supply.needs(this._control);const e=new Ks,n=new et;let s=!1;return n.on(t),this.read(t=>{const r=new Set(e),i=[];_(v(T(t),([,t])=>!!t),([t])=>{r.delete(t)||i.push(t)}),(!s||i.length||r.size)&&(e.delta(i,r),s=!0,e.redelta((t,e)=>n.send(t,e)).undelta())})}).F)(t)}specs(t){return bt(G(t)?t:t(this._control))}resolve(t){const e=this._control.aspect(Hs);return this.specs(t).keepThru((...t)=>{const n={};return t.forEach(t=>{Ht(t)?n[Vt.name(t,e)]=!0:fi(t,n)}),n})}add(t){const e=J(this._control);if(e.isOff)return e;const n=Z(),s=_t(e=>{const s=this.resolve(t).to({receive(t,...n){e.receive(t,...n)}});e.supply.whenOff(t=>{n.off({[hi]:t})}),n.needs(s).whenOff(t=>{li(t)&&s.off(t[hi])})}).share(),[r]=this._sources.it;return r.set(s,n),n.whenOff(t=>{li(t)||(r.delete(s),this._sources.it=[r])}),this._sources.it=[r],n.needs(e)}applyTo(t,e=pi(this._control,t)){const{classList:n}=t,s=new Ks,r=()=>{s.redelta((t,e)=>{n.remove(...e),n.add(...t)}).undelta()};return this.track((t,n)=>{s.delta(t,n),e(r)}).whenOff(()=>{s.size&&(s.clear(),e(r))})}done(t){return _(this._sources.it[0].values(),e=>e.off(t)),this._sources.done(t),this}}function fi(t,e){_(T(t),([t,n])=>{null!=n&&(e[t]=n)})}function pi(t,e){return t.aspect(Js)({node:e})}const gi=[["has-error",Vs]];function yi(t){return!t.ok}function _i({ns:t=Vs}={}){return e=>{const n=e=>[e,t];return wt({md:e.aspect(yr),vl:e.aspect(Nr),st:e.aspect(ei)}).keepThru(({md:[t],vl:[e],st:[{hasFocus:s,touched:r,edited:i}]})=>{const o=[];return yr.hasData(t)||o.push(n("disabled")),"ro"!==t&&"-ro"!==t||o.push(n("readonly")),e.ok||o.push(n("invalid")),e.has("missing")&&o.push(n("missing")),e.has("incomplete")&&o.push(n("incomplete")),s&&o.push(n("has-focus")),r&&o.push(n("touched")),i&&o.push(n("edited")),d(...o)})}}function mi(e){return t(e,{isIdentifier:!0})}function bi(t){return Array.isArray(t)}function wi(t){return!!t.length}class vi{constructor(t){this.priority=t&&t.priority||0}important(){return this.prioritize(1)}usual(){return this.prioritize(0)}}function xi(t,e){return t===e||("object"==typeof t?t.is(e):"object"==typeof e&&e.is(t))}class ki extends vi{}class Oi extends ki{constructor(t,e){super(e),this.r=Ti(t.r,255),this.g=Ti(t.g,255),this.b=Ti(t.b,255),this.a=null!=t.a?Ci(t.a,1):1}get type(){return"rgb"}get rgb(){return this}get hsl(){const{a:t}=this,e=100*this.r/255,n=100*this.g/255,s=100*this.b/255,r=Math.max(e,n,s),i=Math.min(e,n,s),o=Math.round((r+i)/2);if(r===i)return new $i({h:0,s:0,l:o,a:t},this);const u=r-i,c=Math.round(o>50?100*u/(200-r-i):100*u/(r+i));let a;switch(r){case e:a=(n-s)/u+(n<s?6:0);break;case n:a=(s-e)/u+2;break;default:a=(e-n)/u+4}return a*=60,a=Math.round(a),new $i({h:a,s:c,l:o,a:t},this)}by(t){return Si.by(t)||this}is(t){return"object"==typeof t&&t.type===this.type&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a&&t.priority===this.priority}prioritize(t){return this.priority===t?this:new Oi(this,{priority:t})}set(t){"function"==typeof t&&(t=t(this));const{r:e=this.r,g:n=this.g,b:s=this.b,a:r=this.a}=t;return new Oi({r:e,g:n,b:s,a:r},this)}toString(){const t=`${this.r}, ${this.g}, ${this.b}`;return 1===this.a?`rgb(${t})`:`rgba(${t}, ${this.a})`}}class $i extends ki{constructor(t,e){var n;super(e),this.h=(n=t.h,(n%=360)<0?360+n:n),this.s=Ci(t.s,100),this.l=Ci(t.l,100),this.a=null!=t.a?Ci(t.a,1):1}get type(){return"hsl"}get rgb(){const{a:t}=this,e=this.s/100,n=this.l/100;if(!e){const e=255*n;return new Oi({r:e,g:e,b:e,a:t},this)}const s=n<.5?n*(1+e):n+e-n*e,r=2*n-s,i=this.h/360;return new Oi({r:Fi(r,s,i+1/3),g:Fi(r,s,i),b:Fi(r,s,i-1/3),a:t},this)}get hsl(){return this}by(t){return Si.by(t)||this}is(t){return"object"==typeof t&&t.type===this.type&&t.h===this.h&&t.s===this.s&&t.l===this.l&&t.a===this.a&&t.priority===this.priority}prioritize(t){return this.priority===t?this:new $i(this,{priority:t})}set(t){"function"==typeof t&&(t=t(this));const{h:e=this.h,s:n=this.s,l:s=this.l,a:r=this.a}=t;return new $i({h:e,s:n,l:s,a:r},this)}toString(){const t=`${this.h}, ${this.s}%, ${this.l}%`;return 1===this.a?`hsl(${t})`:`hsla(${t}, ${this.a})`}}const Si={by(t){if("object"==typeof t&&("rgb"===t.type||"hsl"===t.type))return t}};function Ti(t,e){return Ci(Math.round(t),e)}function Ci(t,e){return Math.max(Math.min(t,e),0)}function Fi(t,e,n){let s,r=n;return r<0?r+=1:r>1&&(r-=1),s=r<1/6?t+6*r*(e-t):r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t,255*s}function Ai(t,e,n){const s=2*n-1,r=t.rgb,i=e.rgb,o=r.a-i.a,u=((s*o==-1?s:(s+o)/(1+s*o))+1)/2,c=1-u;return new Oi({r:r.r*u+i.r*c,g:r.g*u+i.g*c,b:r.b*u+i.b*c,a:r.a*n+i.a*(1-n)},t)}class ji extends vi{constructor(t){super(t),this.dim=t.dim}by(t){return this.dim.by(t)||this}toString(){return this.toFormula()}}const Di={map(t,e){const n={},s={from:e,get(s){if(s in n)return n[s];const r=function(t){switch(typeof t){case"function":return t;case"object":return t.by.bind(t)}const e=typeof t;return n=>typeof n===e?n:t}(t[s])(e[s],this,s);return n[s]=r,r}};return _(S(t),t=>s.get(t)),n},by:t=>Di.map.bind(void 0,t)};function Ei(t){if(null==t)return[void 0,0];switch(typeof t){case"object":return[t,t.priority];case"string":if(t.endsWith("!important"))return[t.substring(0,t.length-"!important".length).trim(),1]}return[t,0]}class Ri extends ji{constructor(t,e,n){super(n),this.val=t,this.unit=e}get type(){return"dimension"}toDim(t){const e=this.dim;if(t===e||t===e.pt||t===("%"===this.unit?t.pt:e.noPt))return this}is(t){return t===this||"object"==typeof t&&t.type===this.type&&this.unit===t.unit&&this.val===t.val&&this.priority===t.priority}prioritize(t){return this.priority===t?this:new Ri(this.val,this.unit,{dim:this.dim,priority:t})}add(t,e){return"number"==typeof t&&(t=zi(t,e||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?zi(this.val+t.val,this.unit,this):Mi(this,"+",t)}sub(t,e){return"number"==typeof t&&(t=zi(t,e||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?zi(this.val-t.val,this.unit,this):Mi(this,"-",t)}mul(t){return 1===t?this:zi(this.val*t,this.unit,this)}div(t){return 1===t?this:zi(this.val/t,this.unit,this)}negate(){return zi(-this.val,this.unit,this)}toFormula(){return this.val+this.unit}}function zi(t,e,n){return t?new Ri(t,e,n):n.dim.zero.prioritize(n.priority||0)}class Ui extends ji{constructor(t,e,n,s){super(s),this.left=t.usual(),this.op=e,this.right=n}get type(){return"calc"}is(t){return this===t||"object"==typeof t&&t.type===this.type&&(this.op===t.op&&this.left.is(t.left)&&xi(this.right,t.right)&&this.priority===t.priority)}add(t,e){return"number"==typeof t&&(t=zi(t,e,this)),Mi(this,"+",t)}sub(t,e){return"number"==typeof t&&(t=zi(t,e,this)),Mi(this,"-",t)}mul(t){return qi(this,t)}div(t){return Ni(this,t)}toString(){return"calc"+super.toString()}}class Pi extends Ui{constructor(t,e,n,s){super(t,e,n.usual(),s)}prioritize(t){return this.priority===t?this:new Pi(this.left,this.op,this.right,{dim:this.dim,priority:t})}toDim(t){const e=this.left.toDim(t);if(!e)return;const n=this.right.toDim(t);return n?e===this.left&&n===this.right?this:new Pi(e,this.op,n,{dim:t,priority:this.priority}):void 0}negate(){return"-"===this.op?new Pi(this.right,this.op,this.left,this):new Pi(this.left.negate(),"-",this.right,this)}toFormula(){return`(${this.left.toFormula()} ${this.op} ${this.right.toFormula()})`}}function Mi(t,e,n){return n.type?new Pi(t,e,n,t):t}class Ki extends Ui{prioritize(t){return this.priority===t?this:new Ki(this.left,this.op,this.right,{dim:this.dim,priority:t})}toDim(t){const e=this.left.toDim(t);if(e)return e===this.left?this:new Ki(e,this.op,this.right,{dim:t,priority:this.priority})}mul(t){return("*"===this.op?qi(this.left,this.right*t):Ni(this.left,this.right/t)).prioritize(this.priority)}div(t){return("/"===this.op?Ni(this.left,this.right*t):qi(this.left,this.right/t)).prioritize(this.priority)}negate(){return new Ki(this.left,this.op,-this.right,this)}toFormula(){return`(${this.left.toFormula()} ${this.op} ${this.right})`}}function qi(t,e){return e?1===e?t.prioritize(t.priority):new Ki(t,"*",e,t):t.dim.zero.prioritize(t.priority)}function Ni(t,e){return 1===e?t.prioritize(t.priority):new Ki(t,"/",e,t)}class Li extends ji{constructor(t,e){super(e),this._byPriority=t}get type(){return 0}toDim(t){return t.zero.prioritize(this.priority)}is(t){return this===t||("object"==typeof t?t.type===this.type&&t.priority===this.priority:0===t||"0"===t?0===this.priority:"0 !important"===t&&1===this.priority)}add(t,e){return"number"==typeof t&&(t=zi(t,e,this)),t.prioritize(this.priority)}sub(t,e){return"number"==typeof t&&(t=zi(t,e,this)),t.negate().prioritize(this.priority)}mul(){return this}div(){return this}negate(){return this}prioritize(t){return this._byPriority.get(t)}important(){return this._byPriority.important}usual(){return this._byPriority.usual}toFormula(){return"0"}}class Bi{constructor(t){this.dim=t,this.usual=new Li(this,{dim:t}),this.important=new Li(this,{dim:t,priority:1})}get(t){switch(t){case 0:return this.usual;case 1:return this.important}return new Li(this,{dim:this.dim,priority:t})}}function Ii({pt:t,noPt:e}){const n={get zero(){return s},get pt(){return t()},get noPt(){return e()},of(t,e){return t?new Ri(t,e,{dim:this}):s},by(t){if(!function(t){return"object"==typeof t&&("dimension"===t.type||"calc"===t.type||0===t.type)}(t))return;return t.toDim(this)}},s=new Bi(n).usual;return n}const Wi=Ii({pt:()=>Vi,noPt:()=>Wi}),Vi=Ii({pt:()=>Vi,noPt:()=>Wi});class Gi extends vi{constructor(t,e){super(e),this.url=t}get type(){return"url"}static by(t){switch(typeof t){case"string":{const[e,n]=Ei(t);return new Gi(e,{priority:n})}case"object":if("url"===t.type)return t}}by(t){return Gi.by(t)||this}prioritize(t){return t===this.priority?this:new Gi(this.url,{priority:t})}is(t){return"object"==typeof t&&"url"===t.type&&t.url===this.url&&t.priority===this.priority}toString(){return`url('${t(this.url)}')`}}const Hi=xt({});function Qi(){return Hi}function Ji(t,e){if(!e)return Hi;if("string"!=typeof e){if(G(e))return Xi(e);if(st(e))return Xi(Zi(e));if("function"==typeof e){const n=e(t);if("string"!=typeof n){if(G(n))return Xi(n);if(st(n))return Xi(Zi(n))}return xt(Yi(n))}}return xt(Yi(e))}function Zi(t){return bt(t,c({}))}function Xi(t){return bt(t).keepThru(Yi,function(){let t;return e=>t&&function(t,e){const n=p(to(e));for(const[e,s]of to(t)){const{value:t}=n.next();if(!t||e!==t[0]||!xi(s,t[1]))return!1}return!n.next().value}(e,t)?f():t=Object.assign({},e)}(),s)}function Yi(t){return"string"==typeof t?{$$css:t}:t}function to(t){return v(T(t),i)}function eo(t,e){return Xi(wt({base:t,addendum:e}).keepThru(({base:[t],addendum:[e]})=>function(t,e){return w(T(e),(t,[e,n])=>function(t,e,n){no(t[e])<=no(n)&&(delete t[e],t[e]=n);return t}(t,e,n),Object.assign({},t))}(t,e)))}function no(t){switch(typeof t){case"string":return t.endsWith("!important")?1:0;case"object":return t.priority;default:return 0}}function so(t){return">"===t||"+"===t||"~"===t}function ro(t){if(!bi(t))return[io(t)];const e=[];let n;for(const s of t){const t=n;let r;if(n&&(e.push(n),n=void 0),so(s)){if(n=s,!t)continue;r={}}else r=io(s);e.push(r)}return n&&e.push(n,{}),e}function io(t){return"string"==typeof t?t?{s:t}:{}:oo(t)}function oo(t){const e=t.ns||void 0,n=t.i||void 0,s=function(t){if(!t)return;if(Ht(t))return[t];const e=t.filter(t=>!!t);return wi(e)?e.sort(Qt):void 0}(t.c),r=function(t){if(!t)return;if(function(t){return"string"!=typeof t[0]}(t)){const e=t.map(uo);return wi(e)?e:void 0}return[uo(t)]}(t.u);return{ns:e,e:("*"!==t.e||!e&&!n&&!s&&r&&co(r[0]))&&t.e||void 0,i:n,c:s,u:r,s:t.s||void 0,$:ao(t.$)}}function uo(t){if(!co(t))return t;if(t.length<3)return t;const[e,n,...s]=t;return bi(s[0])?[e,n,...s.map(ro)]:[e,n,ro(s)]}function co(t){return t.length>1&&(":"===t[0]||"::"===t[0])}function ao(t){if(t)return wi(t=bi(t)?Array.from(new Set(x(t,lo))).sort():Array.from(lo(t)))?t:void 0}const ho=new Set;function lo(t){if(!t)return ho;const e=t.indexOf("="),n=e<0?t:t.substring(0,e),s=new Set;let r;for(const t of n.split(":"))r?r+=":"+t:r=t,s.add(r);return e>=0&&s.add(t),s}const fo=[[]];function po(t){if(!t.length)return fo;let e,n=0;for(;;){const s=t[n++];if(!so(s))return[e?[e,s]:[s],t.slice(n)];e=s}}const go=[];function yo(t,e){return t&&e.every(e=>t.find(t=>function(t,e){if("string"==typeof t)return"string"==typeof e?t===e:!e[1].url&&e[0]===t;const[n,{url:s}]=t;return"string"==typeof e?!s&&n===e:n===e[0]&&s===e[1].url}(e,t)))}function _o(t){return ro(t)}const mo={qualify:t=>"@"+mi(t)};function bo(t){return vo(t,mo)}const wo={};function vo(e,{qualify:n,nsAlias:s=Zt()}=wo){const r={qualify:n,nsAlias:s};return e.reduce((e,n)=>so(n)?e+n:(e&&!so(e[e.length-1])&&(e+=" "),e+function(e,{qualify:n,nsAlias:s}){const{ns:r,e:i,i:o,c:u,s:c,u:a,$:h}=e;let l=!1,d="";o&&(l=!0,d+="#"+mi(It.name(o,s)));u&&(l=!0,d=u.reduce((t,e)=>`${t}.${mi(Vt.name(e,s))}`,d));if(a){l=!0;const e={nsAlias:s};d=a.reduce((n,s)=>function(e,n,s){if(co(n)){if(e+=n[0]+n[1],n.length>2){e+="("+vo(n[2],s);for(let t=3;t<n.length;++t)e+=","+vo(n[t],s);e+=")"}return e}const[r,i,o,u]=n;e+="["+mi(r),i&&(e+=i+t(o,{quotes:"double",wrap:!0}));u&&(e+=" "+u);return e+"]"}(n,s,e),d)}c&&(l=!0,d+=c);n&&h&&(d=h.reduce((t,e)=>t+n(e),d));if(r){const t=function(t,e){return"string"==typeof t?t:t.url?e(t):void 0}(r,s);d=t?`${t}|${i||"*"}${d}`:f()}else d=f();return d;function f(){return l?`${i?Lt.name(i,s):""}${d}`:`${i?Lt.name(i,s):"*"}${d}`}}(n,r)),"")}class xo{constructor(t){this._rule=t}read(t){let e=this._rule.outer;for(;e;)t=eo(e.read().keepThru($o),t),e=e.outer;return t}render(t,e){const{selector:n}=t;let{writer:s}=t;if(!s.isGroup)return void t.render(e);let r=s;const i=function(t){const e=new Map,n=[];for(const s of t)so(s)?n.push(s):n.push(To(s,e));if(!e.size)return;return[e,_o(n)]}(n);if(!i)return void t.render(e);const[o,u]=i;for(const t of o){const[n,i]=ko(e,t);if(!i){s=r.addStyle(n);break}s=r=r.addGroup(n,i)}t.render(e,{writer:s,selector:u})}}function ko(t,[e,[n,s]]){let r="";const i=t=>{t&&(r&&(r+=" and "),r+=t)};for(const e of n){const[n]=Ei(t[e]);i(n)}return i(s),r?[e,r]:[e]}const Oo={order:-65535,create:t=>new xo(t)};function $o(t){return w(v(T(t),So),(t,[e,n])=>(t[e]=n,t),{})}function So(t){return"@"===String(t[0])[0]}function To(t,e){const n=t.$;if(!n)return t;const s=[];for(const t of n)"@"===t[0]?Co(e,t):s.push(t);return s.length===n.length?t:wi(s)?Object.assign(Object.assign({},t),{$:s}):Object.assign(Object.assign({},t),{$:void 0})}function Co(t,e){const n=e.indexOf("=");let s,r;n<0?s=e:(s=e.substring(0,n),r=e.substring(n+1));const i=s.indexOf(":"),o=i<0?s:s.substring(0,i),u=t.get(o);if(u){const[t,e]=u;t.add(s),r&&(u[1]=e?`${e} and ${r}`:r)}else t.set(o,[(new Set).add(s),r])}const Fo={order:-65534,needs:Oo,render(t,e){const n=!t.rule.selector.length,{sheet:s}=t;let r=0,i=0;for(const[t,o]of T(e)){const e=String(t);if("@"===e[0]){const[t]=Ei(o),u=n?Ao(s,r,e,t):0;r+=u,i+=u;const c=Gi.by(t);c&&(i+=jo(s,i,e,c),i+=Do(s,i,e,c))}}t.render(e)}};function Ao(t,e,n,s){if(!n.startsWith("@import:"))return 0;const r=new Gi(n.substring("@import:".length));let i=String(r);return s&&(i+=" "+s),t.addGlobal("@import",i,e),1}function jo(t,e,n,s){return"@namespace"!==n?0:(t.addGlobal("@namespace",String(s),e),1)}function Do(t,e,n,s){if(!n.startsWith("@namespace:"))return 0;const r=n.substring("@namespace:".length);return t.addGlobal("@namespace",`${r} ${s}`,e),1}function Eo(t,n){const s=t.addStyle();_(v(T(n),Ro),([t,n])=>{const[r,i]=Ei(n);s.set(e(t),""+r,i)}),t.render(n,{writer:s})}function Ro(t){const[e,n]=t;if(null==n)return!1;const s=String(e)[0];return s>="a"&&s<="z"||s>="A"&&s<="Z"}function zo(t,e){const n=e.$$css;if(n){const s=t.addStyle();s.replace(n),t.render(e,{writer:s})}else t.render(e)}const Uo={order:-65535,needs:Fo,render(t,e){const n=v(k(O(t.selector),t=>!so(t)&&t.ns&&"string"!=typeof t.ns?t.ns:null),i);function s(e,n){return e["@namespace:"+t.nsAlias(n)]=new Gi(n.url),e}t.render(m(n)?e:w(n,s,Object.assign({},e)))}};function Po(t){if("function"==typeof t)return{create:()=>({render:t})};if(function(t){return"create"in t}(t))return{order:t.order,needs:t.needs,create:e=>function(t){return"function"==typeof t?{render:t}:t}(t.create(e))};const e=t.render.bind(t);return{order:t.order,needs:t.needs,create:()=>({render:e})}}function Mo(t,e){const n=t.order||0,s=e.order||0;return n>s?1:n<s?-1:0}function Ko(t,e=xe){return(n={})=>{const{node:s=t,error:r}=n;return e(Object.assign(Object.assign({},n),{node:s,error:r&&r.bind(n)}))}}function qo(t){var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}const No={indent:"  "},Lo={nv:"",eol:"",pre:"",indent(){return this}};class Bo{constructor(t,e=""){this._config=t,this.pre=e}get nv(){return" "}get eol(){return"\n"}indent(){return new Bo(this._config,this.pre+this._config.indent)}}class Io{constructor(t,e){this.f=t,this.selector=e,this.body="",this.nf=t.indent()}get isGroup(){return!1}set(t,e,n){const s=n>=1?" !important":"",{pre:r,nv:i,eol:o}=this.nf;this.body&&(this.body+=";"+o),this.body+=`${r}${t}:${i}${e}${s}`}replace(t){this.body=t.trim(),this.body.endsWith(";")&&(this.body=this.body.substr(0,this.body.length-1))}toString(){const{pre:t,nv:e,eol:n}=this.f;if(this.body){const s=n?";"+n:"";return`${t}${this.selector}${e}{${n}${this.body}${s}${t}}`}return""}}class Wo{constructor(t){this.nf=t,this._nested=[]}get isGroup(){return!0}addGroup(t,e,n){return this._add(new Vo(this.nf,t,e),n)}addStyle(t,e){return this._add(new Io(this.nf,t),e)}toString(){let t="";for(const e of this._nested){const n=String(e);n&&(t&&(t+=this.nf.eol),t+=n)}return t}_add(t,e=this._nested.length){return this._nested.splice(e,0,t),t}}class Vo extends Wo{constructor(t,e,n){super(t.indent()),this.f=t,this.name=e,this.params=n}toString(){const t=super.toString();if(!t)return"";const{pre:e,nv:n,eol:s}=this.f;return`${e}${this.name} ${this.params}${n}{${s}${t}${s}${e}}`}}class Go extends Wo{constructor(t,e,n){super(e),this.id=t,this.f=e,this.sender=n}addGlobal(t,e,n){this._add(`${this.f.pre}${t} ${e};`,n)}clear(){this._nested.length=0}remove(){this.clear(),this.sender.send({id:this.id})}done(){this.sender.send({id:this.id,css:this.toString()})}}function Ho(t={}){var e;const{document:n=(null===(e=t.parent)||void 0===e?void 0:e.ownerDocument)||window.document,parent:s=n.head}=t,r=function(t={}){const e=!0===t.pretty||null==t.pretty?No:t.pretty||!1,{scheduler:n=we}=t,s=new Ot;let r=t=>(r=s.on().F)(t);const i=e?new Bo(e):Lo;let o=0;return Object.assign(Object.assign({},t),{pretty:e,scheduler:n,onSheet:r,addSheet:()=>new Go(String(++o),i,s)})}(t),i=Ko(s,t.scheduler),o=i(),u=new Map,c=r.onSheet(({id:t,css:e})=>{let r=u.get(t);null==e?(u.delete(t),qo(r)):r?r.textContent=e:(r=n.createElement("style"),r.setAttribute("type","text/css"),r.textContent=e,s.appendChild(r),u.set(t,r),c.whenOff(()=>o(()=>qo(r))))});return Object.assign(Object.assign({},t),{scheduler:i,addSheet(t){return c.needs(t),this.addSheet=r.addSheet.bind(r),this.addSheet(t)}})}class Qo{constructor(t){this._target=t}get isGroup(){return!1}set(t,e,n){this._target.style.setProperty(t,e,n>=1?"important":null)}replace(t){this._target.style.cssText=t}}class Jo{constructor(t){this._target=t}get isGroup(){return!0}addGroup(t,e,n){return new Jo(this._add(`${t} ${e}{}`,n))}addStyle(t,e){return new Qo(this._add(t+"{}",e))}_add(t,e=this._target.cssRules.length){const n=this._target.insertRule(t,e);return this._target.cssRules[n]}}class Zo extends Jo{constructor(t){super(t.sheet),this._element=t}addGlobal(t,e,n){this._add(`${t} ${e};`,n)}clear(){const{cssRules:t}=this._target;for(;t.length;)this._target.deleteRule(t.length-1)}remove(){qo(this._element)}done(){}}function Xo(t,e){const{rootSelector:n={e:"body"},scheduler:s=xe,nsAlias:i=Zt()}=e,o=Z(),u={nsAlias:i},c=function(t){const e=new Map;return n(t.renderer),e.delete(Eo),[...e.values(),Po(Eo)].sort(Mo);function n(t){t&&(bi(t)?t.forEach(s):s(t))}function s(t){if(e.has(t))return;const s=Po(t);e.set(t,s),n(s.needs)}}(e),a=w(k(t,d),(t,e)=>Z().cuts(e).cuts(t),Z());const h=function(){const e=Z();return St(t).to({supply:e,receive:(t,n)=>{n.forEach(t=>d(t).needs(e))}})}();return o.needs(a).needs(h).cuts(a).cuts(h);function l(t,e,n){return new class{get[H](){return o}get rule(){return t}get sheet(){return n.sheet}get writer(){return n.writer}get selector(){return n.selector}nsAlias(t){return i(t)}render(s,r){e(r?l(t,e,{sheet:n.sheet,writer:r.writer||n.writer,selector:r.selector||n.selector}):this,s)}addStyle(t=n.selector){const{writer:e}=n;return e.isGroup?e.addStyle(function(t,e){return vo(_o(t),e)}(t,u)):e}}}function d(t){const[i,o]=function(t){const e=c.map(e=>e.create(t));return[e.reduce((t,e)=>e.read?bt(e.read(t)):t,t.read()),function t(n){return(s,i)=>{const o=n+1;let u;u=o===c.length?r:t(o);const a=l(s.rule,u,s);e[n].render(a,i)}}(0)]}(t);let u;const a=function(t){const e=t.selector;if(!e.length)return _o(n);if(so(e[0]))return[..._o(n),...e];return e}(t),h=s();return i.to((function(n){h(()=>{null==u||u.clear();const s=l(t,o,{get sheet(){return u||(u=e.addSheet(s)),u},get writer(){return this.sheet},selector:a});s.render(n),null==u||u.done()})})).whenOff((function(){h(()=>{const t=u;if(t)return u=void 0,t.remove()})}))}}function Yo(t){const e=[Oo,Uo,Fo,zo];return t&&(bi(t)?e.push(...t):e.push(t)),e}function tu(t,e){return Xo(t,Object.assign(Object.assign({},e),{renderer:Yo(e.renderer)}))}class eu{[V](){return this.read()}add(t){return this.rules.add([],t)}clear(){return this.set()}}class nu{[V](){return this.read()}[nt](){return this.onUpdate()}}class su extends nu{}class ru extends nu{constructor(t,e){super(),this._list=t,e?(this._buildList=()=>v(t,e),this._filterArray=t=>t.filter(e)):(this._buildList=()=>t,this._filterArray=s)}read(t){return(this.read=mt(this.onUpdate().thru(o(this)),c(this)).F)(t)}onUpdate(t){return(this.onUpdate=pt(t=>{const e=this._ruleSet||(this._ruleSet=new Set(this._buildList()));St(this._list).to({supply:t.supply.whenOff(()=>this._ruleSet=void 0),receive:(n,s,r)=>{s=this._filterArray(s),((r=this._filterArray(r)).length||s.length)&&(r.forEach(t=>e.delete(t)),s.forEach(t=>e.add(t)),t.receive(n,s,r))}})}).share().F)(t)}[Symbol.iterator](){return this._ruleSet?this._ruleSet.values():g(this._buildList())}grab(t){return iu(this,t)}}function iu(t,e){const n=function(t){return oo(t)}(e);return new ru(t,t=>function(t,e){if(!t.length)return!1;const n=t[t.length-1];return(!e.ns||n.ns===e.ns)&&((!e.e||n.e===e.e)&&((!e.i||n.i===e.i)&&(!(e.c&&!yo(n.c,e.c))&&!(e.$&&!yo(n.$,e.$)))))}(t.selector,n))}class ou extends su{constructor(t,e){super(),this._root=t,this.nested=e,this._updates=new Ot,this.self=function(t,e){const n=new Ot,s=[t];e.onUpdate((e,r)=>{r[0]===t&&(s.length=0,n.send([],[t]))}).cuts(n);class r{[nt](){return n.on()}[Symbol.iterator](){return g(s)}}return new ru(new r)}(t,this)}read(t){return(this.read=mt(this._updates.on().thru(o(this)),c(this)).F)(t)}onUpdate(t){return(this.onUpdate=this._updates.on().F)(t)}[Symbol.iterator](){return cu(this._root)}grab(t){return iu(this,t)}add(t,e){return function t(e,n,s,r){const[i,o]=po(n);if(!o)return e._spec.it=function(t,e){const n=t._spec.it;if(!e)return n;if(t.empty)return t=>Ji(t,e);return t=>eo(n(t),Ji(t,e))}(e,s),e;const u=bo(i),c=e.rules.nested._rule(u);if(c)return t(c,o,s,r);const a=new hu(e.root,[...e.selector,...i],i),h=t(a,o,s,!1);return e.rules.nested._add(u,a,r),h}(this._root,_o(t),e,!0)}get(t){return this._get(_o(t))}_get(t){const[e,n]=po(t);if(!n)return this._root;const s=this.nested._rule(bo(e));return s?s.rules.get(n):void 0}watch(t){const e=_o(t);return _t(t=>{const n=Pt({}),s=this.read().consume(()=>{const t=this._get(e);return t&&t.read(t=>n.it=t).whenOff(()=>n.it={})});return n.read(t).cuts(s)}).share()}_add(t,e){t.rules.onUpdate((t,e)=>this._updates.send(t,e)),e&&this._updates.send(uu(t),[])}_remove(t){const e=uu(this._root);this._updates.send([],e),e.forEach(e=>{e.rules._updates.done(t),e._spec.done(t)})}}function uu(t){return Array.from(cu(t))}function*cu(t){yield t;for(const e of t.rules.nested)yield*uu(e)}class au extends nu{constructor(t){super(),this._updates=new Ot,this._byKey=new Map,this._all=new ou(t,this)}read(t){return(this.read=mt(this._updates.on().thru(o(this)),c(this)).F)(t)}onUpdate(t){return(this.onUpdate=this._updates.on().F)(t)}[Symbol.iterator](){return this._byKey.values()}grab(t){return iu(this,t)}_rule(t){return this._byKey.get(t)}_add(t,e,n){this._byKey.set(t,e),e.rules.onUpdate((n,s)=>{s[0]===e&&(this._byKey.delete(t),this._updates.send([],[e]))}),n&&this._updates.send([e],[]),this._all._add(e,n)}}class hu extends eu{constructor(t,e,n,s=Qi){super(),this._root=t||this,this._selector=e,this._key=n,this._spec=Pt(s),this._nested=new au(this)}get root(){return this._root}get outer(){if(void 0!==this._outer)return this._outer;const t=function(t){let e=t.length-1;if(e<=0)return e?void 0:go;do{switch(--e,t[e]){case">":return t.slice(0,e);case"+":case"~":--e;continue;default:return t.slice(0,e+1)}}while(e>0)}(this.selector);return this._outer=t&&this.root.rules.get(t)||null}get selector(){return this._selector}get key(){return this._key}get empty(){return this._spec.it===Qi}get rules(){return this._nested._all}read(t){return(this.read=this._spec.read().keepThru(t=>kt(t(this))).F)(t)}set(t){return this._spec.it=t?e=>Ji(e,t):Qi,this}remove(t){return this.rules._remove(t),this}}const lu=[];class du{[V](){return this.read()}clear(){return this.set()}}class fu extends du{constructor(t,e,n){super(),this._root=t,this._selector=e,this._map=n}read(t){return(this.read=wt({ms:this._map(this._root),ps:this._root.rules.watch(this._selector)}).keepThru(({ms:[t],ps:[e]})=>l(Di.map(t,e))).F)(t)}add(t){return this._root.rules.add(this._selector,t),this}set(t){return this._root.rules.add(this._selector).set(t),this}}const pu={by(t,e){let n;return n="function"==typeof e?t=>gu(e(t)):o(gu(e)),e=>new fu(e,t,n)}};function gu(t){return G(t)?t:xt(t)}class yu{constructor(t){this.refs=t}static by(t,e){const n={};for(const s of Object.keys(t))n[s]=t[s](e);return new yu(n)}read(t){const e=wt(this.refs);return(this.read=e.keepThru(_u).F)(t)}[V](){return this.read()}}function _u(t){const e={};for(const n of Object.keys(t))e[n]=t[n][0];return e}const mu=new ru({[nt]:()=>$t,[Symbol.iterator]:()=>[][Symbol.iterator]()});function bu(...t){return t.length?ku(t.map(wu)):mu}function wu(t){return"function"==typeof t?function(t){let e;return{[Symbol.iterator]:()=>n()[Symbol.iterator](),[nt]:()=>n()[nt]()};function n(){return e||(e=Ou(t()))}}(t):Ou(t)}function vu(...t){return t.length?ku(t.map(xu)):mu}function xu(t){return"function"==typeof t?function(t){const e=new Set,n=pt(n=>{const s=Ou(t());$u(s,e,n),s[nt]().to({supply:n.supply.whenOff(()=>e.clear()),receive(t,s,r){r.forEach(t=>e.delete(t)),s.forEach(t=>e.add(t)),n.receive(t,s,r)}})}).share();return{[nt]:()=>n,[Symbol.iterator]:()=>e.values()}}(t):Ou(t)}function ku(t){if(1===t.length){const e=t[0];return e instanceof nu?e:new ru(e)}return new ru({*[Symbol.iterator](){for(const e of t)yield*e},[nt]:()=>pt(e=>{t.forEach(t=>St(t).to({supply:Z().needs(e.supply),receive(t,n,s){e.receive(t,n,s)}}))}).share()})}function Ou(t){return t instanceof eu?t.rules.self:st(t)?t:function(t){const e=new Set,n=pt(n=>{let s=ot();const{supply:r}=n;r.cuts(s).whenOff(()=>e.clear()),t.then(t=>{if(!r.isOff){const i=t instanceof eu?t.rules:t;$u(i,e,n),s=St(i).to({receive(t,s,r){r.forEach(t=>e.delete(t)),s.forEach(t=>e.add(t)),n.receive(t,s,r)}}).needs(r)}}).catch(t=>r.off(t))}).share();return{[nt]:()=>n,[Symbol.iterator]:()=>e.values()}}(t)}function $u(t,e,n){const s=[];if(_(t,t=>{s.push(t),e.add(t)}),s.length){const t=new et;t.on(n),t.send(s,[])}}function Su({$:t,n:e,t:n,v:s,x:r=[],p:i={},pl:o=[]}){return{$:t,n:e,t:n,v:s,x:r,p:i,pl:o}}function Tu({p:t,pl:e},n){const s=n.n||n.v,r=t[s];(!r||!r.n&&n.n)&&(t[s]=n),e.push(n)}function Cu(t){return e=>{const n=e.s[e.i];return e.d=t.delimiterOf(n),n}}const Fu=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d\d (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d\d\d\d \d\d:\d\d:\d\d GMT/;function Au(t,e){return t.s=t.s.substring(t.i),t.i=0,!!Fu.test(t.s)&&(e(t.s.substring(t.i,t.i+=29)),!0)}const ju=()=>!1;function Du(t,{named:e=!0,tagged:n=!0,extra:s=!0,next:r=Cu(t)}={}){const i=function(t){return(e,n)=>{let s="";for(++e.i;e.i<e.s.length;++e.i){const r=e.s[e.i];if("\\"===r){const t=e.s[++e.i];s+=t||r}else{if(65536&t.delimiterOf(r))return++e.i,void n(s);s+=r}}n(s)}}(t),o=function(t){return(e,n)=>{if(!(262144&t.delimiterOf(e.s[e.i])))return!1;let s="";for(++e.i;e.i<e.s.length;){const n=e.s[e.i++];if(524288&t.delimiterOf(n))break;s+=n}return n(s),!0}}(t),u=s?Du(t,{next:r,tagged:!1,named:!1,extra:!1}):ju;return(t,s)=>{let c,a,h,l="",d="raw";for(;t.i<t.s.length;){const s=r(t);if(t.d){if(12&t.d)break;if(null==a){if(16&t.d){a=l?"":s,++t.i;continue}if(65536&t.d){!n&&l||i(t,t=>{l?(d="tagged-string",c=l):d="quoted-string",l="",a=t});break}if(!l&&o(t,t=>{d="angle-bracketed-string",a=t}))break;a=l,l=""}else{if(65536&t.d){!n&&a||i(t,t=>{a?(d="tagged-string",c=a):d="quoted-string",a=t});break}if(!a&&o(t,t=>{d="angle-bracketed-string",a=t}))break}}if(null==a){if(!l&&Au(t,t=>a=t)){d="date-time";break}e?l+=s:a=s}else{if(!a&&Au(t,t=>a=t)){d="date-time";break}a+=s}++t.i}if(null==a){if(!l)return!1;h=Su({$:d,v:l})}else h=Su({$:d,n:l||void 0,t:c,v:a});for(;u(t,t=>h.x.push(t)););return s(h),!0}}function Eu(t){return e=>{let n=e.s[e.i];return"\\"!==n?(e.d=t.delimiterOf(n),n):(++e.i,e.i<e.s.length?(n=e.s[e.i],e.d=t.delimiterOf(n)?1:0):e.d=1,n)}}function Ru(t){return e=>{const n=e.i;do{const n=e.s[e.i];if(!(2&t.delimiterOf(n)))break;e.i++}while(e.i<e.s.length);return e.i!==n}}function zu(t,e={}){const n=Ru(t),s=Du(t,Object.assign(Object.assign({},e),{tagged:!1}));return(e,r)=>!!(8&t.delimiterOf(e.s[e.i]))&&(++e.i,n(e),s(e,r))}const Uu={" ":7,"\t":7,",":5,";":9,'"':65569,"\\":33,"<":262145,">":524289,"=":17,"(":1,")":1,"/":1,":":1,"?":1,"@":1,"[":1,"]":1,"{":1,"}":1};function Pu({delimit:t}={}){const e=t?Object.assign(Object.assign({},Uu),t):Uu;return{delimiterOf:t=>e[t]||(t>="\0"&&t<=" "||"\x7f"===t?1:0)}}const Mu=Pu(),Ku=Pu({delimit:{":":17,"(":131105,")":37," ":3,"\t":3,"=":1,",":1}});function qu(t){const e=t?Pu(t):Mu,n=function(t){const e=Ru(t);return n=>!!(4&t.delimiterOf(n.s[n.i]))&&(n.i++,e(n),!0)}(e),s=zu(e),r=Du(e),i=(null==t?void 0:t.comments)?function(t){const e=Ru(t),n={next:Eu(t)},s=Du(t,n),r=zu(t,n);return(n,i)=>{if(!(131072&t.delimiterOf(n.s[n.i])))return!1;let o;for(++n.i;e(n)||r(n,t=>{o||(o=Su({$:"raw",v:""})),Tu(o,t)})||s(n,t=>o=t););return++n.i,i(o||Su({$:"raw",v:""})),!0}}(Ku):ju;return t=>{const e=[],o={i:0,s:t};for(;o.i<o.s.length&&(n(o)||s(o,t=>{e.length||e.push(Su({$:"raw",v:""})),Tu(e[e.length-1],t)})||i(o,t=>e.push(t))||r(o,t=>e.push(t))););return e}}const Nu=qu();function Lu(t){if(!t)return'""';let e,n=!1;for(let s=0;s<t.length;++s){const r=t[s],i=Mu.delimiterOf(r);i?(32&i&&(e||(e=t.substring(0,s)),e+="\\"+r),n=!0):e&&(e+=r)}return n?`"${e||t}"`:t}class Bu extends le{constructor(t){super(t),this.upKey=this.createUpKey(t=>t.insert(t.seed.keepThru((...e)=>e.length?l(function(t){return(e,n)=>{const s=(n,r)=>{const i=t[n];return i?St(i((t=r)=>s(n+1,t),r)):e(r)};return s(0,n)}}(e)):t.hasFallback&&t.or?kt(t.or):Iu)))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?xt(t.or):t.or}:void 0).to(t=>e=t).whenOff(t=>e=se(t)),t.insert((t,n)=>e(t,n))}}function Iu(t,e){return t(e)}const Wu=new Bu("http-fetch-agent"),Vu={};const Gu=new de("http-fetch",{byDefault:$e((function(t){const e=t.get(_n),n=t.get(Wu);return(t,e)=>n(s,new Request(t,e));function s(t){return pt(n=>{const s=new Ot;let r;if("AbortController"in e){const i=new e.AbortController,{signal:o}=i;r=Z(t=>{t===Vu&&i.abort()}),n.supply.whenOff(()=>r.off(Vu)).needs(r),s.on({supply:r,receive(t,e){n.receive(t,e)}});const u=t.signal;u&&(new ne(u).on("abort").once(()=>i.abort()),u.aborted&&i.abort()),t=new Request(t,{signal:o})}else r=s.on(n);e.fetch(t).then(t=>{s.send(t),r.off()}).catch(t=>r.off(t))})}}))});const Hu=new W("hierarchy-root",{byDefault:t=>{const e=t.get(mn);return new ne(e).on("wesib:component").to(({context:t})=>t.get(Ju).issue()),Pt()}}),Qu=new W("hierarchy-updates",{byDefault:t=>new Ju(t.get(nn))});class Ju{constructor(t){const e=new Ot,n=t.get(Oe).get(Hu);this.on=e.on(),this.send=()=>e.send(t),this.issue=()=>{const e=Zu(t);e?e[0].get(Ju).send():n.it=t}}static get[C](){return Qu}}function Zu(t){const e=t.get(Oe).get(mn);let n=t.element,s=!0;if(n!==e)for(;;){const t=n.parentNode;if(!t)return;const r=t[en];if(r)return[r,s];if(t===e)return;s=!1,n=t}}const Xu=new W("hierarchy-context",{byDefault:t=>new tc(t.get(nn))});class Yu extends R{static get[C](){return Xu}get[H](){return J(this.context)}}class tc extends Yu{constructor(t){super(),this.context=t;const e=this._parent=Pt();t.whenConnected(r).cuts(e);const n=this._registry=(s=this.up(),new z(t=>function(t){return"upKey"in t}(t)?s.keepThru(e=>e?kt(e.get(t)):d()):void 0));var s;this.get=n.newValues().get}provide(t){const e=this._registry.provide(t);return J(this).whenOff(e),e}up(t){return(this.up=_t(t=>{const{supply:e}=t;e.needs(this);const n=Pt();n.by(this._parent),e.cuts(n);const s=Z().needs(e),r=Z().needs(e),i=()=>{const t=Zu(this.context);if(t){const[e,i]=t;n.it=e.get(Yu),s.off(),i&&r.off()}else n.it=void 0};this.context.get(Oe).get(Hu).read({supply:s,receive:()=>this.context.connected&&i()}),n.read().tillOff(r).consume(t=>t&&t.context.get(Ju).on.to(i)),n.read(t),this.context.whenConnected({supply:Z().needs(e),receive:i})}).share().F)(t)}inside(t){return this._parent.it=t&&t.get(Yu),this}}class ec{[nt](){return this.onUpdate()}[V](){return this.read()}}const nc={subtree:!0};function sc(t,e,n,s,{deep:r,all:o}){const u=new Ot,a=r?nc:void 0;let h,d,f=new Set;const g=r?rc:O;"string"==typeof n?d=n:t.whenDefined(n).then(({elementDef:{name:e}})=>{if(h=void 0,e&&(d=Lt.name(e,t.get(bn)),u.size)){const t=m();if(t.size){const e=Array.from(v(k(t,t=>s(t)),i));e.length&&u.send(e,[])}}}).catch(console.error),o||e.addEventListener("wesib:component",t=>{const e=t.target;if(f.has(e)){const t=s(e);u.send([t],[])}});class y extends ec{onUpdate(n){const s=t.get(Sn)(w);return(this.onUpdate=pt(t=>{const n=!u.size,r=u.on(t);return n&&(m(),s.observe(e,a)),r.whenOff(()=>{u.size||(s.disconnect(),h=void 0,f.clear())})}).F)(n)}read(t){return(this.read=mt(this.onUpdate().thru(()=>this),c(this)).F)(t)}track(t){const e=this.onUpdate();return(this.track=_t(t=>{const n=new Ot;n.on(t),n.send(Array.from(this),[]),e.to(t)}).F)(t)}first(t){return(this.first=bt(this.read()).keepThru(t=>l(b(t))).F)(t)}[Symbol.iterator](){return p(h||(h=v(k(u.size?f:m(),t=>s(t)),i)))}}return new y;function m(){h=void 0;const t=function(){const t=d;if(!t)return new Set;if(r)return new Set(O(e.querySelectorAll(t)));return new Set(v(O(e.children),e=>e.matches(t)))}();return u.size&&(f=t),t}function w(t){const e=[],n=[];t.forEach(t=>{_(v(k(g(t.removedNodes),$),i),t=>n.push(t)),_(v(k(g(t.addedNodes),x),i),t=>e.push(t))}),(e.length||n.length)&&u.send(e,n)}function x(t){if(je(t))return d&&t.matches(d)&&!f.has(t)?(f.add(t),s(t)):void 0}function $(t){if(je(t)&&f.delete(t))return s(t,!0)}}function rc(t){return x(O(t),t=>[t,...rc(t.childNodes)])}class ic{constructor(t,e){this._bs=t,this.element=e,this._emitters=new Map}get observer(){if(this._observer)return this._observer;const t=this._bs.get(_n).MutationObserver;return this._observer=new t(t=>this._update(t))}observe(t,e){const n=this,s=this.observer,r=this._emitter(t),i=X(e),o=r.on({supply:Z(()=>{this._emitters.delete(t),s.disconnect(),this._emitters.size?u():this._observer=void 0}).needs(i.supply),receive:(t,e,n)=>i.receive(t,e,n)});return s.disconnect(),u(),o;function u(){n._update(s.takeRecords()),s.observe(n.element,{attributes:!0,attributeOldValue:!0,attributeFilter:Array.from(n._emitters.keys())})}}_update(t){t.forEach(t=>{const e=t.attributeName,n=this._emitters.get(e);n&&n.send(this.element.getAttribute(e),t.oldValue)})}_emitter(t){const e=new Ot;return this._emitters.set(t,e),e}}class oc extends zt{constructor(t,e){super(),this._observer=t,this._name=e,this._updates=new Ot}get[H](){return J(this._updates)}get it(){return this._observer.element.getAttribute(this._name)}set it(t){null!=t?this._observer.element.setAttribute(this._name,t):this._observer.element.removeAttribute(this._name)}on(t){let e=ot();return(this.on=pt(t=>{this._updates.size||(e=this._observer.observe(this._name,(t,e)=>this._updates.send(t,e))),t.supply.needs(e),this._updates.on(t).whenOff(t=>{this._updates.size||e.off(t)})}).F)(t)}}class uc{constructor(t,e){this._attrs=new Map,this._observer=new ic(t,e)}get(t){const e=this._attrs.get(t);if(e)return e;const n=new oc(this._observer,t);return this._attrs.set(t,n),n}}class cc extends zt{constructor(t,e){super(),this._element=t,this._key=e,this._updates=new Ot}get[H](){return J(this._updates)}get it(){return this._element[this._key]}set it(t){this._element[this._key]=t}on(t){return(this.on=this._updates.on().F)(t)}bind(t){var e;t.get(xs).track((e=this._key,[$s,e])).onUpdate().to({supply:J(this),receive:(t,e,n,s)=>this._updates.send(n,s)})}}class ac{constructor(t){this._element=t,this._props=new Map}bind(t){this._context=t,this._props.forEach(e=>e.bind(t))}get(t){const e=this._props.get(t);if(e)return e;const n=new cc(this._element,t);return this._context&&n.bind(this._context),this._props.set(t,n),n}}const hc=Symbol("element-node");class lc{constructor(t,e){this._bs=t,this.element=e,this._attrs=new uc(t,e),this._props=new ac(e),e[hc]=this;const n=e[en];n?this._bind(n):e.addEventListener("wesib:component",t=>this._bind(t.context))}get context(){return this.element[en]}get parent(){const t=this.element.parentNode;return t&&dc(this._bs,t)}select(t,e){return function(t,e,n,s={}){if(s.all)return sc(t,e,n,(e,n)=>dc(t,e,n),s);const r=t.get($n);return sc(t,e,n,(e,n)=>r(e)&&dc(t,e,n),s)}(this._bs,this.element,t,e)}attribute(t){return this._attrs.get(t)}property(t){return this._props.get(t)}_bind(t){this._props.bind(t)}}function dc(t,e,n){const s=e[hc];return s||n?s:new lc(t,e)}const fc=new W("component-node",{byDefault:t=>dc(t.get(Oe),t.get(nn).element)});function pc(t){return new URL(t.hash.substring(1),t.origin)}const gc=Symbol("page-param");class yc{get[gc](){return this}byDefault(t,e){}}class _c extends le{constructor(t){super(t),this.upKey=this.createUpKey(t=>{const{document:e}=t.context.get(_n);t.insert(t.seed.keepThru((...n)=>n.length?function(t,s,r,i){return function i(o,u){const c=n[o];if(!c)return t(u);c(({url:t=u.url,title:n=u.title,data:s=u.data}=u)=>i(o+1,{url:new URL(String(t),e.baseURI),title:n,data:s,get visited(){return u.visited},get current(){return u.current},get:t=>u.get(t),put(t,e){u.put(t,e)}}),s,r,u)}(0,i)}:t.hasFallback&&t.or?kt(t.or):mc))})}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?xt(t.or):t.or}:void 0).to(t=>e=t).whenOff(t=>e=se(t)),t.insert((t,n,s,r)=>e(t,n,s,r))}}function mc(t,e,n,s){t(s)}const bc=new _c("navigation-agent");class wc extends R{}const vc=new W("nav-history",{byDefault:$e(t=>new kc(t))});function xc(t){return null==t||"object"!=typeof t?{data:t}:t["wesib:navigation:data"]}class kc{constructor(t){this._context=t,this._entries=new Map,this._lastId=0;const e=t.get(_n);this._document=e.document,this._location=e.location,this._history=e.history,this._uid=btoa(String(Math.random()))}static get[C](){return vc}init(){const{data:t}=xc(this._history.state),e=this.newEntry({url:new URL(this._location.href),data:t,title:this._document.title});return this._entries.set(e.id,e),e.schedule(()=>{e.enter("init"),this._history.replaceState(this._historyState(e),"")}),e}newEntry(t){return new Oc(this._context,++this._lastId,t)}open(t,e){const{page:{title:n="",url:s}}=t;this._history.pushState(this._historyState(t),n,s.href),this._enter("open",t,e)}_enter(t,e,n){const s=n.it;this._entries.set(e.id,e);try{for(let t=s.next;t;t=t.next)this._forget(t)}finally{e.prev=s,s.next=e,e.schedule(()=>{try{s.leave()}finally{e.enter(t)}}),n.it=e}}replace(t,e){const n=e.it,{page:{title:s="",url:r}}=t;this._history.replaceState(this._historyState(t),s,r.href),this._entries.set(t.id,t);const i=n.prev;i&&(t.prev=i,i.next=t),t.schedule(()=>{try{n.leave()}finally{try{this._forget(n)}finally{t.enter("replace")}}}),e.it=t}popState(t,e){const{state:n}=t;if(null==n)return null==this._history.state?this._changeHash(e):void 0;const s=e.it,{uid:r,data:i,id:o}=xc(n);let u;const c=r===this._uid&&null!=o?this._entries.get(o):void 0;return c?u=c:(u=this.newEntry({url:new URL(this._location.href),data:i,title:this._document.title}),s.transfer(u,"return"),this._entries.set(u.id,u),this._history.replaceState(this._historyState(u),"")),u.schedule(()=>{try{s.leave()}finally{u.enter("return")}}),e.it=u,u}hashChange(t){if(null==this._history.state)return this._changeHash(t)}update(t,e){const n=t.it,s=new Oc(this._context,++this._lastId,Object.assign(Object.assign({},n.page),{url:e}),n);return this._entries.set(s.id,s),this._history.replaceState(this._historyState(s),"",e.href),this._entries.delete(n.id),t.it=s}_changeHash(t){const e=t.it,n=this.newEntry({url:new URL(this._location.href),data:null,title:this._document.title});try{e.transfer(n,"enter")}finally{this._history.replaceState(this._historyState(n),""),this._enter("enter",n,t)}return n}_forget(t){this._entries.delete(t.id),t.forget()}_historyState({id:t,page:{data:e}}){return{"wesib:navigation:data":{uid:this._uid,id:t,data:e}}}}class Oc{constructor(t,e,n,s){this._bsContext=t,this.id=e,this._status=0,this._update=r,this._params=s?s._params:new Map;const i=this;this.page={get url(){return n.url},get title(){return n.title},get data(){return n.data},get visited(){return!!i._status},get current(){return 2===i._status},get:t=>i.get(t),put(t,e){i.put(t,e)}}}get(t){const e=t[gc],n=this._params.get(e);if(n)return n.get();const s=e.byDefault(this.page,this._newContext());return s&&this._init(e,s)}put(t,e){const n=t[gc],s=this._params.get(n);return s?(s.put(e),s.get()):this._init(n,n.create(this.page,e,this._newContext()))}_newContext(){const t=new z(this._bsContext);return new class extends wc{constructor(){super(...arguments),this.get=t.newValues().get}}}_init(t,e){return this._params.set(t,e),this.page.current&&e.enter&&e.enter(this.page,"init"),e.get()}transfer(t,e){_(this._params.entries(),([n,s])=>{if(s.transfer){const r=s.transfer(t.page,e);r&&t._params.set(n,r)}})}stay(t){_(this._params.values(),e=>e.stay&&e.stay(t))}enter(t){this._status=2,_(this._params.values(),e=>e.enter&&e.enter(this.page,t))}leave(){this._status=1,_(this._params.values(),t=>t.leave&&t.leave())}forget(){_(this._params.values(),t=>t.forget&&t.forget()),this._params.clear()}schedule(t){this._update=t}apply(){const t=this._update;this._update=r,t()}}class $c extends Event{constructor(t,e){super(t,Object.assign(Object.assign({},e),{cancelable:!1})),this.when=e.when,this.to=e.to}}class Sc extends Event{constructor(t,e){super(t,Object.assign(Object.assign({},e),{cancelable:!0})),this.when=e.when,this.from=e.from,this.to=e.to}}class Tc extends Event{constructor(t,e){super(t,Object.assign(Object.assign({},e),{cancelable:!0})),this.from=e.from,this.to=e.to,this.reason=e.reason}get when(){return"stay"}}const Cc=new W("navigation",{byDefault:$e((function(t){const e=t.get(_n),{document:n,history:s}=e,i=new ne(e),o=t.get(kc),u=t.get(bc),c=Pt(o.init());c.read(t=>t.apply());let a=Promise.resolve();i.on("popstate").to(t=>{const e=o.popState(t,c);e&&i.dispatch(new $c("wesib:enterPage",{when:null!=t.state?"return":"enter",to:e.page}))}),i.on("hashchange").to(()=>{const t=o.hashChange(c);t&&i.dispatch(new $c("wesib:enterPage",{when:"enter",to:t.page}))});return new class extends Fc{get page(){return c.it.page}get length(){return s.length}onEnter(t){return(this.onEnter=i.on("wesib:enterPage").F)(t)}onLeave(t){return(this.onLeave=i.on("wesib:leavePage").F)(t)}onStay(t){return(this.onStay=i.on("wesib:stayOnPage").F)(t)}on(t){return(this.on=Tt(this.onEnter(),this.onLeave(),this.onStay()).F)(t)}read(t){return(this.read=c.read().keepThru(t=>t.page).F)(t)}go(t){s.go(t)}open(t){return d("pre-open","open",t)}replace(t){return d("pre-replace","replace",t)}update(t){return o.update(c,h(t)).page}with(t,e){return function t(e){return{with:(n,s)=>t(Ae(e,t=>t.put(n,s))),open:t=>d("pre-open","open",t,e),replace:t=>d("pre-replace","replace",t,e),pretend(t,n=((t,e)=>e)){let s;"function"==typeof t?(n=t,s=void 0):s=t;const r=l(s),i=c.it,o=f("pretend",i,r,e);try{return p("pretend",i,r,o)?n(i.page,o.page):void 0}finally{o.stay(c.it.page)}}}}(n=>n.put(t,e))}};function h(t){return"string"==typeof t?new URL(t,n.baseURI):t||c.it.page.url}function l(t){return null==t||"string"==typeof t||t instanceof URL?{url:h(t)}:t.url instanceof URL?t:Object.assign(Object.assign({},t),{url:h(t.url)})}function d(t,e,n,s=r){const u=l(n),h=a=a.then(d,d);return h;function d(){let n=void 0;try{const r=function(){if(a!==h)return g();const e=c.it,n=f(t,e,u,s),r=new Sc("wesib:leavePage",{when:t,from:e.page,to:n.page});if(!i.dispatch(r)||a!==h||!p(t,e,u,n))return g(n);return n}();return r?(n=r,o[e](n,c),i.dispatch(new $c("wesib:enterPage",{when:e,to:n.page})),n.page):r}catch(t){throw g(n,t),t}}function g(t,e){return t&&t.stay(c.it.page),i.dispatch(new Tc("wesib:stayOnPage",{from:c.it.page,to:u,reason:e})),null}}function f(t,e,n,s){const r=o.newEntry(n);try{e.transfer(r,t),s(r.page)}catch(t){throw r.stay(c.it.page),t}return r}function p(t,e,n,s){let r=!1;return u(({url:t,data:e,title:s})=>{r=!0,n.url=t,n.data=e,n.title=s},t,e.page,s.page),r}}))});class Fc{static get[C](){return Cc}[nt](){return this.on()}[V](){return this.read()}back(){this.go(-1)}forward(){this.go(1)}reload(){this.go()}}function Ac({node:t,page:e}){const n=t.element,s=n.getAttribute("href");return xt(t,null==s?-1:function t(e,n){if(e.origin!==n.origin)return-1;const s=jc(e),r=jc(n);if(e.hash){if(s!==r)return-1;const i=Dc(e,n);return i<0||Dc(n,e)<0?-1:e.pathname.length+i+t(pc(e),pc(n))}const i=Dc(e,n);if(i)return i<0||s!==r?-1:e.pathname.length+i;if(!r.startsWith(s))return-1;return e.pathname.length}(new URL(s,n.ownerDocument.baseURI),e.url))}function jc(t){const e=t.pathname;return e.endsWith("/")?e:e+"/"}function Dc({searchParams:t},{searchParams:e}){let n=0;return t.forEach((s,r)=>{if(!function(t){return t.startsWith("__")&&t.endsWith("__")}(r)){const s=new Set(e.getAll(r));n>=0&&(t.getAll(r).every(t=>s.has(t))?n+=1:n=-1)}}),n}const Ec=Symbol("nav-link-render-schedule"),Rc=["active",Ms];function zc(t){return t.target.getAttribute("href")}function Uc(t,e,n,s=Pc){let r;"function"==typeof n?(s=n,r=null):r=n||null;const i=e.ownerDocument;if(je(t)){const n=i.createElement(t.tagName.toLowerCase());return t.getAttributeNames().forEach(e=>n.setAttribute(e,t.getAttribute(e))),s(t,n),e.insertBefore(n,r),n}const o=i.importNode(t,!1);return e.insertBefore(o,r),o}function Pc(t,e){_(O(t.childNodes),t=>Uc(t,e))}function Mc(t){let e;return n=>{const s=function(t){return new URL("",t.url).href}(n);if(e){if(e.url===s)return e.on;e.sup.off()}let r;const i=Z().whenOff(()=>{e=void 0,r=void 0}),o=pt(e=>{if(!r){const e=t(n),s=Pt(),o=e.to(t=>{s.it=t}).whenOff(t=>{null!=t&&i.off(t)});i.cuts(o).cuts(s),r={on:s.read().thru_(t=>t?d(t):f()),num:0}}const s=r;return++s.num,s.on.tillOff(i).to(e).whenOff(t=>{--s.num||Promise.resolve().then(()=>{s.num||s!==r||i.off(t)}).catch(console.error)})});return e={url:s,on:o,sup:i},o}}class Kc extends Error{}const qc=new class extends yc{create(t,e){return{get:()=>e,put:r}}};class Nc{constructor(t,e){this._navigation=t,this._loader=e,this._map=new Map}get fragments(){const t=[];for(const e of this){if(!e.fragment)return[];t.push(e.fragment)}return t}[Symbol.iterator](){return p(x(this._map.values()))}handle(){const t=this,e=Z();let n=ot();return{get(){},put(e){t._add(e)},transfer(e,n){if("pretend"===n)return;const s=t._transfer();return e.put(qc,s),s.handle()},enter(s,r){if("init"===r)return;n=Z().needs(e);const i=pt(e=>{const r=new Ot,i=r.on(e);return t._loader(s).tillOff(n).to(t=>r.send(t)).whenOff(t=>{void 0===t||t instanceof Kc||r.send({ok:!1,page:s,error:t})}),i}).share();_(t,({fragment:t,receiver:e})=>function(t,e){return e?t.thru_(t=>t.ok?Object.assign(Object.assign({},t),{fragment:(null!=e.tag?t.document.getElementsByTagName(e.tag)[0]:t.document.getElementById(e.id))||void 0}):t):t}(i,t).to({supply:Z().needs(e.supply),receive(t,n){e.receive(t,n)}}))},leave(){n.off(new Kc("page left"))},stay(){e.off(new Kc("navigation cancelled"))},forget(){e.off(new Kc("page forgotten"))}}}_add(t){const e=Object.assign(Object.assign({},t),{receiver:X(t.receiver)}),{supply:n}=e.receiver,s=this._map.get(n);s?s.push(e):(this._map.set(n,[e]),n.whenOff(()=>this._map.delete(n)))}_transfer(){const t=new Nc(this._navigation,this._loader);for(const[e,n]of this._map.entries())t._map.set(e,Array.from(n));return t}}const Lc=new Bu("page-load-agent"),Bc=new de("page-load-url",{byDefault:o(r)}),Ic=new W("page-loader",{byDefault:$e((function(t){const e=t.get(_n),n=t.get(Gu),s=t.get(Bc),r=t.get(Lc),i=new e.DOMParser;return t=>{const e=new URL(t.url.href);s(e);const o=new Request(e.href,{mode:"same-origin",credentials:"same-origin",headers:new Headers({Accept:"text/html"})});return pt(t=>r(u,o).to(t));function u(s){return function(t,e){var n;const s=null===(n=t.get(qc))||void 0===n?void 0:n.fragments;s&&s.length&&e.headers.set("Accept-Fragment",w(s,(t,e)=>(t?t+", ":"")+(null!=e.tag?"tag="+Lu(e.tag):"id="+Lu(e.id)),""))}(t,s),pt(r=>{const o=new et;o.on(r),o.send({page:t}),Ct(n(s).thru_(t=>Promise.all([t,t.text()]))).thru_((...t)=>{return e=t,h((t,n)=>{for(const s of e)t.pass(n,s)});var e},([n,s])=>{if(!n.ok)return{ok:!1,page:t,response:n,error:n.status};try{return{ok:!0,page:t,response:n,document:Wc(i,e,n,s)}}catch(e){return{ok:!1,page:t,response:n,error:e}}}).to(r)})}}}))});function Wc(t,e,n,s){const r=t.parseFromString(s,Nu(n.headers.get("Content-Type")||"text/html")[0].v);if(r.head){const t=r.head.querySelector("base");if(t)t.href=new URL(t.getAttribute("href"),e).href;else{const t=r.createElement("base");t.href=e.href,r.head.appendChild(t)}}return r}class Vc extends yc{create(t,e,n){const s=new Nc(n.get(Fc),Mc(n.get(Ic))),r=s.handle();return t.put(qc,s),r.put(e),r}}const Gc=new Vc,Hc=new W("page-cache-buster",{byDefault:$e(t=>new Qc(t))});class Qc{constructor(t){const e=Jc(t.get(_n).document);if(e){const n=t.get(Fc);this.urlModifier=xt(t=>t.searchParams.set("__wesib_app_rev__",e)),this.agent=xt((t,s)=>t(new Request(s.url,s)).thru_(t=>{if(t.ok){const s=Jc(t.document);if(s&&s!==e){const e=new URL(t.page.url.href);e.searchParams.set("__wesib_app_rev__",s),n.update(e),n.reload()}}return t}))}else this.urlModifier=xt(),this.agent=xt()}static get[C](){return Hc}}function Jc(t){var e;return null===(e=t.querySelector("meta[name=wesib-app-rev]"))||void 0===e?void 0:e.getAttribute("content")}function Zc(t){const e=t.get(_n).document;return t=>t().thru_(t=>{if(t.ok){const n=new Set(k(Xc(e,O(e.scripts)),([t])=>t));_(v(Xc(t.document,O(t.document.querySelectorAll("script"))),([t])=>!n.has(t)),([t,s])=>{Uc(s,e.head,(e,n)=>n.src=t),n.add(t)})}return t})}function Xc(t,e){return k(v(e,t=>!!t.src),e=>[new URL(e.src,t.baseURI).href,e])}function Yc(t){const e=t.get(_n).document;return t=>t().thru_(t=>{if(!t.ok)return t;const n=t.document.querySelectorAll("link[rel=stylesheet]");if(!n.length)return t;let s=e.head,r=null;const i=e.querySelectorAll("link[rel=stylesheet]"),o=new Map,u=i.item(0);return u&&(s=u.parentNode,r=u,_(O(i),t=>o.set(new URL(t.href,e.baseURI).href,t))),_(O(n),t=>{const n=new URL(t.href,e.baseURI).href,i=o.get(n);i?(b(o.keys())===n?(s=i.parentNode,r=i.nextSibling):s.insertBefore(i,r),o.delete(n)):Uc(t,s,r,(t,e)=>e.href=n)}),_(o.values(),t=>t.parentNode.removeChild(t)),t})}function ta(t){const e=t.get(_n).document;return t=>t().thru_(t=>{if(t.ok){const n=t.document.getElementsByTagName("title").item(0);n&&n.textContent&&(e.title=n.textContent)}return t})}const ea={setup(t){t.provide({a:Bc,by:t=>t.urlModifier,with:[Qc]}),t.provide({a:Lc,by:t=>t.agent,with:[Qc]}),t.provide({a:Lc,by:Zc}),t.provide({a:Lc,by:Yc}),t.provide({a:Lc,by:ta})}};class na{static get[Re](){return ea}}function sa({url:t}){return new URL("",t).href}class ra extends le{get upKey(){return this}constructor(){super("default-in-aspects")}grow(t){const e=t.context.get(bn),n=t.context.get(As);t.insert(t.seed.keepThru((...t)=>Zs(...t,Js.to(n),Hs.to(e))).tillOff(t.context.get(ie)))}}const ia=new ra,oa=new fe("input-from-control",{byDefault:()=>({})});function ua(t,e){return Z(t.get(Yu).provide({a:oa,by:()=>({root:t,control:e})})).needs(t).needs(e)}const ca=new W("component-style-producer",{byDefault:$e(()=>Xo)});function aa(t,e={},n){const{context:s}=t;return Object.assign(Object.assign({},e),{document:e.document||s.get(_n).document,parent:e.parent||s.contentRoot,rootSelector:[],scheduler:e.scheduler||ha(s,n),nsAlias:e.nsAlias||s.get(bn),renderer:t.renderer(e)})}function ha(t,e={}){const n=t.get(As);return(t={})=>n(Object.assign(Object.assign({},t),e))}const la=new q("component-styp-renderer"),da=new Gt("https://wesib.github.io/ns/element-id-class","elic","element-id-class"),fa=new W("unique-element-class",{byDefault:function(t){const e=t.get(bn),n=t.get(nn),s=n.get(Rn),r=`${s.name?Lt.name(s.name,e):"component"}#${++pa}`,i=da.name(e(da),r,Vt);return n.element.classList.add(i),i}});let pa=0;const ga=new W("component-styp-format",{byDefault:t=>new ba(t.get(nn))});class ya{static get[C](){return ga}produce(t,e){const n=this.newProducer(t,e),s=Z();return this.context.whenSettled(()=>{n().needs(s).cuts(s)}),s}newProducer(t,e){const n=vu(t);let s;const r=J(this.context);return s=()=>this.context.get(ca)(n,this.format(e)).needs(r),r.whenOff(()=>{s=o(r)}),()=>s()}renderer(t){const e=this.context.get(Ds,{or:null}),{renderer:n}=t,s=new Te(n).add(...this.context.get(la)),r=t.hostSelector?_o(t.hostSelector)[0]:void 0;return s.add(e?function(t){return{order:-100,render(e,n){let{selector:s}=e;if(s.length){if(t){const[e,n]=_a(s);n&&(s=n.length?[{u:[[":","host",ma(n,t)]]},...e]:[{u:[[":","host",[t]]]},...e])}}else s=[t||{u:[[":","host"]]}];e.render(n,{selector:s})}}}(r):function(t){return{order:-100,render(e,n){let{selector:s}=e;if(s.length){const[e,n]=_a(s);s=n&&n.length?[...ma(n,t),...e]:[t,...e]}else s=[t];e.render(n,{selector:s})}}}(r||{c:[this.context.get(fa)]})),s.value}}function _a(t){if("string"!=typeof t[0]){const[{ns:e,e:n,i:s,c:r,u:i,s:o,$:u},...c]=t;if(!e&&!n&&!s&&!r&&!o&&i){const[[t,e,...n]]=i;if(":"===t&&"host"===e){let t;return n.length?(t=Array.from(n[0]),t[0].$=u):t=u?[{$:u}]:[],[c,t]}}}return[t]}function ma(t,{ns:e,e:n,i:s,c:r,u:i,s:o}){const[u,...c]=t;return[{ns:u.e||u.ns?u.ns:e,e:u.e||u.ns?u.e:n,i:u.i||s,c:u.c?r?[...u.c,...r]:u.c:r,u:u.u?i?[...u.u,...i]:u.u:i,s:(u.s||"")+(o||"")||void 0,$:u.$},...c]}class ba extends ya{constructor(t){super(),this.context=t}format(t){return function(t={}){const{parent:e=document.head}=t;return Object.assign(Object.assign({},t),{scheduler:Ko(e,t.scheduler),addSheet(){const t=document.createElement("style");return t.setAttribute("type","text/css"),t.append(document.createTextNode("")),e.appendChild(t),new Zo(t)}})}(this.config(t))}config(t){return aa(this,t,{when:"connected"})}}class wa extends ya{constructor(t,{when:e="settled"}={}){super(),this.context=t,this.when=e}format(t){return Ho(this.config(t))}config(t){return aa(this,t,{when:this.when})}}function va(t){return on(({get:e})=>({componentDef:{define(n){n.whenComponent(n=>{n.whenReady(({component:s})=>{const r=e(s),i="function"==typeof r?r.bind(s):r;n.get(ya).produce(i,t)})})}}}))}const xa={setup(t){t.provide({a:ca,is:tu})}};class ka extends M{constructor(){super("theme-style")}grow(t){const e=new Map;for(const n of t.seed){let t,s,r;"function"==typeof n?(t=s=n,r=!0):(t=n.style,s=n.provide.bind(n),r=!1);const i=e.get(t);if(i){const[n,o]=i;e.set(t,[r?$a(s,n):$a(n,s),r||o])}else e.set(t,[s,r])}!e.size&&t.hasFallback||t.insert((function(t){const n=e.get(t);if(!n)return t;const[s,r]=n;return r?s:$a(t,s)}))}}const Oa=new ka;function $a(t,e){return n=>bu(t(n),e(n))}const Sa=new W("theme-factory",{byDefault:t=>new Ta(t.get(Oa))});class Ta{constructor(t){this._styles=t}newTheme(){return new Aa(this._styles)}}const Ca=new W("theme",{byDefault:t=>t.get(Sa).newTheme()});class Fa{static get[C](){return Ca}ref(t){return t(this.root)}}class Aa extends Fa{constructor(t){var e;super(),this._styles=t,this.root=new hu(void 0,lu,[],e?t=>Ji(t,e):void 0),this._rules=new Map}style(...t){const e=this;return vu(...t.reduce((function(t,n){const s=e._rules.get(n);if(s)t.push(s);else{const s=e._styles(n)(e);e._rules.set(n,s),t.push(s)}return t}),[]))}}const ja=new Gt("https://wesib.github.io/examples","bex","wesib-examples"),Da=pu.by({$:"settings"},{$color:new Oi({r:161,g:185,b:142}),$bgColor:new Oi({r:40,g:43,b:36}),$fontFace:"'Exo 2', sans-serif",$fontSize:Vi.of(1,"em"),$lineHeight:1.2,$fontWeight:"400",$linkFontWeight:"600",$layoutBreakpoint:Wi.of(576,"px")});function Ea({$layoutBreakpoint:t}){return{"@media:sm":`(max-width: ${t})`}}function Ra(t){const e=t.ref(Da).read(),{root:{rules:n}}=t;return bu(n.add({e:"a"},e.keepThru(za)),n.add({e:"a",s:":visited"},e.keepThru(za)),n.add({e:"a",s:":hover"},{textDecoration:"underline"}),n.add({e:"a",s:":active"},{textDecoration:"underline dotted"}),n.add({e:"a",s:":focus"},{textDecoration:"underline dotted"}))}function za({$color:t,$linkFontWeight:e}){return{color:t,fontWeight:e,textDecoration:"none"}}function Ua(t){const e=t.ref(Da).read();return bu(t.root.add(e.keepThru(Pa)).add(e.keepThru(Ea)),t.style(Ra))}function Pa({$color:t,$fontFace:e,$fontSize:n,$lineHeight:s,$fontWeight:r}){return{color:t,font:`normal ${r} ${n}/${s} ${e}`}}function Ma(t){const e=t.ref(Da).read(),{root:{rules:n}}=t;return bu(n.add({e:"html"},{height:"100%",margin:0,padding:0}),n.add({e:"body"},e.keepThru(Ka)),t.style(Ua))}function Ka({$bgColor:t}){return{backgroundColor:t,height:"100%",margin:0,padding:0}}const qa=pu.by({$:"settings:form"},t=>yu.by({global:Da},t).read().keepThru(Na));function Na({global:{$color:t,$bgColor:e,$fontFace:n,$fontSize:s,$lineHeight:r,$fontWeight:i}}){return{$color:t,$bgColor:e.hsl.set(({l:t})=>({l:.8*t})),$roBgColor:e.hsl.set(({l:t})=>({l:.94*t})),$fontFace:n,$fontSize:s,$errorFontSize:s.mul(.8),$lineHeight:r,$fontWeight:i,$borderColor:e,$marginV:s.div(4),$marginH:s.div(4),$paddingV:s.div(2),$paddingH:s,$borderW:Wi.of(1,"px")}}let La=class{constructor(t){this._context=t}style(){return this._context.get(Fa).style(Wa)}};var Ba;n([va()],La.prototype,"style",null),La=n([Qe(["in-error",ja],function(...t){return Qe({feature:{needs:ms},setup(e){for(const n of t)if("string"==typeof n){const t=ds(n);e.perDefinition({a:us,is:{name:t,change:hs(t)}})}else for(const[t,s]of Object.entries(n)){const n=ds(t);e.perDefinition({a:us,is:{name:n,change:hs(n,s)}})}}})}("code"),(Ba=({control:{control:t},aspects:e,context:n})=>function(t,e,n=as(e)){return new Os(t,e,n)}(n,"code").read().keepThru_(t=>t?t.trim().split(/\s+/):[]).keepThru(s=>t.convert(ui.to(n.element),e).setup(ai,t=>{t.add(_i()),t.add(function({mark:t,when:e}={}){let n,s;return n=e?Array.isArray(e)?e.length?t=>e.every(e=>t.has(e)):yi:t=>t.has(e):yi,s=t?Array.isArray(t)?t.length?t:gi:[t]:gi,t=>t.aspect(Nr).read().keepThru(t=>n(t)?d(...s):d())}({when:s}))})),Qe({define(t){t.whenComponent(t=>{const{up:e}=t.get(Yu);wt({parent:e().keepThru_(t=>t?kt(t.get(oa)):l({})),aspects:t.get(ia)}).keepThru_(({parent:[e],aspects:[n]})=>{if(e.control){const s=Ba({control:e,context:t,aspects:n});if(s)return s instanceof sr?d(s):kt(s)}return d()}).consume((e,n)=>{if(!e)return;const s=ua(t,e);return(n||J(e)).needs(s),s})})}})))],La);const Ia=["has-error",Vs];function Wa(t){const e=t.ref(qa).read(),{root:{rules:n}}=t,s=Vi.of(4,"px");return bu(n.add({u:[":","host"],$:"bex:in-error"},e.keepThru(({$color:t,$errorFontSize:e})=>({display:"none",fontSize:e,padding:e.div(2),borderLeft:`${s} dotted ${t}`,paddingLeft:e.sub(s)}))),n.add({u:[":","host",{c:[Ia,["touched",Vs]],u:[":","not",{c:["has-focus",Vs]}]}],$:"bex:in-error"},{display:"block"}),n.add({u:[":","host",{c:Ia,u:[[":","not",{u:["code","~=","missing"]}],[":","not",{u:["code","~=","incomplete"]}]]}],$:"bex:in-error"},{display:"block"}))}let Va=class{};Va=n([Ke({needs:[La]})],Va);let Ga=class{};function Ha({$fontSize:t}){return{flex:"1 1 auto",padding:0,margin:"0 0 0 "+t.div(2)}}Ga=n([Qe(["main",ja],function(t={}){const e=t.onResponse?t.onResponse.bind(t):r,n=t.contentKey?t.contentKey.bind(t):sa;return Qe({feature:{needs:[na]},define(s){s.whenComponent(s=>{const{fragment:r,render:i}=t,u=s.get(_n).document,c=s.get(As)(i),a=s.get(Fc);let h,l=n(a.page);h=r?o(r):()=>{const{element:{id:t,tagName:e}}=s;return t?{id:t}:{tag:e}},s.whenConnected(()=>{const t=u.createRange();t.selectNodeContents(s.contentRoot),a.read().once(r=>{r.put(Gc,{fragment:h(),receiver:{supply:Z().needs(s),receive:(r,i)=>function(r){const i=n(r.page);if(i===l)return;if(!r.ok)return void c(()=>e({context:s,range:t,response:r}));l=i,c(()=>{t.deleteContents();const n=u.createDocumentFragment(),{fragment:i}=r;i&&(Pc(i,n),t.insertNode(n)),e({context:s,range:t,response:r})})}(i)}})})})})}})}({onResponse({response:t,range:e}){t.ok||(e.deleteContents(),null==t.ok?e.insertNode(document.createTextNode("Loading...")):e.insertNode(document.createTextNode("Error. "+t.error)))}}))],Ga);let Qa=class{constructor(t){this._theme=t.get(Fa)}style(){return this._theme.style(Ja)}};n([va()],Qa.prototype,"style",null),Qa=n([Qe(["nav",ja],function(t={}){const e=t.handle?t.handle.bind(t):function(t){const e=t.href?t.href.bind(t):zc;return({event:t,page:n,navigation:s})=>{const r=e(t);if(null==r)return;const i=t.target,o=n.url,u=new URL(r,i.ownerDocument.baseURI);u.origin===o.origin&&(t.preventDefault(),o.href!==u.href&&s.open(r).catch(console.error))}}(t),n=new Te(t.event||"click");return Qe({define(t){t.whenComponent(t=>{t.whenConnected(()=>{const s=t.get(Fc);for(const r of n)t.on(r).to(n=>{s.read().once(r=>e({event:n,page:r,context:t,navigation:s}))})})})}})}(),function(t={}){const{select:e="a",pick:n={all:!0,deep:!0}}=t;return Qe({define(s){s.whenComponent(s=>{const i=function(t,e){const n=t.get(As),{render:s,active:i=Rc}=e,o=Vt.name(i,t.get(bn)),u=e.activate?e.activate.bind(e):r;return t=>{const{element:e}=t.node,r=e[Ec]||(e[Ec]=n(s)),i=e=>{r(()=>((t,{node:e})=>{const n=e.element,{classList:s}=n;t?s.add(o):s.remove(o)})(e,t)),u(e,t)};let c;return i(!0),{supply(){const t=c=Z(()=>{c===t&&i(!1)});return t}}}}(s,t),o=function(t){if(!t.weigh)return Ac;return e=>{const n=t.weigh(e);if("number"==typeof n)return xt(e.node,n);let s=bt(n).keepThru_(t=>d(e.node,t));return _t(t=>{s.to({supply:Z().needs(t.supply).whenOff(()=>{s=xt(e.node,0),s.to(t)}),receive:t.receive.bind(t)})})}}(t),u=s.get(Fc),c=s.get(fc);s.whenConnected(()=>{let t=new Map;u.read().tillOff(s).consume(r=>c.select(e,n).read().keepThru_(t=>kt(vt(...k(t,t=>o({node:t,context:s,page:r}))))).consume((...e)=>{const n=function(t){let e=0,n=[];return t.forEach(([t,s])=>{s>e?(e=s,n=[t]):s===e&&n.push(t)}),n}(e),o=new Map,u=Z();return n.forEach(e=>{let n;const c=t.get(e);c?(o.set(e,c),n=c):(n=i({node:e,context:s,page:r}),o.set(e,n)),n.supply().needs(u)}),t=o,u}))})})}})}())],Qa);function Ja(t){const e=t.ref(Da).read(),{root:{rules:n}}=t;return bu(n.add({u:[":","host"],$:"bex:nav"},e.keepThru(Za)),n.add({u:[":","host"],$:"bex:nav"},e.keepThru(t=>({flex:"0 1 200px",height:"100%",background:Xa(t)}))),n.add({u:[":","host"],$:["bex:nav","@media:sm"]},{flex:"0 1 100%"}),n.add([{u:[":","host"],$:"bex:nav"},{e:"a",$:"bex:nav"}],e.keepThru(Ya)),n.add([{u:[":","host"],$:"bex:nav"},{e:"a",c:["active",Ms],$:"bex:nav"}],e.keepThru(th)))}function Za({$fontSize:t}){return{padding:0,margin:`0 ${t.div(2)} 0 0`}}function Xa({$bgColor:t}){return t.hsl.set(({l:t})=>({l:.8*t}))}function Ya(t){const{$fontSize:e}=t;return{display:"block",margin:0,padding:`${e.div(2)} ${e}`,border:0,outline:0,background:Xa(t)}}function th({$fontSize:t,$color:e,$bgColor:n}){const s=Vi.of(4,"px");return{background:n,borderLeft:`${s} solid ${e}`,paddingLeft:t.sub(s)}}let eh=class{constructor(t){this._context=t}async style(){const{elementDef:{name:t}}=await this._context.get(Oe).whenDefined(Ga);return this._context.get(Fa).style(function(t){return e=>{const n=e.ref(Da).read(),{root:{rules:s}}=e;return bu(s.add({u:[":","host"],$:"bex:container"},{height:"100%",display:"flex",flexFlow:"row wrap",alignItems:"stretch",alignContent:"flex-start"}).add(n.keepThru(Ea)),s.add({u:[":","host"],$:["bex:container","@media:sm"]},{height:"auto"}),s.add([{u:[":","host"],$:"bex:container"},{e:t,$:"bex:container"}],n.keepThru(Ha)))}}(t))}};n([va()],eh.prototype,"style",null),eh=n([Qe({name:["container",ja],feature:{needs:[Ga,Qa]}})],eh);let nh=class{};nh=n([Ke({needs:[eh,na,class{static get[Re](){return xa}}]})],nh);let sh=class{};sh=n([Ke({setup(t){t.perComponent({a:ya,as:wa})},init(t){t.whenReady(()=>{Xo(t.get(Fa).style(Ma),Ho())})}})],sh);let rh=class{};function ih(t){const e=t.ref(qa).read(),{root:{rules:n}}=t;return bu(n.add({e:"input"},e.thru(oh)),n.add({e:"input",s:"[readonly]"},e.thru(uh)),n.add({e:"input",s:"[disabled]"},e.thru(uh)),n.add({e:"input",s:":focus"},e.thru(ch)),n.add({e:"input",c:[["invalid",Vs],["touched",Vs]]},e.keepThru(ah)),n.add({e:"input",c:[["missing",Vs],["touched",Vs]]},{outlineStyle:"dotted"}),n.add({e:"input",c:[["incomplete",Vs],["touched",Vs]]},{outlineStyle:"dotted"}))}function oh({$color:t,$fontFace:e,$fontSize:n,$lineHeight:s,$fontWeight:r,$marginV:i,$marginH:o,$paddingV:u,$paddingH:c,$bgColor:a,$borderColor:h,$borderW:l}){return{color:t,font:`normal ${r} ${n}/${s} ${e}`,padding:`${u} ${c}`,margin:`${i} ${o}`,backgroundColor:a,border:"0 none",outline:`${l} solid ${h}`,boxShadow:"inset 1px 1px 2px -2px black",boxSizing:"border-box",width:"100%"}}function uh({$roBgColor:t}){return{backgroundColor:t}}function ch({$color:t,$borderColor:e}){return{outlineColor:Ai(e,t,.5)}}function ah({$color:t,$borderW:e,$borderColor:n}){return{outline:`${e.mul(2)} dashed ${Ai(n,t,.25)}`}}rh=n([Ke({needs:[sh,Va,nh]})],rh);const hh=function(...t){const e=hn.create(),{bootstrapContext:n,complete:s}=function(t){const e=Pt(0),n=t.values;const s=new class extends Oe{constructor(){super(),this.get=n.get,t.provide({a:bn,by:Zt}),t.provide({a:Oe,is:this})}whenDefined(t){return function(t,e){if(e.hasOwnProperty(os))return e[os];const n=Ft(Promise.resolve(t.whenReady()).then(()=>t.get(An).whenDefined(e)).then(()=>Cn(e)));return e[os]=n}(this,t)}whenReady(t){return(this.whenReady=e.read().thru(t=>t?d(this):f()).once().F)(t)}load(t){const e=_t(e=>{const n=s.get(is).request(t),r=Pt({status:{feature:t,ready:!1}});this.get(Hn.of(t)).to({supply:e.supply,receive(t,e){const n=e;r.it={status:{feature:n.request.feature,ready:n.ready},down:n.down},n.ready||n.init().then(()=>{r.it={status:{feature:n.request.feature,ready:!0},down:n.down}}).catch(console.error)}}).whenOff(()=>{n.unuse()}),r.read(e)}).share();let n;const r=e.to(({down:t})=>{n=t});return new class extends Be{get down(){return n}read(t){return(this.read=e.tillOff(r).keepThru(t=>t.status).F)(t)}dismiss(t){return r.off(t),n}}}};return{bootstrapContext:s,complete(){e.it=1}}}(e),r=1===t.length?t[0]:(i=t,Me.define(class{},{needs:i}));var i;return n.get(is).request(r),n.get(Hn.of(r)).to(t=>{t.init().then(s).catch(console.error)}),n}(rh);export{bs as A,_n as B,Qe as C,Ua as D,ja as E,qa as F,ui as I,va as P,js as R,Fa as T,Mt as V,Ps as a,Da as b,fc as c,Rr as d,wt as e,ia as f,Jr as g,Nr as h,oh as i,Hr as j,ai as k,_i as l,ua as m,J as n,rh as o,ih as p,hh as q,uh as r,bu as s};//# sourceMappingURL=common.31c4dc60.js.map
