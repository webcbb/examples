System.register(["./lib.817937da.s.js"],(function(t){"use strict";var n,e,r,i,u,o,a,c,s,f,l,h,v,d,p,y,g,m,k,_,w,b;return{setters:[function(t){n=t._,e=t.a,r=t.b,i=t.c,u=t.d,o=t.e,a=t.f,c=t.g,s=t.h,f=t.i,l=t.j,h=t.k,v=t.l,d=t.m,p=t.n,y=t.o,g=t.p,m=t.q,k=t.r,_=t.s,w=t.t,b=t.u}],execute:function(){function x(t){return t}function O(){}function A(t){return null!=t}function S(t){return function(){return t}}function T(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(){return n}}t({A:function(t){return be((function(n){var e=n.type,r=n.key,i=function(t,n,e){var r,i;if("string"==typeof e)i=Tr(r=e);else{if(e&&e.name)r=e.name;else{if("string"!=typeof n)throw new TypeError("Attribute name is required as property key is not a string: "+"".concat(t.constructor.name,".prototype.").concat(String(n)));r=n}i=Tr(r,e&&e.updateState)}return{name:r,change:i}}(e.prototype,r,t),u=i.name;return{componentDef:{feature:{needs:Fr},setup:function(t){t.perDefinition({a:Or,is:i})}},get:function(t){return ge.of(t).element.getAttribute(u)},set:function(t,n){var e=ge.of(t).element;null!=n?e.setAttribute(u,n):e.removeAttribute(u)}}}))},C:le,D:lf,I:function(t){var n=t.ref(pf).read(),e=t.root.rules;return za(e.add({e:"input"},n.thru(jf)),e.add({e:"input",s:"[readonly]"},n.thru(zf)),e.add({e:"input",s:"[disabled]"},n.thru(zf)),e.add({e:"input",s:":focus"},n.thru(Uf)),e.add({e:"input",c:[["invalid",Dc],["touched",Dc]]},n.keepThru(Pf)),e.add({e:"input",c:[["missing",Dc],["touched",Dc]]},{outlineStyle:"dotted"}),e.add({e:"input",c:[["incomplete",Dc],["touched",Dc]]},{outlineStyle:"dotted"}))},P:ec,R:function(t){return be((function(n){var e=n.get;return{componentDef:{feature:{needs:Pr},define:function(n){n.whenComponent((function(n){n.whenReady((function(){var r=n.component,i=e(r).bind(r);n.get(Kr).renderBy(i,t)}))}))}}}}))},a:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr;return le({setup:function(n){n.perComponent({a:Lr,by:function(n){return n.get(Ir)(n,t)}}),n.perComponent({a:de,by:function(t){return t.get(Lr,{or:null})}})},feature:{needs:Wr}})},d:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.aspects;return new ms(t,{aspects:e})},e:Kt,g:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.aspects;return new js(t,{get:function(){return this.element.value},set:function(t){this.element.value=t},aspects:e})},i:jf,k:function t(n){return n?n.read().keepThru((function(t){return t?F():{missing:"missing"}})):t},m:nf,n:uf,o:mt,r:zf,s:za});var C=Symbol("next-call");function R(t){var n=function t(){return t};return n[C]=function(n,e){return t(n,e)},n}function D(t){return"function"==typeof t&&C in t}function E(t){return R((function(n,e){return n.pass(e,t)}))}function F(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return R((function(t,e){return t.call(e,n)}))}function $(t){return R((function(e,r){var i,u=n(t);try{for(u.s();!(i=u.n()).done;){var o=i.value;e.pass(r,o)}}catch(t){u.e(t)}finally{u.f()}}))}var j,z=R((function(t){return t.skip()}));function U(t){return t[Symbol.iterator]()}function P(t){return regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t,"t0",1);case 1:case"end":return n.stop()}}),n)}))()}function M(t,n){var r=e({},Symbol.iterator,t);if(!n)return r;var i=r;return i.reverse=n,i}function q(t,e){var r,i=n(t);try{for(i.s();!(r=i.n()).done;){e(r.value)}}catch(t){i.e(t)}finally{i.f()}}function N(t){return!!U(t).next().done}function K(t){return U(t).next().value}function L(t,e,r){var i,u=r,o=n(t);try{for(o.s();!(i=o.n()).done;){u=e(u,i.value)}}catch(t){o.e(t)}finally{o.f()}return u}function B(t,e){return M(regeneratorRuntime.mark((function r(){var i,u,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=n(t),r.prev=1,i.s();case 3:if((u=i.n()).done){r.next=10;break}if(o=u.value,!e(o)){r.next=8;break}return r.next=8,o;case 8:r.next=3;break;case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(1),i.e(r.t0);case 15:return r.prev=15,i.f(),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[1,12,15,18]])})))}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;return M(regeneratorRuntime.mark((function r(){var i,u,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=n(t),r.prev=1,i.s();case 3:if((u=i.n()).done){r.next=8;break}return o=u.value,r.delegateYield(e(o),"t0",6);case 6:r.next=3;break;case 8:r.next=13;break;case 10:r.prev=10,r.t1=r.catch(1),i.e(r.t1);case 13:return r.prev=13,i.f(),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[1,10,13,16]])})))}function V(t,e){return M(regeneratorRuntime.mark((function r(){var i,u,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:i=n(t),r.prev=1,i.s();case 3:if((u=i.n()).done){r.next=9;break}return o=u.value,r.next=7,e(o);case 7:r.next=3;break;case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),i.e(r.t0);case 14:return r.prev=14,i.f(),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[1,11,14,17]])})))}function W(t){return M(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=0;case 1:if(!(e<t.length)){n.next=7;break}return n.next=4,t[e];case 4:++e,n.next=1;break;case 7:case"end":return n.stop()}}),n)})),(function(){return function(t){return M(regeneratorRuntime.mark((function n(){var e,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=t.length,r=e-1;case 2:if(!(r>=0)){n.next=8;break}return n.next=5,t[r];case 5:--r,n.next=2;break;case 8:case"end":return n.stop()}}),n)})))}(t)}))}var H=(e(j={},Symbol.iterator,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),e(j,"reverse",(function(){return this})),j);function Q(){return H}function Y(t){return W(Reflect.ownKeys(t))}function J(t){var n=Y(t);function e(n){return V(n,(function(n){return[n,t[n]]}))}return M((function(){return U(e(n))}),(function(){return e(n.reverse())}))}var G=Symbol("context-key"),Z=function(){function t(n){u(this,t),this.name=n}return i(t,[{key:"toString",value:function(){return"ContextKey(".concat(this.name,")")}},{key:G,get:function(){return this}}]),t}(),X=function(t){r(e,t);var n=c(e);function e(t){return u(this,e),n.call(this,"".concat(t.name,":seed"))}return i(e,[{key:"grow",value:function(t){var n=t.seeder,e=t.seed;return n.isEmpty(e)?t.byDefault((function(){return e})):e}},{key:"seedKey",get:function(){return this}}]),e}(Z),tt=function(t){r(e,t);var n=c(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"There is no value with key ".concat(t);return u(this,e),(r=n.call(this,i)).key=t,r}return e}(s(Error));function nt(t){if(function(t){return"by"in t}(t)){if(!et(t))return t;var n=t,e=n.a,r=n.by,i=n.with;return{a:e,by:function(t){return r.apply(void 0,f(i.map((function(n){return t.get(n)}))))}}}if(function(t){return"is"in t}(t)){var u=t;return{a:u.a,by:S(u.is)}}if(function(t){return"via"in t}(t)){var o=t,a=o.a,c=o.via;return{a:a,by:function(t){return t.get(c)}}}if(function(t){return"as"in t}(t)){if(function(t){return!("a"in t)}(t)&&(t=function(t){return Object.assign(Object.assign({},t),{a:t.as})}(t)),!et(t)){var s=t.as;return{a:t.a,by:function(t){return new s(t)}}}var h=t,v=h.as,d=h.with;return{a:t.a,by:function(t){return l(v,f(d.map((function(n){return t.get(n)}))))}}}throw new TypeError("Malformed context value specifier: ".concat(t))}function et(t){return"with"in t}var rt=function t(){u(this,t)},it=function(){function t(n){u(this,t),this._seeds=new Map,this._initial=null==n?O:"function"==typeof n?n:function(t){return n.get(t)}}return i(t,[{key:"provide",value:function(t){var n=nt(t),e=n.a[G].seedKey,r=n.by,i=this._seeding(e);return o(i,1)[0].provide(r)}},{key:"_seeding",value:function(t){var n=this,e=this._seeds.get(t);if(e)return e;var r=t.seeder(),i=[r,function(e){return r.seed(e,n._initial(t,e))}];return this._seeds.set(t,i),i}},{key:"seed",value:function(t,n){var e=this._seeding(n);return(0,o(e,2)[1])(t)}},{key:"seedIn",value:function(t,n){return this.newValues(n).get.bind(t)}},{key:"newValues",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!t&&this._nonCachedValues)return this._nonCachedValues;var n=new Map,e=this,a=function(e){r(f,e);var a=c(f);function f(){return u(this,f),a.apply(this,arguments)}return i(f,[{key:"get",value:function(e,r){var i=e[G],u=n.get(i);if(null!=u)return u;var a=s(this,i,r),c=o(a,2),f=c[0],l=c[1];return t&&!l&&n.set(i,f),f}}]),f}(rt);return t?new a:this._nonCachedValues=new a;function s(t,n,e){var r=f(t,n),i=o(r,2),u=i[0],a=i[1],c=!1,s={context:t,seeder:u,seed:a,byDefault:e&&"or"in e?function(){return c=!0,e.or}:function(t){var e=t();if(null==e)throw new tt(n);return e}};return e&&"or"in e&&(s.or=e.or),[n.grow(s),c]}function f(t,n){var r=n.seedKey,i=e._seeding(r),u=o(i,2),a=u[0],c=u[1];return r!==n?[a,t.get(r)]:[a,c(t)]}}},{key:"append",value:function(n){var e=this;return new t((function(t,r){var i=e._seeding(t),u=o(i,2),a=u[0],c=u[1];return a.combine(c(r),n.seed(r,t),r)}))}}]),t}(),ut=function(){function t(){u(this,t),this._providers=[]}return i(t,[{key:"provide",value:function(t){var n=this;return this._providers.push(t),function(){var e=n._providers.indexOf(t);e>=0&&n._providers.splice(e,1)}}},{key:"seed",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q();return I([n,ct(t,this._providers)])}},{key:"isEmpty",value:function(t){return N(t)}},{key:"combine",value:function(t,n){return I([t,n])}}]),t}(),ot=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"seeder",value:function(){return new ut}}]),e}(X),at=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,t)).seedKey=r||new ot(a(i)),i}return e}(Z);function ct(t,n){return B(V(W(n.map((function(t){return[t]}))),(function(n){if(n.length>1)return n[1];var e=n[0](t);return n.push(e),e})),A)}var st=function(t){r(e,t);var n=c(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.seedKey,a=i.byDefault,c=void 0===a?T():a;return u(this,e),(r=n.call(this,t,o)).byDefault=c,r}return i(e,[{key:"grow",value:function(t){var n=this,e=Array.from(t.seed);return e.length?e:t.byDefault((function(){var e=n.byDefault(t.context,n);if(e)return Array.from(e)}))}}]),e}(at),ft=function(){function t(){u(this,t),this._providers=[]}return i(t,[{key:"provide",value:function(t){var n=this;return this._providers.unshift(t),function(){var e=n._providers.lastIndexOf(t);e>=0&&n._providers.splice(e,1)}}},{key:"seed",value:function(t,n){var e=this._providers.map((function(n){return function(t,n){var e=function(){return(e=S(n(t)))()};return function(){return e()}}(t,n)}));if(n){if(!this._providers.length)return n;e=[].concat(f(e),[n])}else if(e.length<2)return e.length?e[0]:O;return lt(e)}},{key:"isEmpty",value:function(t){return null==t()}},{key:"combine",value:function(t,n){return t===O?n:n===O?t:lt([n,t])}}]),t}();function lt(t){return function(){var e,r=n(t);try{for(r.s();!(e=r.n()).done;){var i=(0,e.value)();if(null!=i)return i}}catch(t){r.e(t)}finally{r.f()}}}var ht=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"seeder",value:function(){return new ft}}]),e}(X),vt=function(t){r(e,t);var n=c(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.seedKey,a=i.byDefault,c=void 0===a?O:a;return u(this,e),(r=n.call(this,t,o)).byDefault=c,r}return i(e,[{key:"grow",value:function(t){var n=this,e=t.seed();return null!=e?e:t.byDefault((function(){return n.byDefault(t.context,n)}))}}]),e}(function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,t)).seedKey=r||new ht(a(i)),i}return e}(Z)),dt=Symbol("after-event");function pt(t){return dt in t}var yt=Symbol("events-supply"),gt=function(){function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;u(this,t),this._off=function(t){n._whenOff=function(n){return n(t)},n._off=O,e(t)},this._whenOff=function(t){var e=n._off;n._off=function(n){e(n),t(n)}}}return i(t,[{key:"off",value:function(t){return this._off(t),this}},{key:"whenOff",value:function(t){return this._whenOff(t),this}},{key:"cuts",value:function(t){return mt(t).needs(this),this}},{key:"needs",value:function(t){var n=this;return mt(t).whenOff((function(t){return n._off(t)})),this}},{key:"isOff",get:function(){return this._off===O}},{key:yt,get:function(){return this}}]),t}();function mt(t){return t[yt]}function kt(t){return new gt(t)}function _t(t){var n;return(n="function"==typeof t?{supply:kt(),receive:function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];t.apply(void 0,r)}}:{supply:t.supply||kt(),receive:function(n){if(!this.supply.isOff){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];t.receive.apply(t,[n].concat(r))}}}).supply.whenOff((function(){return n.receive=O})),n}function wt(t){var n=function e(r){var i=t,u=[];n=function(t){return u.push(t)};try{for(;;){i=bt(i,r);var o=u.shift();if(!o)break;r=o}}finally{n=e}};return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(e)}}function bt(t,e){var r,i=[],u=n(t);try{var o=function(){var t=r.value,n=i.length;i.push(t);var u={onRecurrent:function(e){i[n]=_t({supply:t.supply,receive:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.apply(void 0,r)}})}};t.receive.apply(t,[u].concat(f(e)))};for(u.s();!(r=u.n()).done;)o()}catch(t){u.e(t)}finally{u.f()}return i}var xt=function(){function t(){var n=this;u(this,t);var e=this._rcs=new Set;this.send=wt(e),this[yt]=kt((function(){e.clear(),delete n._rcs}))}return i(t,[{key:"on",value:function(t){var n=_t(t),e=n.supply.needs(this),r=this._rcs;return r&&!e.isOff&&(r.add(n),e.whenOff((function(){return r.delete(n)}))),e}},{key:"done",value:function(t){return mt(this).off(t),this}},{key:"size",get:function(){return this._rcs?this._rcs.size:0}}]),t}(),Ot=Symbol("on-event");function At(t){return Ot in t}var St=new(function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"off",value:function(){return this}},{key:"whenOff",value:function(t){return t(),this}},{key:"cuts",value:function(t){return mt(t).off(),this}},{key:"needs",value:function(){return this}},{key:"isOff",get:function(){return!0}}]),e}(gt));function Tt(){return St}function Ct(t){var n=_t(t),e=wt([n]);return n.supply.whenOff((function(){return e=O})),function(){return e.apply(void 0,arguments)}}function Rt(t){return function(n){return t.to({supply:n.supply,receive:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.receive.apply(n,[t].concat(r)),n.supply.off()}})}}function Dt(t){var n,e,r=new xt;return function(i){if(r.size||(e=[],n=kt((function(){return e=void 0})),t.to({supply:n,receive:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),u=1;u<n;u++)i[u-1]=arguments[u];e&&(r.size?e=void 0:e.push(i)),r.send.apply(r,i)}})),i.supply.needs(n),r.on(i).whenOff((function(t){r.size||n.off(t)})),e){var u=Ct(i);e.forEach((function(t){return u.apply(void 0,f(t))}))}}}function Et(t,n){return function(e){var r=[];t.to({supply:e.supply,receive:function(t){var i=function i(u,a){var c=u>=n.length;++u;var s=r[u];if(s){var l=s.supply;return s.supply=a,[s.chain,l]}var h=u<n.length?n[u]:O,v={chain:{call:function(t,n){d(t.apply(void 0,f(n)),n)},pass:function(t,n){d(t(n),[n])},skip:function(){v.supply.off()},onEvent:function(t,n){var e=kt().needs(v.supply);n[Ot]().to({supply:e,receive:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];d(t.apply(void 0,i),i,e)}})}},supply:a};return r[u]=v,[v.chain,Tt()];function d(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.supply,s=i(u,kt().needs(a)),l=o(s,2),d=l[0],p=l[1];try{D(n)?n[C](d,h):c?e.receive.apply(e,[t].concat(f(r))):d.pass(h,n)}finally{p.off()}}},u=i(0,kt().needs(e.supply)),a=o(u,2),c=a[0],s=a[1];try{for(var l=arguments.length,h=new Array(l>1?l-1:0),v=1;v<l;v++)h[v-1]=arguments[v];c.call(n[0],h)}finally{s.off()}}})}}function Ft(t,n,e){return function(r){e?t.to({supply:kt().needs(n).cuts(e),receive:r.receive.bind(r)}):(r.supply.needs(n),t.to(r))}}function $t(t){t.supply.off()}var jt=function(){function t(n){u(this,t),this._on=n}return i(t,[{key:Ot,value:function(){return this}},{key:"to",value:function(t){if(!t)return this;var n=_t(t),e=n.supply;return e.isOff||this._on(n),e}},{key:"then",value:function(t,n){return function(t,n,e){return new Promise((function(r,i){Rt(t)({supply:kt(e?function(t){try{r(e(t))}catch(t){i(t)}}:i),receive:n?function(t){try{for(var e=arguments.length,u=new Array(e>1?e-1:0),o=1;o<e;o++)u[o-1]=arguments[o];r(n.apply(void 0,u))}catch(t){i(t)}}:function(t,n){return r(n)}})}))}(this,t,n)}},{key:"once",value:function(t){return(this.once=zt(Rt(this)).F)(t)}},{key:"tillOff",value:function(t,n){return zt(Ft(this,t,n))}},{key:"consume",value:function(t){var n=Tt(),e=kt((function(t){return n.off(t)}));return this.to({supply:e,receive:function(e){var r=n;try{for(var i=arguments.length,u=new Array(i>1?i-1:0),o=1;o<i;o++)u[o-1]=arguments[o];n=mt(t.apply(void 0,u)||Tt())}finally{n!==r&&r.off()}}}),e}},{key:"share",value:function(){return zt(Dt(this))}},{key:"thru",value:function(){return this.thru_.apply(this,arguments).share()}},{key:"thru_",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return zt(Et(this,n))}},{key:"F",get:function(){return this.to.bind(this)}}]),t}();function zt(t){return new jt(t)}function Ut(){throw new Error("No events to send")}var Pt=function(t){r(e,t);var n=c(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ut;return u(this,e),(r=n.call(this,t))._rcn=0,r._or=i,r}return i(e,[{key:dt,value:function(){return this}},{key:"to",value:function(t){var n=this;if(!t)return this;var e=O,r=_t(t);if(r.supply.isOff)return r.supply;var i=kt().needs(r.supply),u=!1;return this._on({supply:i,receive:function(t){u=!0;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n._last=i,e.apply(void 0,[t].concat(i))}}),++this._rcn,i.isOff&&!u||(r.receive.apply(r,[{onRecurrent:function(t){e=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return t.apply(void 0,r)}}}].concat(f(this._last||(this._last=this._or())))),e=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return r.receive.apply(r,[t].concat(e))}),i.whenOff((function(t){--n._rcn||(n._last=void 0),r.supply.off(t)})),i}},{key:"once",value:function(t){return(this.once=Mt(Rt(this)).F)(t)}},{key:"tillOff",value:function(t,n){return Mt(Ft(this,t,n))}},{key:"share",value:function(){return Mt(Dt(this))}},{key:"keepThru",value:function(){return this.keepThru_.apply(this,arguments).share()}},{key:"keepThru_",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Mt(Et(this,n))}},{key:"F",get:function(){return this.to.bind(this)}}]),e}(jt);function Mt(t,n){return new Pt(t,n)}function qt(t,n){return Mt((function(n){return t[Ot]().to(n)}),n)}function Nt(t,n){return pt(t)?t[dt]():qt(t,n)}function Kt(t){var n=Object.keys(t);return Mt((function(e){var r=e.supply,i=Ct(e),u=O,o={};n.forEach((function(n){r.needs(t[n][dt]().to((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];o[n]=e,u()})).needs(r))})),r.isOff||(u=function(){return i(o)})}),(function(){var e={};return n.forEach((function(n){return Nt(t[n]).once((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e[n]=r}))})),[e]})).share()}function Lt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Mt(r,i).share();function r(t){var e=t.supply,r=Ct(t),i=O,u=[];n.forEach((function(t,n){e.needs(t[dt]().to((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];u[n]=e,i()})).needs(e))})),e.isOff||(i=function(){return r.apply(void 0,u)})}function i(){var t=[];return n.forEach((function(n){return Nt(n).once((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return t.push(e)}))})),t}}function Bt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Mt(O,S(n))}function It(t){return R((function(n,e){return n.onEvent(e,Nt(t))}))}var Vt=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"on",value:function(t){var n=this;return(this.on=zt((function(t){return h(v(e.prototype),"on",n).call(n,t)})).F)(t)}},{key:Ot,value:function(){return this.on()}}]),e}(xt),Wt=zt($t);function Ht(t){return At(t)?t[Ot]():t[dt]()}function Qt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?zt((function(t){var e=t.supply,r=n.length,i=function(t){--r||e.off(t)},u=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];t.receive.apply(t,[n].concat(r))};n.forEach((function(t){return Ht(t).to({supply:kt(i).needs(e),receive:u})}))})).share():Wt}function Yt(t){return zt((function(n){var e=n.supply,r=Ct(n),i=kt(),u=0,o=Ht(t).tillOff(e,i).thru_((function(t){return++u,E(t)})),a=[],c=1,s=0;i.whenOff((function(t){u||e.off(t)})),function(t){return zt((function(n){var e=n.supply,r=Ct(n),i=0;t[Ot]().to({supply:e,receive:function(t,n){var u=++i;Promise.resolve().then((function(){return n})).then((function(t){return r(t,u)}),(function(t){return e.off(t)}))}})}))}(o).to({supply:e,receive:function(t,e,o){var l,h=o-c;(a[h]=e,++s>h)&&(s===a.length?(l=a,a=[]):l=a.splice(0,h+1),c+=l.length,s-=l.length,u-=l.length,r.apply(void 0,f(l)),!u&&i.isOff&&n.supply.needs(i))}})}))}function Jt(t){var n=function(e){t.then((function(){return n(e)}),(function(){return n(e)}))};return t.then((function(t){n=function(t){return function(n){try{Ct(n)(t),n.supply.off()}catch(t){n.supply.off(t)}}}(t)})).catch((function(t){var e;e=t,n=function(t){return t.supply.off(e)}})),zt((function(t){return n(t)}))}function Gt(t){return Array.isArray(t)?t:[t]}var Zt=function(){function t(n){var e=this;u(this,t),this._drop=n,this.emitter=new Vt,this._nested=new Map,this.emitter.on((function(t,n,r){var i=(t=Gt(t))[0],u=e._nested.get(i);u&&u.emitter.send(t.slice(1),n,r)}))}return i(t,[{key:"on",value:function(t){var n=this,e=this.emitter.on(t);return kt((function(t){e.off(t),n._dropIfEmpty()})).needs(e)}},{key:"nest",value:function(n,e){var r=this,i=this._nested.get(n);if(i||e)return i;var u=new t((function(){return r._remove(n)}));return this._nested.set(n,u),u}},{key:"done",value:function(t){var e,r=n(this._nested.values());try{for(r.s();!(e=r.n()).done;){e.value.done(t)}}catch(t){r.e(t)}finally{r.f()}this.emitter.done(t)}},{key:"_remove",value:function(t){this._nested.delete(t),this._dropIfEmpty()}},{key:"_dropIfEmpty",value:function(){!this._nested.size&&this.emitter.size<=1&&this._drop()}}]),t}(),Xt=function(){function t(){u(this,t),this._root=new Zt(O)}return i(t,[{key:"on",value:function(t,n){return this._entry(t).on(n)}},{key:"send",value:function(t,n,e){this._root.emitter.send(t,n,e)}},{key:"done",value:function(t,n){var e=this._entry(t,!0);e&&e.done(n)}},{key:"_entry",value:function(t,e){var r,i=this._root,u=n(t);try{for(u.s();!(r=u.n()).done;){var o=r.value,a=i.nest(o,e);if(!a)return;i=a}}catch(t){u.e(t)}finally{u.f()}return i}}]),t}(),tn=function(){function t(n,e){var r=this;u(this,t),this._trackers=n,this._path=e,this.update=function(t,n,e){r._trackers.send([].concat(f(r._path),f(Gt(t))),n,e)}}return i(t,[{key:"onUpdate",value:function(t){var n=this;return(this.onUpdate=zt((function(t){return n._trackers.on(n._path,t)})).F)(t)}},{key:Ot,value:function(){return this.onUpdate()}},{key:"track",value:function(n){return(n=Gt(n)).length?new t(this._trackers,[].concat(f(this._path),f(n))):this}},{key:"done",value:function(t){this._trackers.done(this._path,t)}},{key:"_tracker",get:function(){return this}}]),t}(),nn=function(){function t(){u(this,t),this._tracker=new tn(new Xt,[])}return i(t,[{key:"onUpdate",value:function(t){return(this.onUpdate=this._tracker.onUpdate().F)(t)}},{key:Ot,value:function(){return this.onUpdate()}},{key:"track",value:function(t){var n=this._tracker.track(t);return n===this._tracker?this:n}},{key:"done",value:function(t){this._tracker.done(t)}},{key:"update",get:function(){return this._tracker.update}}]),t}(),en=function(){function t(){u(this,t),this._by=Tt()}return i(t,[{key:"read",value:function(t){var n=this;return(this.read=Mt((function(t){return n.on({supply:(e=t).supply,receive:function(t,n){e.receive({onRecurrent:function(n){t.onRecurrent((function(t){return n(t)}))}},n)}});var e}),(function(){return[n.it]})).F)(t)}},{key:Ot,value:function(){return this.on()}},{key:dt,value:function(){return this.read()}},{key:"by",value:function(t,n){var e=this,r=function(t){return(pt(t)?t[dt]():t[Ot]()).to((function(t){return e.it=t}))};if(this.byNone(),n){var i=t;this._by=Ht(i).consume((function(){var t=n.apply(void 0,arguments);if(t)return r(t)}))}else{var u=t;this._by=r(u)}return this._by.whenOff((function(){return e._by=Tt()})),this}},{key:"byNone",value:function(t){return this._by.off(t),this}},{key:"done",value:function(t){return mt(this).off(t),this}}]),t}();var rn=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._it=t,r._on=new Vt,r}return i(e,[{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:yt,get:function(){return mt(this._on)}},{key:"it",get:function(){return this._it},set:function(t){var n=this._it;n!==t&&(this._it=t,this._on.send(t,n))}}]),e}(en);function un(t){return new rn(t)}t("V",function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._on=new Vt,r._it=t,r}return i(e,[{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:"sync",value:function(t,n,e){var r,i,u=this,o=function(t){return s(u,t)};"string"==typeof t?("in"===t&&(o=function(t){return s(t,u)}),r=n,i=e):(r=t,i=n);var a=i;if(!a)return o(r);var c=r;return(pt(c)?Nt(c):Ht(c)).consume((function(){var t=a.apply(void 0,arguments);return t&&o(t)}));function s(t,n){var e=t.read((function(t){n.it=t})),r=n.on((function(n){t.it=n}));return kt((function(t){r.off(t),e.off(t)})).needs(e).needs(r)}}},{key:yt,get:function(){return mt(this._on)}},{key:"it",get:function(){return this._it},set:function(t){var n=this.it;n!==t&&(this._it=t,this._on.send(t,n))}}]),e}(en));var on=function(){function t(){u(this,t)}return i(t,[{key:"name",value:function(t,n){if("string"==typeof t)return t;var e=o(t,2),r=e[0],i=e[1];return i.name(n(i),r,this)}}]),t}(),an=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"applyAlias",value:function(t,n){return"".concat(n,"-").concat(t)}}]),e}(on),cn=new an,sn=new an,fn=new(function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"applyAlias",value:function(t,n){return"".concat(n,":").concat(t)}}]),e}(on)),ln=new(function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"applyAlias",value:function(t,n){return"".concat(t,"@").concat(n)}}]),e}(on)),hn=function(){function t(n){u(this,t),this.url=n;for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];this.aliases=r}return i(t,[{key:"name",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cn;return e.applyAlias(n,t,this)}},{key:"alias",get:function(){return this.aliases[0]||"ns"}}]),t}();function vn(t){return"string"==typeof t||function(t){return Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&t[1]instanceof hn}(t)}function dn(t,n){if("string"==typeof t)return"string"==typeof n?pn(t,n):n[1].url?-1:pn(t,n[0]);var e=o(t,2),r=e[0],i=e[1].url;return"string"==typeof n?i?1:pn(r,n):pn(i,n[1].url)||pn(r,n[0])}function pn(t,n){return t<n?-1:t>n?1:0}function yn(){var t=new Map,n=new Map;return function(e){var r=t.get(e.url);if(r)return r;for(var i=e.alias,u=0,o=0,a=[i].concat(f(e.aliases));o<a.length;o++){var c=a[o],s=n.get(c);if(!s)return t.set(e.url,c),n.set(c,1),c;u||(u=s)}var l=i+ ++u;return t.set(e.url,l),n.set(i,u),l}}var gn,mn=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"to",value:function(t,n){if(!t)return this;var e=_t(t),r=e.supply;return r.isOff||this._on(e,n),r}},{key:"once",value:function(t,n){return(this.once=kn(Rt(this)).F)(t,n)}},{key:"tillOff",value:function(t,n){return kn(Ft(this,t,n))}},{key:"capture",value:function(t,n){var e=this;return(this.capture=kn((function(t,n){return null==n?e.to(t,!0):"object"===d(n)&&null==n.capture?e.to(t,Object.assign(Object.assign({},n),{capture:!0})):e.to(t,n)})).F)(t,n)}},{key:"instead",value:function(t,n){var e=this;return(this.instead=kn((function(t,n){var r=_t(t);return e.to({supply:r.supply,receive:function(t,n){n.preventDefault(),r.receive(t,n)}},n)})).F)(t,n)}},{key:"just",value:function(t,n){var e=this;return(this.just=kn((function(t,n){var r=_t(t);return e.to({supply:r.supply,receive:function(t,n){n.stopPropagation(),r.receive(t,n)}},n)})).F)(t,n)}},{key:"last",value:function(t,n){var e=this;return(this.last=kn((function(t,n){var r=_t(t);return e.to({supply:r.supply,receive:function(t,n){n.stopImmediatePropagation(),r.receive(t,n)}},n)})).F)(t,n)}},{key:"passive",value:function(t,n){var e=this;return(this.passive=kn((function(t,n){return null==n?e.to(t,{passive:!0}):"boolean"==typeof n?e.to(t,{capture:n,passive:!0}):null==n.passive?e.to(t,Object.assign(Object.assign({},n),{passive:!0})):e.to(t,n)})).F)(t,n)}},{key:"F",get:function(){return this.to.bind(this)}}]),e}(jt);function kn(t){return new mn(t)}var _n={onRecurrent:O},wn=function(){function t(n){u(this,t),this[gn]=kt(),this._target=n}return i(t,[{key:"on",value:function(t){var n=this;return kn((function(e,r){var i=e.supply;if(i.needs(mt(n)),!i.isOff){var u=function(t){return e.receive(_n,t)};n._target.addEventListener(t,u,r),e.supply.whenOff((function(){return n._target.removeEventListener(t,u)}))}}))}},{key:"dispatch",value:function(t){return!mt(this).isOff&&this._target.dispatchEvent(t)}},{key:"done",value:function(t){return mt(this).off(t),this}}]),t}();gn=yt;var bn=function(){function t(){u(this,t),this._providers=un([])}return i(t,[{key:"provide",value:function(t){var n=this;return this._providers.it=[].concat(f(this._providers.it),[t]),function(){var e=n._providers.it,r=e.indexOf(t);r>=0&&(n._providers.it=e.slice(0,r).concat(e.slice(r+1)))}}},{key:"seed",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt();return this.combine(n,xn(t,this._providers))}},{key:"isEmpty",value:function(){return!1}},{key:"combine",value:function(t,n){return Lt(t,n).keepThru(An)}}]),t}();function xn(t,n){return n.read().keepThru((function(n){return n.length?It(Lt.apply(void 0,f(V(V(W(n),(function(n){return n(t)})),On)))):F()}),An)}function On(t){return null==t?Bt():function(t){return("object"===d(t)||"function"==typeof t)&&pt(t)}(t)?Nt(t):Bt(t)}function An(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return F.apply(void 0,f(I(n)))}var Sn=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"seeder",value:function(){return new bn}}]),e}(X),Tn=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,t.name+":up"))._key=t,i.grow=r,i}return i(e,[{key:"seedKey",get:function(){return this._key.seedKey}}]),e}(Z),Cn=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,t)).seedKey=r||new Sn(a(i)),i}return i(e,[{key:"createUpKey",value:function(t){return new Tn(this,t)}}]),e}(Z),Rn=function(t){r(e,t);var n=c(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.seedKey,c=i.byDefault,s=void 0===c?O:c;return u(this,e),(r=n.call(this,t,o)).byDefault=function(t,n){return s(t,n)||function(){throw new tt(a(r))}},r.upKey=r.createUpKey((function(t){return t.seed.keepThru((function(){var n;if(arguments.length)return(n=arguments.length-1)<0||arguments.length<=n?void 0:arguments[n];var e=function(){return Bt(r.byDefault(t.context,a(r)))};return It(t.byDefault(e)||e())}))})),r}return i(e,[{key:"grow",value:function(t){var n;return t.context.get(this.upKey,"or"in t?{or:null!=t.or?Bt(t.or):t.or}:void 0).to((function(t){return n=t})),function(){return n.apply(void 0,arguments)}}}]),e}(Cn),Dn=function(t){r(e,t);var n=c(e);function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.seedKey,a=i.byDefault,c=void 0===a?O:a;return u(this,e),(r=n.call(this,t,o)).byDefault=c,r}return i(e,[{key:"grow",value:function(t){var n=this;return t.seed.keepThru((function(){var e;if(arguments.length)return E((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]);var r=t.byDefault((function(){var e=n.byDefault(t.context,n);return e&&Bt(e)}));return It(null!=r?r:Mt((function(){throw new tt(n)})))}))}},{key:"upKey",get:function(){return this}}]),e}(Cn),En=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{get node(){return n.node},get window(){return t||(t=n.window||n.node&&Fn(n.node)||window)},error:function(){var t;n&&n.error?n.error.apply(n,arguments):(t=console).error.apply(t,arguments)}}};function Fn(t){return(t.ownerDocument||t).defaultView}var $n=Symbol("render-q"),jn=function(){function t(n,e){u(this,t),this.q=n,this.schedule=this.doSchedule,this.ref=e||[this,this]}return i(t,[{key:"add",value:function(t){this.q.add(t)}},{key:"doSchedule",value:function(t){var n=this;this.schedule=function(){};var e=[],r={get config(){return t},postpone:function(t){e.unshift(t)}};this.q.schedule((function(){var t=n.reset();t.suspend(),n.exec(r),n.ref[1]=n.ref[0],e.forEach((function(t){return n.q.add(t)})),r.postpone=function(t){return n.q.post(t)},n.exec(r),t.resume()}))}},{key:"exec",value:function(t){for(;;){var n=this.q.pull();if(!n)break;n(t)}}},{key:"reset",value:function(){return this.ref[0]=t.by(this.q.reset(),this.ref)}},{key:"suspend",value:function(){var t=this;this.schedule=function(n){t.scheduled=n,t.schedule=function(){}}}},{key:"resume",value:function(){this.scheduled?this.doSchedule(this.scheduled):this.schedule=this.doSchedule}}],[{key:"by",value:function(n,e){return n[$n]||(n[$n]=new t(n,e))}}]),t}();function zn(t){return function(n){var e=En(n),r=jn.by(t.newQueue(e)).ref,i=[];return function(t){var n=o(i,3),u=n[0],a=n[2],c=o(r,2),s=c[0],f=c[1],l=u||f;if(u===f&&!a||u===s)i[1]=t;else{var h=i=[l=a?s:f,t];l.add((function(t){h[2]=!0;try{h[1]({get config(){return e},postpone:function(n){t.postpone(n)}})}catch(t){e.error(t)}}))}l.schedule(e)}}}var Un={by:function(t){var n=t.schedule,e=t.replace,r=void 0===e?function(){}:e,i=[];return{schedule:n,add:function(t){i.push(t)},post:function(t){i.unshift(t)},pull:function(){return i.shift()},reset:function(){var t=Un.by({schedule:n,replace:r});return r(t),t}}}},Pn=new WeakMap,Mn=function(t){var n=En(t);return function(t){var e=[],r={get config(){return n},postpone:function(t){e.push(t)}};for(u(t);;){var i=e.pop();if(!i)break;u(i)}function u(t){try{t(r)}catch(t){n.error(t)}}}},qn=zn({newQueue:function(t){var n=t.window,e=Pn.get(n);if(e)return e;var r=Un.by({schedule:function(t){return n.requestAnimationFrame(t)},replace:function(t){return Pn.set(n,t)}});return Pn.set(n,r),r}});function Nn(t){return qn(t)}var Kn=new vt("bootstrap-context"),Ln=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,null,[{key:G,get:function(){return Kn}}]),e}(rt);function Bn(t){return function(n,e){var r=n.get(Ln);return n===r?t(r,e):r.get(e)}}function In(t){return Array.isArray(t)}var Vn=function(){function t(n){u(this,t),this.items=null==n?new Set:In(n)?new Set(n):new Set([n])}return i(t,[{key:Symbol.iterator,value:function(){return this.items[Symbol.iterator]()}},{key:"add",value:function(){for(var t=this,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.forEach((function(n){return t.items.add(n)})),this}},{key:"merge",value:function(t){return null==t?this:In(t)?this.add.apply(this,f(t)):this.add(t)}},{key:"value",get:function(){switch(this.items.size){case 0:return;case 1:return this.items[Symbol.iterator]().next().value;default:return f(this.items)}}},{key:"size",get:function(){return this.items.size}}]),t}();function Wn(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},e=Object.getPrototypeOf(t.prototype);if(null!=e){var r=e.constructor;return n(r)?r:Wn(r,n)}}function Hn(t,n,e,r){var i=!e,u=r(e?function(t){if(function(t){return void 0===t.value&&void 0===t.writable}(t))return t;var n=Symbol("value"),e=t.value,r=Object.assign(Object.assign({},t),{writable:void 0,value:void 0,get:function(){return n in this?this[n]:e}});return t.writable&&(r.set=function(t){this[n]=t}),delete r.writable,delete r.value,r}(e):function(t,n){var e=Symbol("".concat(String(n),":value")),r=t[n];return{configurable:!0,enumerable:!0,get:function(){return e in this?this[e]:r},set:function(t){this[e]=t}}}(t,n));if(!i||!u)return u;Object.defineProperty(t,n,u)}function Qn(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,n){return n};return t?n?function(){for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return e(t.apply(this,i),n.apply(this,i))}:t:n}function Yn(t){return t.nodeType===Node.ELEMENT_NODE}var Jn=function(){function t(n){u(this,t),this.symbol=n}return i(t,[{key:"own",value:function(t){return t.hasOwnProperty(this.symbol)?t[this.symbol]:void 0}},{key:"of",value:function(t){var n=this.own(t),e=Wn(t),r=e&&this.of(e);return n?r?this.merge([r,n]):n:r}},{key:"define",value:function(t,n){var e=this,r=this.own(t),i=V(n,(function(n){return e.meta(n,t)})),u=this.merge(r?I([[r],i]):i);return Object.defineProperty(t,this.symbol,{configurable:!0,value:u}),t}}]),t}(),Gn=function(){function t(){var n=this;u(this,t),this.promise=new Promise((function(t,e){n._resolve=t,n._reject=e}))}return i(t,[{key:"resolve",value:function(t){this._resolve(t)}},{key:"reject",value:function(t){this._reject(t)}}]),t}(),Zn=Symbol("feature-def"),Xn=new(function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.call(this,Zn)}return i(e,[{key:"merge",value:function(t){return L(t,(function(t,n){return{needs:new Vn(t.needs).merge(n.needs).value,has:new Vn(t.has).merge(n.has).value,setup:Qn(t.setup,n.setup),init:Qn(t.init,n.init)}}),{})}},{key:"meta",value:function(t,n){var e=t[Zn];return null==e?t:this.meta("function"==typeof e?t[Zn](n):e,n)}}]),e}(Jn)),te=e({},Zn,(function(){return{}})),ne={of:function(t){return Xn.of(t)||{}},for:function(t,n){return Xn.meta(n,t)},merge:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Xn.merge(n)},all:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return L(n,(function(t,n){return e({},Zn,(function(e){return ne.merge(ne.for(e,t),ne.for(e,n))}))}),te)},define:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return Xn.define(t,e)}};function ee(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(t){return ne.define.apply(ne,[t].concat(n))}}var re=new vt("feature-context"),ie=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"whenDefined",value:function(t){return this.get(Ln).whenDefined(t)}},{key:"load",value:function(t){return this.get(Ln).load(t)}}],[{key:G,get:function(){return re}}]),e}(Ln),ue=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this,"Circular feature needs: "+t.reduce((function(t,n){var e=o(n,3),r=e[0],i=e[1],u=e[2];return(t||r.name)+" ".concat(i," ").concat(u.name)}),""))).needs=t,r}return e}(s(Error)),oe=function(){function t(){u(this,t)}return i(t,[{key:dt,value:function(){return this.read()}}]),t}(),ae=Symbol("component-def"),ce=new(function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.call(this,ae)}return i(e,[{key:"merge",value:function(t){return L(t,(function(t,n){return Object.assign(Object.assign(Object.assign({},t),n),{setup:Qn(t.setup,n.setup),define:Qn(t.define,n.define),feature:t.feature?n.feature?ne.merge(t.feature,n.feature):t.feature:n.feature})}),{})}},{key:"meta",value:function(t,n){var e=t[ae];return null!=e?this.meta("function"==typeof e?t[ae](n):e,n):null!=t[Zn]?{feature:ne.for(n,t)}:vn(t)?{name:t}:t}}]),e}(Jn)),se=e({},ae,(function(){return{}})),fe={of:function(t){return ce.of(t)||{}},for:function(t,n){return ce.meta(n,t)},merge:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return ce.merge(n)},all:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return L(n,(function(t,n){return e({},ae,(function(e){return fe.merge(fe.for(e,t),fe.for(e,n))}))}),se)},define:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return ce.define(t,e)}};function le(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=function(t){return fe.define.apply(fe,[t].concat(n))},i=r;return i[ae]=function(){return fe.all.apply(fe,n)},r}var he=new vt("component-context"),ve=new vt("component-event-dispatcher",{byDefault:function(t){var n=t.get(he),e=new wn(n.element);return mt(e).needs(n),{dispatch:function(t){return e.dispatch(t)},on:function(t){return e.on(t)}}}}),de=new vt("content-root",{byDefault:function(t){return t.get(he).element}}),pe=new Rn("state-updater",{byDefault:S(O)}),ye=Symbol("component-context"),ge=function(t){r(e,t);var n=c(e);function e(){var t;return u(this,e),(t=n.apply(this,arguments)).updateState=me.bind(a(t)),t}return i(e,[{key:"on",value:function(t){return this.get(ve).on(t)}},{key:"dispatchEvent",value:function(t){this.get(ve).dispatch(t)}},{key:"contentRoot",get:function(){return this.get(de)}}],[{key:"of",value:function(t){var n=t[ye];if(!n)throw TypeError("No component context found in ".concat(t));return n}},{key:G,get:function(){return he}}]),e}(rt);function me(t,n,e){this.get(pe)(t,n,e)}var ke=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"context",get:function(){return ge.of(this.target)}}]),e}(s(Event)),_e=function(){function t(){u(this,t)}return i(t,[{key:"component",get:function(){return this.context.component}},{key:"element",get:function(){return this.context.element}}]),t}(),we=Symbol("anonymous-component-property");function be(t){var n=function(n){var r=n.get,i=n.set,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we,o=arguments.length>2?arguments[2]:void 0;return le(e({},ae,(function(n){var e=t({type:n,key:u,readable:!0,writable:o,enumerable:!1,configurable:!1,get:function(t){return r(t,u)},set:function(t,n){return i(t,n,u)}});return e&&e.componentDef||{}})))},r=function(t,e){return n({get:function(n,e){return t(n,e)}},e,!1)},i=function(n,e,r){return Hn(n,e,r,(function(r){var i=r.get,u=r.set,o=n.constructor,a=t({type:o,key:e,readable:!!r.get,writable:!!r.set,enumerable:!!r.enumerable,configurable:!!r.configurable,get:i?function(t){return i.call(t)}:xe(e),set:u?function(t,n){return u.call(t,n)}:Oe(e)})||{},c=a.get,s=a.set,f=a.configurable,l=a.enumerable,h=a.componentDef,v=void 0===h?{}:h;fe.define(o,v);var d=Object.assign(Object.assign({},r),{configurable:null!=f?f:r.configurable,enumerable:null!=l?l:r.enumerable});return(c||s)&&(d.get=c&&function(){return c(this,e)},d.set=s&&function(t){s(this,t,e)}),d}))};return i.With=function(t,e){return n(t,e,!0)},i.By=r,i.As=function(t,n){return r(S(t),n)},i.Bind=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we,r=Symbol("".concat(String(e),":accessor")),i=function(n){var i=n[r];if(i)return i;var u=t(n,e);return n[r]={get:u.get?u.get.bind(u):xe(e),set:u.set?u.set.bind(u):Oe(e)}};return n({get:function(t){return i(t).get()},set:function(t,n){return i(t).set(n)}},e,!0)},i}function xe(t){return function(){throw new TypeError('"'.concat(String(t),'" is not readable'))}}function Oe(t){return function(){throw new TypeError('"'.concat(String(t),'" is not writable'))}}var Ae=new vt("bootstrap-context-registry"),Se=function(t){r(e,t);var n=c(e);function e(){var t;return u(this,e),(t=n.call(this)).provide({a:e,is:a(t)}),t.values=t.newValues(),t}return i(e,null,[{key:"create",value:function(){return new e}},{key:G,get:function(){return Ae}}]),e}(it),Te=new vt("component-context-registry",{byDefault:Bn((function(){return new Ce}))}),Ce=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,null,[{key:G,get:function(){return Te}}]),e}(it),Re=new vt("definition-context-registry",{byDefault:Bn((function(t){return new De(t)}))}),De=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,null,[{key:G,get:function(){return Re}}]),e}(it);var Ee=Symbol("post-def-setup");function Fe(t){if(t.hasOwnProperty(Ee))return t[Ee];var n=un(),e=new Vt,r=Qt(n.read().thru((function(t){return t?F(t):z()})),e),i=Wn(t,(function(t){return ae in t}));if(i){var u=Fe(i);r.to((function(t){return u.send(t)}))}var o={on:r,send:function(t){e.send(t)},setup:function(t){n.it=t}};return Object.defineProperty(t,Ee,{value:o}),o}var $e=t("B",new vt("window",{byDefault:function(){return window}})),je=new vt("bootstrap-root",{byDefault:function(t){return t.get($e).document.body}}),ze=new vt("default-namespace-aliaser");function Ue(t,n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(Object.assign(Object.assign({},e),{window:e.window||t.get($e)}))}}var Pe=new(function(t){r(e,t);var n=c(e);function e(){var t;return u(this,e),(t=n.call(this,"default-render-scheduler")).upKey=t.createUpKey((function(t){return t.seed.keepThru((function(){var n;if(arguments.length)return Ue(t.context,(n=arguments.length-1)<0||arguments.length<=n?void 0:arguments[n]);var e=function(){return Bt(Ue(t.context,Nn))};return It(t.byDefault(e)||e())}))})),t}return i(e,[{key:"grow",value:function(t){var n;return t.context.get(this.upKey,"or"in t?{or:null!=t.or?Bt(t.or):t.or}:void 0).to((function(e){return n=Ue(t.context,e)})),function(){return n.apply(void 0,arguments)}}}]),e}(Cn));function Me(t){return t[ye]}var qe=new(function(t){r(e,t);var n=c(e);function e(){var t;return u(this,e),(t=n.call(this,"element-adapter")).upKey=t.createUpKey((function(t){return t.seed.keepThru((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=e.reduce((function(t,n){return function(e){return t(e)||n(e)}}),Me),u=function(){return Bt(Me)};return i!==Me?i:It(t.byDefault(u)||u())}))})),t}return i(e,[{key:"grow",value:function(t){var n;return t.context.get(this.upKey,"or"in t?{or:null!=t.or?Bt(t.or):t.or}:void 0).to((function(t){return n=t})),function(t){return n(t)}}}]),e}(Cn)),Ne=new Rn("element-observer",{byDefault:Bn((function(t){var n=t.get(qe),e=function(t){r(o,t);var e=c(o);function o(t){var r;return u(this,o),r=e.call(this,(function(e){e.forEach((function(t){q(W(t.removedNodes),(function(t){var n;return null===(n=function(t){var n;return null===(n=t[ye])||void 0===n?void 0:n.mount}(t))||void 0===n?void 0:n.checkConnected()})),q(B(W(t.addedNodes),Yn),(function(t){var e,r;return null===(r=null===(e=n(t))||void 0===e?void 0:e.mount)||void 0===r?void 0:r.checkConnected()}))})),t(e,a(r))}))}return i(o,[{key:"observe",value:function(t,n){h(v(o.prototype),"observe",this).call(this,t,Object.assign(Object.assign({},n),{childList:!0}))}}]),o}(s(MutationObserver));return function(t){return new e(t)}}))});var Ke=Symbol("definition-context");function Le(t){if(!t.hasOwnProperty(Ke))throw new TypeError("Component is not defined: ".concat(t));return t[Ke]}var Be=new vt("custom-elements",{byDefault:Bn((function(t){var n=t.get($e).customElements,e=t.get(ze);return new(function(t){r(a,t);var o=c(a);function a(){return u(this,a),o.apply(this,arguments)}return i(a,[{key:"define",value:function(t,r){if(vn(t))n.define(sn.name(t,e),r);else{var i=Le(t).elementDef,u=i.name,o=i.extend;u?o&&o.name?n.define(sn.name(u,e),r,{extends:o.name}):n.define(sn.name(u,e),r):We(t).resolve(void 0)}}},{key:"whenDefined",value:function(t){if(vn(t))return n.whenDefined(sn.name(t,e));var r=Le(t).elementDef.name;return r?n.whenDefined(sn.name(r,e)):We(t).promise}}]),a}(Ie))}))}),Ie=function(){function t(){u(this,t)}return i(t,null,[{key:G,get:function(){return Be}}]),t}();var Ve=Symbol("component-resolver");function We(t){return t.hasOwnProperty(Ve)?t[Ve]:t[Ve]=new Gn}var He=new vt("definition-context"),Qe=new vt("element-def",{byDefault:function(t){var n=t.get(He).componentType,e=fe.of(n),r=e.name,i=e.extend,u={get type(){return i&&i.type||t.get($e).HTMLElement},get name(){return i&&i.name}};return{get name(){return r},get extend(){return u}}}}),Ye=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"connectTo",value:function(t){var n=this.mountTo(t);return n.connect(),n}},{key:"elementDef",get:function(){return this.get(Qe)}}],[{key:G,get:function(){return He}}]),e}(rt),Je=function(t){r(e,t);var n=c(e);function e(t,r,i){var o;u(this,e),(o=n.call(this))._definitionContext=t,o.element=r,o.elementSuper=i,o._status=un(0);var c=t._newComponentRegistry();return c.provide({a:ge,is:a(o)}),o.get=c.newValues().get,o}return i(e,[{key:"_component",value:function(){throw new TypeError("Component is not constructed yet. Consider to use a `whenReady()` callback")}},{key:"whenReady",value:function(t){var n=this;return(this.whenReady=this._status.read().thru((function(t){return t?F(n):z()})).once().F)(t)}},{key:"whenConnected",value:function(t){var n=this;return(this.whenConnected=this._status.read().thru_((function(t){return 2===t?E(n):z()})).once().F)(t)}},{key:"destroy",value:function(t){try{this._status.done(t)}finally{delete this.component[ye],delete this.element[ye],this._component=Ge,n=this.element,(e=n.parentNode)&&e.removeChild(n)}var n,e}},{key:"_createComponent",value:function(){var t=this,n=this._definitionContext._whenComponent,e=0;this.element[ye]=this,n.readNotifier.once((function(n){return e=n(t,e)})),this.whenConnected((function(){n.readNotifier.to({supply:kt().needs(t),receive:function(n,r){e=r(t,e)}})})),this._definitionContext._elementBuilder.components.send(this);var r=function(t){var n=t.componentType,e=n.prototype,r=e[ye];e[ye]=t;try{var i=new n(t);return i[ye]=t,i}finally{e[ye]=r}}(this);return this._component=S(r),this._status.it=1,this}},{key:"_connect",value:function(){this._status.it=2}},{key:"_created",value:function(){var t=this;this.whenConnected((function(){return t.dispatchEvent(new ke("wesib:component",{bubbles:!0}))}))}},{key:"componentType",get:function(){return this._definitionContext.componentType}},{key:"component",get:function(){return this._component()}},{key:"connected",get:function(){return 2===this._status.it&&!mt(this).isOff}},{key:yt,get:function(){return mt(this._status)}}]),e}(ge);function Ge(){throw new TypeError("Component destroyed already")}var Ze=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this)).context=t,r}return i(e,[{key:"connect",value:function(){this.context._connect()}},{key:"checkConnected",value:function(){var t=this.context.element,n=t.ownerDocument,e=null!=n&&n.contains(t);return e!==this.connected&&(e?this.connect():this.context.destroy()),e}},{key:"connected",get:function(){return this.context.connected}}]),e}(_e),Xe=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,t,r,(function(t){return r[t]}))).mount=new Ze(a(i)),i}return e}(Je),tr=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"mount",get:function(){}}]),e}(Je);var nr=function t(){u(this,t);var n=un(0),e=new Vt;this.onCreated=zt((function(t){var r=n.it+1;e.on({supply:t.supply,receive:function(n,e,i){i<r&&t.receive({onRecurrent:function(t){n.onRecurrent((function(n){return t(n)}))}},e)}}),++n.it})),this.readNotifier=n.read().keepThru_((function(t){return function(n,r){return e.send(n,r),t}}))},er=function(t){r(e,t);var n=c(e);function e(t,r,i){var o,c,s;u(this,e),(o=n.call(this))._bsContext=t,o._elementBuilder=r,o.componentType=i,o._whenComponent=new nr,o._ready=un(!1),o._whenReady=o._ready.read().thru((function(t){return t?F():z()})),o._def=fe.of(i);var f=new De(t.get(De).seedIn(a(o)));f.provide({a:Ye,is:a(o)}),o.get=f.newValues().get,o._perTypeRegistry=new Ce(f.seedIn(a(o)));var l=o.whenReady().F,h=o.whenComponent().F,v={get componentType(){return i},get whenReady(){return l},get whenComponent(){return h},perDefinition:function(t){return f.provide(t)},perComponent:function(t){return o._perTypeRegistry.provide(t)}};return null===(s=(c=o._def).setup)||void 0===s||s.call(c,v),Fe(i).setup(v),o}return i(e,[{key:"whenReady",value:function(t){return(this.whenReady=this._whenReady.thru_(S(this)).once().F)(t)}},{key:"mountTo",value:function(t){if(t[ye])throw new Error("Element ".concat(t," already bound to component"));var n=new Xe(this,t);n._createComponent();var e=n.mount;return e.checkConnected(),n._created(),e}},{key:"whenComponent",value:function(t){return(this.whenComponent=this._whenComponent.onCreated.F)(t)}},{key:"perComponent",value:function(t){return this._perTypeRegistry.provide(t)}},{key:"_newComponentRegistry",value:function(){return this._bsContext.get(Ce).append(this._perTypeRegistry)}},{key:"_elementType",value:function(){throw new Error("Custom element class is not constructed yet. Consider to use a `whenReady()` callback")}},{key:"_define",value:function(){var t,n,e;null===(n=(t=this._def).define)||void 0===n||n.call(t,this),this._elementBuilder.definitions.send(this),this._elementType=S(function(t){r(o,t);var n=c(o);function o(){var t;u(this,o),t=n.call(this);var r=new tr(e,a(t),(function(n){return h(v(o.prototype),n,a(t))}));return r._createComponent(),r._created(),t}return i(o,[{key:"connectedCallback",value:function(){this[ye]._connect()}},{key:"disconnectedCallback",value:function(){this[ye].destroy()}}]),o}((e=this).get(Qe).extend.type)),this.componentType[Ke]=this,this._ready.it=!0}},{key:"elementType",get:function(){return this._elementType()}}]),e}(Ye),rr=new vt("element-builder",{byDefault:Bn((function(t){return{definitions:new Vt,components:new Vt,buildElement:function(n){var e=new er(t,this,n);return e._define(),e}}}))});var ir=S(O);var ur=function(){function t(n){var e=this;u(this,t),this._context=n,this._definitionQueue=[],n.whenReady((function(){e._definitionQueue.forEach((function(t){return t()})),delete e._definitionQueue}))}return i(t,[{key:"define",value:function(t){var n=this;this._definitionQueue.push((function(){var e=n._context.get(rr).buildElement(t);n.customElements.define(t,e.elementType)}))}},{key:"customElements",get:function(){return this._context.get(Ie)}}]),t}(),or=function(t){r(e,t);var n=c(e);function e(t,r){var i,o,c;u(this,e),(i=n.call(this))._bsContext=t,i._loader=r,i._unloader=(o=[],c=function(t){var n=t();return o.push(n),n},{supply:kt((function(){c=ir,q(W(o).reverse(),(function(t){return t()})),o.length=0})),add:function(t){return c(t)}});var s=new it(t);return s.provide({a:ie,is:a(i)}),i.get=s.newValues().get,i._componentRegistry=new ur(a(i)),i}return i(e,[{key:"whenReady",value:function(t){var n=this;return(this.whenReady=Kt({st:this._loader.state,bs:un().by(this._bsContext.whenReady())}).thru((function(t){var e=o(t.st,1)[0];return o(t.bs,1)[0]&&e?E(n):z()})).once().F)(t)}},{key:"onDefinition",value:function(t){return(this.onDefinition=this._bsContext.get(rr).definitions.on().tillOff(this._unloader.supply).F)(t)}},{key:"onComponent",value:function(t){return(this.onComponent=this._bsContext.get(rr).components.on().tillOff(this._unloader.supply).F)(t)}},{key:"provide",value:function(t){var n=this;return this._unloader.add((function(){return n._bsContext.get(Se).provide(t)}))}},{key:"perDefinition",value:function(t){var n=this;return this._unloader.add((function(){return n._bsContext.get(De).provide(t)}))}},{key:"perComponent",value:function(t){var n=this;return this._unloader.add((function(){return n._bsContext.get(Ce).provide(t)}))}},{key:"setupDefinition",value:function(t){return function(t,n){var e=Fe(t).on;return zt((function(t){e.to({supply:t.supply.needs(n.supply),receive:function(e,r){var i=r.whenReady().tillOff(n.supply).F,u=r.whenComponent().tillOff(n.supply).F;t.receive(e,{get componentType(){return r.componentType},get whenReady(){return i},get whenComponent(){return u},perDefinition:function(t){return n.add((function(){return r.perDefinition(t)}))},perComponent:function(t){return n.add((function(){return r.perComponent(t)}))}})}})}))}(t,this._unloader)}},{key:"define",value:function(t){this._componentRegistry.define(t)}},{key:"feature",get:function(){return this._loader.request.feature}}]),e}(ie),ar=Symbol("feature-key"),cr=function(t){r(e,t);var n=c(e);function e(t){return u(this,e),n.call(this,"feature:".concat(t.name))}return i(e,[{key:"upKey",get:function(){return this}}],[{key:"of",value:function(t){return t.hasOwnProperty(ar)?t[ar]:t[ar]=new e(t)}}]),i(e,[{key:"grow",value:function(t){return fr(t.context.get(Ln),t.seed.keepThru(sr))}}]),e}(Cn);function sr(){for(var t,n=!1,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var u=0,o=r;u<o.length;u++){var a=o[u];switch(a[1]){case"is":n=!0,t||(t=a);break;case"has":t=a;break;case"needs":n=!0}}return n?t:void 0}function fr(t,n){return Mt((function(e){var r,i=Bt(),u=Promise.resolve("idle");return Kt({clause:n,deps:lr(t,n)}).keepThru_((function(n){var e=o(n.clause,1)[0],a=n.deps;if(!e)return F();var c=o(e,3),s=c[0],f=c[2];if(s.feature===r)return It(i);if(f!==(r=s.feature))return It(i=t.get(cr.of(r)).keepThru_((function(t){return t.to(u),u=t.stage,t})));var l=new vr(t,s,a).to(u),h=Bt(l);return It(i=Mt((function(t){return h.to(t).whenOff((function(){u=l.unload()}))})).share())})).to(e)})).keepThru((e=null,function(t){return e===t?z():(e=t,t?F(t):F())}));var e}function lr(t,n){return n.keepThru_((function(n){if(!n)return F();var e=o(n,1)[0].def,r=new Vn(e.needs);return r.size?It(Lt.apply(void 0,f(V(r,(function(n){return t.get(cr.of(n))})))).keepThru_(hr)):F()}))}function hr(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return F.apply(void 0,f(B(V(n,(function(t){return t[0]})),A)))}var vr=function(){function t(n,e,r){var i=this;u(this,t),this.bsContext=n,this.request=e,this.deps=r,this.state=un(!1),this.down=new Promise((function(t){return i._down=t})),this._stage=Promise.resolve(new pr(this))}var n,e,r;return i(t,[{key:"to",value:function(t){var n=this._stage;return this._stage=t.then((function(t){return n.then((function(n){return n[t]()}))})),this}},{key:"setup",value:(r=p(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._stage=this._stage.then((function(t){return t.setup()}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"init",value:(e=p(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._stage=this._stage.then((function(t){return t.init()}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"unload",value:(n=p(regeneratorRuntime.mark((function t(){var n,e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._stage,delete this._stage,t.next=4,n;case 4:return e=t.sent,t.next=7,e.stop();case 7:return r=t.sent,this._down(),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"stage",get:function(){return this._stage.then((function(t){return t.after}))}},{key:"ready",get:function(){return this.state.it}}]),t}(),dr=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};u(this,t),this.loader=n,this._stop=e}return i(t,[{key:"idle",value:function(){return Promise.resolve(this)}},{key:"stop",value:function(){var t=this;return this._stop().then((function(){return t.after}))}},{key:"perDep",value:function(t){var n=this.loader.deps;return Promise.all(n.map((function(n){return t(n)})))}}]),t}(),pr=function(t){r(o,t);var n,e=c(o);function o(){return u(this,o),e.apply(this,arguments)}return i(o,[{key:"setup",value:(n=p(regeneratorRuntime.mark((function t(){var n,e,r,i,u,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perDep((function(t){return t.setup()}));case 2:return e=this.loader,r=e.bsContext,i=e.request.def,u=new or(r,this.loader),o=u._unloader.supply,null===(n=i.setup)||void 0===n||n.call(i,u),t.abrupt("return",new yr(this.loader,u,(function(){return Promise.resolve(o.off())})));case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"init",value:function(){return this.setup().then((function(t){return t.init()}))}},{key:"after",get:function(){return"idle"}}]),o}(dr),yr=function(t){r(o,t);var n,e=c(o);function o(t,n,r){var i;return u(this,o),(i=e.call(this,t,r))._context=n,i}return i(o,[{key:"setup",value:function(){return Promise.resolve(this)}},{key:"init",value:(n=p(regeneratorRuntime.mark((function t(){var n,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perDep((function(t){return t.init()}));case 2:return e=this.loader.request.def,null===(n=e.init)||void 0===n||n.call(e,this._context),t.abrupt("return",new gr(this));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"after",get:function(){return"setup"}}]),o}(dr),gr=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),r=n.call(this,t.loader,(function(){return t.stop()})),t.loader.state.it=!0,r}return i(e,[{key:"after",get:function(){return"init"}}]),i(e,[{key:"setup",value:function(){return Promise.resolve(this)}},{key:"init",value:function(){return Promise.resolve(this)}}]),e}(dr),mr=function(){function t(n,e,r){u(this,t),this._requester=n,this.feature=e,this._revoke=r,this._uses=0,this.def=function(t){var n=ne.of(t);if(ae in t){n=ne.merge(n,{init:function(n){n.define(t)}});var e=fe.of(t).feature;e&&(n=ne.merge(n,e))}return n}(e)}return i(t,[{key:"request",value:function(t){var e=this,r=this._requester,i=r.registry,u=[this,"is",this.feature];this._revokeBy(i.provide({a:cr.of(this.feature),is:u}));var o,a=n(new Vn(this.def.has));try{var c=function(){var n=o.value,u=[e,"has",n];e._revokeBy(i.provide({a:cr.of(n),is:u}));var a=r.request(n,[].concat(f(t),[u]));e._revokeBy((function(){return a.unuse()}))};for(a.s();!(o=a.n()).done;)c()}catch(t){a.e(t)}finally{a.f()}var s,l=n(new Vn(this.def.needs));try{var h=function(){var n=s.value,u=[e,"needs",n],o=r.request(n,[].concat(f(t),[u]));e._revokeBy((function(){return o.unuse()})),e._revokeBy(i.provide({a:cr.of(n),is:u}))};for(l.s();!(s=l.n()).done;)h()}catch(t){l.e(t)}finally{l.f()}return this._uses=1,this}},{key:"reuse",value:function(t){if(!this._uses)throw new ue(t.map((function(t){var n=o(t,3);return[n[0].feature,n[1],n[2]]})));return++this._uses,this}},{key:"unuse",value:function(){--this._uses||this._revoke()}},{key:"_revokeBy",value:function(t){this._revoke=Qn(t,this._revoke)}}]),t}();var kr=new vt("feature-requester",{byDefault:Bn((function(t){return new _r(t)}))}),_r=function(){function t(n){u(this,t),this._map=new Map,this.registry=n.get(Se)}return i(t,[{key:"request",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this._map.get(t);if(r)return r.reuse(e);var i=new mr(this,t,(function(){return n._map.delete(t)}));return this._map.set(t,i),i.request(e)}}],[{key:G,get:function(){return kr}}]),t}(),wr=Symbol("when-defined");function br(t){return ne.define((function t(){u(this,t)}),{needs:t})}function xr(t){var n=un(0),e=t.values,o=new(function(s){r(l,s);var f=c(l);function l(){var n;return u(this,l),(n=f.call(this)).get=e.get,t.provide({a:ze,by:yn}),t.provide({a:Ln,is:a(n)}),n}return i(l,[{key:"whenDefined",value:function(t){return function(t,n){if(n.hasOwnProperty(wr))return n[wr];var e=Jt(Promise.resolve(t.whenReady()).then((function(){return t.get(Ie).whenDefined(n)})).then((function(){return Le(n)})));return n[wr]=e}(this,t)}},{key:"whenReady",value:function(t){var e=this;return(this.whenReady=n.read().thru((function(t){return t?F(e):z()})).once().F)(t)}},{key:"load",value:function(t){var n,e=this,a=Mt((function(n){var r=o.get(_r).request(t),i=un({status:{feature:t,ready:!1}});e.get(cr.of(t)).to({supply:n.supply,receive:function(t,n){var e=n;i.it={status:{feature:e.request.feature,ready:e.ready},down:e.down},e.ready||e.init().then((function(){i.it={status:{feature:e.request.feature,ready:!0},down:e.down}}))}}).whenOff((function(){r.unuse()})),i.read(n)})).share(),s=a.to((function(t){var e=t.down;n=e}));return new(function(t){r(o,t);var e=c(o);function o(){return u(this,o),e.apply(this,arguments)}return i(o,[{key:"read",value:function(t){return(this.read=a.tillOff(s).keepThru((function(t){return t.status})).F)(t)}},{key:"dismiss",value:function(t){return s.off(t),n}},{key:"down",get:function(){return n}}]),o}(oe))}}]),l}(Ln));return{bootstrapContext:o,complete:function(){n.it=1}}}var Or=new st("attribute-descriptor"),Ar=Symbol("attribute");function Sr(t){return[Ar,t]}function Tr(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!1===n)return O;if(!0===n||"function"==typeof n){var e=Sr(t),r=!0===n?Cr:n;return function(t,n,i){return r(t,e,n,i)}}return function(t,e,r){return Cr(t,n,e,r)}}function Cr(t,n,e,r){ge.of(t).updateState(n,e,r)}var Rr=new vt("attribute-registry"),Dr=function(){function t(n){u(this,t),this._context=n}return i(t,[{key:"define",value:function(t){var n=this.attrs,e=Array.from(n.keys());e.length&&(Object.defineProperty(t,"observedAttributes",{configurable:!0,enumerable:!0,value:e}),Object.defineProperty(t.prototype,"attributeChangedCallback",{configurable:!0,enumerable:!0,value:function(t,e,r){n.get(t)(ge.of(this).component,r,e)}}))}},{key:"mount",value:function(t){var n=t.element,e=this.attrs,r=Array.from(e.keys());r.length&&new(0,this._context.get($e).MutationObserver)((function(t){return t.forEach((function(t){var r=t.attributeName;return e.get(r)(ge.of(n).component,n.getAttribute(r),t.oldValue)}))})).observe(n,{attributes:!0,attributeFilter:r,attributeOldValue:!0})}},{key:"attrs",get:function(){if(this._attrs)return this._attrs;var t=new Map;return this._context.get(Or).forEach((function(n){var e=n.name,r=n.change;t.set(e,Qn(t.get(e),r))})),this._attrs=t}}],[{key:G,get:function(){return Rr}}]),t}(),Er={setup:function(t){t.perDefinition({as:Dr}),t.onDefinition((function(t){t.whenReady((function(n){var e=n.elementType;return t.get(Dr).define(e)}))})),t.onComponent((function(t){var n=t.mount;n&&t.get(Dr).mount(n)}))}},Fr=function(){function t(){u(this,t)}return i(t,null,[{key:Zn,get:function(){return Er}}]),t}();var $r,jr=new vt("component-state"),zr=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,null,[{key:G,get:function(){return jr}}]),e}(nn),Ur={setup:function(t){t.perComponent({a:zr,by:function(t){var n=new zr;return mt(t).whenOff((function(t){return n.done(t)})),n}}),t.perComponent({a:pe,by:function(t){return t.update},with:[zr]})}},Pr=function(){function t(){u(this,t)}return i(t,null,[{key:Zn,get:function(){return Ur}}]),t}(),Mr=function(t){r(e,t);var n=c(e);function e(t,r,i){var o;return u(this,e),(o=n.call(this))._context=t,o._name=r,o._path=i,o[$r]=kt(),o}return i(e,[{key:"on",value:function(t){return(this.on=this._context.get(zr).track(this._path).onUpdate().thru((function(t,n,e){return F(n,e)})).tillOff(this).F)(t)}},{key:"it",get:function(){return this._context.element.getAttribute(this._name)},set:function(t){mt(this).isOff||(null==t?this._context.element.removeAttribute(this._name):this._context.element.setAttribute(this._name,t))}}]),e}(en);$r=yt;var qr=Symbol("dom-property");var Nr=function(){function t(n){u(this,t),this._context=n,this._renders=new Set}return i(t,[{key:"renderBy",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.path,i=void 0===r?[]:r,u=this._context.get(zr).track(i),o=this._context.get(Pe)(),a=1,c=u.onUpdate((function(){n._context.connected&&f()})).needs(this._context).whenOff(h);this._context.whenConnected((function(){a&&f()}));var s=Mn();return this._renders.add(l),c.whenOff((function(){return n._renders.delete(l)}));function f(){a=2,o(v)}function l(){s(v)}function h(){2===a&&o(O),a=-1}function v(n){if(a>0)for(a=0;;){var e=t(n);if(e===t||"function"!=typeof e)break;t=e}}}},{key:"renderNow",value:function(){this._renders.forEach((function(t){return t()}))}}]),t}(),Kr=new vt("element-render-ctl",{byDefault:function(t){return new Nr(t.get(ge))}});var Lr=new vt("shadow-content-root"),Br=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"shadowRoot",get:function(){return this.target.shadowRoot}}]),e}(s(Event)),Ir=new Rn("shadow-root-builder"),Vr={setup:function(t){t.provide({a:Ir,is:Hr})}},Wr=function(){function t(){u(this,t)}return i(t,null,[{key:Zn,get:function(){return Vr}}]),t}();function Hr(t,n){var e=function(t,n){var e=t.shadowRoot;if(e)return e;if("attachShadow"in t)return t.attachShadow(n);return}(t.element,n);return e&&(e[ye]=t,t.whenConnected((function(){return t.dispatchEvent(new Br("wesib:shadowAttached",{bubbles:!0}))}))),e}var Qr={mode:"open"};var Yr=new hn("https://wesib.github.io/ns","b","wesib");function Jr(t){var n=t.$,e=t.n,r=t.t,i=t.v,u=t.x,o=void 0===u?[]:u,a=t.p,c=void 0===a?{}:a,s=t.pl;return{$:n,n:e,t:r,v:i,x:o,p:c,pl:void 0===s?[]:s}}function Gr(t,n){var e=t.p,r=t.pl,i=n.n||n.v,u=e[i];(!u||!u.n&&n.n)&&(e[i]=n),r.push(n)}function Zr(t){return function(n,e){if(!(262144&t.delimiterOf(n.s[n.i])))return!1;var r="";for(++n.i;n.i<n.s.length;){var i=n.s[n.i++];if(524288&t.delimiterOf(i))break;r+=i}return e(r),!0}}function Xr(t){return function(n){var e=n.s[n.i];return n.d=t.delimiterOf(e),e}}var ti=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d\d (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d\d\d\d \d\d:\d\d:\d\d GMT/;function ni(t,n){return t.s=t.s.substring(t.i),t.i=0,!!ti.test(t.s)&&(n(t.s.substring(t.i,t.i+=29)),!0)}var ei=function(){return!1};function ri(t){return function(n,e){var r="";for(++n.i;n.i<n.s.length;++n.i){var i=n.s[n.i];if("\\"===i){var u=n.s[++n.i];r+=u||i}else{if(65536&t.delimiterOf(i))return++n.i,void e(r);r+=i}}e(r)}}function ii(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.named,r=void 0===e||e,i=n.tagged,u=void 0===i||i,o=n.extra,a=void 0===o||o,c=n.next,s=void 0===c?Xr(t):c,f=ri(t),l=Zr(t),h=a?ii(t,{next:s,tagged:!1,named:!1,extra:!1}):ei;return function(t,n){for(var e,i,o,a="",c="raw";t.i<t.s.length;){var v=s(t);if(t.d){if(12&t.d)break;if(null==i){if(16&t.d){i=a?"":v,++t.i;continue}if(65536&t.d){!u&&a||f(t,(function(t){a?(c="tagged-string",e=a):c="quoted-string",a="",i=t}));break}if(!a&&l(t,(function(t){c="angle-bracketed-string",i=t})))break;i=a,a=""}else{if(65536&t.d){!u&&i||f(t,(function(t){i?(c="tagged-string",e=i):c="quoted-string",i=t}));break}if(!i&&l(t,(function(t){c="angle-bracketed-string",i=t})))break}}if(null==i){if(!a&&ni(t,(function(t){return i=t}))){c="date-time";break}r?a+=v:i=v}else{if(!i&&ni(t,(function(t){return i=t}))){c="date-time";break}i+=v}++t.i}if(null==i){if(!a)return!1;o=Jr({$:c,v:a})}else o=Jr({$:c,n:a||void 0,t:e,v:i});for(;h(t,(function(t){return o.x.push(t)})););return n(o),!0}}function ui(t){return function(n){var e=n.s[n.i];return"\\"!==e?(n.d=t.delimiterOf(e),e):(++n.i,n.i<n.s.length?(e=n.s[n.i],n.d=t.delimiterOf(e)?1:0):n.d=1,e)}}function oi(t){return function(n){var e=n.i;do{var r=n.s[n.i];if(!(2&t.delimiterOf(r)))break;n.i++}while(n.i<n.s.length);return n.i!==e}}function ai(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=oi(t),r=ii(t,Object.assign(Object.assign({},n),{tagged:!1}));return function(n,i){return!!(8&t.delimiterOf(n.s[n.i]))&&(++n.i,e(n),r(n,i))}}var ci={" ":7,"\t":7,",":5,";":9,'"':65569,"\\":33,"<":262145,">":524289,"=":17,"(":1,")":1,"/":1,":":1,"?":1,"@":1,"[":1,"]":1,"{":1,"}":1};function si(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.delimit,e=n?Object.assign(Object.assign({},ci),n):ci;return{delimiterOf:function(t){return e[t]||(t>="\0"&&t<=" "||"\x7f"===t?1:0)}}}var fi=si(),li=si({delimit:{":":17,"(":131105,")":37," ":3,"\t":3,"=":1,",":1}});function hi(t){var n=t?si(t):fi,e=function(t){var n=oi(t);return function(e){return!!(4&t.delimiterOf(e.s[e.i]))&&(e.i++,n(e),!0)}}(n),r=ai(n),i=ii(n),u=(null==t?void 0:t.comments)?function(t){var n=oi(t),e={next:ui(t)},r=ii(t,e),i=ai(t,e);return function(e,u){if(!(131072&t.delimiterOf(e.s[e.i])))return!1;var o;for(++e.i;n(e)||i(e,(function(t){o||(o=Jr({$:"raw",v:""})),Gr(o,t)}))||r(e,(function(t){return o=t})););return++e.i,u(o||Jr({$:"raw",v:""})),!0}}(li):ei;return function(t){for(var n=[],o={i:0,s:t};o.i<o.s.length&&(e(o)||r(o,(function(t){n.length||n.push(Jr({$:"raw",v:""})),Gr(n[n.length-1],t)}))||u(o,(function(t){return n.push(t)}))||i(o,(function(t){return n.push(t)}))););return n}}var vi=hi();function di(t){if(!t)return'""';for(var n,e=!1,r=0;r<t.length;++r){var i=t[r],u=fi.delimiterOf(i);u?(32&u&&(n||(n=t.substring(0,r)),n+="\\"+i),e=!0):n&&(n+=i)}return e?'"'.concat(n||t,'"'):t}var pi=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this,t)).upKey=r.createUpKey((function(t){return t.seed.keepThru((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(e.length)return E(gi(e));var i=function(){return Bt(yi)};return It(t.byDefault(i)||i())}))})),r}return i(e,[{key:"grow",value:function(t){var n;return t.context.get(this.upKey,"or"in t?{or:null!=t.or?Bt(t.or):t.or}:void 0).to((function(t){return n=t})),function(t,e){return n(t,e)}}}]),e}(Cn);function yi(t,n){return t(n)}function gi(t){return function(n,e){return function e(r,i){var u=t[r];return u?Ht(u((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return e(r+1,t)}),i)):n(i)}(0,e)}}var mi=new pi("http-fetch-agent"),ki={};var _i=new Rn("http-fetch",{byDefault:Bn((function(t){var n=t.get($e),e=t.get(mi);return function(t,n){return e(r,new Request(t,n))};function r(t){return zt((function(e){var r,i=new Vt;if("AbortController"in n){var u=new n.AbortController,o=u.signal;r=kt((function(t){t===ki&&u.abort()})),e.supply.whenOff((function(){return r.off(ki)})).needs(r),i.on({supply:r,receive:function(t,n){e.receive(t,n)}});var a=t.signal;a&&(new wn(a).on("abort").once((function(){return u.abort()})),a.aborted&&u.abort()),t=new Request(t,{signal:o})}else r=i.on(e);n.fetch(t).then((function(t){i.send(t),r.off()})).catch((function(t){return r.off(t)}))}))}}))});var wi=new vt("hierarchy-root",{byDefault:function(t){var n=t.get(je);return new wn(n).on("wesib:component").to((function(t){return t.context.get(xi).issue()})),un()}}),bi=new vt("hierarchy-updates",{byDefault:function(t){return new xi(t.get(ge))}}),xi=function(){function t(n){u(this,t);var e=new Vt,r=n.get(Ln).get(wi);this.on=e.on(),this.send=function(){return e.send(n)},this.issue=function(){var e=Oi(n);e?e[0].get(t).send():r.it=n}}return i(t,null,[{key:G,get:function(){return bi}}]),t}();function Oi(t){var n=t.get(Ln).get(je),e=t.element,r=!0;if(e!==n)for(;;){var i=e.parentNode;if(!i)return;var u=i[ye];if(u)return[u,r];if(i===n)return;r=!1,e=i}}var Ai=new vt("hierarchy-context",{byDefault:function(t){return new Ti(t.get(ge))}}),Si=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:yt,get:function(){return mt(this.context)}}],[{key:G,get:function(){return Ai}}]),e}(rt),Ti=function(t){r(e,t);var n=c(e);function e(t){var r;u(this,e),(r=n.call(this)).context=t;var i=r._parent=un();t.whenConnected(O).cuts(i);var o,a=r._registry=(o=r.up(),new it((function(t){return o.keepThru((function(n){return n?It(n.get(t)):F()}))})));return r.get=a.newValues().get,r}return i(e,[{key:"provide",value:function(t){var n=this._registry.provide(t);return mt(this).whenOff(n),n}},{key:"up",value:function(t){var n=this;return(this.up=Mt((function(t){var e=t.supply;e.needs(n);var r=un();r.by(n._parent),e.cuts(r);var i=kt().needs(e),u=kt().needs(e),a=function(){var t=Oi(n.context);if(t){var e=o(t,2),a=e[0],c=e[1];r.it=a.get(Si),i.off(),c&&u.off()}else r.it=void 0};n.context.get(Ln).get(wi).read({supply:i,receive:function(){return n.context.connected&&a()}}),r.read().tillOff(u).consume((function(t){return t&&t.context.get(xi).on.to(a)})),r.read(t),n.context.whenConnected({supply:kt().needs(e),receive:a})})).share().F)(t)}},{key:"inside",value:function(t){return this._parent.it=t&&t.get(Si),this}}]),e}(Si),Ci=t("c",new vt("component-node")),Ri=function(){function t(){u(this,t)}return i(t,[{key:Ot,value:function(){return this.onUpdate()}},{key:dt,value:function(){return this.read()}}]),t}(),Di={subtree:!0};function Ei(t,n,e,o,a){var s,f,l=a.deep,h=a.all,v=new Vt,d=l?Di:void 0,p=new Set,y=l?Fi:W;return"string"==typeof e?f=e:t.whenDefined(e).then((function(n){var e=n.elementDef.name;if(s=void 0,e&&(f=sn.name(e,t.get(ze)),v.size)){var r=g();if(r.size){var i=Array.from(B(V(r,(function(t){return o(t)})),A));i.length&&v.send(i,[])}}})),h||n.addEventListener("wesib:component",(function(t){var n=t.target;if(p.has(n)){var e=o(n);v.send([e],[])}})),new(function(e){r(f,e);var a=c(f);function f(){return u(this,f),a.apply(this,arguments)}return i(f,[{key:"onUpdate",value:function(e){var r=t.get(Ne)(m);return(this.onUpdate=zt((function(t){var e=!v.size,i=v.on(t);return e&&(g(),r.observe(n,d)),i.whenOff((function(){v.size||(r.disconnect(),s=void 0,p.clear())}))})).F)(e)}},{key:"read",value:function(t){var n=this;return(this.read=qt(this.onUpdate().thru((function(){return n})),T(this)).F)(t)}},{key:"track",value:function(t){var n=this,e=this.onUpdate();return(this.track=Mt((function(t){var r=new Vt;r.on(t),r.send(Array.from(n),[]),e.to(t)})).F)(t)}},{key:"first",value:function(t){return(this.first=Nt(this.read()).keepThru((function(t){return E(K(t))})).F)(t)}},{key:Symbol.iterator,value:function(){return U(s||(s=B(V(v.size?p:g(),(function(t){return o(t)})),A)))}}]),f}(Ri));function g(){s=void 0;var t=function(){var t=f;if(!t)return new Set;if(l)return new Set(W(n.querySelectorAll(t)));return new Set(B(W(n.children),(function(n){return n.matches(t)})))}();return v.size&&(p=t),t}function m(t){var n=[],e=[];t.forEach((function(t){q(B(V(y(t.removedNodes),_),A),(function(t){return e.push(t)})),q(B(V(y(t.addedNodes),k),A),(function(t){return n.push(t)}))})),(n.length||e.length)&&v.send(n,e)}function k(t){if(Yn(t))return f&&t.matches(f)&&!p.has(t)?(p.add(t),o(t)):void 0}function _(t){if(Yn(t)&&p.delete(t))return o(t,!0)}}function Fi(t){return I(W(t),(function(t){return[t].concat(f(Fi(t.childNodes)))}))}var $i=function(){function t(n,e){u(this,t),this._bs=n,this.element=e,this._emitters=new Map}return i(t,[{key:"observe",value:function(t,n){var e=this,r=this,i=this.observer,u=this._emitter(t),o=_t(n),a=u.on({supply:kt((function(){e._emitters.delete(t),i.disconnect(),e._emitters.size?c():e._observer=void 0})).needs(o.supply),receive:function(t,n,e){return o.receive(t,n,e)}});return i.disconnect(),c(),a;function c(){r._update(i.takeRecords()),i.observe(r.element,{attributes:!0,attributeOldValue:!0,attributeFilter:Array.from(r._emitters.keys())})}}},{key:"_update",value:function(t){var n=this;t.forEach((function(t){var e=t.attributeName,r=n._emitters.get(e);r&&r.send(n.element.getAttribute(e),t.oldValue)}))}},{key:"_emitter",value:function(t){var n=new Vt;return this._emitters.set(t,n),n}},{key:"observer",get:function(){var t=this;if(this._observer)return this._observer;var n=this._bs.get($e).MutationObserver;return this._observer=new n((function(n){return t._update(n)}))}}]),t}(),ji=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this))._observer=t,i._name=r,i._updates=new Vt,i}return i(e,[{key:"on",value:function(t){var n=this,e=Tt();return(this.on=zt((function(t){n._updates.size||(e=n._observer.observe(n._name,(function(t,e){return n._updates.send(t,e)}))),t.supply.needs(e),n._updates.on(t).whenOff((function(t){n._updates.size||e.off(t)}))})).F)(t)}},{key:yt,get:function(){return mt(this._updates)}},{key:"it",get:function(){return this._observer.element.getAttribute(this._name)},set:function(t){null!=t?this._observer.element.setAttribute(this._name,t):this._observer.element.removeAttribute(this._name)}}]),e}(en),zi=function(){function t(n,e){u(this,t),this._attrs=new Map,this._observer=new $i(n,e)}return i(t,[{key:"get",value:function(t){var n=this._attrs.get(t);if(n)return n;var e=new ji(this._observer,t);return this._attrs.set(t,e),e}}]),t}(),Ui=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this))._element=t,i._key=r,i._updates=new Vt,i}return i(e,[{key:"on",value:function(t){return(this.on=this._updates.on().F)(t)}},{key:"bind",value:function(t){var n,e=this;t.get(zr).track((n=this._key,[qr,n])).onUpdate().to({supply:mt(this),receive:function(t,n,r,i){return e._updates.send(r,i)}})}},{key:yt,get:function(){return mt(this._updates)}},{key:"it",get:function(){return this._element[this._key]},set:function(t){this._element[this._key]=t}}]),e}(en),Pi=function(){function t(n){u(this,t),this._element=n,this._props=new Map}return i(t,[{key:"bind",value:function(t){this._context=t,this._props.forEach((function(n){return n.bind(t)}))}},{key:"get",value:function(t){var n=this._props.get(t);if(n)return n;var e=new Ui(this._element,t);return this._context&&e.bind(this._context),this._props.set(t,e),e}}]),t}(),Mi=Symbol("element-node"),qi=function(){function t(n,e){var r=this;u(this,t),this._bs=n,this.element=e,this._attrs=new zi(n,e),this._props=new Pi(e),e[Mi]=this;var i=e[ye];i?this._bind(i):e.addEventListener("wesib:component",(function(t){return r._bind(t.context)}))}return i(t,[{key:"select",value:function(t,n){return function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r.all)return Ei(t,n,e,(function(n,e){return Ni(t,n,e)}),r);var i=t.get(qe);return Ei(t,n,e,(function(n,e){return i(n)&&Ni(t,n,e)}),r)}(this._bs,this.element,t,n)}},{key:"attribute",value:function(t){return this._attrs.get(t)}},{key:"property",value:function(t){return this._props.get(t)}},{key:"_bind",value:function(t){this._props.bind(t)}},{key:"context",get:function(){return this.element[ye]}},{key:"parent",get:function(){var t=this.element.parentNode;return t&&Ni(this._bs,t)}}]),t}();function Ni(t,n,e){var r=n[Mi];return r||e?r:new qi(t,n)}var Ki={needs:Pr,setup:function(t){t.perComponent({a:Ci,by:function(t){return Ni(t.get(Ln),t.element)}})}},Li=function(){function t(){u(this,t)}return i(t,null,[{key:Zn,get:function(){return Ki}}]),t}();function Bi(t){return new URL(t.hash.substring(1),t.origin)}var Ii=Symbol("page-param"),Vi=function(){function t(){u(this,t)}return i(t,[{key:"byDefault",value:function(t,n){}},{key:Ii,get:function(){return this}}]),t}();function Wi(t,n,e,r){t(r)}var Hi=new(function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this,t)).upKey=r.createUpKey((function(t){var n=t.context.get($e).document;return t.seed.keepThru((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(r.length)return E(o);var u=function(){return Bt(Wi)};return It(t.byDefault(u)||u());function o(t,e,i,u){return function u(o,a){var c=r[o];if(!c)return t(a);c((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=t.url,r=void 0===e?a.url:e,i=t.title,c=void 0===i?a.title:i,s=t.data,f=void 0===s?a.data:s;return u(o+1,{url:new URL(String(r),n.baseURI),title:c,data:f,get visited(){return a.visited},get current(){return a.current},get:function(t){return a.get(t)},put:function(t,n){a.put(t,n)}})}),e,i,a)}(0,u)}}))})),r}return i(e,[{key:"grow",value:function(t){var n;return t.context.get(this.upKey,"or"in t?{or:null!=t.or?Bt(t.or):t.or}:void 0).to((function(t){return n=t})),function(t,e,r,i){return n(t,e,r,i)}}}]),e}(Cn))("navigation-agent"),Qi=new vt("navigation"),Yi=function(){function t(){u(this,t)}return i(t,[{key:Ot,value:function(){return this.on()}},{key:dt,value:function(){return this.read()}},{key:"back",value:function(){this.go(-1)}},{key:"forward",value:function(){this.go(1)}},{key:"reload",value:function(){this.go()}}],[{key:G,get:function(){return Qi}}]),t}(),Ji=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return e}(rt),Gi=new vt("nav-history",{byDefault:Bn((function(t){return new Xi(t)}))});function Zi(t){return null==t||"object"!==d(t)?{data:t}:t["wesib:navigation:data"]}var Xi=function(){function t(n){u(this,t),this._context=n,this._entries=new Map,this._lastId=0;var e=n.get($e);this._document=e.document,this._location=e.location,this._history=e.history,this._uid=btoa(String(Math.random()))}return i(t,[{key:"init",value:function(){var t=this,n=Zi(this._history.state).data,e=this.newEntry({url:new URL(this._location.href),data:n,title:this._document.title});return this._entries.set(e.id,e),e.schedule((function(){e.enter("init"),t._history.replaceState(t._historyState(e),"")})),e}},{key:"newEntry",value:function(t){return new tu(this._context,++this._lastId,t)}},{key:"open",value:function(t,n){var e=t.page,r=e.title,i=void 0===r?"":r,u=e.url;this._history.pushState(this._historyState(t),i,u.href),this._enter("open",t,n)}},{key:"_enter",value:function(t,n,e){var r=e.it;this._entries.set(n.id,n);try{for(var i=r.next;i;i=i.next)this._forget(i)}finally{n.prev=r,r.next=n,n.schedule((function(){try{r.leave()}finally{n.enter(t)}})),e.it=n}}},{key:"replace",value:function(t,n){var e=this,r=n.it,i=t.page,u=i.title,o=void 0===u?"":u,a=i.url;this._history.replaceState(this._historyState(t),o,a.href),this._entries.set(t.id,t);var c=r.prev;c&&(t.prev=c,c.next=t),t.schedule((function(){try{r.leave()}finally{try{e._forget(r)}finally{t.enter("replace")}}})),n.it=t}},{key:"popState",value:function(t,n){var e=t.state;if(null==e)return null==this._history.state?this._changeHash(n):void 0;var r,i=n.it,u=Zi(e),o=u.uid,a=u.data,c=u.id,s=o===this._uid&&null!=c?this._entries.get(c):void 0;return s?r=s:(r=this.newEntry({url:new URL(this._location.href),data:a,title:this._document.title}),i.transfer(r,"return"),this._entries.set(r.id,r),this._history.replaceState(this._historyState(r),"")),r.schedule((function(){try{i.leave()}finally{r.enter("return")}})),n.it=r,r}},{key:"hashChange",value:function(t){if(null==this._history.state)return this._changeHash(t)}},{key:"update",value:function(t,n){var e=t.it,r=new tu(this._context,++this._lastId,Object.assign(Object.assign({},e.page),{url:n}),e);return this._entries.set(r.id,r),this._history.replaceState(this._historyState(r),"",n.href),this._entries.delete(e.id),t.it=r}},{key:"_changeHash",value:function(t){var n=t.it,e=this.newEntry({url:new URL(this._location.href),data:null,title:this._document.title});try{n.transfer(e,"enter")}finally{this._history.replaceState(this._historyState(e),""),this._enter("enter",e,t)}return e}},{key:"_forget",value:function(t){this._entries.delete(t.id),t.forget()}},{key:"_historyState",value:function(t){var n=t.id,r=t.page.data;return e({},"wesib:navigation:data",{uid:this._uid,id:n,data:r})}}],[{key:G,get:function(){return Gi}}]),t}(),tu=function(){function t(n,e,r,i){u(this,t),this._bsContext=n,this.id=e,this._status=0,this._update=O,this._params=i?i._params:new Map;var o=this;this.page={get url(){return r.url},get title(){return r.title},get data(){return r.data},get visited(){return!!o._status},get current(){return 2===o._status},get:function(t){return o.get(t)},put:function(t,n){o.put(t,n)}}}return i(t,[{key:"get",value:function(t){var n=t[Ii],e=this._params.get(n);if(e)return e.get();var r=n.byDefault(this.page,this._newContext());return r&&this._init(n,r)}},{key:"put",value:function(t,n){var e=t[Ii],r=this._params.get(e);return r?(r.put(n),r.get()):this._init(e,e.create(this.page,n,this._newContext()))}},{key:"_newContext",value:function(){var t=new it(this._bsContext);return new(function(n){r(i,n);var e=c(i);function i(){var n;return u(this,i),(n=e.apply(this,arguments)).get=t.newValues().get,n}return i}(Ji))}},{key:"_init",value:function(t,n){return this._params.set(t,n),this.page.current&&n.enter&&n.enter(this.page,"init"),n.get()}},{key:"transfer",value:function(t,n){q(this._params.entries(),(function(e){var r=o(e,2),i=r[0],u=r[1];if(u.transfer){var a=u.transfer(t.page,n);a&&t._params.set(i,a)}}))}},{key:"stay",value:function(t){q(this._params.values(),(function(n){return n.stay&&n.stay(t)}))}},{key:"enter",value:function(t){var n=this;this._status=2,q(this._params.values(),(function(e){return e.enter&&e.enter(n.page,t)}))}},{key:"leave",value:function(){this._status=1,q(this._params.values(),(function(t){return t.leave&&t.leave()}))}},{key:"forget",value:function(){q(this._params.values(),(function(t){return t.forget&&t.forget()})),this._params.clear()}},{key:"schedule",value:function(t){this._update=t}},{key:"apply",value:function(){var t=this._update;this._update=O,t()}}]),t}(),nu=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,t,Object.assign(Object.assign({},r),{cancelable:!1}))).when=r.when,i.to=r.to,i}return e}(s(Event)),eu=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,t,Object.assign(Object.assign({},r),{cancelable:!0}))).when=r.when,i.from=r.from,i.to=r.to,i}return e}(s(Event)),ru=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,t,Object.assign(Object.assign({},r),{cancelable:!0}))).from=r.from,i.to=r.to,i.reason=r.reason,i}return i(e,[{key:"when",get:function(){return"stay"}}]),e}(s(Event));function iu(t){var n=t.get($e),e=n.document,o=n.history,a=new wn(n),s=t.get(Xi),f=t.get(Hi),l=un(s.init());l.read((function(t){return t.apply()}));var h=Promise.resolve();return a.on("popstate").to((function(t){var n=s.popState(t,l);n&&a.dispatch(new nu("wesib:enterPage",{when:null!=t.state?"return":"enter",to:n.page}))})),a.on("hashchange").to((function(){var t=s.hashChange(l);t&&a.dispatch(new nu("wesib:enterPage",{when:"enter",to:t.page}))})),new(function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"onEnter",value:function(t){return(this.onEnter=a.on("wesib:enterPage").F)(t)}},{key:"onLeave",value:function(t){return(this.onLeave=a.on("wesib:leavePage").F)(t)}},{key:"onStay",value:function(t){return(this.onStay=a.on("wesib:stayOnPage").F)(t)}},{key:"on",value:function(t){return(this.on=Qt(this.onEnter(),this.onLeave(),this.onStay()).F)(t)}},{key:"read",value:function(t){return(this.read=l.read().keepThru((function(t){return t.page})).F)(t)}},{key:"go",value:function(t){o.go(t)}},{key:"open",value:function(t){return p("pre-open","open",t)}},{key:"replace",value:function(t){return p("pre-replace","replace",t)}},{key:"update",value:function(t){return s.update(l,v(t)).page}},{key:"with",value:function(t,n){return function t(n){return{with:function(e,r){return t(Qn(n,(function(t){return t.put(e,r)})))},open:function(t){return p("pre-open","open",t,n)},replace:function(t){return p("pre-replace","replace",t,n)},pretend:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,n){return n};"function"==typeof t?(r=t,e=void 0):e=t;var i=d(e),u=l.it,o=y("pretend",u,i,n);try{return g("pretend",u,i,o)?r(u.page,o.page):void 0}finally{o.stay(l.it.page)}}}}((function(e){return e.put(t,n)}))}},{key:"page",get:function(){return l.it.page}},{key:"length",get:function(){return o.length}}]),e}(Yi));function v(t){return"string"==typeof t?new URL(t,e.baseURI):t||l.it.page.url}function d(t){return null==t||"string"==typeof t||t instanceof URL?{url:v(t)}:t.url instanceof URL?t:Object.assign(Object.assign({},t),{url:v(t.url)})}function p(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O,i=d(e),u=h=h.then(o,o);return u;function o(){var t=void 0;try{var e=c();return e?(t=e,s[n](t,l),a.dispatch(new nu("wesib:enterPage",{when:n,to:t.page})),t.page):e}catch(n){throw f(t,n),n}}function c(){if(h!==u)return f();var n=l.it,e=y(t,n,i,r),o=new eu("wesib:leavePage",{when:t,from:n.page,to:e.page});return a.dispatch(o)&&h===u&&g(t,n,i,e)?e:f(e)}function f(t,n){return t&&t.stay(l.it.page),a.dispatch(new ru("wesib:stayOnPage",{from:l.it.page,to:i,reason:n})),null}}function y(t,n,e,r){var i=s.newEntry(e);try{n.transfer(i,t),r(i.page)}catch(t){throw i.stay(l.it.page),t}return i}function g(t,n,e,r){var i=!1;return f((function(t){var n=t.url,r=t.data,u=t.title;i=!0,e.url=n,e.data=r,e.title=u}),t,n.page,r.page),i}}var uu={setup:function(t){t.provide({a:Yi,by:iu})}},ou=function(){function t(){u(this,t)}return i(t,null,[{key:Zn,get:function(){return uu}}]),t}();function au(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.select,e=void 0===n?"a":n,r=t.pick,i=void 0===r?{all:!0,deep:!0}:r;return le({feature:{needs:[Li,ou]},define:function(n){n.whenComponent((function(n){var r=pu(n,t),u=su(t),o=n.get(Yi),a=n.get(Ci);n.whenConnected((function(){var t=new Map;o.read().tillOff(n).consume((function(o){return a.select(e,i).read().keepThru_((function(t){return It(Lt.apply(void 0,f(V(t,(function(t){return u({node:t,context:n,page:o})})))))})).consume((function(){for(var e=arguments.length,i=new Array(e),u=0;u<e;u++)i[u]=arguments[u];var a=cu(i),c=new Map,s=kt();return a.forEach((function(e){var i,u=t.get(e);u?(c.set(e,u),i=u):(i=r({node:e,context:n,page:o}),c.set(e,i)),i.supply().needs(s)})),t=c,s}))}))}))}))}})}function cu(t){var n=0,e=[];return t.forEach((function(t){var r=o(t,2),i=r[0],u=r[1];u>n?(n=u,e=[i]):u===n&&e.push(i)})),e}function su(t){return t.weigh?function(n){var e=t.weigh(n);if("number"==typeof e)return Bt(n.node,e);var r=Nt(e).keepThru_((function(t){return F(n.node,t)}));return Mt((function(t){r.to({supply:kt().needs(t.supply).whenOff((function(){(r=Bt(n.node,0)).to(t)})),receive:t.receive.bind(t)})}))}:fu}function fu(t){var n=t.node,e=t.page,r=n.element,i=r.getAttribute("href");return Bt(n,null==i?-1:function t(n,e){if(n.origin!==e.origin)return-1;var r=lu(n),i=lu(e);if(n.hash){if(r!==i)return-1;var u=hu(n,e);return u<0||hu(e,n)<0?-1:n.pathname.length+u+t(Bi(n),Bi(e))}var o=hu(n,e);if(o)return o<0||r!==i?-1:n.pathname.length+o;if(!i.startsWith(r))return-1;return n.pathname.length}(new URL(i,r.ownerDocument.baseURI),e.url))}function lu(t){var n=t.pathname;return n.endsWith("/")?n:n+"/"}function hu(t,n){var e=t.searchParams,r=n.searchParams,i=0;return e.forEach((function(t,n){if(!function(t){return t.startsWith("__")&&t.endsWith("__")}(n)){var u=new Set(r.getAll(n));i>=0&&(e.getAll(n).every((function(t){return u.has(t)}))?i+=1:i=-1)}})),i}var vu=Symbol("nav-link-render-schedule"),du=["active",Yr];function pu(t,n){var e=t.get(Pe),r=n.active,i=void 0===r?du:r,u=ln.name(i,t.get(ze)),o=n.activate?n.activate.bind(n):O;return function(t){var n,r=t.node.element,i=r[vu]||(r[vu]=e({node:r})),a=function(n){i((function(){return function(t,n){var e=n.node.element.classList;t?e.add(u):e.remove(u)}(n,t)})),o(n,t)};return a(!0),{supply:function(){var t=n=kt((function(){n===t&&a(!1)}));return t}}}}function yu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.handle?t.handle.bind(t):mu(t),r=new Vn(t.event||"click");return le({feature:{needs:ou},define:function(t){t.whenComponent((function(t){t.whenConnected((function(){var i,u=t.get(Yi),o=n(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;t.on(a).to((function(n){u.read().once((function(r){return e({event:n,page:r,context:t,navigation:u})}))}))}}catch(t){o.e(t)}finally{o.f()}}))}))}})}function gu(t){return t.target.getAttribute("href")}function mu(t){var n=t.href?t.href.bind(t):gu;return function(t){var e=t.event,r=t.page,i=t.navigation,u=n(e);if(null!=u){var o=e.target,a=r.url,c=new URL(u,o.ownerDocument.baseURI);c.origin===a.origin&&(e.preventDefault(),a.href!==c.href&&i.open(u))}}}function ku(t,n,e){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_u;"function"==typeof e?(i=e,r=null):r=e||null;var u=n.ownerDocument;if(Yn(t)){var o=u.createElement(t.tagName.toLowerCase());return t.getAttributeNames().forEach((function(n){return o.setAttribute(n,t.getAttribute(n))})),i(t,o),n.insertBefore(o,r),o}var a=u.importNode(t,!1);return n.insertBefore(a,r),a}function _u(t,n){q(W(t.childNodes),(function(t){return ku(t,n)}))}function wu(t){var n;return function(e){var r,i=function(t){return new URL("",t.url).href}(e);if(n){if(n.url===i)return n.on;n.sup.off()}var u=kt().whenOff((function(){n=void 0,r=void 0})),o=zt((function(n){if(!r){var i=t(e),o=un(),a=i.to((function(t){o.it=t})).whenOff((function(t){null!=t&&u.off(t)}));u.cuts(a).cuts(o),r={on:o.read().thru_((function(t){return t?F(t):z()})),num:0}}var c=r;return++c.num,c.on.tillOff(u).to(n).whenOff((function(t){--c.num||Promise.resolve().then((function(){c.num||c!==r||u.off(t)}))}))}));return n={url:i,on:o,sup:u},o}}var bu=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return e}(s(Error)),xu=new(function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"create",value:function(t,n){return{get:function(){return n},put:O}}}]),e}(Vi)),Ou=function(){function t(n,e){u(this,t),this._navigation=n,this._loader=e,this._map=new Map}return i(t,[{key:Symbol.iterator,value:function(){return U(I(this._map.values()))}},{key:"handle",value:function(){var t=this,n=kt(),e=Tt();return{get:function(){},put:function(n){t._add(n)},transfer:function(n,e){if("pretend"!==e){var r=t._transfer();return n.put(xu,r),r.handle()}},enter:function(r,i){if("init"!==i){e=kt().needs(n);var u=zt((function(n){var i=new Vt,u=i.on(n);return t._loader(r).tillOff(e).to((function(t){return i.send(t)})).whenOff((function(t){void 0===t||t instanceof bu||i.send({ok:!1,page:r,error:t})})),u})).share();q(t,(function(t){var n=t.fragment,e=t.receiver;return function(t,n){return n?t.thru_((function(t){return t.ok?Object.assign(Object.assign({},t),{fragment:(null!=n.tag?t.document.getElementsByTagName(n.tag)[0]:t.document.getElementById(n.id))||void 0}):t})):t}(u,n).to({supply:kt().needs(e.supply),receive:function(t,n){e.receive(t,n)}})}))}},leave:function(){e.off(new bu("page left"))},stay:function(){n.off(new bu("navigation cancelled"))},forget:function(){n.off(new bu("page forgotten"))}}}},{key:"_add",value:function(t){var n=this,e=Object.assign(Object.assign({},t),{receiver:_t(t.receiver)}),r=e.receiver.supply,i=this._map.get(r);i?i.push(e):(this._map.set(r,[e]),r.whenOff((function(){return n._map.delete(r)})))}},{key:"_transfer",value:function(){var e,r=new t(this._navigation,this._loader),i=n(this._map.entries());try{for(i.s();!(e=i.n()).done;){var u=o(e.value,2),a=u[0],c=u[1];r._map.set(a,Array.from(c))}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"fragments",get:function(){var t,e=[],r=n(this);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!i.fragment)return[];e.push(i.fragment)}}catch(t){r.e(t)}finally{r.f()}return e}}]),t}();var Au=new pi("page-load-agent"),Su=new Rn("page-load-url",{byDefault:S(O)}),Tu=new vt("page-loader",{byDefault:Bn((function(t){var n=t.get($e),e=t.get(_i),r=t.get(Su),i=t.get(Au),u=new n.DOMParser;return function(t){var n=new URL(t.url.href);r(n);var a=new Request(n.href,{mode:"same-origin",credentials:"same-origin",headers:new Headers({Accept:"text/html"})});return zt((function(t){return i(c,a).to(t)}));function c(r){return function(t,n){var e,r=null===(e=t.get(xu))||void 0===e?void 0:e.fragments;r&&r.length&&n.headers.set("Accept-Fragment",L(r,(function(t,n){return(t?t+", ":"")+(null!=n.tag?"tag="+di(n.tag):"id="+di(n.id))}),""))}(t,r),zt((function(i){var a=new xt;a.on(i),a.send({page:t}),Yt(e(r).thru_((function(t){return Promise.all([t,t.text()])}))).thru_((function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return $(n)}),(function(e){var r=o(e,2),i=r[0],a=r[1];if(!i.ok)return{ok:!1,page:t,response:i,error:i.status};try{return{ok:!0,page:t,response:i,document:Cu(u,n,i,a)}}catch(n){return{ok:!1,page:t,response:i,error:n}}})).to(i)}))}}}))});function Cu(t,n,e,r){var i=t.parseFromString(r,vi(e.headers.get("Content-Type")||"text/html")[0].v);if(i.head){var u=i.head.querySelector("base");if(u)u.href=new URL(u.getAttribute("href"),n).href;else{var o=i.createElement("base");o.href=n.href,i.head.appendChild(o)}}return i}var Ru=new(function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"create",value:function(t,n,e){var r=new Ou(e.get(Yi),wu(e.get(Tu))),i=r.handle();return t.put(xu,r),i.put(n),i}}]),e}(Vi)),Du=new vt("page-cache-buster",{byDefault:Bn((function(t){return new Eu(t)}))}),Eu=function(){function t(n){u(this,t);var e=Fu(n.get($e).document);if(e){var r=n.get(Yi);this.urlModifier=Bt((function(t){return t.searchParams.set("__wesib_app_rev__",e)})),this.agent=Bt((function(t,n){return t(new Request(n.url,n)).thru_((function(t){if(t.ok){var n=Fu(t.document);if(n&&n!==e){var i=new URL(t.page.url.href);i.searchParams.set("__wesib_app_rev__",n),r.update(i),r.reload()}}return t}))}))}else this.urlModifier=Bt(),this.agent=Bt()}return i(t,null,[{key:G,get:function(){return Du}}]),t}();function Fu(t){var n;return null===(n=t.querySelector("meta[name=wesib-app-rev]"))||void 0===n?void 0:n.getAttribute("content")}function $u(t){var n=t.get($e).document;return function(t){return t().thru_((function(t){if(t.ok){var e=new Set(V(ju(n,W(n.scripts)),(function(t){return o(t,1)[0]})));q(B(ju(t.document,W(t.document.querySelectorAll("script"))),(function(t){var n=o(t,1)[0];return!e.has(n)})),(function(t){var r=o(t,2),i=r[0];ku(r[1],n.head,(function(t,n){return n.src=i})),e.add(i)}))}return t}))}}function ju(t,n){return V(B(n,(function(t){return!!t.src})),(function(n){return[new URL(n.src,t.baseURI).href,n]}))}function zu(t){var n=t.get($e).document;return function(t){return t().thru_((function(t){if(!t.ok)return t;var e=t.document.querySelectorAll("link[rel=stylesheet]");if(!e.length)return t;var r=n.head,i=null,u=n.querySelectorAll("link[rel=stylesheet]"),o=new Map,a=u.item(0);return a&&(r=a.parentNode,i=a,q(W(u),(function(t){return o.set(new URL(t.href,n.baseURI).href,t)}))),q(W(e),(function(t){var e=new URL(t.href,n.baseURI).href,u=o.get(e);u?(K(o.keys())===e?(r=u.parentNode,i=u.nextSibling):r.insertBefore(u,i),o.delete(e)):ku(t,r,i,(function(t,n){return n.href=e}))})),q(o.values(),(function(t){return t.parentNode.removeChild(t)})),t}))}}function Uu(t){var n=t.get($e).document;return function(t){return t().thru_((function(t){if(t.ok){var e=t.document.getElementsByTagName("title").item(0);e&&e.textContent&&(n.title=e.textContent)}return t}))}}var Pu,Mu={needs:ou,setup:function(t){t.provide({a:Su,by:function(t){return t.urlModifier},with:[Eu]}),t.provide({a:Au,by:function(t){return t.agent},with:[Eu]}),t.provide({a:Au,by:$u}),t.provide({a:Au,by:zu}),t.provide({a:Au,by:Uu})}},qu=function(){function t(){u(this,t)}return i(t,null,[{key:Zn,get:function(){return Mu}}]),t}();function Nu(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onResponse?t.onResponse.bind(t):O,e=t.contentKey?t.contentKey.bind(t):Ku;return le({feature:{needs:qu},define:function(r){r.whenComponent((function(r){var i=r.get($e).document,u=r.get(Pe)(),o=r.get(Yi),a=e(o.page),c=function(){var n=t.fragment;if(n)return n;var e=r.element,i=e.id,u=e.tagName;return i?{id:i}:{tag:u}};r.whenConnected((function(){var t=i.createRange();t.selectNodeContents(r.contentRoot),o.read().once((function(o){o.put(Ru,{fragment:c(),receiver:{supply:kt().needs(r),receive:function(o,c){return function(o){var c=e(o.page);if(c===a)return;if(!o.ok)return void u((function(){return n({context:r,range:t,response:o})}));a=c,u((function(){t.deleteContents();var e=i.createDocumentFragment(),u=o.fragment;u&&(_u(u,e),t.insertNode(e)),n({context:r,range:t,response:o})}))}(c)}}})}))}))}))}})}function Ku(t){var n=t.url;return new URL("",n).href}var Lu=regeneratorRuntime.mark(Aa);function Bu(t){return g(t,{isIdentifier:!0})}function Iu(t){return Array.isArray(t)}function Vu(t){return!!t.length}var Wu=function(){function t(n){u(this,t),this.priority=n&&n.priority||0}return i(t,[{key:"important",value:function(){return this.prioritize(1)}},{key:"usual",value:function(){return this.prioritize(0)}}]),t}();function Hu(t,n){return t===n||("object"===d(t)?t.is(n):"object"===d(n)&&n.is(t))}var Qu=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return e}(Wu),Yu=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,r)).r=Zu(t.r,255),i.g=Zu(t.g,255),i.b=Zu(t.b,255),i.a=null!=t.a?Xu(t.a,1):1,i}return i(e,[{key:"by",value:function(t){return Gu.by(t)||this}},{key:"is",value:function(t){return"object"===d(t)&&t.type===this.type&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a&&t.priority===this.priority}},{key:"prioritize",value:function(t){return this.priority===t?this:new e(this,{priority:t})}},{key:"set",value:function(t){"function"==typeof t&&(t=t(this));var n=t,r=n.r,i=void 0===r?this.r:r,u=n.g,o=void 0===u?this.g:u,a=n.b,c=void 0===a?this.b:a,s=n.a;return new e({r:i,g:o,b:c,a:void 0===s?this.a:s},this)}},{key:"toString",value:function(){var t="".concat(this.r,", ").concat(this.g,", ").concat(this.b);return 1===this.a?"rgb(".concat(t,")"):"rgba(".concat(t,", ").concat(this.a,")")}},{key:"type",get:function(){return"rgb"}},{key:"rgb",get:function(){return this}},{key:"hsl",get:function(){var t=this.a,n=100*this.r/255,e=100*this.g/255,r=100*this.b/255,i=Math.max(n,e,r),u=Math.min(n,e,r),o=Math.round((i+u)/2);if(i===u)return new Ju({h:0,s:0,l:o,a:t},this);var a,c=i-u,s=Math.round(o>50?100*c/(200-i-u):100*c/(i+u));switch(i){case n:a=(e-r)/c+(e<r?6:0);break;case e:a=(r-n)/c+2;break;default:a=(n-e)/c+4}return a*=60,a=Math.round(a),new Ju({h:a,s:s,l:o,a:t},this)}}]),e}(Qu),Ju=function(t){r(e,t);var n=c(e);function e(t,r){var i,o;return u(this,e),(i=n.call(this,r)).h=(o=t.h,(o%=360)<0?360+o:o),i.s=Xu(t.s,100),i.l=Xu(t.l,100),i.a=null!=t.a?Xu(t.a,1):1,i}return i(e,[{key:"by",value:function(t){return Gu.by(t)||this}},{key:"is",value:function(t){return"object"===d(t)&&t.type===this.type&&t.h===this.h&&t.s===this.s&&t.l===this.l&&t.a===this.a&&t.priority===this.priority}},{key:"prioritize",value:function(t){return this.priority===t?this:new e(this,{priority:t})}},{key:"set",value:function(t){"function"==typeof t&&(t=t(this));var n=t,r=n.h,i=void 0===r?this.h:r,u=n.s,o=void 0===u?this.s:u,a=n.l,c=void 0===a?this.l:a,s=n.a;return new e({h:i,s:o,l:c,a:void 0===s?this.a:s},this)}},{key:"toString",value:function(){var t="".concat(this.h,", ").concat(this.s,"%, ").concat(this.l,"%");return 1===this.a?"hsl(".concat(t,")"):"hsla(".concat(t,", ").concat(this.a,")")}},{key:"type",get:function(){return"hsl"}},{key:"rgb",get:function(){var t=this.a,n=this.s/100,e=this.l/100;if(!n){var r=255*e;return new Yu({r:r,g:r,b:r,a:t},this)}var i=e<.5?e*(1+n):e+n-e*n,u=2*e-i,o=this.h/360;return new Yu({r:to(u,i,o+1/3),g:to(u,i,o),b:to(u,i,o-1/3),a:t},this)}},{key:"hsl",get:function(){return this}}]),e}(Qu),Gu={by:function(t){if("object"===d(t)&&("rgb"===t.type||"hsl"===t.type))return t}};function Zu(t,n){return Xu(Math.round(t),n)}function Xu(t,n){return Math.max(Math.min(t,n),0)}function to(t,n,e){var r=e;return r<0?r+=1:r>1&&(r-=1),255*(r<1/6?t+6*r*(n-t):r<.5?n:r<2/3?t+(n-t)*(2/3-r)*6:t)}function no(t,n,e){var r=2*e-1,i=t.rgb,u=n.rgb,o=i.a-u.a,a=((r*o==-1?r:(r+o)/(1+r*o))+1)/2,c=1-a;return new Yu({r:i.r*a+u.r*c,g:i.g*a+u.g*c,b:i.b*a+u.b*c,a:i.a*e+u.a*(1-e)},t)}var eo=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this,t)).dim=t.dim,r}return i(e,[{key:"by",value:function(t){return this.dim.by(t)||this}},{key:"toString",value:function(){return this.toFormula()}}]),e}(Wu),ro={map:function(t,n){var e={},r={from:n,get:function(r){if(r in e)return e[r];var i=function(t){switch(d(t)){case"function":return t;case"object":return t.by.bind(t)}var n=d(t);return function(e){return d(e)===n?e:t}}(t[r])(n[r],this,r);return e[r]=i,i}};return q(Y(t),(function(t){return r.get(t)})),e},by:function(t){return ro.map.bind(void 0,t)}};function io(t){if(null==t)return[void 0,0];switch(d(t)){case"object":return[t,t.priority];case"string":if(t.endsWith("!important"))return[t.substring(0,t.length-"!important".length).trim(),1]}return[t,0]}var uo=function(t){r(e,t);var n=c(e);function e(t,r,i){var o;return u(this,e),(o=n.call(this,i)).val=t,o.unit=r,o}return i(e,[{key:"toDim",value:function(t){var n=this.dim;if(t===n||t===n.pt||t===("%"===this.unit?t.pt:n.noPt))return this}},{key:"is",value:function(t){return t===this||"object"===d(t)&&t.type===this.type&&this.unit===t.unit&&this.val===t.val&&this.priority===t.priority}},{key:"prioritize",value:function(t){return this.priority===t?this:new e(this.val,this.unit,{dim:this.dim,priority:t})}},{key:"add",value:function(t,n){return"number"==typeof t&&(t=oo(t,n||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?oo(this.val+t.val,this.unit,this):so(this,"+",t)}},{key:"sub",value:function(t,n){return"number"==typeof t&&(t=oo(t,n||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?oo(this.val-t.val,this.unit,this):so(this,"-",t)}},{key:"mul",value:function(t){return 1===t?this:oo(this.val*t,this.unit,this)}},{key:"div",value:function(t){return 1===t?this:oo(this.val/t,this.unit,this)}},{key:"negate",value:function(){return oo(-this.val,this.unit,this)}},{key:"toFormula",value:function(){return this.val+this.unit}},{key:"type",get:function(){return"dimension"}}]),e}(eo);function oo(t,n,e){return t?new uo(t,n,e):e.dim.zero.prioritize(e.priority||0)}var ao=function(t){r(e,t);var n=c(e);function e(t,r,i,o){var a;return u(this,e),(a=n.call(this,o)).left=t.usual(),a.op=r,a.right=i,a}return i(e,[{key:"is",value:function(t){return this===t||"object"===d(t)&&t.type===this.type&&(this.op===t.op&&this.left.is(t.left)&&Hu(this.right,t.right)&&this.priority===t.priority)}},{key:"add",value:function(t,n){return"number"==typeof t&&(t=oo(t,n,this)),so(this,"+",t)}},{key:"sub",value:function(t,n){return"number"==typeof t&&(t=oo(t,n,this)),so(this,"-",t)}},{key:"mul",value:function(t){return lo(this,t)}},{key:"div",value:function(t){return ho(this,t)}},{key:"toString",value:function(){return"calc"+h(v(e.prototype),"toString",this).call(this)}},{key:"type",get:function(){return"calc"}}]),e}(eo),co=function(t){r(e,t);var n=c(e);function e(t,r,i,o){return u(this,e),n.call(this,t,r,i.usual(),o)}return i(e,[{key:"prioritize",value:function(t){return this.priority===t?this:new e(this.left,this.op,this.right,{dim:this.dim,priority:t})}},{key:"toDim",value:function(t){var n=this.left.toDim(t);if(n){var r=this.right.toDim(t);if(r)return n===this.left&&r===this.right?this:new e(n,this.op,r,{dim:t,priority:this.priority})}}},{key:"negate",value:function(){return"-"===this.op?new e(this.right,this.op,this.left,this):new e(this.left.negate(),"-",this.right,this)}},{key:"toFormula",value:function(){return"(".concat(this.left.toFormula()," ").concat(this.op," ").concat(this.right.toFormula(),")")}}]),e}(ao);function so(t,n,e){return e.type?new co(t,n,e,t):t}var fo=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"prioritize",value:function(t){return this.priority===t?this:new e(this.left,this.op,this.right,{dim:this.dim,priority:t})}},{key:"toDim",value:function(t){var n=this.left.toDim(t);if(n)return n===this.left?this:new e(n,this.op,this.right,{dim:t,priority:this.priority})}},{key:"mul",value:function(t){return("*"===this.op?lo(this.left,this.right*t):ho(this.left,this.right/t)).prioritize(this.priority)}},{key:"div",value:function(t){return("/"===this.op?ho(this.left,this.right*t):lo(this.left,this.right/t)).prioritize(this.priority)}},{key:"negate",value:function(){return new e(this.left,this.op,-this.right,this)}},{key:"toFormula",value:function(){return"(".concat(this.left.toFormula()," ").concat(this.op," ").concat(this.right,")")}}]),e}(ao);function lo(t,n){return n?1===n?t.prioritize(t.priority):new fo(t,"*",n,t):t.dim.zero.prioritize(t.priority)}function ho(t,n){return 1===n?t.prioritize(t.priority):new fo(t,"/",n,t)}var vo=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,r))._byPriority=t,i}return i(e,[{key:"toDim",value:function(t){return t.zero.prioritize(this.priority)}},{key:"is",value:function(t){return this===t||("object"===d(t)?t.type===this.type&&t.priority===this.priority:0===t||"0"===t?0===this.priority:"0 !important"===t&&1===this.priority)}},{key:"add",value:function(t,n){return"number"==typeof t&&(t=oo(t,n,this)),t.prioritize(this.priority)}},{key:"sub",value:function(t,n){return"number"==typeof t&&(t=oo(t,n,this)),t.negate().prioritize(this.priority)}},{key:"mul",value:function(){return this}},{key:"div",value:function(){return this}},{key:"negate",value:function(){return this}},{key:"prioritize",value:function(t){return this._byPriority.get(t)}},{key:"important",value:function(){return this._byPriority.important}},{key:"usual",value:function(){return this._byPriority.usual}},{key:"toFormula",value:function(){return"0"}},{key:"type",get:function(){return 0}}]),e}(eo),po=function(){function t(n){u(this,t),this.dim=n,this.usual=new vo(this,{dim:n}),this.important=new vo(this,{dim:n,priority:1})}return i(t,[{key:"get",value:function(t){switch(t){case 0:return this.usual;case 1:return this.important}return new vo(this,{dim:this.dim,priority:t})}}]),t}();function yo(t){var n=t.pt,e=t.noPt,r={get zero(){return i},get pt(){return n()},get noPt(){return e()},of:function(t,n){return t?new uo(t,n,{dim:this}):i},by:function(t){if(function(t){return"object"===d(t)&&("dimension"===t.type||"calc"===t.type||0===t.type)}(t))return t.toDim(this)}},i=new po(r).usual;return r}var go=yo({pt:function(){return mo},noPt:function(){return go}}),mo=yo({pt:function(){return mo},noPt:function(){return go}}),ko=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,r)).url=t,i}return i(e,[{key:"by",value:function(t){return e.by(t)||this}},{key:"prioritize",value:function(t){return t===this.priority?this:new e(this.url,{priority:t})}},{key:"is",value:function(t){return"object"===d(t)&&"url"===t.type&&t.url===this.url&&t.priority===this.priority}},{key:"toString",value:function(){return"url('".concat(g(this.url),"')")}},{key:"type",get:function(){return"url"}}],[{key:"by",value:function(t){switch(d(t)){case"string":var n=io(t),r=o(n,2);return new e(r[0],{priority:r[1]});case"object":if("url"===t.type)return t}}}]),e}(Wu),_o=Bt({});function wo(){return _o}function bo(t,n){if(!n)return _o;if("string"!=typeof n){if(pt(n))return Oo(n);if(At(n))return Oo(xo(n));if("function"==typeof n){var e=n(t);if("string"!=typeof e){if(pt(e))return Oo(e);if(At(e))return Oo(xo(e))}return Bt(Ao(e))}}return Bt(Ao(n))}function xo(t){return Nt(t,T({}))}function Oo(t){return Nt(t).keepThru(Ao,(function(t){return e&&function(t,e){var r,i=U(So(e)),u=n(So(t));try{for(u.s();!(r=u.n()).done;){var a=o(r.value,2),c=a[0],s=a[1],f=i.next().value;if(!f||c!==f[0]||!Hu(s,f[1]))return!1}}catch(t){u.e(t)}finally{u.f()}return!i.next().value}(t,e)?z():e=Object.assign({},t)}),x);var e}function Ao(t){return"string"==typeof t?{$$css:t}:t}function So(t){return B(J(t),A)}function To(t,n){return Oo(Kt({base:t,addendum:n}).keepThru((function(t){return function(t,n){return L(J(n),(function(t,n){var e=o(n,2);return function(t,n,e){Co(t[n])<=Co(e)&&(delete t[n],t[n]=e);return t}(t,e[0],e[1])}),Object.assign({},t))}(o(t.base,1)[0],o(t.addendum,1)[0])})))}function Co(t){switch(d(t)){case"string":return t.endsWith("!important")?1:0;case"object":return t.priority}return 0}function Ro(t){return">"===t||"+"===t||"~"===t}function Do(t){if(!Iu(t))return[Eo(t)];var e,r,i=[],u=n(t);try{for(u.s();!(r=u.n()).done;){var o=r.value,a=e;e&&(i.push(e),e=void 0);var c=void 0;if(Ro(o)){if(e=o,!a)continue;c={}}else c=Eo(o);i.push(c)}}catch(t){u.e(t)}finally{u.f()}return e&&i.push(e,{}),i}function Eo(t){return"string"==typeof t?t?{s:t}:{}:Fo(t)}function Fo(t){var n=t.ns||void 0,e=t.i||void 0,r=function(t){if(!t)return;if(vn(t))return[t];var n=t.filter((function(t){return!!t}));return Vu(n)?n.sort(dn):void 0}(t.c),i=function(t){if(!t)return;if(function(t){return"string"!=typeof t[0]}(t)){var n=t.map($o);return Vu(n)?n:void 0}return[$o(t)]}(t.u);return{ns:n,e:("*"!==t.e||!n&&!e&&!r&&i&&jo(i[0]))&&t.e||void 0,i:e,c:r,u:i,s:t.s||void 0,$:zo(t.$)}}function $o(t){if(!jo(t))return t;if(t.length<3)return t;var n=y(t),e=n[0],r=n[1],i=n.slice(2);return Iu(i[0])?[e,r].concat(f(i.map(Do))):[e,r,Do(i)]}function jo(t){return t.length>1&&(":"===t[0]||"::"===t[0])}function zo(t){if(t)return Vu(t=Iu(t)?Array.from(new Set(I(t,Po))).sort():Array.from(Po(t)))?t:void 0}var Uo=new Set;function Po(t){if(!t)return Uo;var e,r,i=t.indexOf("="),u=i<0?t:t.substring(0,i),o=new Set,a=n(u.split(":"));try{for(a.s();!(r=a.n()).done;){var c=r.value;e?e+=":"+c:e=c,o.add(e)}}catch(t){a.e(t)}finally{a.f()}return i>=0&&o.add(t),o}var Mo=[[]];function qo(t){if(!t.length)return Mo;for(var n,e=0;;){var r=t[e++];if(!Ro(r))return[n?[n,r]:[r],t.slice(e)];n=r}}var No=[];function Ko(t,n){return t&&n.every((function(n){return t.find((function(t){return function(t,n){if("string"==typeof t)return"string"==typeof n?t===n:!n[1].url&&n[0]===t;var e=o(t,2),r=e[0],i=e[1].url;return"string"==typeof n?!i&&r===n:r===n[0]&&i===n[1].url}(n,t)}))}))}function Lo(t){return Do(t)}var Bo={qualify:function(t){return"@".concat(Bu(t))}};function Io(t){return Wo(t,Bo)}var Vo={};function Wo(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vo,e=n.qualify,r=n.nsAlias,i=void 0===r?yn():r,u={qualify:e,nsAlias:i};return t.reduce((function(t,n){return Ro(n)?t+n:(t&&!Ro(t[t.length-1])&&(t+=" "),t+Ho(n,u))}),"")}function Ho(t,n){var e=n.qualify,r=n.nsAlias,i=t.ns,u=t.e,a=t.i,c=t.c,s=t.s,f=t.u,l=t.$,h=!1,v="";if(a&&(h=!0,v+="#".concat(Bu(fn.name(a,r)))),c&&(h=!0,v=c.reduce((function(t,n){return"".concat(t,".").concat(Bu(ln.name(n,r)))}),v)),f){h=!0;var d={nsAlias:r};v=f.reduce((function(t,n){return function(t,n,e){if(jo(n)){if(t+=n[0]+n[1],n.length>2){t+="("+Wo(n[2],e);for(var r=3;r<n.length;++r)t+=","+Wo(n[r],e);t+=")"}return t}var i=o(n,4),u=i[0],a=i[1],c=i[2],s=i[3];t+="["+Bu(u),a&&(t+=a+g(c,{quotes:"double",wrap:!0}));s&&(t+=" "+s);return t+"]"}(t,n,d)}),v)}if(s&&(h=!0,v+=s),e&&l&&(v=l.reduce((function(t,n){return t+e(n)}),v)),i){var p=function(t,n){return"string"==typeof t?t:t.url?n(t):void 0}(i,r);v=p?"".concat(p,"|").concat(u||"*").concat(v):y()}else v=y();return v;function y(){return h?"".concat(u?sn.name(u,r):"").concat(v):"".concat(u?sn.name(u,r):"*").concat(v)}}function Qo(t,n){return Wo(Lo(t),n)}function Yo(t){return"cssRules"in t}var Jo=function(){function t(n){u(this,t),this._rule=n}return i(t,[{key:"read",value:function(t){for(var n=this._rule.outer;n;)t=To(n.read().keepThru(Xo),t),n=n.outer;return t}},{key:"render",value:function(t,e){var r=t.selector,i=t.target;if(Yo(i)){var u=i,a=function(t){var e,r=new Map,i=[],u=n(t);try{for(u.s();!(e=u.n()).done;){var o=e.value;Ro(o)?i.push(o):i.push(na(o,r))}}catch(t){u.e(t)}finally{u.f()}if(!r.size)return;return[r,Lo(i)]}(r);if(a){var c,s=o(a,2),f=s[0],l=s[1],h=n(f);try{for(h.s();!(c=h.n()).done;){var v=c.value,d=u.insertRule("".concat(Go(e,v),"{}"),u.cssRules.length),p=u.cssRules[d];i=p,Yo(p)&&(u=p)}}catch(t){h.e(t)}finally{h.f()}t.render(e,{target:i,selector:l})}else t.render(e)}else t.render(e)}}]),t}();function Go(t,e){var r,i=o(e,2),u=i[0],a=o(i[1],2),c=a[0],s=a[1],f="",l=function(t){t&&(f&&(f+=" and "),f+=t)},h=n(c);try{for(h.s();!(r=h.n()).done;){var v=io(t[r.value]);l(o(v,1)[0])}}catch(t){h.e(t)}finally{h.f()}return l(s),f?"".concat(u," ").concat(f):u}var Zo={order:-65535,create:function(t){return new Jo(t)}};function Xo(t){return L(B(J(t),ta),(function(t,n){var e=o(n,2),r=e[0],i=e[1];return t[r]=i,t}),{})}function ta(t){return"@"===String(t[0])[0]}function na(t,e){var r=t.$;if(!r)return t;var i,u=[],o=n(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;"@"===a[0]?ea(e,a):u.push(a)}}catch(t){o.e(t)}finally{o.f()}return u.length===r.length?t:Vu(u)?Object.assign(Object.assign({},t),{$:u}):Object.assign(Object.assign({},t),{$:void 0})}function ea(t,n){var e,r,i=n.indexOf("=");i<0?e=n:(e=n.substring(0,i),r=n.substring(i+1));var u=e.indexOf(":"),a=u<0?e:e.substring(0,u),c=t.get(a);if(c){var s=o(c,2),f=s[0],l=s[1];f.add(e),r&&(c[1]=l?"".concat(l," and ").concat(r):r)}else t.set(a,[(new Set).add(e),r])}var ra={order:-65534,needs:Zo,render:function(t,e){var r,i=t.styleSheet,u=0,a=0,c=n(J(e));try{for(c.s();!(r=c.n()).done;){var s=o(r.value,2),f=s[0],l=s[1],h=String(f);if("@"===h[0]){var v=io(l),d=o(v,1)[0],p=ia(i,u,h,d);u+=p,a+=p;var y=ko.by(d);y&&(a+=ua(i,a,h,y),a+=oa(i,a,h,y))}}}catch(t){c.e(t)}finally{c.f()}t.render(e)}};function ia(t,n,e,r){if(!e.startsWith("@import:"))return 0;var i=new ko(e.substring("@import:".length)),u="@import ".concat(i);return r&&(u+=" "+r),t.insertRule(u+";",n),1}function ua(t,n,e,r){return"@namespace"!==e?0:(t.insertRule("@namespace ".concat(r,";"),n),1)}function oa(t,n,e,r){if(!e.startsWith("@namespace:"))return 0;var i=e.substring("@namespace:".length);return t.insertRule("@namespace ".concat(i," ").concat(r,";"),n),1}function aa(t,n){var e=t.addRule(),r=e.style;q(B(J(n),ca),(function(t){var n=o(t,2),e=n[0],i=io(n[1]),u=o(i,2),a=u[0],c=u[1];r.setProperty(m(e),"".concat(a),c>=1?"important":void 0)})),t.render(n,{target:e})}function ca(t){var n=o(t,2),e=n[0];if(null==n[1])return!1;var r=String(e)[0];return r>="a"&&r<="z"||r>="A"&&r<="Z"}function sa(t){var n=new Map;return e(t.renderer),n.delete(aa),[].concat(f(n.values()),[fa(aa)]).sort(la);function e(t){t&&(Iu(t)?t.forEach(r):r(t))}function r(t){if(!n.has(t)){var r=fa(t);n.set(t,r),e(r.needs)}}}function fa(t){if("function"==typeof t)return{create:function(){return{render:t}}};if(function(t){return"create"in t}(t))return{order:t.order,needs:t.needs,create:function(n){return function(t){return"function"==typeof t?{render:t}:t}(t.create(n))}};var n=t.render.bind(t);return{order:t.order,needs:t.needs,create:function(){return{render:n}}}}function la(t,n){var e=t.order||0,r=n.order||0;return e>r?1:e<r?-1:0}function ha(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.document,r=void 0===e?window.document:e,a=n.rootSelector,c=void 0===a?{e:"body"}:a,s=n.addStyleSheet,l=void 0===s?va:s,h=n.scheduler,v=void 0===h?Nn:h,d=n.nsAlias,p=void 0===d?yn():d,y=n.parent,g=void 0===y?r.head:y,m=r.defaultView||window,k={nsAlias:p},_=sa(n),w=S(t),b=T();return kt().needs(w).needs(b).cuts(w).cuts(b);function x(t,n,e){return new(function(){function o(){u(this,o)}return i(o,[{key:"nsAlias",value:function(t){return p(t)}},{key:"render",value:function(r,i){n(i?x(t,n,{styleSheet:e.styleSheet,target:i.target||e.target,selector:i.selector||e.selector}):this,r)}},{key:"addRule",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selector,n=e.target;if(!Yo(n))return n;var r=n.insertRule("".concat(A(t),"{}"),n.cssRules.length);return n.cssRules[r]}},{key:"document",get:function(){return r}},{key:"parent",get:function(){return g}},{key:"rule",get:function(){return t}},{key:"styleSheet",get:function(){return e.styleSheet}},{key:"target",get:function(){return e.target}},{key:"selector",get:function(){return e.selector}}]),o}())}function A(t){return Qo(t,k)}function S(t){return L(V(t,C),(function(t,n){return kt().cuts(n).cuts(t)}),kt())}function T(){var n=kt();return Ht(t).to({supply:n,receive:function(t,e){e.forEach((function(t){return C(t).needs(n)}))}})}function C(t){var n,e=D(t),r=o(e,2),i=r[0],u=r[1],a=R(t),c=v({window:m});return i.to((function(e){c((function(){n&&function(t){for(;t.cssRules.length;)t.deleteRule(t.cssRules.length-1)}(n.styleSheet);var r=x(t,u,{get styleSheet(){return n||(n=l(r)),n.styleSheet},get target(){return this.styleSheet},selector:a});r.render(e)}))})).whenOff((function(){c((function(){var t=n;if(t)return n=void 0,t.remove()}))}))}function R(t){var n=t.selector;return n.length?Ro(n[0])?[].concat(f(Lo(c)),f(n)):n:Lo(c)}function D(t){var n=_.map((function(n){return n.create(t)}));return[n.reduce((function(t,n){return n.read?Nt(n.read(t)):t}),t.read()),function t(e){return function(r,i){var u,o=e+1;u=o===_.length?O:t(o);var a=x(r.rule,u,r);n[e].render(a,i)}}(0)]}}function va(t){var n=t.document,e=t.parent,r=n.createElement("style");return r.setAttribute("type","text/css"),r.append(n.createTextNode("")),e.append(r),{styleSheet:r.sheet,remove:function(){r.parentNode.removeChild(r)}}}function da(t,n){var e=n.$$css;if(e){var r=t.addRule();r.style.cssText=e,t.render(n,{target:r})}else t.render(n)}var pa={order:-65535,needs:ra,render:function(t,n){var e=B(V(W(t.selector),(function(t){return!Ro(t)&&t.ns&&"string"!=typeof t.ns?t.ns:null})),A);function r(n,e){var r=t.nsAlias(e);return n["@namespace:".concat(r)]=new ko(e.url),n}t.render(N(e)?n:L(e,r,Object.assign({},n)))}};function ya(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ha(t,Object.assign(Object.assign({},n),{renderer:ga(n.renderer)}))}function ga(t){var n=[Zo,pa,ra,da];return t&&(Iu(t)?n.push.apply(n,f(t)):n.push(t)),n}var ma=function(){function t(){u(this,t)}return i(t,[{key:dt,value:function(){return this.read()}},{key:"add",value:function(t){return this.rules.add([],t)}},{key:"clear",value:function(){return this.set()}}]),t}(),ka=function(){function t(){u(this,t)}return i(t,[{key:dt,value:function(){return this.read()}},{key:Ot,value:function(){return this.onUpdate()}}]),t}(),_a=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return e}(ka),wa=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this))._list=t,r?(i._buildList=function(){return B(t,r)},i._filterArray=function(t){return t.filter(r)}):(i._buildList=function(){return t},i._filterArray=x),i}return i(e,[{key:"read",value:function(t){return(this.read=qt(this.onUpdate().thru(S(this)),T(this)).F)(t)}},{key:"onUpdate",value:function(t){var n=this;return(this.onUpdate=zt((function(t){var e=n._ruleSet||(n._ruleSet=new Set(n._buildList()));Ht(n._list).to({supply:t.supply.whenOff((function(){return n._ruleSet=void 0})),receive:function(r,i,u){i=n._filterArray(i),((u=n._filterArray(u)).length||i.length)&&(u.forEach((function(t){return e.delete(t)})),i.forEach((function(t){return e.add(t)})),t.receive(r,i,u))}})})).share().F)(t)}},{key:Symbol.iterator,value:function(){return this._ruleSet?this._ruleSet.values():P(this._buildList())}},{key:"grab",value:function(t){return ba(this,t)}}]),e}(ka);function ba(t,n){var e=function(t){return Fo(t)}(n);return new wa(t,(function(t){return function(t,n){if(!t.length)return!1;var e=t[t.length-1];return(!n.ns||e.ns===n.ns)&&((!n.e||e.e===n.e)&&((!n.i||e.i===n.i)&&(!(n.c&&!Ko(e.c,n.c))&&!(n.$&&!Ko(e.$,n.$)))))}(t.selector,e)}))}var xa=function(t){r(e,t);var n=c(e);function e(t,r){var o,c,s,f,l;return u(this,e),(o=n.call(this))._root=t,o.nested=r,o._updates=new Vt,o.self=(c=t,s=a(o),f=new Vt,l=[c],s.onUpdate((function(t,n){n[0]===c&&(l.length=0,f.send([],[c]))})).cuts(f),new wa(new(function(){function t(){u(this,t)}return i(t,[{key:Ot,value:function(){return f.on()}},{key:Symbol.iterator,value:function(){return P(l)}}]),t}()))),o}return i(e,[{key:"read",value:function(t){return(this.read=qt(this._updates.on().thru(S(this)),T(this)).F)(t)}},{key:"onUpdate",value:function(t){return(this.onUpdate=this._updates.on().F)(t)}},{key:Symbol.iterator,value:function(){return Aa(this._root)}},{key:"grab",value:function(t){return ba(this,t)}},{key:"add",value:function(t,n){return function t(n,e,r,i){var u=qo(e),a=o(u,2),c=a[0],s=a[1];if(!s)return n._spec.it=function(t,n){var e=t._spec.it;if(!n)return e;if(t.empty)return function(t){return bo(t,n)};return function(t){return To(e(t),bo(t,n))}}(n,r),n;var l=Io(c),h=n.rules.nested._rule(l);if(h)return t(h,s,r,i);var v=new Ta(n.root,[].concat(f(n.selector),f(c)),c),d=t(v,s,r,!1);return n.rules.nested._add(l,v,i),d}(this._root,Lo(t),n,!0)}},{key:"get",value:function(t){return this._get(Lo(t))}},{key:"_get",value:function(t){var n=qo(t),e=o(n,2),r=e[0],i=e[1];if(!i)return this._root;var u=this.nested._rule(Io(r));return u?u.rules.get(i):void 0}},{key:"watch",value:function(t){var n=this,e=Lo(t);return Mt((function(t){var r=un({}),i=n.read().consume((function(){var t=n._get(e);return t&&t.read((function(t){return r.it=t})).whenOff((function(){return r.it={}}))}));return r.read(t).cuts(i)})).share()}},{key:"_add",value:function(t,n){var e=this;t.rules.onUpdate((function(t,n){return e._updates.send(t,n)})),n&&this._updates.send(Oa(t),[])}},{key:"_remove",value:function(t){var n=Oa(this._root);this._updates.send([],n),n.forEach((function(n){n.rules._updates.done(t),n._spec.done(t)}))}}]),e}(_a);function Oa(t){return Array.from(Aa(t))}function Aa(t){var e,r,i;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,t;case 2:e=n(t.rules.nested),u.prev=3,e.s();case 5:if((r=e.n()).done){u.next=10;break}return i=r.value,u.delegateYield(Oa(i),"t0",8);case 8:u.next=5;break;case 10:u.next=15;break;case 12:u.prev=12,u.t1=u.catch(3),e.e(u.t1);case 15:return u.prev=15,e.f(),u.finish(15);case 18:case"end":return u.stop()}}),Lu,null,[[3,12,15,18]])}var Sa=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._updates=new Vt,r._byKey=new Map,r._all=new xa(t,a(r)),r}return i(e,[{key:"read",value:function(t){return(this.read=qt(this._updates.on().thru(S(this)),T(this)).F)(t)}},{key:"onUpdate",value:function(t){return(this.onUpdate=this._updates.on().F)(t)}},{key:Symbol.iterator,value:function(){return this._byKey.values()}},{key:"grab",value:function(t){return ba(this,t)}},{key:"_rule",value:function(t){return this._byKey.get(t)}},{key:"_add",value:function(t,n,e){var r=this;this._byKey.set(t,n),n.rules.onUpdate((function(e,i){i[0]===n&&(r._byKey.delete(t),r._updates.send([],[n]))})),e&&this._updates.send([n],[]),this._all._add(n,e)}}]),e}(ka),Ta=function(t){r(e,t);var n=c(e);function e(t,r,i){var o,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wo;return u(this,e),(o=n.call(this))._root=t||a(o),o._selector=r,o._key=i,o._spec=un(c),o._nested=new Sa(a(o)),o}return i(e,[{key:"read",value:function(t){var n=this;return(this.read=this._spec.read().keepThru((function(t){return It(t(n))})).F)(t)}},{key:"set",value:function(t){return this._spec.it=t?function(n){return bo(n,t)}:wo,this}},{key:"remove",value:function(t){return this.rules._remove(t),this}},{key:"root",get:function(){return this._root}},{key:"outer",get:function(){if(void 0!==this._outer)return this._outer;var t=function(t){var n=t.length-1;if(n<=0)return n?void 0:No;do{switch(t[--n]){case">":return t.slice(0,n);case"+":case"~":--n;continue;default:return t.slice(0,n+1)}}while(n>0)}(this.selector);return this._outer=t&&this.root.rules.get(t)||null}},{key:"selector",get:function(){return this._selector}},{key:"key",get:function(){return this._key}},{key:"empty",get:function(){return this._spec.it===wo}},{key:"rules",get:function(){return this._nested._all}}]),e}(ma);var Ca=[];var Ra=function(t){r(e,t);var n=c(e);function e(t,r,i){var o;return u(this,e),(o=n.call(this))._root=t,o._selector=r,o._map=i,o}return i(e,[{key:"read",value:function(t){return(this.read=Kt({ms:this._map(this._root),ps:this._root.rules.watch(this._selector)}).keepThru((function(t){var n=o(t.ms,1)[0],e=o(t.ps,1)[0];return E(ro.map(n,e))})).F)(t)}},{key:"add",value:function(t){return this._root.rules.add(this._selector,t),this}},{key:"set",value:function(t){return this._root.rules.add(this._selector).set(t),this}}]),e}(function(){function t(){u(this,t)}return i(t,[{key:dt,value:function(){return this.read()}},{key:"clear",value:function(){return this.set()}}]),t}()),Da=function(t,n){var e;return e="function"==typeof n?function(t){return Ea(n(t))}:S(Ea(n)),function(n){return new Ra(n,t,e)}};function Ea(t){return pt(t)?t:Bt(t)}var Fa=function(){function t(n){u(this,t),this.refs=n}return i(t,[{key:"read",value:function(t){var n=Kt(this.refs);return(this.read=n.keepThru($a).F)(t)}},{key:dt,value:function(){return this.read()}}],[{key:"by",value:function(n,e){for(var r={},i=0,u=Object.keys(n);i<u.length;i++){var o=u[i];r[o]=n[o](e)}return new t(r)}}]),t}();function $a(t){for(var n={},e=0,r=Object.keys(t);e<r.length;e++){var i=r[e];n[i]=t[i][0]}return n}var ja=new wa((e(Pu={},Ot,(function(){return Wt})),e(Pu,Symbol.iterator,(function(){return[][Symbol.iterator]()})),Pu));function za(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?qa(n.map(Ua)):ja}function Ua(t){return"function"==typeof t?function(t){var n,r;return e(n={},Symbol.iterator,(function(){return i()[Symbol.iterator]()})),e(n,Ot,(function(){return i()[Ot]()})),n;function i(){return r||(r=Na(t()))}}(t):Na(t)}function Pa(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?qa(n.map(Ma)):ja}function Ma(t){return"function"==typeof t?function(t){var n,r=new Set,i=zt((function(n){var e=Na(t());Ka(e,r,n),e[Ot]().to({supply:n.supply.whenOff((function(){return r.clear()})),receive:function(t,e,i){i.forEach((function(t){return r.delete(t)})),e.forEach((function(t){return r.add(t)})),n.receive(t,e,i)}})})).share();return e(n={},Ot,(function(){return i})),e(n,Symbol.iterator,(function(){return r.values()})),n}(t):Na(t)}function qa(t){var r;if(1===t.length){var i=t[0];return i instanceof ka?i:new wa(i)}return new wa((e(r={},Symbol.iterator,regeneratorRuntime.mark((function e(){var r,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n(t),e.prev=1,r.s();case 3:if((i=r.n()).done){e.next=8;break}return u=i.value,e.delegateYield(u,"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),r.e(e.t1);case 13:return e.prev=13,r.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])}))),e(r,Ot,(function(){return zt((function(n){t.forEach((function(t){return Ht(t).to({supply:kt().needs(n.supply),receive:function(t,e,r){n.receive(t,e,r)}})}))})).share()})),r))}function Na(t){return t instanceof ma?t.rules.self:At(t)?t:function(t){var n,r=new Set,i=zt((function(n){var e=Tt(),i=n.supply;i.cuts(e).whenOff((function(){return r.clear()})),t.then((function(t){if(!i.isOff){var u=t instanceof ma?t.rules:t;Ka(u,r,n),e=Ht(u).to({receive:function(t,e,i){i.forEach((function(t){return r.delete(t)})),e.forEach((function(t){return r.add(t)})),n.receive(t,e,i)}}).needs(i)}}))})).share();return e(n={},Ot,(function(){return i})),e(n,Symbol.iterator,(function(){return r.values()})),n}(t)}function Ka(t,n,e){var r=[];if(q(t,(function(t){r.push(t),n.add(t)})),r.length){var i=new xt;i.on(e),i.send(r,[])}}var La=new vt("component-style-producer"),Ba=new st("component-styp-renderer"),Ia=new hn("https://wesib.github.io/ns/element-id-class","elic","element-id-class"),Va=new vt("unique-element-class",{byDefault:function(t){var n=t.get(ze),e=t.get(ge),r=e.get(Qe),i=r.name?sn.name(r.name,n):"component",u="".concat(i,"#").concat(++Wa),o=Ia.name(n(Ia),u,ln);return e.element.classList.add(o),o}}),Wa=0;var Ha=new vt("component-style-producer:impl"),Qa=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ha;u(this,t),this._context=n,this._produce=e}return i(t,[{key:"produce",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=this._context,r=e.get(Lr,{or:null});return this._produce(t,Object.assign(Object.assign({},n),{document:n.document||e.get($e).document,parent:n.parent||e.contentRoot,rootSelector:[],scheduler:n.scheduler||e.get(Pe),nsAlias:n.nsAlias||e.get(ze),renderer:i()}));function i(){var t,i=n.renderer,u=(t=new Vn(i)).add.apply(t,f(e.get(Ba))),o=n.hostSelector?Lo(n.hostSelector)[0]:void 0;return u.add(r?Ya(o):Ja(o||{c:[e.get(Va)]})),u.value}}}],[{key:G,get:function(){return Ha}}]),t}();function Ya(t){return{order:-100,render:function(n,e){var r=n.selector;if(r.length){if(t){var i=Ga(r),u=o(i,2),a=u[0],c=u[1];c&&(r=c.length?[{u:[[":","host",Za(c,t)]]}].concat(f(a)):[{u:[[":","host",[t]]]}].concat(f(a)))}}else r=[t||{u:[[":","host"]]}];n.render(e,{selector:r})}}}function Ja(t){return{order:-100,render:function(n,e){var r=n.selector;if(r.length){var i=Ga(r),u=o(i,2),a=u[0],c=u[1];r=c&&c.length?[].concat(f(Za(c,t)),f(a)):[t].concat(f(a))}else r=[t];n.render(e,{selector:r})}}}function Ga(t){if("string"!=typeof t[0]){var n=y(t),e=n[0],r=e.ns,i=e.e,u=e.i,a=e.c,c=e.u,s=e.s,f=e.$,l=n.slice(1);if(!r&&!i&&!u&&!a&&!s&&c){var h,v=o(c,1),d=y(v[0]),p=d[0],g=d[1],m=d.slice(2);if(":"===p&&"host"===g)return m.length?(h=Array.from(m[0]))[0].$=f:h=f?[{$:f}]:[],[l,h]}}return[t]}function Za(t,n){var e=n.ns,r=n.e,i=n.i,u=n.c,o=n.u,a=n.s,c=y(t),s=c[0],l=c.slice(1);return[{ns:s.e||s.ns?s.ns:e,e:s.e||s.ns?s.e:r,i:s.i||i,c:s.c?u?[].concat(f(s.c),f(u)):s.c:u,u:s.u?o?[].concat(f(s.u),f(o)):s.u:o,s:(s.s||"")+(a||"")||void 0,$:s.$}].concat(f(l))}var Xa={setup:function(t){t.perComponent({as:Qa}),t.perComponent({a:La,by:function(t){return function(n,e){return t.produce(n,e)}},with:[Qa]})}},tc=function(){function t(){u(this,t)}return i(t,null,[{key:Zn,get:function(){return Xa}}]),t}(),nc=function(t,n,e){var r,i=Pa(n),u=t.get(La),o=Tt(),a=kt((function(){r=O})).needs(t).cuts(o);return r=function(){o=u(i,e).needs(a)},t.whenConnected(r),a};function ec(t){return be((function(n){var e=n.get;return{componentDef:{feature:{needs:tc},define:function(n){n.whenComponent((function(n){n.whenReady((function(r){var i=r.component,u=e(i),o="function"==typeof u?u.bind(i):u;nc(n,o,t)}))}))}}}}))}var rc={has:tc,setup:function(t){t.perComponent({a:Qa,by:function(t){return new Qa(t,ya)}}),t.perComponent({a:La,by:function(t){return function(n,e){return t.produce(n,e)}},with:[Qa]})}},ic=function(){function t(){u(this,t)}return i(t,null,[{key:Zn,get:function(){return rc}}]),t}(),uc=new vt("theme"),oc=t("T",function(){function t(){u(this,t)}return i(t,[{key:"ref",value:function(t){return t(this.root)}}],[{key:G,get:function(){return uc}}]),t}()),ac=new vt("theme-factory"),cc=function(){function t(){u(this,t)}return i(t,null,[{key:G,get:function(){return ac}}]),t}(),sc=new(function(t){r(a,t);var e=c(a);function a(){return u(this,a),e.call(this,"theme-style")}return i(a,[{key:"grow",value:function(t){var e,r=new Map,i=n(t.seed);try{for(i.s();!(e=i.n()).done;){var u=e.value,a=void 0,c=void 0,s=void 0;"function"==typeof u?(a=c=u,s=!0):(a=u.style,c=u.provide.bind(u),s=!1);var f=r.get(a);if(f){var l=o(f,2),h=l[0],v=l[1];r.set(a,[s?fc(c,h):fc(h,c),s||v])}else r.set(a,[c,s])}}catch(t){i.e(t)}finally{i.f()}return r.size?d:t.byDefault((function(){return d}));function d(t){var n=r.get(t);if(!n)return t;var e=o(n,2),i=e[0];return e[1]?i:fc(t,i)}}}]),a}(at));function fc(t,n){return function(e){return za(t(e),n(e))}}var lc,hc,vc,dc,pc,yc,gc,mc,kc=function(t){r(e,t);var n=c(e);function e(t){var r,i;return u(this,e),(r=n.call(this))._styles=t,r.root=new Ta(void 0,Ca,[],i?function(t){return bo(t,i)}:void 0),r._rules=new Map,r}return i(e,[{key:"style",value:function(){for(var t=this,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return Pa.apply(void 0,f(e.reduce(i,[])));function i(n,e){var r=t._rules.get(e);if(r)n.push(r);else{var i=t._styles(e)(t);t._rules.set(e,i),n.push(i)}return n}}}]),e}(oc),_c=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._styles=t,r}return i(e,[{key:"newTheme",value:function(){return new kc(this._styles)}}]),e}(cc),wc={needs:tc,setup:function(t){t.provide({a:cc,as:_c,with:[sc]}),t.provide({a:oc,by:function(t){return t.newTheme()},with:[cc]})}},bc=function(){function t(){u(this,t)}return i(t,null,[{key:Zn,get:function(){return wc}}]),t}(),xc=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._added=new Set(t),r._removed=new Set,r._added.forEach((function(t){return r.add(t)})),r}return i(e,[{key:"add",value:function(t){return this.has(t)||(this._added.add(t),this._removed.delete(t),h(v(e.prototype),"add",this).call(this,t)),this}},{key:"delete",value:function(t){return!!h(v(e.prototype),"delete",this).call(this,t)&&(this._added.delete(t),this._removed.add(t),!0)}},{key:"clear",value:function(){var t=this;this._added.clear(),this.forEach((function(n){return t._removed.add(n)})),h(v(e.prototype),"clear",this).call(this)}},{key:"delta",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Oc(this)(t,n),this}},{key:"redelta",value:function(t){return("function"==typeof t?t:Oc(t))(Array.from(this._added),Array.from(this._removed)),this}},{key:"undelta",value:function(){return this._added.clear(),this._removed.clear(),this}}]),e}(s(Set));function Oc(t){return function(e,r){var i,u=n(r);try{for(u.s();!(i=u.n()).done;){var o=i.value;t.delete(o)}}catch(t){u.e(t)}finally{u.f()}var a,c=n(e);try{for(c.s();!(a=c.n()).done;){var s=a.value;t.add(s)}}catch(t){c.e(t)}finally{c.f()}}}var Ac=Symbol("in-aspect"),Sc={instance:null,convertTo:O};function Tc(t,n,e,r,i){return void 0===r&&(r=e(t,i)),{instance:r,convertTo:function(r){return Tc(r,n,e,void 0,t)},attachTo:function(r){return Tc(r,n,e,t.aspect(n)||e(r))}}}function Cc(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Tc(t,n,S(null),e)}function Rc(t){return{instance:t,convertTo:function(){return this}}}var Dc=new hn("https://surol.github.io/input-aspects/ns","inasp","input-aspects"),Ec={applyTo:function(){return Rc(yn())}},Fc=(lc={},(hc={})[Ac]=hc[Ac]||{},hc[Ac].get=function(){return Ec},e(lc,"to",(function(t){return{applyAspect:function(n){return n===Ec?Rc(t):void 0}}})),k(lc,hc),lc),$c={applyTo:function(){return Rc(Nn)}},jc=(vc={},(dc={})[Ac]=dc[Ac]||{},dc[Ac].get=function(){return $c},e(vc,"to",(function(t){return{applyAspect:function(n){return n===$c?Rc(t):void 0}}})),k(vc,dc),vc);function zc(t){if(!t)return Mc;for(var n=Nc(t),e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(!r.length)return n;var u=V(r,Nc);return function(t,e){var r=n(t,e),i=L(I([[r],B(V(u,(function(n){return n(t,e)})),A)]),(function(t,n){return n.applyAspect?function(e){return t(e)||n.applyAspect(e)}:t}),O);return qc(r)?{applyAspect:i}:{set:r.set.bind(r),get:r.get.bind(r),applyAspect:i}}}function Uc(t){return t?(n=t,Array.isArray(n)?zc.apply(void 0,f(t)):zc(t)):zc();var n}var Pc={applyAspect:function(){}};function Mc(){return Pc}function qc(t){return!t.set}function Nc(t){return"function"==typeof t?t:S(t)}var Kc=function(t){r(e,t);var n=c(e);function e(){var t;return u(this,e),(t=n.apply(this,arguments))._aspects=new Map,t}return i(e,[{key:"aspect",value:function(t){return this._aspect(t[Ac]).instance}},{key:"setup",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;return Lc(t)?n(this.aspect(t),this):t(this),this}},{key:"convert",value:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return new Bc(this,zc.apply(void 0,[t].concat(e)))}},{key:"_aspect",value:function(t){var n=this._aspects.get(t);if(n)return n;var e=this._applyAspect(t)||t.applyTo(this);return this._aspects.set(t,e),e}},{key:"_applyAspect",value:function(t){}}]),e}(en);function Lc(t){return Ac in t}var Bc=function(t){r(e,t);var n=c(e);function e(t,r){var i;u(this,e),(i=n.call(this))._on=new Vt,i._supply=kt().needs(t);var c,s,f,l,h=0,v=r(t,a(i));return qc(v)?(s=x,f=x,l=function(n){var e=t._aspect(n);return e.attachTo?e.attachTo(a(i)):e.convertTo(a(i))}):(s=v.set,f=v.get,l=function(n){return t._aspect(n).convertTo(a(i))}),i._applyAspect=function(t){var n;return(null===(n=v.applyAspect)||void 0===n?void 0:n.call(v,t))||l(t)},i._it=un([s(t.it),0]),mt(i._it).needs(i._supply),i._it.on((function(t,n){var e=o(t,1)[0],r=o(n,1)[0];e!==r&&i._on.send(e,r)})).cuts(i._on),t.on((function(t){t!==c&&(i._it.it=[s(t),++h])})).cuts(a(i)),i._it.on((function(n){var e=o(n,2),r=e[0],i=e[1];if(i!==h){h=i,c=f(r);try{t.it=c}finally{c=void 0}}})),i}return i(e,[{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:yt,get:function(){return this._supply}},{key:"it",get:function(){return this._it.it[0]},set:function(t){var n=o(this._it.it,2),e=n[0],r=n[1];t!==e&&(this._it.it=[t,r+1])}}]),e}(Kc),Ic=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._control=t,r}return i(e,[{key:"on",value:function(t){return(this.on=this._control.on().F)(t)}},{key:yt,get:function(){return this._supply||(this._supply=kt().needs(this._control))}},{key:"it",get:function(){return this._control.it},set:function(t){this._control.it=t}}]),e}(Kc);var Vc=function(t){r(e,t);var n=c(e);function e(t){var r,i,o=t.aspects;return u(this,e),(r=n.call(this))._aspectConversion=Uc(o)((i=a(r),new Ic(i)),a(r)),r}return i(e,[{key:"_applyAspect",value:function(t){return this._aspectConversion.applyAspect(t)||h(v(e.prototype),"_applyAspect",this).call(this,t)}}]),e}(Kc),Wc={applyTo:function(t){return Cc(t,Hc)}},Hc=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"_applyAspect",value:function(t){return t===Wc?Cc(this,e,this):h(v(e.prototype),"_applyAspect",this).call(this,t)}}],[{key:Ac,get:function(){return Wc}}]),e}(Vc),Qc=function(){function t(){u(this,t)}return i(t,[{key:Ot,value:function(){return this.on()}},{key:dt,value:function(){return this.read()}}]),t}(),Yc={applyTo:function(t){return Rc(new Gc(t))}},Jc=function(){function t(){u(this,t)}return i(t,[{key:Ot,value:function(){return this.on()}},{key:dt,value:function(){return this.read()}}],[{key:Ac,get:function(){return Yc}}]),t}(),Gc=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._control=t,r._map=new Map,r._on=new Vt,mt(r._on).needs(r._control),r}return i(e,[{key:"add",value:function(t){var n=this,e=this._map.get(t);if(e)return e;var r=kt((function(){n._map.delete(t),n._on.send([],[t])}));return this._map.set(t,r),this._on.send([t],[]),r.needs(this._control).needs(t.parent)}},{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:"read",value:function(t){var n=this,e=function(){return n._map.keys()};return(this.read=qt(this.on().thru(e),(function(){return[e()]})).F)(t)}}]),e}(Jc),Zc={applyTo:function(t){return Cc(t,Xc)}},Xc=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"_applyAspect",value:function(t){return t===Zc?Cc(this,e,this):h(v(e.prototype),"_applyAspect",this).call(this,t)}}],[{key:Ac,get:function(){return Zc}}]),e}(Vc),ts={applyTo:function(t){return Tc(t,ns,(function(t){return new is(t)}))}},ns=function(){function t(){u(this,t)}return i(t,[{key:Ot,value:function(){return this.on()}},{key:dt,value:function(){return this.read()}},{key:"done",value:function(t){return this.own.done(t),this}}],[{key:"hasData",value:function(t){return"off"!==t&&"-"!==t[0]}},{key:Ac,get:function(){return ts}}]),t}(),es=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._tracker=un(t?function(t){return null!=t.getAttribute("disabled")?"off":null!=t.getAttribute("readonly")?"ro":"on"}(t.element):"on"),r}return i(e,[{key:"on",value:function(t){return(this.on=this._tracker.on().F)(t)}},{key:yt,get:function(){return mt(this._tracker)}},{key:"it",get:function(){return this._tracker.it},set:function(t){switch(t){case"off":case"ro":case"-on":case"-ro":break;default:t="on"}this._tracker.it=t}}]),e}(en),rs=function(){function t(){var n=this;u(this,t),this._all=new Set,this._on=new Vt;var e=qt(this._on.on().thru((function(){return n._all})),T(this._all));this.read=e.keepThru((function(t){return It(Lt.apply(void 0,f(t)))}),os)}return i(t,[{key:"add",value:function(t){var n=this,e=kt((function(){n._all.delete(t),n._on.send()}));return this._all.add(t),this._on.send(),e}}]),t}(),is=function(t){r(e,t);var n=c(e);function e(t){var r;u(this,e),(r=n.call(this))._control=t,r._derived=new rs;var i=t.aspect(Xc);return r.own=new es(i),mt(r.own).needs(t),r.derive(t.aspect(Jc).read().keepThru_(us)),i&&r.read((function(t){return function(t,n){switch(n){case"off":t.setAttribute("disabled","");break;case"ro":case"-ro":t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly","");break;default:t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly",""),t.removeAttribute("readonly")}}(i.element,t)})),r}return i(e,[{key:"read",value:function(t){var n="on";return(this.read=qt(Kt({derived:this._derived.read,own:this.own}).thru((function(t){var e,r=o(t.derived,1)[0],i=o(t.own,1)[0];if("off"===i||"off"===r)e="off";else{var u=!1;"-"===i[0]&&(u=!0,i=i.substring(1)),"-"===r[0]&&(u=!0,r=r.substring(1)),e="ro"===r?"ro":i,u&&(e="-"+e)}return n===e?z():F(n=e)})),T(n)).F)(t)}},{key:"on",value:function(t){var n="on";return(this.on=this.read().thru((function(t){var e=n;return e===t?z():F(n=t,e)})).F)(t)}},{key:"derive",value:function(t){return this._derived.add(Nt(pt(t)?t:t(this._control)).tillOff(this._control)).needs(this._control)}}]),e}(ns);function us(t){var n=Array.from(t);if(!n.length)return F("on");var e=n.map((function(t){return t.parent.aspect(ns)}));return It(Lt.apply(void 0,f(e)).keepThru_(os))}function os(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return as.apply(void 0,f(I(n)))}function as(){for(var t=!1,n=!1,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var u=0,o=r;u<o.length;u++){var a=o[u];switch(a){case"off":return"off";case"ro":t=!0;break;case"-on":n=!0;break;case"-ro":n=!0,t=!0}}return n?t?"-ro":"-on":t?"ro":"on"}var cs={applyTo:function(t){return Tc(t,ss,(function(t){return Kt({value:t,mode:t.aspect(ns)}).keepThru((function(t){var n=o(t.value,1)[0],e=o(t.mode,1)[0];return ns.hasData(e)?F(n):F()}))}))}},ss=(pc={},(yc={})[Ac]=yc[Ac]||{},yc[Ac].get=function(){return cs},k(pc,yc),pc),fs={applyTo:function(t){return Cc(t,ls)}},ls=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"_applyAspect",value:function(t){return t===fs?Cc(this,e,this):h(v(e.prototype),"_applyAspect",this).call(this,t)}}],[{key:Ac,get:function(){return fs}}]),e}(Hc),hs=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,[{key:"remove",value:function(t){this.set(t,void 0)}}]),e}(Qc),vs={},ds=function(){function t(n){u(this,t),this._map=n}return i(t,[{key:"get",value:function(t){var n=this._map.get(t);return n&&n[0]}},{key:Symbol.iterator,value:function(){return P(V(this._map.values(),(function(t){return o(t,1)[0]})))}},{key:"entries",value:function(){return P(V(this._map.entries(),(function(t){var n=o(t,2);return[n[0],o(n[1],1)[0]]})))}}]),t}(),ps=function(){function t(n){u(this,t),this._controls=n,this._supply=kt(),this._map=new Map}return i(t,[{key:"set",value:function(t,n,e,r){var i,u=this._map.get(t);if(n){i=kt();var o=this.newEntry(t,n,i),a=!0;u&&(u[0]===n?a=!1:r.push([t,u])),a?(this.modify().set(t,o),e.push([t,o])):this._map.set(t,o)}else i=Tt(),u&&(r.push([t,u]),this.modify().delete(t));return u&&u[1].off(vs),i}},{key:"newEntry",value:function(t,n,e){var r=this;return[n,kt((function(n){n!==vs&&r._controls.remove(t)})).needs(this._supply).needs(e).whenOff((function(t){return e.off(t===vs?void 0:t)}))]}},{key:"modify",value:function(){if(this._shot){var t=new Map;q(this._map.entries(),(function(n){var e=o(n,2),r=e[0],i=e[1];return t.set(r,i)})),this._shot=void 0,this._map=t}return this._map}},{key:"snapshot",value:function(){return this._shot||(this._shot=new ds(this._map))}},{key:"clear",value:function(){var t=this,n=[],e=[];return q(this._map.keys(),(function(r){return t.set(r,void 0,n,e)})),e}}]),t}(),ys=function(t){r(s,t);var n=c(s);function s(t){var e;u(this,s),(e=n.call(this))._group=t,e._updates=new Vt;return e._map=new ps(a(e)),e._map._supply.needs(t.read((function(t){e.read().once((function(n){var e=new Set;q(J(t),(function(t){var r=o(t,2),i=r[0],u=r[1];e.add(i);var a=n.get(i);a&&(a.it=u)})),q(n.entries(),(function(t){var n=o(t,2),r=n[0],i=n[1];e.has(r)||(i.it=void 0)}))}))}))),e}return i(s,[{key:"on",value:function(t){return(this.on=this._updates.on().thru((function(t,n){return F(t.map(gs),n.map(gs))})).F)(t)}},{key:"read",value:function(t){var n=this;return(this.read=qt(this._updates.on().thru((function(){return n._map.snapshot()})),(function(){return[n._map.snapshot()]})).F)(t)}},{key:"set",value:function(t,n){var r,i=this,u=this._group,a=[],c=[];return"object"===d(t)?(r=kt(),q(J(t),(function(t){var n=o(t,2),e=n[0],u=n[1];i._map.set(e,u,a,c).needs(r)}))):r=this._map.set(t,n,a,c),(a.length||c.length)&&(this._updates.send(a,c),a.length&&function(){var t;a.forEach((function(n){var r=o(n,2),i=r[0],a=o(r[1],2),c=a[0],s=a[1];c.aspect(Jc).add({parent:u}).needs(s).cuts(s);var f=c.it;if(t)t[i]=f;else{var l=u.it;l[i]!==f&&(t=Object.assign(Object.assign({},l),e({},i,f)))}})),t&&(u.it=t);a.forEach((function(t){var n=o(t,2),r=n[0],i=o(n[1],2),a=i[0],c=i[1];a.read().tillOff(c).to((function(t){u.it[r]!==t&&(u.it=Object.assign(Object.assign({},u.it),e({},r,t)))})).cuts(c)}))}()),r}},{key:"clear",value:function(){var t=this._map.clear();t.length&&this._updates.send([],t)}}]),s}(hs);function gs(t){var n=o(t,2);return[n[0],o(n[1],1)[0]]}var ms=function(t){r(e,t);var n=c(e);function e(t,r){var i;return u(this,e),(i=n.call(this,r))._model=un(t),i.controls=new ys(a(i)),mt(a(i)).whenOff((function(){return i.controls.clear()})),i}return i(e,[{key:"on",value:function(t){return(this.on=this._model.on().F)(t)}},{key:"_applyAspect",value:function(t){return t===ss[Ac]?{instance:(n=this,Kt({cs:n.controls,model:n,mode:n.aspect(ns)}).keepThru_(ks)),convertTo:O}:h(v(e.prototype),"_applyAspect",this).call(this,t);var n}},{key:yt,get:function(){return mt(this._model)}},{key:"it",get:function(){return this._model.it},set:function(t){this._model.it=t}}]),e}(ls);function ks(t){var n=o(t.cs,1)[0],e=o(t.model,1)[0],r=o(t.mode,1)[0];if(!ns.hasData(r))return F();var i={};return q(n.entries(),(function(t){var n=o(t,2),e=n[0],r=n[1];i[e]=r.aspect(ss)})),It(Kt(i).keepThru((function(t){var n=Object.assign({},e);return q(J(t),(function(t){var e=o(t,2),r=e[0],i=o(e[1],1)[0];n[r]=i})),E(n)})))}var _s=Bt();function ws(){return _s}function bs(t){return pt(t)?S(Nt(t)):"function"==typeof t?function(n){return Nt(t(n))}:function(n){return n.read().keepThru(function(t,n){return function(){var e=n.validate(t);return null==e?F():Array.isArray(e)?F.apply(void 0,f(e)):F(e)}}(n,t))}}var xs={},Os=function(){function t(n){u(this,t);var e=new Vt,r=new Map,i=new Map,a=O,c=O;this._messages=Mt((function(t){var n=Nt(e,T()).to(t).whenOff((function(){a=O,c=O}));c=function(t,e){var r=t.to((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(e.length)i.set(t,e);else if(!i.delete(t))return;a()})).needs(e).whenOff((function(n){n!==xs&&e.off(n),i.delete(t)&&a()}));n.whenOff((function(){return r.off(xs)}))},q(r.entries(),(function(t){var n=o(t,2),e=n[0],r=n[1];return c(e,r)})),a=function(){e.send.apply(e,f(I(i.values(),x)))},i.size&&a()})).share().tillOff(n),this.from=function(t){var e=bs(t)(n),i=kt((function(){r.delete(e)}));return r.set(e,i),c(e,i),i.needs(n)}}return i(t,[{key:dt,value:function(){return this._messages}}]),t}();function As(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=n.length;return 1===r?n[0]:r?function(t){var e=new Os(t);return n.forEach((function(t){return e.from(t)})),e}:ws}var Ss={applyTo:function(t){return Tc(t,Ts,(function(t,n){var e=new Es(t);if(n){var r=n.aspect(Ts);e.by(r.read().keepThru((function(t){return F.apply(void 0,f(t.messages()))})))}return e}))}},Ts=t("j",function(){function t(){u(this,t)}return i(t,[{key:dt,value:function(){return this.read()}}],[{key:Ac,get:function(){return Ss}}]),t}()),Cs=e({get ok(){return!0},messages:function(){return[]},has:function(){return!1},hasBut:function(){return!1}},Symbol.iterator,(function(){return[][Symbol.iterator]()})),Rs=function(){function t(n){var e=this;u(this,t),this._byCode=new Map,this._all=[],q(n,(function(t){var n=!1;q(J(t),(function(r){var i=o(r,2),u=i[0];if(i[1]){n=!0;var a=e._byCode.get(u);a?a.push(t):e._byCode.set(u,[t])}})),n&&e._all.push(t)}))}return i(t,[{key:"messages",value:function(t){return null==t?this._all:this._byCode.get(t)||[]}},{key:"has",value:function(t){return null==t||this._byCode.has(t)}},{key:"hasBut",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this._all.some((function(t){return n.every((function(n){return!t[n]}))}))}},{key:Symbol.iterator,value:function(){return this._all[Symbol.iterator]()}},{key:"ok",get:function(){return!this._all.length}}]),t}();function Ds(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?new Rs(n):Cs}var Es=function(t){r(e,t);var n=c(e);function e(t){var r;u(this,e),(r=n.call(this))._messages=new Os(t);var i=t.aspect(Hc);return i&&r._messages.from(function(t){return t.controls.read().keepThru(Fs,$s)}(i)),r}return i(e,[{key:"by",value:function(){return this._messages.from(As.apply(void 0,arguments))}},{key:"read",value:function(t){return(this.read=Nt(this._messages).keepThru(Ds).F)(t)}}]),e}(Ts);function Fs(t){return It(Lt.apply(void 0,f(V(t,(function(t){return t.aspect(Ts)})))))}function $s(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return F.apply(void 0,f(I(V(n,(function(t){return t[0]})))))}var js=function(t){r(e,t);var n=c(e);function e(t,r){var i,c=r.aspects,s=r.get,f=r.set;u(this,e),(i=n.call(this,{aspects:c})).element=t,i._input=new Vt;var l=a(i);i._get=s,i._set=f,i._value=i.it;var h=i._update=function(t,n){return v({value:t},n)};function v(t,n){for(;;){l._value=t.value;var e=void 0;l._update=function(n,r){e=[Object.assign(Object.assign({},t),{value:n}),r]};try{l._input.send(t,n)}finally{l._update=h}if(!e)break;var r=o(e,2);t=r[0],n=r[1]}}return i.events=new wn(t),mt(i.events).needs(a(i)),i.listenForInput((function(t){return v(t,i._value)})),i}return i(e,[{key:"input",value:function(t){var n=this;return(this.input=qt(this._input.on().thru(x),(function(){return[{value:n.it}]})).F)(t)}},{key:"on",value:function(t){return(this.on=this._input.on().thru((function(t,n){var e=t.value;return e===n?z():F(e,n)})).F)(t)}},{key:"listenForInput",value:function(t){var n=this,e=function(e){return t({value:n.it,event:e})};this.events.on("input").to(e),this.events.on("change").to(e)}},{key:yt,get:function(){return mt(this._input)}},{key:"it",get:function(){return this._get()},set:function(t){var n=this.it;t!==n&&(this._set(t),this._update(this._get(),n))}}]),e}(Xc);var zs={applyTo:function(t){return Tc(t,Us,(function(t){var n=t.aspect(Xc);return n&&new Ps(n)}))}},Us=function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.apply(this,arguments)}return i(e,null,[{key:Ac,get:function(){return zs}}]),e}(en),Ps=function(t){r(e,t);var n=c(e);function e(t){var r;u(this,e),r=n.call(this);var i=t.element,o=t.events,c=i.getRootNode?i.getRootNode():i.ownerDocument;return r._it=un(!!c&&c.activeElement===i),mt(a(r)).needs(t),o.on("focus").to((function(){return r._it.it=!0})),o.on("blur").to((function(){return r._it.it=!1})),r.on({receive:function(t,n){t.onRecurrent(O),n?i.focus():i.blur()}}),r}return i(e,[{key:"on",value:function(t){return(this.on=this._it.on().F)(t)}},{key:yt,get:function(){return mt(this._it)}},{key:"it",get:function(){return this._it.it},set:function(t){this._it.it=t}}]),e}(Us),Ms={applyTo:function(t){return Tc(t,qs,(function(t){var n=t.aspect(Hc);return null!=n?new Ls(n):new Ks(t)}))}},qs=function(){function t(){u(this,t)}return i(t,[{key:dt,value:function(){return this.read()}}],[{key:Ac,get:function(){return Ms}}]),t}(),Ns={hasFocus:!1,touched:!1,edited:!1},Ks=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._flags=un(Ns),mt(r._flags).needs(t),r._flags.by(function(t,n){var e=n.aspect(Xc);return Kt({hasFocus:n.aspect(Us)||Bt(!1),edited:e?e.input().keepThru((function(t){return!!t.event})):Bt(!1)}).keepThru((function(n){var e=o(n.hasFocus,1)[0],r=o(n.edited,1)[0];return function(t,n,e){t=n?Object.assign(Object.assign({},t),{hasFocus:n,touched:!0}):Object.assign(Object.assign({},t),{hasFocus:n});e&&(t=Object.assign(Object.assign({},t),{edited:e,touched:!0}));return t}(t.it,e,r)}))}(r._flags,t)),r}return i(e,[{key:"read",value:function(t){return(this.read=this._flags.read().F)(t)}},{key:"markTouched",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._flags.it;return t?n.touched||(this._flags.it=Object.assign(Object.assign({},n),{touched:t})):n.touched&&(this._flags.it=Object.assign(Object.assign({},n),{touched:n.hasFocus,edited:!1})),this}},{key:"markEdited",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._flags.it;return t?n.edited||(this._flags.it=Object.assign(Object.assign({},n),{touched:!0,edited:t})):n.edited&&(this._flags.it=Object.assign(Object.assign({},n),{edited:t})),this}}]),e}(qs);var Ls=function(t){r(e,t);var n=c(e);function e(t){var r;return u(this,e),(r=n.call(this))._container=t,r}return i(e,[{key:"read",value:function(t){return(this.read=(n=this._container,n.controls.read().tillOff(n).keepThru_((function(t){return It(Lt.apply(void 0,f(function(t){return V(t,(function(t){return t.aspect(qs)}))}(t))))}),Bs)).F)(t);var n}},{key:"markEdited",value:function(t){return this._container.controls.read().once((function(n){return q(n,(function(n){return n.aspect(qs).markEdited(t)}))})),this}},{key:"markTouched",value:function(t){return this._container.controls.read().once((function(n){return q(n,(function(n){return n.aspect(qs).markTouched(t)}))})),this}}]),e}(qs);function Bs(){for(var t={hasFocus:!1,touched:!1,edited:!1},n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return q(e,(function(n){var e=o(n,1)[0],r=e.hasFocus,i=e.touched,u=e.edited;i&&(t.touched=!0),r&&(t.hasFocus=t.touched=!0),u&&(t.edited=t.touched=!0)})),t}var Is={applyTo:function(t){var n=t.aspect(Xc);return n?Rc(n.element):Sc}},Vs=t("h",(gc={},(mc={})[Ac]=mc[Ac]||{},mc[Ac].get=function(){return Is},e(gc,"to",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{applyAspect:function(n){return n===Is?Rc(t):void 0}}})),k(gc,mc),gc)),Ws={applyTo:function(t){return{instance:new Js(t),convertTo:O}}},Hs=t("l",function(){function t(){u(this,t)}return i(t,[{key:dt,value:function(){return this.read()}}],[{key:Ac,get:function(){return Ws}}]),t}()),Qs=Symbol("reason");function Ys(t){return t&&"object"===d(t)&&Qs in t}var Js=function(t){r(a,t);var n=c(a);function a(t){var e;u(this,a),(e=n.call(this))._control=t,e._sources=un([new Map]);var r=t.aspect(Vs);return r&&e.applyTo(r,e.schedule),mt(t).whenOff((function(t){return e.done(t)})),e}return i(a,[{key:"read",value:function(t){return(this.read=this._sources.read().tillOff(this._control).keepThru_((function(t){var n=o(t,1)[0];return It(Lt.apply(void 0,f(n.keys())))}),(function(){for(var t={},n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.forEach((function(n){return Gs(o(n,1)[0],t)})),t})).F)(t)}},{key:"track",value:function(t){var n=this;return(this.track=Mt((function(t){t.supply.needs(n._control);var e=new xc,r=new xt,i=!1;return r.on(t),n.read((function(t){var n=new Set(e),u=[];q(B(J(t),(function(t){return!!o(t,2)[1]})),(function(t){var e=o(t,1)[0];n.delete(e)||u.push(e)})),(!i||u.length||n.size)&&(e.delta(u,n),i=!0,e.redelta((function(t,n){return r.send(t,n)})).undelta())}))})).F)(t)}},{key:"specs",value:function(t){return Nt(pt(t)?t:t(this._control))}},{key:"resolve",value:function(t){var n=this._control.aspect(Fc);return this.specs(t).keepThru((function(){for(var t={},e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach((function(e){vn(e)?t[ln.name(e,n)]=!0:Gs(e,t)})),t}))}},{key:"add",value:function(t){var n=this,r=mt(this._control);if(r.isOff)return r;var i=kt(),u=Mt((function(r){var u=n.resolve(t).to({receive:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];r.receive.apply(r,[t].concat(e))}});r.supply.whenOff((function(t){i.off(e({},Qs,t))})),i.needs(u).whenOff((function(t){Ys(t)&&u.off(t[Qs])}))})).share(),a=o(this._sources.it,1)[0];return a.set(u,i),i.whenOff((function(t){Ys(t)||(a.delete(u),n._sources.it=[a])})),this._sources.it=[a],i.needs(r)}},{key:"applyTo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zs(this._control,t),e=t.classList,r=new xc,i=function(){r.redelta((function(t,n){e.remove.apply(e,f(n)),e.add.apply(e,f(t))})).undelta()};return this.track((function(t,e){r.delta(t,e),n(i)})).whenOff((function(){r.size&&(r.clear(),n(i))}))}},{key:"done",value:function(t){return q(this._sources.it[0].values(),(function(n){return n.off(t)})),this._sources.done(t),this}},{key:"schedule",get:function(){return this._schedule||(this._schedule=Zs(this._control,this._control.aspect(Vs)))}}]),a}(Hs);function Gs(t,n){q(J(t),(function(t){var e=o(t,2),r=e[0],i=e[1];null!=i&&(n[r]=i)}))}function Zs(t,n){return t.aspect(jc)({node:n})}var Xs=[["has-error",Dc]];function tf(t){return!t.ok}function nf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ns,e=void 0===n?Dc:n;return function(t){var n=function(t){return[t,e]};return Kt({md:t.aspect(ns),vl:t.aspect(Ts),st:t.aspect(qs)}).keepThru((function(t){var e=o(t.md,1)[0],r=o(t.vl,1)[0],i=o(t.st,1)[0],u=i.hasFocus,a=i.touched,c=i.edited,s=[];return ns.hasData(e)||s.push(n("disabled")),"ro"!==e&&"-ro"!==e||s.push(n("readonly")),r.ok||s.push(n("invalid")),r.has("missing")&&s.push(n("missing")),r.has("incomplete")&&s.push(n("incomplete")),u&&s.push(n("has-focus")),a&&s.push(n("touched")),c&&s.push(n("edited")),F.apply(void 0,s)}))}}var ef=t("f",new(function(t){r(e,t);var n=c(e);function e(){return u(this,e),n.call(this,"default-in-aspects")}return i(e,[{key:"upKey",get:function(){return this}}]),i(e,[{key:"grow",value:function(t){var n=t.context.get(ze);return Kt({scheduler:t.context.get(Pe[G].upKey),fns:t.seed}).keepThru((function(t){var e=o(t.scheduler,1)[0],r=t.fns;return zc.apply(void 0,f(r).concat([jc.to(e),Fc.to(n)]))}))}}]),e}(Cn))),rf=new Dn("input-from-control",{byDefault:function(){return{}}});function uf(t,n){return kt(t.get(Si).provide({a:rf,by:function(){return{root:t,control:n}}})).needs(t).needs(n)}var of=t("E",new hn("https://wesib.github.io/examples","bex","wesib-examples")),af=t("b",Da({$:"settings"},{$color:new Yu({r:161,g:185,b:142}),$bgColor:new Yu({r:40,g:43,b:36}),$fontFace:"'Exo 2', sans-serif",$fontSize:mo.of(1,"em"),$lineHeight:1.2,$fontWeight:"400",$linkFontWeight:"600",$layoutBreakpoint:go.of(576,"px")}));function cf(t){return{"@media:sm":"(max-width: "+t.$layoutBreakpoint+")"}}function sf(t){var n=t.ref(af).read(),e=t.root.rules;return za(e.add({e:"a"},n.keepThru(ff)),e.add({e:"a",s:":visited"},n.keepThru(ff)),e.add({e:"a",s:":hover"},{textDecoration:"underline"}),e.add({e:"a",s:":active"},{textDecoration:"underline dotted"}),e.add({e:"a",s:":focus"},{textDecoration:"underline dotted"}))}function ff(t){return{color:t.$color,fontWeight:t.$linkFontWeight,textDecoration:"none"}}function lf(t){var n=t.ref(af).read();return za(t.root.add(n.keepThru(hf)).add(n.keepThru(cf)),t.style(sf))}function hf(t){var n=t.$color,e=t.$fontFace,r=t.$fontSize,i=t.$lineHeight;return{color:n,font:"normal "+t.$fontWeight+" "+r+"/"+i+" "+e}}function vf(t){var n=t.ref(af).read(),e=t.root.rules;return za(e.add({e:"html"},{height:"100%",margin:0,padding:0}),e.add({e:"body"},n.keepThru(df)),t.style(lf))}function df(t){return{backgroundColor:t.$bgColor,height:"100%",margin:0,padding:0}}var pf=t("F",Da({$:"settings:form"},(function(t){return Fa.by({global:af},t).read().keepThru(yf)})));function yf(t){var n=t.global,e=n.$color,r=n.$bgColor,i=n.$fontFace,u=n.$fontSize,o=n.$lineHeight,a=n.$fontWeight;return{$color:e,$bgColor:r.hsl.set((function(t){return{l:.8*t.l}})),$roBgColor:r.hsl.set((function(t){return{l:.94*t.l}})),$fontFace:i,$fontSize:u,$errorFontSize:u.mul(.8),$lineHeight:o,$fontWeight:a,$borderColor:r,$marginV:u.div(4),$marginH:u.div(4),$paddingV:u.div(2),$paddingH:u,$borderW:go.of(1,"px")}}var gf=function(){function t(t){this._context=t}var n,e;return t.prototype.style=function(){return this._context.get(oc).style(kf)},_([ec()],t.prototype,"style",null),t=_([le(["in-error",of],(e="code",le({feature:{needs:Fr},setup:function(t){var n=function(n){"string"==typeof n?t.perDefinition({a:Or,is:{name:n,change:Tr(n)}}):Object.keys(n).forEach((function(e){t.perDefinition({a:Or,is:{name:e,change:Tr(e,n[e])}})}))};In(e)?e.forEach(n):n(e)}})),(n=function(t){var n=t.control.control,e=t.aspects,r=t.context;return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sr(n);return new Mr(t,n,e)}(r,"code").read().keepThru_((function(t){return t?t.trim().split(/\s+/):[]})).keepThru((function(t){return n.convert(Vs.to(r.element),e).setup(Hs,(function(n){n.add(nf()),n.add(function(){var t,n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.mark,i=e.when;return t=i?Array.isArray(i)?i.length?function(t){return i.every((function(n){return t.has(n)}))}:tf:function(t){return t.has(i)}:tf,n=r?Array.isArray(r)?r.length?r:Xs:[r]:Xs,function(e){return e.aspect(Ts).read().keepThru((function(e){return t(e)?F.apply(void 0,f(n)):F()}))}}({when:t}))}))}))},le({define:function(t){t.whenComponent((function(t){Kt({parent:(0,t.get(Si).up)().keepThru_((function(t){return t?It(t.get(rf)):E({})})),aspects:t.get(ef)}).keepThru_((function(e){var r=o(e.parent,1)[0],i=o(e.aspects,1)[0];if(r.control){var u=n({control:r,context:t,aspects:i});if(u)return u instanceof Kc?F(u):It(u)}return F()})).consume((function(n,e){if(n){var r=uf(t,n);return(e||mt(n)).needs(r),r}}))}))}})))],t)}(),mf=["has-error",Dc];function kf(t){var n=t.ref(pf).read(),e=t.root.rules,r=mo.of(4,"px");return za(e.add({u:[":","host"],$:"bex:in-error"},n.keepThru((function(t){var n=t.$color,e=t.$errorFontSize;return{display:"none",fontSize:e,padding:e.div(2),borderLeft:r+" dotted "+n,paddingLeft:e.sub(r)}}))),e.add({u:[":","host",{c:[mf,["touched",Dc]],u:[":","not",{c:["has-focus",Dc]}]}],$:"bex:in-error"},{display:"block"}),e.add({u:[":","host",{c:mf,u:[[":","not",{u:["code","~=","missing"]}],[":","not",{u:["code","~=","incomplete"]}]]}],$:"bex:in-error"},{display:"block"}))}var _f=function(){function t(){}return t=_([ee({needs:[Li,gf,bc]})],t)}(),wf=function(){function t(){}return t=_([le(["main",of],Nu({onResponse:function(t){var n=t.response,e=t.range;n.ok||(e.deleteContents(),null==n.ok?e.insertNode(document.createTextNode("Loading...")):e.insertNode(document.createTextNode("Error. "+n.error)))}}))],t)}();function bf(t){return{flex:"1 1 auto",padding:0,margin:"0 0 0 "+t.$fontSize.div(2)}}var xf=function(){function t(t){this._theme=t.get(oc)}return t.prototype.style=function(){return this._theme.style(Of)},_([ec()],t.prototype,"style",null),t=_([le(["nav",of],yu(),au())],t)}();function Of(t){var n=t.ref(af).read(),e=t.root.rules;return za(e.add({u:[":","host"],$:"bex:nav"},n.keepThru(Af)),e.add({u:[":","host"],$:"bex:nav"},n.keepThru((function(t){return{flex:"0 1 200px",height:"100%",background:Sf(t)}}))),e.add({u:[":","host"],$:["bex:nav","@media:sm"]},{flex:"0 1 100%"}),e.add([{u:[":","host"],$:"bex:nav"},{e:"a",$:"bex:nav"}],n.keepThru(Tf)),e.add([{u:[":","host"],$:"bex:nav"},{e:"a",c:["active",Yr],$:"bex:nav"}],n.keepThru(Cf)))}function Af(t){return{padding:0,margin:"0 "+t.$fontSize.div(2)+" 0 0"}}function Sf(t){return t.$bgColor.hsl.set((function(t){return{l:.8*t.l}}))}function Tf(t){var n=t.$fontSize;return{display:"block",margin:0,padding:n.div(2)+" "+n,border:0,outline:0,background:Sf(t)}}function Cf(t){var n=t.$fontSize,e=t.$color,r=t.$bgColor,i=mo.of(4,"px");return{background:r,borderLeft:i+" solid "+e,paddingLeft:n.sub(i)}}var Rf=function(){function t(t){this._context=t}return t.prototype.style=function(){return w(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,this._context.get(Ln).whenDefined(wf)];case 1:return t=n.sent().elementDef.name,[2,this._context.get(oc).style(Df(t))]}}))}))},_([ec()],t.prototype,"style",null),t=_([le({name:["container",of],feature:{needs:[wf,xf]}})],t)}();function Df(t){return function(n){var e=n.ref(af).read(),r=n.root.rules;return za(r.add({u:[":","host"],$:"bex:container"},{height:"100%",display:"flex",flexFlow:"row wrap",alignItems:"stretch",alignContent:"flex-start"}).add(e.keepThru(cf)),r.add({u:[":","host"],$:["bex:container","@media:sm"]},{height:"auto"}),r.add([{u:[":","host"],$:"bex:container"},{e:t,$:"bex:container"}],e.keepThru(bf)))}}var Ef=function(){function t(){}return t=_([ee({needs:[Rf,Li,qu,ic,bc]})],t)}(),Ff=function(){function t(){}return t=_([ee({needs:bc,init:function(t){t.whenReady((function(){ha(t.get(oc).style(vf))}))}})],t)}(),$f=t("p",function(){function t(){}return t=_([ee({needs:[Ff,_f,Ef]})],t)}());function jf(t){var n=t.$color,e=t.$fontFace,r=t.$fontSize,i=t.$lineHeight,u=t.$fontWeight,o=t.$marginV,a=t.$marginH,c=t.$paddingV,s=t.$paddingH,f=t.$bgColor,l=t.$borderColor;return{color:n,font:"normal "+u+" "+r+"/"+i+" "+e,padding:c+" "+s,margin:o+" "+a,backgroundColor:f,border:"0 none",outline:t.$borderW+" solid "+l,boxShadow:"inset 1px 1px 2px -2px black",boxSizing:"border-box",width:"100%"}}function zf(t){return{backgroundColor:t.$roBgColor}}function Uf(t){var n=t.$color;return{outlineColor:no(t.$borderColor,n,.5)}}function Pf(t){var n=t.$color,e=t.$borderW,r=t.$borderColor;return{outline:e.mul(2)+" dashed "+no(r,n,.25)}}t("q",function(){for(var t=Se.create(),n=xr(t),e=n.bootstrapContext,r=n.complete,i=arguments.length,u=new Array(i),o=0;o<i;o++)u[o]=arguments[o];var a=1===u.length?u[0]:br(u);return e.get(_r).request(a),e.get(cr.of(a)).to((function(t){t.init().then(r)})),e}($f))}}}));//# sourceMappingURL=common.606cdabd.s.js.map
