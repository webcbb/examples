import{_ as t}from"./lib.fa155c56.js";function e(t){const e=Array.from(t),{length:n}=e;if(n)return 1===n?e[0]:e}function n(t){return e=t,Array.isArray(e)?new Set(t):null!=t?new Set([t]):new Set;var e}function r(t,e){var n;return n=e,Array.isArray(n)?e.forEach((e=>t.add(e))):null!=e&&t.add(e),t}function s(t,e=(()=>!0)){const n=Object.getPrototypeOf(t.prototype);if(null==n)return;const r=n.constructor;return e(r)?r:s(r,e)}function i(t){return t}function o(t,e,n=((t,e)=>e)){return t?e?function(...r){return n(t.apply(this,r),e.apply(this,r))}:t:e}function u(){}function c(t){return()=>t}function a(...t){return()=>t}function h(t){let e=()=>(e=c(t()))();return()=>e()}function l(t){return null!=t}const d=Symbol("push-iterator");function f(t){return!!t[d]}function p(t){return t[Symbol.iterator]()}function g(t){return{[Symbol.iterator]:y,[d]:t}}function y(){return this[d]()}function _(t,e){return!t[d](e).isOver()}function m(t){let e=!1,n=r=>{r&&!t(r)&&(e=!0,n=x)};return{[Symbol.iterator]:w,[d](t){return n(t),this},next:b,isOver:()=>e}}function w(){return this}function b(){for(;;){let t;const e=!_(this,(e=>(t={value:e},!0)));if(t)return t;if(e)return{done:!0}}}function v(){return{done:!0}}function x(t){}const k={[Symbol.iterator]:w,[d](t){return this},next:()=>({done:!0}),isOver:()=>!0};function $(t,e){return t[d](e)}function S(t,e){return t[e]}function O(t){return e=t,n=S,t=>{let r=0;const s=t=>{if(r>=e.length)return!1;for(;;){const s=t(n(e,r++));if(r>=e.length||!1===s)return!1;if(!0===s)return!0}};if(t&&!s(t))return k;let i=!1,o=t=>{t&&!s(t)&&(i=!0,o=x,u=v)},u=()=>r<e.length?{value:n(e,r++)}:(i=!0,o=x,u=v,{done:!0});return{[Symbol.iterator]:w,[d](t){return o(t),this},next:()=>u(),isOver:()=>i}};var e,n}function T(t){return g(O(t))}function C(t,e){if(f(t))return _(t,e);const n=p(t);if(f(n))return _(n,e);for(;;){const t=n.next();if(t.done)return!1;const r=e(t.value);if("boolean"==typeof r)return r}}function F(t,e){C(t,(t=>{e(t)}))}const A=t=>t;function E(t,e=A){if(f(t))return D(t,e);const n=p(t);return f(n)?D(n,e):Array.from(t,e)}function D(t,e){const n=[];return _(t,(t=>{n.push(e(t))})),n}function R(t){let e=!0;return _(t,(t=>e=!1)),e}function z(t){if(f(t))return P(t);const e=p(t);return f(e)?P(e):function(t){const e=t.next();return e.done?void 0:e.value}(e)}function P(t){let e;return _(t,(t=>(e=t,!1))),e}function U(t,e){let n=!1,r=t=>{(n=!!t&&!e(t))&&(r=x,s=v)},s=()=>{const e=t.next();return e.done&&(n=!0,r=x,s=v),e};return{[Symbol.iterator]:w,[d](t){return r(t),this},next:()=>s(),isOver:()=>n}}function M(t){return e=>{for(;;){const n=t.next();if(n.done)return!1;const r=e(n.value);if("boolean"==typeof r)return r}}}function K(t,e){return f(t)?$(t,e):Array.isArray(t)?function(t,e){return t.length?O(t)(e):k}(t,e):function(t,e){const n=p(t);if(f(n))return $(n,e);const r=M(n);return r(e)?U(n,r):k}(t,e)}function q(t){const e=p(t);return f(e)?e:U(e,M(e))}function L(t,e,n){let r=n;return C(t,(t=>{r=e(r,t)})),r}function N(){return k}function j(t){return g(function(t){return e=>{const n=t();if(f(n))return n[d](e);const r=M(n);return e&&!r(e)?N():U(n,r)}}(t))}function B(...t){return t.length>1?g(function(t){return e=>{let n=0,r=t[0];const s=e=>{for(;;){let s;const i=K(r,(t=>s=e(t)));if(i.isOver()){if(++n>=t.length)return!1;r=t[n]}else r=i;if("boolean"==typeof s)return s}};return e&&!s(e)?N():m(s)}}(t)):t.length?(e=t[0],Array.isArray(e)?T(e):j((()=>p(e)))):N();var e}function I(t){return g(function(t){return e=>{if(e)return e(t),N();let n=!1;return{[Symbol.iterator]:w,[d](e){return n?N():e?(n=!0,e(t),N()):this},next:()=>n?{done:n}:(n=!0,{value:t}),isOver:()=>n}}}(t))}function W(t){return T(Reflect.ownKeys(t))}function V(t,e){return g(function(t,e,n){return r=>{let s=0;const i=r=>{for(;;){if(s>=t.length)return!1;const i=e(t,s++);if(n(i)){const t=r(i);if("boolean"==typeof t)return t}}};if(r&&!i(r))return N();let o=!1,u=t=>{t&&!i(t)&&(o=!0,u=x,c=v)},c=()=>{for(;;){if(s>=t.length)return o=!0,u=x,c=v,{done:!0};const r=e(t,s++);if(n(r))return{value:r}}};return{[Symbol.iterator]:w,[d](t){return u(t),this},next:()=>c(),isOver:()=>o}}}(t,S,e))}function G(t,e){return g((n=>{const r=f(t)?H(t,e):function(t,e){const n=p(t);if(f(n))return H(n,e);return t=>{for(;;){const r=n.next();if(r.done)return!1;const s=r.value;if(e(s)){const e=t(s);if("boolean"==typeof e)return e}}}}(t,e);return n&&!r(n)?N():m(r)}))}function H(t,e){return n=>{const r=$(t,(t=>{if(e(t))return n(t)}));return t=r,!r.isOver()}}function Q(t,e){return g((n=t,r=e?(t,n)=>e(t[n]):J,t=>{let e,s=0;const i=t=>{if(s>=n.length)return!1;for(e||(e=r(n,s));;){let i;const o=K(e,(e=>i=t(e)));if(o.isOver()){if(++s>=n.length)return!1;e=r(n,s)}else e=o;if("boolean"==typeof i)return i}};return t&&!i(t)?N():m(i)}));var n,r}function J(t,e){return t[e]}function Z(t,e=Y){return g((n=>{const r=f(t)?X(t,e):function(t,e){const n=p(t);if(f(n))return X(n,e);let r;return t=>{for(;;){if(!r){const t=n.next();if(t.done)return!1;r=e(t.value)}let s;const i=K(r,(e=>s=t(e)));if(r=i.isOver()?void 0:i,"boolean"==typeof s)return s}}}(t,e);return n&&!r(n)?N():m(r)}))}function X(t,e){let n,r=!1;return s=>{for(;;){for(;!n;){const s=$(t,(t=>(n=e(t),!0)));if(t=s,s.isOver()){if(!n)return!1;r=!0}}let i;const o=K(n,(t=>i=s(t)));if(o.isOver()){if(n=void 0,r)return!1}else n=o;if("boolean"==typeof i)return i}}}function Y(t){return t}function tt(t,e){return g((n=>{const r=f(t)?et(t,e):function(t,e){const n=p(t);if(f(n))return et(n,e);return t=>{for(;;){const r=n.next();if(r.done)return!1;const s=t(e(r.value));if("boolean"==typeof s)return s}}}(t,e);return n&&!r(n)?N():m(r)}))}function et(t,e){return n=>{const r=$(t,(t=>n(e(t))));return t=r,!r.isOver()}}function nt(t){return tt(W(t),(e=>[e,t[e]]))}const rt=Symbol("context-key");class st{constructor(t){this.name=t}get[rt](){return this}toString(){return`ContextKey(${this.name})`}}class it extends st{constructor(t){super(`${t.name}:seed`)}get seedKey(){return this}grow(t){const{seeder:e,seed:n}=t;e.isEmpty(n)&&t.hasFallback||t.insert(n)}}class ot extends Error{constructor(t,e=`There is no value with key ${t}`){super(e),this.key=t}}class ut{constructor(t){this._initial=t,this._issuers=new Map}issuer(t){const e=this._issuers.get(t);if(e)return e;const n=t.seeder(),r=[n,e=>n.seed(e,this._initial(t,e))];return this._issuers.set(t,r),r}newSeed(t,e){const{seedKey:n}=e,[r,s]=this.issuer(n);return n!==e?[r,t.get(n)]:[r,s(t)]}}function ct(t){return"with"in t}class at{}class ht{constructor(t,e,n,r={}){this.context=e,this.key=n,this._opts=r,this._constructed=null,this._setup=u;const[s,i]=t.newSeed(e,n);this.seeder=s,this.seed=i,this.hasFallback="or"in r}get or(){return this._opts.or}insert(t){this._constructed=t}fillBy(t){return t(this),this._constructed}setup(t){const e=this._setup;this._setup=n=>{e(n),t(n)}}_grow(){if(this.key.grow(this),null!=this._constructed)return[this._constructed,this._setup];if(!this.hasFallback)throw new ot(this.key);return[this.or]}}class lt{constructor(t){this._seeders=new ut(t?"function"==typeof t?t:e=>t.get(e):u)}provide(t){const{a:{[rt]:{seedKey:e}},by:n}=function(t){if(function(t){return"by"in t}(t)){if(!ct(t))return t;const{a:e,by:n,with:r}=t;return{a:e,by:t=>n(...r.map((e=>t.get(e))))}}if(function(t){return"is"in t}(t)){const{a:e,is:n}=t;return{a:e,by:c(n)}}if(function(t){return"via"in t}(t)){const{a:e,via:n}=t;return{a:e,by:t=>t.get(n)}}if(function(t){return"as"in t}(t)){if(function(t){return!("a"in t)}(t)&&(t=function(t){return{...t,a:t.as}}(t)),!ct(t)){const{as:e}=t;return{a:t.a,by:t=>new e(t)}}const{as:e,with:n}=t;return{a:t.a,by:t=>new e(...n.map((e=>t.get(e))))}}throw new TypeError(`Malformed context value specifier: ${JSON.stringify(t)}`)}(t),[r]=this._seeders.issuer(e);return r.provide(n)}seed(t,e){const[,n]=this._seeders.issuer(e);return n(t)}seeds(){return(t,e)=>this.seed(e,t)}seedIn(t){return this.newValues().get.bind(t)}newValues(){return function(t,e){const n=new Map;return new class extends at{get({[rt]:r},s){const i=n.get(r);if(null!=i)return i;const[o,u]=new ht(e,this,r,s)._grow();return u&&(n.set(r,o),u({key:r,context:this,registry:t})),o}}}(this,this._seeders)}append(t){const e="function"==typeof t?t:t.seeds();return new lt(((t,n)=>{const r=e(t,n),[s,i]=this._seeders.issuer(t),o=i(n);return r?s.combine(o,r,n):o}))}}class dt{constructor(){this._providers=[]}provide(t){return this._providers.push(t),()=>{const e=this._providers.indexOf(t);e>=0&&this._providers.splice(e,1)}}seed(t,e=N()){return B(e,function(t,e){return G(tt(e.map((e=>h(e.bind(void 0,t)))),(t=>t())),l)}(t,this._providers))}isEmpty(t){return function(t){if(f(t))return R(t);const e=p(t);return f(e)?R(e):!!e.next().done}(t)}combine(t,e){return B(t,e)}}class ft extends it{seeder(){return new dt}}class pt extends st{constructor(t,{seedKey:e}={}){super(t),this.seedKey=e||new ft(this)}}class gt extends pt{constructor(t,{seedKey:e,byDefault:n=a()}={}){super(t,e),this.byDefault=n}grow(t){const e=E(t.seed);if(e.length)t.insert(e);else if(!t.hasFallback){const e=this.byDefault(t.context,this);e&&t.insert(Array.from(e))}}}class yt{constructor(){this._providers=[]}provide(t){return this._providers.unshift(t),()=>{const e=this._providers.lastIndexOf(t);e>=0&&this._providers.splice(e,1)}}seed(t,e){const{length:n}=this._providers;if(!n)return e||u;const r=e=>h(e.bind(void 0,t));if(!e&&1===n)return r(this._providers[0]);const s=this._providers.map(r);return e&&s.push(e),_t(s)}isEmpty(t){return null==t()}combine(t,e){return t===u?e:e===u?t:_t([e,t])}}function _t(t){return h((()=>{for(const e of t){const t=e();if(null!=t)return t}}))}class mt extends it{seeder(){return new yt}}class wt extends st{constructor(t,{seedKey:e}={}){super(t),this.seedKey=e||new mt(this)}}class bt extends wt{constructor(t,{seedKey:e,byDefault:n=u}={}){super(t,{seedKey:e}),this.byDefault=n}grow(t){const e=t.seed();null!=e?t.insert(e):t.hasFallback||t.insert(this.byDefault(t.context,this))}}const vt=Symbol("next-call");function xt(t){const e=()=>e;return e[vt]=(e,n)=>t(e,n),e}function kt(t){return xt(((e,n)=>e.pass(n,t)))}function $t(...t){return xt(((e,n)=>e.call(n,t)))}const St=xt((t=>t.skip())),Ot=Symbol("after-event");function Tt(t){return Ot in t}const Ct=Symbol("events-supply");class Ft{constructor(t=u){this._off=e=>{this._whenOff=t=>t(e),this._off=u,t(e)},this._whenOff=t=>{const e=this._off;this._off=n=>{e(n),t(n)}}}get isOff(){return this._off===u}get[Ct](){return this}off(t){return this._off(t),this}whenOff(t){return this._whenOff(t),this}whenDone(){return new Promise(((t,e)=>this.whenOff((n=>void 0===n?t():e(n)))))}cuts(t){return At(t).needs(this),this}needs(t){return At(t).whenOff((t=>this._off(t))),this}}function At(t){return t[Ct]}function Et(t){return new Ft(t)}function Dt(t){let e;return e="function"==typeof t?{supply:Et(),receive(e,...n){t(...n)}}:{supply:t.supply||Et(),receive(e,...n){this.supply.isOff||t.receive(e,...n)}},e.supply.whenOff((()=>e.receive=u)),e}function Rt(t){let e=function n(r){let s=t;const i=[];e=t=>i.push(t);try{for(;;){s=zt(s,r);const t=i.shift();if(!t)break;r=t}}finally{e=n}};return(...t)=>e(t)}function zt(t,e){const n=[];for(const r of t){const t=n.length;n.push(r);const s={onRecurrent(e){n[t]=Dt({supply:r.supply,receive(t,...n){e(...n)}})}};r.receive(s,...e)}return n}class Pt{constructor(){const t=this._rcs=new Set;this.send=Rt(t),this[Ct]=Et((()=>{t.clear(),delete this._rcs}))}get size(){return this._rcs?this._rcs.size:0}on(t){const e=Dt(t),n=e.supply.needs(this),r=this._rcs;return r&&!n.isOff&&(r.add(e),n.whenOff((()=>r.delete(e)))),n}done(t){return At(this).off(t),this}}const Ut=Symbol("on-event");function Mt(t){return Ut in t}class Kt extends Ft{get isOff(){return!0}off(){return this}whenOff(t){return t(),this}cuts(t){return At(t).off(),this}needs(){return this}}const qt=new Kt;function Lt(){return qt}function Nt(t){const e=Dt(t);let n=Rt([e]);return e.supply.whenOff((()=>n=u)),(...t)=>n(...t)}function jt(t){return e=>{t.to({supply:e.supply,receive:(t,...n)=>{e.receive(t,...n),e.supply.off()}})}}function Bt(t){const e=new Pt;let n,r;return s=>{if(e.size||(r=[],n=Et((()=>r=void 0)),t.to({supply:n,receive(t,...n){r&&(e.size?r=void 0:r.push(n)),e.send(...n)}})),s.supply.needs(n),e.on(s).whenOff((t=>{e.size||n.off(t)})),r){const t=Nt(s);r.forEach((e=>t(...e)))}}}function It(t,e){return n=>{const r=[];t.to({supply:n.supply,receive(t,...s){const i=(s,o)=>{const c=s>=e.length;++s;const a=r[s];if(a){const t=a.supply;return a.supply=o,[a.chain,t]}const h=s<e.length?e[s]:u,l={chain:{call(t,e){d(t(...e),e)},pass(t,e){d(t(e),[e])},skip(){l.supply.off()},onEvent(t,e){const n=Et().needs(l.supply);e[Ut]().to({supply:n,receive(e,...r){d(t(...r),r,n)}})}},supply:o};return r[s]=l,[l.chain,Lt()];function d(e,r,o=l.supply){const[u,a]=i(s,Et().needs(o));try{"function"==typeof(d=e)&&vt in d?e[vt](u,h):c?n.receive(t,...r):u.pass(h,e)}finally{a.off()}var d}},[o,c]=i(0,Et().needs(n.supply));try{o.call(e[0],s)}finally{c.off()}}})}}function Wt(t,e,n){return r=>{n?t.to({supply:Et().needs(e).cuts(n),receive:r.receive.bind(r)}):(r.supply.needs(e),t.to(r))}}function Vt({supply:t}){t.off()}class Gt{constructor(t){this._on=t}get F(){return this.to.bind(this)}[Ut](){return this}to(t){if(!t)return this;const e=Dt(t),{supply:n}=e;return n.isOff||this._on(e),n}then(t,e){return function(t,e,n){return new Promise(((r,s)=>{jt(t)({supply:Et(n?t=>{try{r(n(t))}catch(t){s(t)}}:s),receive:e?(t,...n)=>{try{r(e(...n))}catch(t){s(t)}}:(t,e)=>r(e)})}))}(this,t,e)}once(t){return(this.once=Ht(jt(this)).F)(t)}tillOff(t,e){return Ht(Wt(this,t,e))}consume(t){let e=Lt();const n=Et((t=>e.off(t)));return this.to({supply:n,receive(n,...r){const s=e;try{e=At(t(...r)||Lt())}finally{e!==s&&s.off()}}}),n}share(){return Ht(Bt(this))}thru(...t){return this.thru_(...t).share()}thru_(...t){return Ht(It(this,t))}}function Ht(t){return new Gt(t)}function Qt(){throw new Error("No events to send")}class Jt extends Gt{constructor(t,e=Qt){super(t),this._rcn=0,this._or=e}get F(){return this.to.bind(this)}[Ot](){return this}to(t){if(!t)return this;let e=u;const n=Dt(t);if(n.supply.isOff)return n.supply;const r=Et().needs(n.supply);let s=!1;return this._on({supply:r,receive:(t,...n)=>{s=!0,this._last=n,e(t,...n)}}),++this._rcn,r.isOff&&!s||(n.receive({onRecurrent(t){e=(e,...n)=>t(...n)}},...this._last||(this._last=this._or())),e=(t,...e)=>n.receive(t,...e)),r.whenOff((t=>{--this._rcn||(this._last=void 0),n.supply.off(t)})),r}once(t){return(this.once=Zt(jt(this)).F)(t)}tillOff(t,e){return Zt(Wt(this,t,e))}share(){return Zt(Bt(this))}keepThru(...t){return this.keepThru_(...t).share()}keepThru_(...t){return Zt(It(this,t))}}function Zt(t,e){return new Jt(t,e)}function Xt(t,e){return Zt((e=>t[Ut]().to(e)),e)}function Yt(t,e){return Tt(t)?t[Ot]():Xt(t,e)}function te(t){const e=Object.keys(t);return Zt((function(n){const{supply:r}=n,s=Nt(n);let i=u;const o={};e.forEach((e=>{r.needs(t[e][Ot]().to(((...t)=>{o[e]=t,i()})).needs(r))})),r.isOff||(i=()=>s(o))}),(function(){const n={};return e.forEach((e=>Yt(t[e]).once(((...t)=>n[e]=t)))),[n]})).share()}function ee(...t){return Zt((function(e){const{supply:n}=e,r=Nt(e);let s=u;const i=[];t.forEach(((t,e)=>{n.needs(t[Ot]().to(((...t)=>{i[e]=t,s()})).needs(n))})),n.isOff||(s=()=>r(...i))}),(function(){const e=[];return t.forEach((t=>Yt(t).once(((...t)=>e.push(t))))),e})).share()}function ne(...t){return Zt(u,c(t))}function re(t){return xt(((e,n)=>e.onEvent(n,Yt(t))))}class se extends Pt{on(t){return(this.on=Ht((t=>super.on(t))).F)(t)}[Ut](){return this.on()}}const ie=Ht(Vt);function oe(t){return Mt(t)?t[Ut]():t[Ot]()}function ue(...t){return t.length?Ht((e=>{const{supply:n}=e;let r=t.length;const s=t=>{--r||n.off(t)},i=(t,...n)=>{e.receive(t,...n)};t.forEach((t=>oe(t).to({supply:Et(s).needs(n),receive:i})))})).share():ie}function ce(t){return Ht((e=>{const{supply:n}=e,r=Nt(e),s=Et();let i=0;const o=oe(t).tillOff(n,s).thru_((t=>(++i,kt(t))));let u=[],c=1,a=0;s.whenOff((t=>{i||n.off(t)})),function(t){return Ht((e=>{const{supply:n}=e,r=Nt(e);let s=0;t[Ut]().to({supply:n,receive(t,e){const i=++s;Promise.resolve().then((()=>e)).then((t=>r(t,i)),(t=>n.off(t)))}})}))}(o).to({supply:n,receive(t,n,o){const h=o-c;if(u[h]=n,++a,a>h){let t;a===u.length?(t=u,u=[]):t=u.splice(0,h+1),c+=t.length,a-=t.length,i-=t.length,r(...t),!i&&s.isOff&&e.supply.needs(s)}}})}))}function ae(t){let e=n=>{t.then((()=>e(n)),(()=>e(n)))};return t.then((t=>{e=function(t){return e=>{try{Nt(e)(t),e.supply.off()}catch(t){e.supply.off(t)}}}(t)})).catch((t=>{var n;n=t,e=({supply:t})=>t.off(n)})),Ht((t=>e(t)))}function he(t){return Array.isArray(t)?t:[t]}class le{constructor(t){this._drop=t,this.emitter=new se,this._nested=new Map,this.emitter.on(((t,e,n)=>{const r=t[0],s=this._nested.get(r);s&&s.emitter.send(t.slice(1),e,n)}))}on(t){const e=this.emitter.on(t);return Et((t=>{e.off(t),this._dropIfEmpty()})).needs(e)}nest(t,e){const n=this._nested.get(t);if(n||e)return n;const r=new le((()=>this._remove(t)));return this._nested.set(t,r),r}done(t){for(const e of this._nested.values())e.done(t);this.emitter.done(t)}_remove(t){this._nested.delete(t),this._dropIfEmpty()}_dropIfEmpty(){!this._nested.size&&this.emitter.size<=1&&this._drop()}}class de{constructor(){this._root=new le(u)}on(t,e){return this._entry(t).on(e)}send(t,e,n){this._root.emitter.send(t,e,n)}done(t,e){const n=this._entry(t,!0);n&&n.done(e)}_entry(t,e){let n=this._root;for(const r of t){const t=n.nest(r,e);if(!t)return;n=t}return n}}class fe{constructor(t,e){this._trackers=t,this._path=e,this.update=(t,e,n)=>{this._trackers.send([...this._path,...he(t)],e,n)}}get _tracker(){return this}onUpdate(t){return(this.onUpdate=Ht((t=>this._trackers.on(this._path,t))).F)(t)}[Ut](){return this.onUpdate()}track(t){return(t=he(t)).length?new fe(this._trackers,[...this._path,...t]):this}done(t){this._trackers.done(this._path,t)}}class pe{constructor(){this._tracker=new fe(new de,[])}onUpdate(t){return(this.onUpdate=this._tracker.onUpdate().F)(t)}[Ut](){return this.onUpdate()}get update(){return this._tracker.update}track(t){const e=this._tracker.track(t);return e===this._tracker?this:e}done(t){this._tracker.done(t)}}class ge{constructor(){this._by=Lt()}read(t){return(this.read=Zt((t=>{return this.on({supply:(e=t).supply,receive(t,n){e.receive({onRecurrent(e){t.onRecurrent((t=>e(t)))}},n)}});var e}),(()=>[this.it])).F)(t)}[Ut](){return this.on()}[Ot](){return this.read()}by(t,e){const n=t=>(Tt(t)?t[Ot]():t[Ut]()).to((t=>this.it=t));if(this.byNone(),e){const r=t;this._by=oe(r).consume(((...t)=>{const r=e(...t);if(r)return n(r)}))}else{const e=t;this._by=n(e)}return this._by.whenOff((()=>this._by=Lt())),this}byNone(t){return this._by.off(t),this}done(t){return At(this).off(t),this}}class ye extends ge{constructor(t){super(),this._it=t,this._on=new se}get[Ct](){return At(this._on)}on(t){return(this.on=this._on.on().F)(t)}get it(){return this._it}set it(t){const e=this._it;e!==t&&(this._it=t,this._on.send(t,e))}}function _e(t){return new ye(t)}class me extends ge{constructor(t){super(),this._on=new se,this._it=t}on(t){return(this.on=this._on.on().F)(t)}get[Ct](){return At(this._on)}get it(){return this._it}set it(t){const e=this.it;e!==t&&(this._it=t,this._on.send(t,e))}sync(t,e,n){let r,s,i=t=>c(this,t);"string"==typeof t?("in"===t&&(i=t=>c(t,this)),r=e,s=n):(r=t,s=e);const o=s;if(!o)return i(r);const u=r;return(Tt(u)?Yt(u):oe(u)).consume(((...t)=>{const e=o(...t);return e&&i(e)}));function c(t,e){const n=t.read((t=>{e.it=t})),r=e.on((e=>{t.it=e}));return Et((t=>{r.off(t),n.off(t)})).needs(n).needs(r)}}}class we{name(t,e){if("string"==typeof t)return t;const[n,r]=t;return r.name(e(r),n,this)}}class be extends we{applyAlias(t,e){return`${e}-${t}`}}const ve=new be,xe=new be;class ke extends we{applyAlias(t,e){return`${e}:${t}`}}const $e=new ke;class Se extends we{applyAlias(t,e){return`${t}@${e}`}}const Oe=new Se;class Te{constructor(t,...e){this.url=t,this.aliases=e}get alias(){return this.aliases[0]||"ns"}name(t,e,n=ve){return n.applyAlias(e,t,this)}}function Ce(t){return"string"==typeof t||function(t){return Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&t[1]instanceof Te}(t)}function Fe(t,e){if("string"==typeof t)return"string"==typeof e?Ae(t,e):e[1].url?-1:Ae(t,e[0]);const[n,{url:r}]=t;return"string"==typeof e?r?1:Ae(n,e):Ae(r,e[1].url)||Ae(n,e[0])}function Ae(t,e){return t<e?-1:t>e?1:0}function Ee(){const t=new Map,e=new Map;return function(n){const r=t.get(n.url);if(r)return r;const s=n.alias;let i=0;for(const r of[s,...n.aliases]){const s=e.get(r);if(!s)return t.set(n.url,r),e.set(r,1),r;i||(i=s)}const o=`${s}${++i}`;return t.set(n.url,o),e.set(s,i),o}}class De extends Gt{get F(){return this.to.bind(this)}to(t,e){if(!t)return this;const n=Dt(t),{supply:r}=n;return r.isOff||this._on(n,e),r}once(t,e){return(this.once=Re(jt(this)).F)(t,e)}tillOff(t,e){return Re(Wt(this,t,e))}capture(t,e){return(this.capture=Re(((t,e)=>null==e?this.to(t,!0):"object"==typeof e&&null==e.capture?this.to(t,{...e,capture:!0}):this.to(t,e))).F)(t,e)}instead(t,e){return(this.instead=Re(((t,e)=>{const n=Dt(t);return this.to({supply:n.supply,receive(t,e){e.preventDefault(),n.receive(t,e)}},e)})).F)(t,e)}just(t,e){return(this.just=Re(((t,e)=>{const n=Dt(t);return this.to({supply:n.supply,receive(t,e){e.stopPropagation(),n.receive(t,e)}},e)})).F)(t,e)}last(t,e){return(this.last=Re(((t,e)=>{const n=Dt(t);return this.to({supply:n.supply,receive(t,e){e.stopImmediatePropagation(),n.receive(t,e)}},e)})).F)(t,e)}passive(t,e){return(this.passive=Re(((t,e)=>null==e?this.to(t,{passive:!0}):"boolean"==typeof e?this.to(t,{capture:e,passive:!0}):null==e.passive?this.to(t,{...e,passive:!0}):this.to(t,e))).F)(t,e)}}function Re(t){return new De(t)}var ze;const Pe={onRecurrent:u};class Ue{constructor(t){this[ze]=Et(),this._target=t}on(t){return Re(((e,n)=>{const{supply:r}=e;if(r.needs(At(this)),!r.isOff){const r=t=>e.receive(Pe,t);this._target.addEventListener(t,r,n),e.supply.whenOff((()=>this._target.removeEventListener(t,r)))}}))}dispatch(t){return!At(this).isOff&&this._target.dispatchEvent(t)}done(t){return At(this).off(t),this}}function Me(t){return()=>{throw null!=t?t:new TypeError("Context destroyed")}}ze=Ct;class Ke extends wt{constructor(){super("context-supply")}grow(t){t.insert(t.seed()||(t.hasFallback?t.or:null)||t.context[Ct])}}const qe=new Ke;class Le{constructor(){this._providers=_e([])}provide(t){return this._providers.it=[...this._providers.it,t],()=>{const e=this._providers.it,n=e.indexOf(t);n>=0&&(this._providers.it=e.slice(0,n).concat(e.slice(n+1)))}}seed(t,e=ne()){return this.combine(e,function(t,e){return e.read().keepThru((e=>e.length?re(ee(...tt(tt(T(e),(e=>e(t))),Ne))):$t()),je)}(t,this._providers))}isEmpty(){return!1}combine(t,e){return ee(t,e).keepThru(je)}}function Ne(t){return null==t?ne():function(t){return("object"==typeof t||"function"==typeof t)&&Tt(t)}(t)?Yt(t):ne(t)}function je(...t){return $t(...B(...t))}class Be extends it{get upKey(){return this}seeder(){return new Le}}class Ie extends st{constructor(t,e){super(t.name+":up"),this._key=t,this.grow=t=>{const n=t.fillBy(e);if(n){const e=t.context.get(qe,{or:null});e&&t.insert(n.tillOff(e))}}}get seedKey(){return this._key.seedKey}}class We extends st{constructor(t,{seedKey:e}={}){super(t),this.seedKey=e||new Be(this)}createUpKey(t){return new Ie(this,t)}}class Ve extends We{constructor(t,{seedKey:e,byDefault:n=u}={}){super(t,e),this.byDefault=(t,e)=>n(t,e)||(()=>{throw new ot(this)}),this.upKey=this.createUpKey((t=>{t.insert(t.seed.keepThru(((...e)=>e.length?e[e.length-1]:t.hasFallback&&t.or?re(t.or):re(ne(this.byDefault(t.context,this))))))}))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ne(t.or):t.or}:void 0).to((t=>e=t)).whenOff((t=>e=Me(t))),t.insert(((...t)=>e(...t)))}}class Ge extends We{constructor(t,{seedKey:e,byDefault:n=u}={}){super(t,e),this.byDefault=n}get upKey(){return this}grow(t){const e=t.seed.keepThru(((...e)=>{if(e.length)return kt(e[e.length-1]);let n;if(t.hasFallback)n=t.or;else{const e=this.byDefault(t.context,this);n=e&&ne(e)}return re(null!=n?n:Zt((()=>{throw new ot(this)})))})),n=t.context.get(qe,{or:null});t.insert(n?e.tillOff(n):e)}}const He={by(t={}){let e;return{get node(){return t.node},get window(){return e||(e=t.window||t.node&&((n=t.node).ownerDocument||n).defaultView||window);var n},error(...e){t&&t.error?t.error(...e):console.error(...e)}}}};const Qe=Symbol("render-q");class Je{constructor(t,e){this.q=t,this.schedule=this.doSchedule,this.ref=e||[this,this]}static by(t,e){return t[Qe]||(t[Qe]=new Je(t,e))}add(t){this.q.add(t)}doSchedule(t){this.schedule=()=>{};const e=[],n={get config(){return t},postpone(t){e.unshift(t)}};this.q.schedule((()=>{const t=this.reset();t.suspend(),this.exec(n),this.ref[1]=this.ref[0],e.forEach((t=>this.q.add(t))),n.postpone=t=>this.q.post(t),this.exec(n),t.resume()}))}exec(t){for(;;){const e=this.q.pull();if(!e)break;e(t)}}reset(){return this.ref[0]=Je.by(this.q.reset(),this.ref)}suspend(){this.schedule=t=>{this.scheduled=t,this.schedule=()=>{}}}resume(){this.scheduled?this.doSchedule(this.scheduled):this.schedule=this.doSchedule}}function Ze(t){return e=>{const n=He.by(e),r=Je.by(t.newQueue(n)).ref;let s=[];return t=>{const[e,,i]=s,[o,u]=r;let c=e||u;if(e===u&&!i||e===o)s[1]=t;else{const e=s=[c=i?o:u,t];c.add((t=>{e[2]=!0;try{e[1]({get config(){return n},postpone(e){t.postpone(e)}})}catch(t){n.error(t)}}))}c.schedule(n)}}}const Xe={by({schedule:t,replace:e=(()=>{})}){const n=[];return{schedule:t,add(t){n.push(t)},post(t){n.unshift(t)},pull:()=>n.shift(),reset(){const n=Xe.by({schedule:t,replace:e});return e(n),n}}}},Ye=new WeakMap,tn=t=>{const e=He.by(t);return t=>{const n=[],r={get config(){return e},postpone(t){n.push(t)}};for(s(t);;){const t=n.pop();if(!t)break;s(t)}function s(t){try{t(r)}catch(t){e.error(t)}}}};let en=Ze({newQueue({window:t}){const e=Ye.get(t);if(e)return e;const n=Xe.by({schedule:e=>t.requestAnimationFrame(e),replace:e=>Ye.set(t,e)});return Ye.set(t,n),n}});function nn(t){return en(t)}const rn=new bt("bootstrap-context");class sn extends at{static get[rt](){return rn}}function on(t){return(e,n)=>{const r=e.get(sn);return e===r?t(r,n):r.get(n)}}function un(t,e,n,r){const s=!n,i=r(n?function(t){if(function(t){return void 0===t.value&&void 0===t.writable}(t))return t;const e=Symbol("value"),n=t.value,r={...t,writable:void 0,value:void 0,get(){return e in this?this[e]:n}};return t.writable&&(r.set=function(t){this[e]=t}),delete r.writable,delete r.value,r}(n):function(t,e){const n=Symbol(`${String(e)}:value`),r=t[e];return{configurable:!0,enumerable:!0,get(){return n in this?this[n]:r},set(t){this[n]=t}}}(t,e));if(!s||!i)return i;Object.defineProperty(t,e,i)}function cn(t){return t.nodeType===Node.ELEMENT_NODE}class an{constructor(t){this.symbol=t}own(t){return t.hasOwnProperty(this.symbol)?t[this.symbol]:void 0}of(t){const e=this.own(t),n=s(t),r=n&&this.of(n);return e?r?this.merge([r,e]):e:r}define(t,e){const n=this.own(t),r=e.map((e=>this.meta(e,t))),s=this.merge(n?[n,...r]:r);return Object.defineProperty(t,this.symbol,{configurable:!0,value:s}),t}}class hn{constructor(){this.promise=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}resolve(t){this._resolve(t)}reject(t){this._reject(t)}}const ln=Symbol("feature-def");class dn extends an{constructor(){super(ln)}merge(t){return t.reduce(((t,s)=>({needs:e(r(n(t.needs),s.needs)),has:e(r(n(t.has),s.has)),setup:o(t.setup,s.setup),init:o(t.init,s.init)})),{})}meta(t,e){const n=t[ln];return null==n?t:this.meta("function"==typeof n?t[ln](e):n,e)}}const fn=new dn,pn={[ln]:()=>({})},gn={of:t=>fn.of(t)||{},for:(t,e)=>fn.meta(e,t),merge:(...t)=>fn.merge(t),all:(...t)=>t.reduce(((t,e)=>({[ln]:n=>gn.merge(gn.for(n,t),gn.for(n,e))})),pn),define:(t,...e)=>fn.define(t,e)};function yn(...t){return e=>gn.define(e,...t)}const _n=new bt("feature-context");class mn extends sn{static get[rt](){return _n}whenDefined(t){return this.get(sn).whenDefined(t)}load(t){return this.get(sn).load(t)}}class wn extends Error{constructor(t){super("Circular feature needs: "+t.reduce(((t,[e,n,r])=>(t||e.name)+` ${n} ${r.name}`),"")),this.needs=t}}class bn{[Ot](){return this.read()}}const vn=Symbol("component-def");class xn extends an{constructor(){super(vn)}merge(t){return t.reduce(((t,e)=>({...t,...e,setup:o(t.setup,e.setup),define:o(t.define,e.define),feature:t.feature?e.feature?gn.merge(t.feature,e.feature):t.feature:e.feature})),{})}meta(t,e){const n=t[vn];return null!=n?this.meta("function"==typeof n?t[vn](e):n,e):null!=t[ln]?{feature:gn.for(e,t)}:Ce(t)?{name:t}:t}}const kn=new xn,$n={[vn]:()=>({})},Sn={of:t=>kn.of(t)||{},for:(t,e)=>kn.meta(e,t),merge:(...t)=>kn.merge(t),all:(...t)=>t.reduce(((t,e)=>({[vn]:n=>Sn.merge(Sn.for(n,t),Sn.for(n,e))})),$n),define:(t,...e)=>kn.define(t,e)};function On(...t){const e=e=>Sn.define(e,...t);return e[vn]=()=>Sn.all(...t),e}const Tn=new bt("component-context"),Cn=new bt("component-event-dispatcher",{byDefault(t){const e=t.get(Tn),n=new Ue(e.element);return At(n).needs(e),{dispatch:t=>n.dispatch(t),on:t=>n.on(t)}}}),Fn=new bt("content-root",{byDefault:t=>t.get(Tn).element});class An extends We{constructor(){super("state-updater"),this.upKey=this.createUpKey((t=>t.insert(t.seed.keepThru(((...e)=>{if(e.length){const t=e.reduce(((t,e)=>o(e,t)),u);return(e,n,r)=>t(he(e),n,r)}return t.hasFallback&&t.or?re(t.or):u})))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ne(t.or):t.or}:void 0).to((t=>e=t)).whenOff((()=>e=u)),t.insert(((t,n,r)=>e(t,n,r)))}}const En=new An,Dn=Symbol("component-context");class Rn extends at{constructor(){super(),this.updateState=(t,e,n)=>{this.get(En)(t,e,n)}}static get[rt](){return Tn}static of(t){const e=t[Dn];if(!e)throw TypeError(`No component context found in ${String(t)}`);return e}get contentRoot(){return this.get(Fn)}on(t){return this.get(Cn).on(t)}dispatchEvent(t){this.get(Cn).dispatch(t)}}class zn extends Event{get context(){return Rn.of(this.target)}}const Pn=Symbol("anonymous-component-property");function Un(t){const e=({get:e,set:n},r=Pn,s)=>On({[vn](i){const o=t({type:i,key:r,readable:!0,writable:s,enumerable:!1,configurable:!1,get:t=>e(t,r),set:(t,e)=>n(t,e,r)});return o&&o.componentDef||{}}}),n=(t,n)=>e({get:(e,n)=>t(e,n)},n,!1),r=(e,n,r)=>un(e,n,r,(r=>{const{get:s,set:i}=r,o=e.constructor,{get:u,set:c,configurable:a,enumerable:h,componentDef:l={}}=t({type:o,key:n,readable:!!r.get,writable:!!r.set,enumerable:!!r.enumerable,configurable:!!r.configurable,get:s?t=>s.call(t):Mn(n),set:i?(t,e)=>i.call(t,e):Kn(n)})||{};Sn.define(o,l);const d={...r,configurable:null!=a?a:r.configurable,enumerable:null!=h?h:r.enumerable};return(u||c)&&(d.get=u&&function(){return u(this,n)},d.set=c&&function(t){c(this,t,n)}),d}));return r.With=(t,n)=>e(t,n,!0),r.By=n,r.As=(t,e)=>n(c(t),e),r.Bind=(t,n=Pn)=>{const r=Symbol(`${String(n)}:accessor`),s=e=>{const s=e[r];if(s)return s;const i=t(e,n);return e[r]={get:i.get?i.get.bind(i):Mn(n),set:i.set?i.set.bind(i):Kn(n)}};return e({get:t=>s(t).get(),set:(t,e)=>s(t).set(e)},n,!0)},r}function Mn(t){return()=>{throw new TypeError(`"${String(t)}" is not readable`)}}function Kn(t){return()=>{throw new TypeError(`"${String(t)}" is not writable`)}}const qn=new bt("bootstrap-context-registry");class Ln extends lt{constructor(){super(),this.provide({a:Ln,is:this}),this.values=this.newValues()}static get[rt](){return qn}static create(){return new Ln}}const Nn=new bt("per-component-registry",{byDefault:on((()=>new jn))});class jn extends lt{}const Bn=new bt("per-definition-registry",{byDefault:on((t=>new In(t)))});class In extends lt{}const Wn=Symbol("post-def-setup");function Vn(t){if(t.hasOwnProperty(Wn))return t[Wn];const e=_e(),n=new se,r=ue(e.read().thru((t=>t?$t(t):St())),n),i=s(t,(t=>vn in t));if(i){const t=Vn(i);r.to((e=>t.send(e)))}const o={on:r,send(t){n.send(t)},setup(t){e.it=t}};return Object.defineProperty(t,Wn,{value:o}),o}const Gn=new bt("window",{byDefault:()=>window}),Hn=new bt("bootstrap-root",{byDefault:t=>t.get(Gn).document.body}),Qn=new bt("default-namespace-aliaser");class Jn extends We{constructor(){super("default-render-scheduler"),this.upKey=this.createUpKey((t=>t.insert(t.seed.keepThru(((...e)=>e.length?Zn(t.context,e[e.length-1]):t.hasFallback&&t.or?re(t.or):Zn(t.context,nn))))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ne(t.or):t.or}:void 0).to((n=>e=Zn(t.context,n))).whenOff((t=>e=Me(t))),t.insert(((...t)=>e(...t)))}}function Zn(t,e){return(n={})=>e({...n,window:n.window||t.get(Gn)})}const Xn=new Jn;class Yn extends We{constructor(){super("element-adapter"),this.upKey=this.createUpKey((t=>t.insert(t.seed.keepThru(((...e)=>{const n=e.reduce(((t,e)=>n=>t(n)||e(n)),tr);return n!==tr?n:t.hasFallback&&t.or?re(t.or):tr})))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ne(t.or):t.or}:void 0).to((t=>e=t)).whenOff((t=>e=Me(t))),t.insert((t=>e(t)))}}function tr(t){return t[Dn]}const er=new Yn,nr=new Ve("element-observer",{byDefault:on((t=>{const e=t.get(er);class n extends MutationObserver{constructor(t){super((n=>{n.forEach((t=>{F(T(t.removedNodes),(t=>{var e;return null===(e=function(t){var e;return null===(e=t[Dn])||void 0===e?void 0:e.mount}(t))||void 0===e?void 0:e.checkConnected()})),F(V(t.addedNodes,cn),(t=>{var n,r;return null===(r=null===(n=e(t))||void 0===n?void 0:n.mount)||void 0===r?void 0:r.checkConnected()}))})),t(n,this)}))}observe(t,e){super.observe(t,{...e,childList:!0})}}return t=>new n(t)}))});const rr=Symbol("definition-context");function sr(t){if(!t.hasOwnProperty(rr))throw new TypeError(`Component is not defined: ${t}`);return t[rr]}const ir=new bt("custom-elements",{byDefault:on((function(t){const e=t.get(Gn).customElements,n=t.get(Qn);return new class extends or{define(t,r){if(Ce(t))return void e.define(xe.name(t,n),r);const s=sr(t),{name:i,extend:o}=s.elementDef;i?o&&o.name?e.define(xe.name(i,n),r,{extends:o.name}):e.define(xe.name(i,n),r):cr(t).resolve(void 0)}whenDefined(t){if(Ce(t))return e.whenDefined(xe.name(t,n));const r=sr(t),{name:s}=r.elementDef;return s?e.whenDefined(xe.name(s,n)):cr(t).promise}}}))});class or{static get[rt](){return ir}}const ur=Symbol("component-resolver");function cr(t){return t.hasOwnProperty(ur)?t[ur]:t[ur]=new hn}const ar=new bt("definition-context"),hr=new bt("element-def",{byDefault(t){const e=t.get(ar).componentType,{name:n,extend:r}=Sn.of(e),s={get type(){return r&&r.type||t.get(Gn).HTMLElement},get name(){return r&&r.name}};return{get name(){return n},get extend(){return s}}}});class lr extends at{static get[rt](){return ar}get elementDef(){return this.get(hr)}connectTo(t){const e=this.mountTo(t);return e.connect(),e}}class dr extends Rn{constructor(t,e){super(),this._definitionContext=t,this.element=e,this._status=_e(0);const n=t._newComponentRegistry();n.provide({a:Rn,is:this}),this.get=n.newValues().get}get componentType(){return this._definitionContext.componentType}get component(){return this._component()}get settled(){return this._status.it>=3&&!At(this).isOff}get connected(){return this._status.it>=4&&!At(this).isOff}get[Ct](){return At(this._status)}_component(){throw new TypeError("Component is not constructed yet. Consider to use a `whenReady()` callback")}whenReady(t){return(this.whenReady=this._status.read().thru_((t=>t?$t(this):St())).once().F)(t)}settle(){2===this._status.it&&(this._status.it=3)}whenSettled(t){return(this.whenSettled=this._status.read().thru_((t=>t>=3?kt(this):St())).once().F)(t)}whenConnected(t){return(this.whenConnected=this._status.read().thru_((t=>t>=4?kt(this):St())).once().F)(t)}destroy(t){try{this._status.done(t)}finally{delete this.component[Dn],delete this.element[Dn],this._component=fr,function(t){const{parentNode:e}=t;e&&e.removeChild(t)}(this.element)}}_createComponent(){const t=this._definitionContext._whenComponent;let e=0;this.element[Dn]=this,t.readNotifier.once((t=>e=t(this,e))),this.whenConnected((()=>{t.readNotifier.to({supply:Et().needs(this),receive:(t,n)=>{e=n(this,e)}})})),this._definitionContext._elementBuilder.components.send(this);const n=function(t){const e=t.componentType,n=e.prototype,r=n[Dn];n[Dn]=t;try{const s=new e(t);return s[Dn]=t,s}finally{n[Dn]=r}}(this);return this._component=c(n),this._status.it=1,this}_connect(){this._status.it=4}_created(){this._status.it<2&&(this._status.it=2),this.whenConnected((()=>this.dispatchEvent(new zn("wesib:component",{bubbles:!0}))))}}function fr(){throw new TypeError("Component destroyed already")}class pr extends class{get component(){return this.context.component}get element(){return this.context.element}}{constructor(t){super(),this.context=t}get connected(){return this.context.connected}connect(){this.context._connect()}checkConnected(){const t=this.context.element,e=t.ownerDocument,n=null!=e&&e.contains(t);return n!==this.connected&&(n?this.connect():this.context.destroy()),n}}class gr extends dr{constructor(t,e){super(t,e),this.mount=this.mount=new pr(this)}}class yr extends dr{get mount(){}}class _r{constructor(){const t=_e(0),e=new se;this.onCreated=Ht((n=>{const r=t.it+1;e.on({supply:n.supply,receive:(t,e,s)=>{s<r&&n.receive({onRecurrent(e){t.onRecurrent((t=>e(t)))}},e)}}),++t.it})),this.readNotifier=t.read().keepThru_((t=>(n,r)=>(e.send(n,r),t)))}}class mr extends lr{constructor(t,e,n){var r,s;super(),this._bsContext=t,this._elementBuilder=e,this.componentType=n,this._whenComponent=new _r,this._ready=_e(!1),this._whenReady=this._ready.read().thru((t=>t?$t():St())),this._def=Sn.of(n);const i=new In(t.get(Bn).seeds());i.provide({a:lr,is:this}),this.get=i.newValues().get;const o=t.get(Nn).append((t=>this.get(t)));this._perComponentRegistry=new jn(o.seeds());const u=this.whenReady().F,c=this.whenComponent().F,a={get componentType(){return n},get whenReady(){return u},get whenComponent(){return c},perDefinition:t=>i.provide(t),perComponent:t=>this._perComponentRegistry.provide(t)};null===(s=(r=this._def).setup)||void 0===s||s.call(r,a),Vn(n).setup(a)}get elementType(){return this._elementType()}whenReady(t){return(this.whenReady=this._whenReady.thru_(c(this)).once().F)(t)}mountTo(t){if(t[Dn])throw new Error(`Element ${String(t)} already bound to component`);const e=new gr(this,t);e._createComponent();const{mount:n}=e;return n.checkConnected(),e._created(),e.settle(),n}whenComponent(t){return(this.whenComponent=this._whenComponent.onCreated.F)(t)}perComponent(t){return this._perComponentRegistry.provide(t)}_newComponentRegistry(){return new jn(this._perComponentRegistry.seeds())}_elementType(){throw new Error("Custom element class is not constructed yet. Consider to use a `whenReady()` callback")}_define(){var t,e;null===(e=(t=this._def).define)||void 0===e||e.call(t,this),this._elementBuilder.definitions.send(this),this._elementType=c(function(t){const e=t.get(hr);class n extends e.extend.type{constructor(){super();const e=new yr(t,this);e._createComponent(),e._created()}connectedCallback(){var t;null===(t=super.connectedCallback)||void 0===t||t.call(this),this[Dn]._connect()}disconnectedCallback(){var t;this[Dn].destroy(),null===(t=super.disconnectedCallback)||void 0===t||t.call(this)}}return n}(this)),this.componentType[rr]=this,this._ready.it=!0}}const wr=new bt("element-builder",{byDefault:on((function(t){return{definitions:new se,components:new se,buildElement(e){const n=new mr(t,this,e);return n._define(),n}}}))});const br=c(u);class vr{constructor(t){this._context=t,this._definitionQueue=[],t.whenReady((()=>{this._definitionQueue.forEach((t=>t())),delete this._definitionQueue}))}get customElements(){return this._context.get(or)}define(t){this._definitionQueue.push((()=>{const e=this._context.get(wr).buildElement(t);this.customElements.define(t,e.elementType)}))}}class xr extends mn{constructor(t,e){super(),this._bsContext=t,this._loader=e,this._unloader=function(){const t=[];let e=e=>{const n=e();return t.unshift(n),n};return{supply:Et((()=>{e=br,t.forEach((t=>t())),t.length=0})),add:t=>e(t)}}();const n=new lt(t);n.provide({a:mn,is:this}),this.get=n.newValues().get,this._componentRegistry=new vr(this)}get feature(){return this._loader.request.feature}whenReady(t){return(this.whenReady=te({st:this._loader.state,bs:_e().by(this._bsContext.whenReady())}).thru((({st:[t],bs:[e]})=>e&&t?kt(this):St())).once().F)(t)}onDefinition(t){return(this.onDefinition=this._bsContext.get(wr).definitions.on().tillOff(this._unloader.supply).F)(t)}onComponent(t){return(this.onComponent=this._bsContext.get(wr).components.on().tillOff(this._unloader.supply).F)(t)}provide(t){return this._unloader.add((()=>this._bsContext.get(Ln).provide(t)))}perDefinition(t){return this._unloader.add((()=>this._bsContext.get(Bn).provide(t)))}perComponent(t){return this._unloader.add((()=>this._bsContext.get(Nn).provide(t)))}setupDefinition(t){return function(t,e){const{on:n}=Vn(t);return Ht((t=>{n.to({supply:t.supply.needs(e.supply),receive(n,r){const s=r.whenReady().tillOff(e.supply).F,i=r.whenComponent().tillOff(e.supply).F;t.receive(n,{get componentType(){return r.componentType},get whenReady(){return s},get whenComponent(){return i},perDefinition:t=>e.add((()=>r.perDefinition(t))),perComponent:t=>e.add((()=>r.perComponent(t)))})}})}))}(t,this._unloader)}define(t){this._componentRegistry.define(t)}}const kr=Symbol("feature-key");class $r extends We{static of(t){return t.hasOwnProperty(kr)?t[kr]:t[kr]=new $r(t)}get upKey(){return this}constructor(t){super(`feature:${t.name}`)}grow(t){var e,n;t.insert((e=t.context.get(sn),n=t.seed.keepThru(Sr),Zt((t=>{let r,s=ne(),i=Promise.resolve("idle");return te({clause:n,deps:Or(e,n)}).keepThru_((({clause:[t],deps:n})=>{if(!t)return $t();const[o,,u]=t;if(o.feature===r)return re(s);if(r=o.feature,u!==r)return re(s=e.get($r.of(r)).keepThru_((t=>(t.to(i),i=t.stage,t))));const c=new Cr(e,o,n).to(i),a=ne(c);return re(s=Zt((t=>a.to(t).whenOff((()=>{i=c.unload()})))).share())})).to(t)})).keepThru(function(){let t=null;return e=>t===e?St():(t=e,e?$t(e):$t())}())))}}function Sr(...t){let e,n=!1;for(const r of t)switch(r[1]){case"is":n=!0,e||(e=r);break;case"has":e=r;break;case"needs":n=!0}return n?e:void 0}function Or(t,e){return e.keepThru_((e=>{if(!e)return $t();const[{def:r}]=e,s=n(r.needs);return s.size?re(ee(...[...s].map((e=>t.get($r.of(e))))).keepThru_(Tr)):$t()}))}function Tr(...t){return $t(...t.map((([t])=>t)).filter(l))}class Cr{constructor(t,e,n){this.bsContext=t,this.request=e,this.deps=n,this.state=_e(!1),this.down=new Promise((t=>this._down=t)),this._stage=Promise.resolve(new Ar(this))}get stage(){return this._stage.then((t=>t.after))}get ready(){return this.state.it}to(t){const e=this._stage;return this._stage=t.then((t=>e.then((e=>e[t]())))),this}async setup(){await(this._stage=this._stage.then((t=>t.setup())))}async init(){await(this._stage=this._stage.then((t=>t.init())))}async unload(){const t=this._stage;delete this._stage;const e=await t,n=await e.stop();return this._down(),n}}class Fr{constructor(t,e=(()=>Promise.resolve())){this.loader=t,this._stop=e}idle(){return Promise.resolve(this)}stop(){return this._stop().then((()=>this.after))}perDep(t){const{deps:e}=this.loader;return Promise.all(e.map((e=>t(e))))}}class Ar extends Fr{get after(){return"idle"}async setup(){var t;await this.perDep((t=>t.setup()));const{bsContext:e,request:{def:n}}=this.loader,r=new xr(e,this.loader),s=r._unloader.supply;return null===(t=n.setup)||void 0===t||t.call(n,r),new Er(this.loader,r,(()=>Promise.resolve(s.off())))}init(){return this.setup().then((t=>t.init()))}}class Er extends Fr{constructor(t,e,n){super(t,n),this._context=e}get after(){return"setup"}setup(){return Promise.resolve(this)}async init(){var t;await this.perDep((t=>t.init()));const{request:{def:e}}=this.loader;return null===(t=e.init)||void 0===t||t.call(e,this._context),new Dr(this)}}class Dr extends Fr{get after(){return"init"}constructor(t){super(t.loader,(()=>t.stop())),t.loader.state.it=!0}setup(){return Promise.resolve(this)}init(){return Promise.resolve(this)}}class Rr{constructor(t,e,n){this._requester=t,this.feature=e,this._revoke=n,this._uses=0,this.def=function(t){let e=gn.of(t);if(vn in t){e=gn.merge(e,{init(e){e.define(t)}});const{feature:n}=Sn.of(t);n&&(e=gn.merge(e,n))}return e}(e)}request(t){const e=this._requester,{registry:r}=e,s=[this,"is",this.feature];this._revokeBy(r.provide({a:$r.of(this.feature),is:s}));for(const s of n(this.def.has)){const n=[this,"has",s];this._revokeBy(r.provide({a:$r.of(s),is:n}));const i=e.request(s,[...t,n]);this._revokeBy((()=>i.unuse()))}for(const s of n(this.def.needs)){const n=[this,"needs",s],i=e.request(s,[...t,n]);this._revokeBy((()=>i.unuse())),this._revokeBy(r.provide({a:$r.of(s),is:n}))}return this._uses=1,this}reuse(t){if(!this._uses)throw new wn(t.map((([{feature:t},e,n])=>[t,e,n])));return++this._uses,this}unuse(){--this._uses||this._revoke()}_revokeBy(t){this._revoke=o(t,this._revoke)}}const zr=new bt("feature-requester",{byDefault:on((t=>new Pr(t)))});class Pr{constructor(t){this._map=new Map,this.registry=t.get(Ln)}static get[rt](){return zr}request(t,e=[]){const n=this._map.get(t);if(n)return n.reuse(e);const r=new Rr(this,t,(()=>this._map.delete(t)));return this._map.set(t,r),r.request(e)}}const Ur=Symbol("when-defined");const Mr=Symbol("attribute");function Kr(t){return[Mr,t]}function qr(t,e=!0){if(!1===e)return u;if(!0===e||"function"==typeof e){const n=Kr(t),r=!0===e?Lr:e;return(t,e,s)=>r(t,n,e,s)}return(t,n,r)=>Lr(t,e,n,r)}function Lr(t,e,n,r){Rn.of(t).updateState(e,n,r)}function Nr(t){let e;for(let n=0;n<t.length;++n){const r=t[n];r<="Z"&&r>="A"?(e||(e=t.substring(0,n)),e+="-"+r.toLowerCase()):e&&(e+=r)}return e||t}const jr=new bt("attribute-registry",{byDefault:t=>new Br(t.get(lr))});class Br{constructor(t){this._context=t,this.attrs=new Map,t.whenReady((({elementType:t})=>this.define(t))),t.whenComponent((({mount:t})=>{t&&this.mount(t)}))}declareAttribute({name:t,change:e}){this.attrs.set(t,o(this.attrs.get(t),e))}define(t){const{attrs:e}=this;e.size&&(Object.defineProperty(t,"observedAttributes",{configurable:!0,enumerable:!0,value:Ir(t,[...e.keys()])}),Object.defineProperty(t.prototype,"attributeChangedCallback",{configurable:!0,enumerable:!0,value:Wr(t,e)}))}mount(t){const{element:e}=t,{attrs:n}=this,r=[...n.keys()];if(!r.length)return;new(0,this._context.get(Gn).MutationObserver)((t=>t.forEach((t=>{const r=t.attributeName;return n.get(r)(Rn.of(e).component,e.getAttribute(r),t.oldValue)})))).observe(e,{attributes:!0,attributeFilter:r,attributeOldValue:!0})}}function Ir(t,e){const n=t.observedAttributes;if(Array.isArray(n)){const t=new Set(n);e.forEach((e=>t.add(e))),e=[...t]}return e}function Wr(t,e){const n=t.prototype.attributeChangedCallback;return n?function(t,r,s){const i=e.get(t);i?i(Rn.of(this).component,s,r):n.call(this,t,r,s)}:function(t,n,r){e.get(t)(Rn.of(this).component,r,n)}}function Vr(t){return Un((({type:e,key:n})=>{const r=function(t,e,n){let r,s;if("string"==typeof n)r=Nr(n),s=qr(r);else{if(n&&n.name)r=Nr(n.name);else{if("string"!=typeof e)throw new TypeError(`Attribute name is required as property key is not a string: ${t.constructor.name}.prototype.${String(e)}`);r=Nr(e)}s=qr(r,n&&n.updateState)}return{name:r,change:s}}(e.prototype,n,t),{name:s}=r;return{componentDef:{define(t){t.get(jr).declareAttribute(r)}},get:t=>Rn.of(t).element.getAttribute(s),set(t,e){const{element:n}=Rn.of(t);null!=e?n.setAttribute(s,e):n.removeAttribute(s)}}}))}class Gr extends wt{constructor(){super("component-state")}grow(t){const e=t.seed();let n;if(null!=e)n=e,t.insert(n);else{if(t.hasFallback)return;n=new Qr,At(t.context.get(Rn)).whenOff((t=>n.done(t))),t.insert(n)}t.setup((({registry:t})=>{t.provide({a:En,is:n.update})}))}}const Hr=new Gr;class Qr extends pe{static get[rt](){return Hr}}var Jr;class Zr extends ge{constructor(t,e,n){super(),this._context=t,this._name=e,this._path=n,this[Jr]=Et()}get it(){return this._context.element.getAttribute(this._name)}set it(t){At(this).isOff||(null==t?this._context.element.removeAttribute(this._name):this._context.element.setAttribute(this._name,t))}on(t){return(this.on=this._context.get(Qr).track(this._path).onUpdate().thru(((t,e,n)=>$t(e,n))).tillOff(this).F)(t)}}Jr=Ct;const Xr=Symbol("dom-property");const Yr=Symbol("render"),ts={spec:(t,e)=>function(t,...e){return"function"==typeof t?t(...e):t}(e,t),fulfill(t,e={}){const{on:n=e.on,error:r}=t;return{on:n,error:r?r.bind(t):e.error&&e.error.bind(e)}},trigger(t,e={}){const{on:n=[]}=e;if("object"==typeof n&&Mt(n))return oe(n).tillOff(t);const r=t.get(Qr).track(n).onUpdate().tillOff(t);return Array.isArray(n)&&!n.length?r.thru_((t=>t[0]===Yr?St:$t())):r}};class es{constructor(t){this._context=t,this._renders=new Set}renderBy(t,e={}){const n=ts.spec(this._context,e),r=ts.trigger(this._context,n),s=this._context.get(Xn)({...ts.fulfill(n),node:this._context.element}),i="connected"===n.when;let o=1;const c=i?()=>this._context.connected&&l():()=>this._context.settled&&l(),a=r.to(c).needs(this._context).whenOff((function(){2===o&&s(u);o=-1}));(i?this._context.whenConnected():this._context.whenSettled()).to((()=>o&&l()));const h=tn();return this._renders.add(d),a.whenOff((()=>this._renders.delete(d)));function l(){o=2,s(f)}function d(){h(f)}function f(e){if(o>0)for(o=0;;){const n=t(e);if(n===t||"function"!=typeof n)break;t=n}}}renderNow(){this._renders.forEach((t=>t()))}}const ns=new bt("element-render-ctl",{byDefault:t=>new es(t.get(Rn))});const rs=new bt("element-render-scheduler",{byDefault:function(t){const e=t.get(ns);return(t={})=>{const n=_e(u);return e.renderBy((t=>{n.it(t)}),ts.fulfill({on:n.on()},t)),t=>{n.it=e=>t(e)}}}});function ss(t){return Un((({get:e})=>({componentDef:{define(n){n.whenComponent((n=>{n.whenReady((()=>{const{component:r}=n,s=e(r).bind(r);n.get(ns).renderBy(s,t)}))}))}}})))}const is=new bt("shadow-content-root");class os extends Event{get shadowRoot(){return this.target.shadowRoot}}const us=new Ve("shadow-root-builder",{byDefault:()=>cs});function cs(t,e){const n=function(t,e){const n=t.shadowRoot;if(n)return n;if("attachShadow"in t)return t.attachShadow(e);return}(t.element,e);return n&&(n[Dn]=t,t.whenConnected((()=>t.dispatchEvent(new os("wesib:shadowAttached",{bubbles:!0}))))),n}const as={mode:"open"};function hs(t=as){return On({setup(e){e.perComponent({a:is,by:e=>e.get(us)(e,t)}),e.perComponent({a:Fn,by:t=>t.get(is,{or:null})})}})}const ls=new Te("https://wesib.github.io/ns","b","wesib");class ds extends Set{constructor(t){super(),this._added=new Set(t),this._removed=new Set,this._added.forEach((t=>this.add(t)))}add(t){return this.has(t)||(this._added.add(t),this._removed.delete(t),super.add(t)),this}delete(t){return!!super.delete(t)&&(this._added.delete(t),this._removed.add(t),!0)}clear(){this._added.clear(),this.forEach((t=>this._removed.add(t))),super.clear()}delta(t,e=[]){return fs(this)(t,e),this}redelta(t){return("function"==typeof t?t:fs(t))([...this._added],[...this._removed]),this}undelta(){return this._added.clear(),this._removed.clear(),this}}function fs(t){return(e,n)=>{for(const e of n)t.delete(e);for(const n of e)t.add(n)}}const ps=Symbol("in-aspect"),gs={instance:null,convertTo:u};function ys(t,e,n,r,s){return void 0===r&&(r=n(t,s)),{instance:r,convertTo:r=>ys(r,e,n,void 0,t),attachTo:r=>ys(r,e,n,t.aspect(e)||n(r))}}function _s(t,e,n=null){return ys(t,e,c(null),n)}function ms(t){return{instance:t,convertTo(){return this}}}const ws=new Te("https://surol.github.io/input-aspects/ns","inasp","input-aspects"),bs={applyTo:()=>ms(Ee())},vs={get[ps](){return bs},to:t=>({applyAspect:e=>e===bs?ms(t):void 0})},xs={applyTo:()=>ms(nn)},ks={get[ps](){return xs},to:t=>({applyAspect:e=>e===xs?ms(t):void 0})};function $s(t,...e){if(!t)return Ts;const n=Cs(t);if(!e.length)return n;const r=e.map(Cs);return(t,e)=>{const s=n(t,e),i=L(B([s],V(r.map((n=>n(t,e))),l)),((t,e)=>e.applyAspect?n=>t(n)||e.applyAspect(n):t),u);return function(t){return!t.set}(s)?{applyAspect:i}:{set:s.set.bind(s),get:s.get.bind(s),applyAspect:i}}}function Ss(t){return t?(e=t,Array.isArray(e)?$s(...t):$s(t)):$s();var e}const Os={applyAspect(){}};function Ts(){return Os}function Cs(t){return"function"==typeof t?t:c(t)}class Fs extends ge{constructor(){super(...arguments),this._aspects=new Map}aspect(t){return this._aspect(t[ps]).instance}setup(t,e=u){return ps in t?e(this.aspect(t),this):t(this),this}convert(t,...e){return new As(this,$s(t,...e))}_aspect(t){const e=this._aspects.get(t);if(e)return e;const n=this._applyAspect(t)||t.applyTo(this);return this._aspects.set(t,n),n}_applyAspect(t){}}class As extends Fs{constructor(t,e){super(),this._on=new se,this._supply=Et().needs(t);let n,r=0;const s=e(t,this);let o,u,c;!function(t){return!t.set}(s)?(o=s.set,u=s.get,c=e=>t._aspect(e).convertTo(this)):(o=i,u=i,c=e=>{const n=t._aspect(e);return n.attachTo?n.attachTo(this):n.convertTo(this)}),this._applyAspect=t=>{var e;return(null===(e=s.applyAspect)||void 0===e?void 0:e.call(s,t))||c(t)},this._it=_e([o(t.it),0]),At(this._it).needs(this._supply),this._it.on((([t],[e])=>{t!==e&&this._on.send(t,e)})).cuts(this._on),t.on((t=>{t!==n&&(this._it.it=[o(t),++r])})).cuts(this),this._it.on((([e,s])=>{if(s!==r){r=s,n=u(e);try{t.it=n}finally{n=void 0}}}))}get[Ct](){return this._supply}get it(){return this._it.it[0]}set it(t){const[e,n]=this._it.it;t!==e&&(this._it.it=[t,n+1])}on(t){return(this.on=this._on.on().F)(t)}}class Es extends Fs{constructor(t){super(),this._control=t}get[Ct](){return this._supply||(this._supply=Et().needs(this._control))}get it(){return this._control.it}set it(t){this._control.it=t}on(t){return(this.on=this._control.on().F)(t)}}class Ds extends Fs{constructor({aspects:t}){super(),this._aspectConversion=Ss(t)(new Es(this),this)}_applyAspect(t){return this._aspectConversion.applyAspect(t)||super._applyAspect(t)}}const Rs={applyTo:t=>_s(t,zs)};class zs extends Ds{static get[ps](){return Rs}_applyAspect(t){return t===Rs?_s(this,zs,this):super._applyAspect(t)}}class Ps{[Ut](){return this.on()}[Ot](){return this.read()}}const Us={applyTo:t=>ms(new Ks(t))};class Ms{static get[ps](){return Us}[Ut](){return this.on()}[Ot](){return this.read()}}class Ks extends Ms{constructor(t){super(),this._control=t,this._map=new Map,this._on=new se,At(this._on).needs(this._control)}add(t){const e=this._map.get(t);if(e)return e;const n=Et((()=>{this._map.delete(t),this._on.send([],[t])}));return this._map.set(t,n),this._on.send([t],[]),n.needs(this._control).needs(t.parent)}on(t){return(this.on=this._on.on().F)(t)}read(t){const e=()=>this._map.keys();return(this.read=Xt(this.on().thru(e),(()=>[e()])).F)(t)}}const qs={applyTo:t=>_s(t,Ls)};class Ls extends Ds{static get[ps](){return qs}_applyAspect(t){return t===qs?_s(this,Ls,this):super._applyAspect(t)}}const Ns={applyTo:t=>ys(t,js,(t=>new Ws(t)))};class js{static get[ps](){return Ns}[Ut](){return this.on()}[Ot](){return this.read()}static hasData(t){return"off"!==t&&"-"!==t[0]}done(t){return this.own.done(t),this}}class Bs extends ge{constructor(t){super(),this._tracker=_e(t?function(t){return null!=t.getAttribute("disabled")?"off":null!=t.getAttribute("readonly")?"ro":"on"}(t.element):"on")}get[Ct](){return At(this._tracker)}get it(){return this._tracker.it}set it(t){switch(t){case"off":case"ro":case"-on":case"-ro":break;default:t="on"}this._tracker.it=t}on(t){return(this.on=this._tracker.on().F)(t)}}class Is{constructor(){this._all=new Set,this._on=new se;const t=Xt(this._on.on().thru((()=>this._all)),a(this._all));this.read=t.keepThru((t=>re(ee(...t))),Gs)}add(t){const e=Et((()=>{this._all.delete(t),this._on.send()}));return this._all.add(t),this._on.send(),e}}class Ws extends js{constructor(t){super(),this._control=t,this._derived=new Is;const e=t.aspect(Ls);this.own=new Bs(e),At(this.own).needs(t),this.derive(t.aspect(Ms).read().keepThru_(Vs)),e&&this.read((t=>function(t,e){switch(e){case"off":t.setAttribute("disabled","");break;case"ro":case"-ro":t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly","");break;default:t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly",""),t.removeAttribute("readonly")}}(e.element,t)))}read(t){let e="on";return(this.read=Xt(te({derived:this._derived.read,own:this.own}).thru((({derived:[t],own:[n]})=>{let r;if("off"===n||"off"===t)r="off";else{let e=!1;"-"===n[0]&&(e=!0,n=n.substring(1)),"-"===t[0]&&(e=!0,t=t.substring(1)),r="ro"===t?"ro":n,e&&(r="-"+r)}return e===r?St():$t(e=r)})),a(e)).F)(t)}on(t){let e="on";return(this.on=this.read().thru((t=>{const n=e;return n===t?St():$t(e=t,n)})).F)(t)}derive(t){return this._derived.add(Yt(Tt(t)?t:t(this._control)).tillOff(this._control)).needs(this._control)}}function Vs(t){const e=E(t);if(!e.length)return $t("on");return re(ee(...e.map((({parent:t})=>t.aspect(js)))).keepThru_(Gs))}function Gs(...t){return function(...t){let e=!1,n=!1;for(const r of t)switch(r){case"off":return"off";case"ro":e=!0;break;case"-on":n=!0;break;case"-ro":n=!0,e=!0}return n?e?"-ro":"-on":e?"ro":"on"}(...B(...t))}const Hs={applyTo:t=>ys(t,Qs,(t=>te({value:t,mode:t.aspect(js)}).keepThru((({value:[t],mode:[e]})=>js.hasData(e)?$t(t):$t()))))},Qs={get[ps](){return Hs}},Js={applyTo:t=>_s(t,Zs)};class Zs extends zs{static get[ps](){return Js}_applyAspect(t){return t===Js?_s(this,Zs,this):super._applyAspect(t)}}class Xs extends Ps{remove(t){this.set(t,void 0)}}const Ys={};class ti{constructor(t){this._map=t,this._it=tt(j((()=>this._map.values())),(([t])=>t)),this._entriesIt=tt(this._map,(([t,[e]])=>[t,e]))}get(t){const e=this._map.get(t);return e&&e[0]}[Symbol.iterator](){return this[d]()}[d](t){return this._it[d](t)}entries(){return p(this._entriesIt)}}class ei{constructor(t){this._controls=t,this._supply=Et(),this._map=new Map}set(t,e,n,r){const s=this._map.get(t);let i;if(e){i=Et();const o=this.newEntry(t,e,i);let u=!0;s&&(s[0]===e?u=!1:r.push([t,s])),u?(this.modify().set(t,o),n.push([t,o])):this._map.set(t,o)}else i=Lt(),s&&(r.push([t,s]),this.modify().delete(t));return s&&s[1].off(Ys),i}newEntry(t,e,n){return[e,Et((e=>{e!==Ys&&this._controls.remove(t)})).needs(this._supply).needs(n).whenOff((t=>n.off(t===Ys?void 0:t)))]}modify(){if(this._shot){const t=new Map;F(this._map.entries(),(([e,n])=>t.set(e,n))),this._shot=void 0,this._map=t}return this._map}snapshot(){return this._shot||(this._shot=new ti(this._map))}clear(){const t=[],e=[];return F(this._map.keys(),(n=>this.set(n,void 0,t,e))),e}}class ni extends Xs{constructor(t){super(),this._group=t,this._updates=new se;this._map=new ei(this),this._map._supply.needs(t.read((t=>{this.read().once((e=>{const n=new Set;F(nt(t),(([t,r])=>{n.add(t);const s=e.get(t);s&&(s.it=r)})),F(e.entries(),(([t,e])=>{n.has(t)||(e.it=void 0)}))}))})))}on(t){return(this.on=this._updates.on().thru(((t,e)=>$t(t.map(ri),e.map(ri)))).F)(t)}read(t){return(this.read=Xt(this._updates.on().thru((()=>this._map.snapshot())),(()=>[this._map.snapshot()])).F)(t)}set(t,e){const n=this._group,r=[],s=[];let i;return"object"==typeof t?(i=Et(),F(nt(t),(([t,e])=>{this._map.set(t,e,r,s).needs(i)}))):i=this._map.set(t,e,r,s),(r.length||s.length)&&(this._updates.send(r,s),r.length&&function(){let t;r.forEach((e=>{const[r,[s,i]]=e;s.aspect(Ms).add({parent:n}).needs(i).cuts(i);const o=s.it;if(t)t[r]=o;else{const e=n.it;e[r]!==o&&(t={...e,[r]:o})}})),t&&(n.it=t);r.forEach((t=>{const[e,[r,s]]=t;r.read().tillOff(s).to((t=>{n.it[e]!==t&&(n.it={...n.it,[e]:t})})).cuts(s)}))}()),i}clear(){const t=this._map.clear();t.length&&this._updates.send([],t)}}function ri([t,[e]]){return[t,e]}class si extends Zs{constructor(t,e){super(e),this._model=_e(t),this.controls=new ni(this),At(this).whenOff((()=>this.controls.clear()))}get[Ct](){return At(this._model)}get it(){return this._model.it}set it(t){this._model.it=t}on(t){return(this.on=this._model.on().F)(t)}_applyAspect(t){return t===Qs[ps]?{instance:(e=this,te({cs:e.controls,model:e,mode:e.aspect(js)}).keepThru_(ii)),convertTo:u}:super._applyAspect(t);var e}}function ii({cs:[t],model:[e],mode:[n]}){if(!js.hasData(n))return $t();const r={};return F(t.entries(),(([t,e])=>{r[t]=e.aspect(Qs)})),re(te(r).keepThru((t=>{const n={...e};return F(nt(t),(t=>{const[e,[r]]=t;n[e]=r})),kt(n)})))}function oi(t,{aspects:e}={}){return new si(t,{aspects:e})}const ui=ne();function ci(){return ui}function ai(t){return Tt(t)?c(Yt(t)):"function"==typeof t?e=>Yt(t(e)):e=>e.read().keepThru(function(t,e){return()=>{const n=e.validate(t);return null==n?$t():Array.isArray(n)?$t(...n):$t(n)}}(e,t))}const hi={};class li{constructor(t){const e=new se,n=new Map,r=new Map;let s=u,i=u;this._messages=Zt((t=>{const o=Yt(e,a()).to(t).whenOff((()=>{s=u,i=u}));i=(t,e)=>{const n=t.to(((...e)=>{if(e.length)r.set(t,e);else if(!r.delete(t))return;s()})).needs(e).whenOff((n=>{n!==hi&&e.off(n),r.delete(t)&&s()}));o.whenOff((()=>n.off(hi)))},F(n.entries(),(([t,e])=>i(t,e))),s=()=>{e.send(...Z(r.values()))},r.size&&s()})).share().tillOff(t),this.from=e=>{const r=ai(e)(t),s=Et((()=>{n.delete(r)}));return n.set(r,s),i(r,s),s.needs(t)}}[Ot](){return this._messages}}const di={applyTo:t=>ys(t,fi,((t,e)=>{const n=new _i(t);if(e){const t=e.aspect(fi);n.by(t.read().keepThru((t=>$t(...t.messages()))))}return n}))};class fi{static get[ps](){return di}[Ot](){return this.read()}}const pi={get ok(){return!0},messages:()=>[],has:()=>!1,hasBut:()=>!1,[Symbol.iterator]:()=>N(),[d]:t=>N()};class gi{constructor(t){this._byCode=new Map,this._all=[],this._it=T(this._all),t.forEach((t=>{let e=!1;F(nt(t),(([n,r])=>{if(r){e=!0;const r=this._byCode.get(n);r?r.push(t):this._byCode.set(n,[t])}})),e&&this._all.push(t)}))}get ok(){return!this._all.length}messages(t){return null==t?this._all:this._byCode.get(t)||[]}has(t){return null==t||this._byCode.has(t)}hasBut(...t){return this._all.some((e=>t.every((t=>!e[t]))))}[Symbol.iterator](){return this[d]()}[d](t){return this._it[d](t)}}function yi(...t){return t.length?new gi(t):pi}class _i extends fi{constructor(t){super(),this._messages=new li(t);const e=t.aspect(zs);e&&this._messages.from(function(t){return t.controls.read().keepThru(mi,wi)}(e))}by(...t){return this._messages.from(function(...t){const e=t.length;return 1===e?t[0]:e?e=>{const n=new li(e);return t.forEach((t=>n.from(t))),n}:ci}(...t))}read(t){return(this.read=Yt(this._messages).keepThru(yi).F)(t)}}function mi(t){return re(ee(...tt(t,(t=>t.aspect(fi)))))}function wi(...t){return $t(...Q(t,(([t])=>t)))}function bi(t){return t?t.read().keepThru((t=>t?$t():{missing:"missing"})):bi}class vi extends Ls{constructor(t,{aspects:e,get:n,set:r}){super({aspects:e}),this.element=t,this._input=new se;const s=this;this._get=n,this._set=r,this._value=this.it;const i=this._update=(t,e)=>o({value:t},e);function o(t,e){for(;;){let n;s._value=t.value,s._update=(e,r)=>{n=[{...t,value:e},r]};try{s._input.send(t,e)}finally{s._update=i}if(!n)break;[t,e]=n}}this.events=new Ue(t),At(this.events).needs(this),this.listenForInput((t=>o(t,this._value)))}get[Ct](){return At(this._input)}get it(){return this._get()}set it(t){const e=this.it;t!==e&&(this._set(t),this._update(this._get(),e))}input(t){return(this.input=Xt(this._input.on().thru(i),(()=>[{value:this.it}])).F)(t)}on(t){return(this.on=this._input.on().thru((({value:t},e)=>t===e?St():$t(t,e))).F)(t)}listenForInput(t){const e=e=>t({value:this.it,event:e});this.events.on("input").to(e),this.events.on("change").to(e)}}function xi(t,{aspects:e}={}){return new vi(t,{get(){return this.element.value},set(t){this.element.value=t},aspects:e})}const ki={applyTo:t=>ys(t,$i,(t=>{const e=t.aspect(Ls);return e&&new Si(e)}))};class $i extends ge{static get[ps](){return ki}}class Si extends $i{constructor(t){super();const{element:e,events:n}=t,r=e.getRootNode?e.getRootNode():e.ownerDocument;this._it=_e(r.activeElement===e),At(this).needs(t),n.on("focus").to((()=>this._it.it=!0)),n.on("blur").to((()=>this._it.it=!1)),this.on({receive(t,n){t.onRecurrent(u),n?e.focus():e.blur()}})}get[Ct](){return At(this._it)}get it(){return this._it.it}set it(t){this._it.it=t}on(t){return(this.on=this._it.on().F)(t)}}const Oi={applyTo:t=>ys(t,Ti,(t=>{const e=t.aspect(zs);return null!=e?new Ai(e):new Fi(t)}))};class Ti{static get[ps](){return Oi}[Ot](){return this.read()}}const Ci={hasFocus:!1,touched:!1,edited:!1};class Fi extends Ti{constructor(t){super(),this._flags=_e(Ci),At(this._flags).needs(t),this._flags.by(function(t,e){const n=e.aspect(Ls);return te({hasFocus:e.aspect($i)||ne(!1),edited:n?n.input().keepThru((({event:t})=>!!t)):ne(!1)}).keepThru((({hasFocus:[e],edited:[n]})=>function(t,e,n){t=e?{...t,hasFocus:e,touched:!0}:{...t,hasFocus:e};n&&(t={...t,edited:n,touched:!0});return t}(t.it,e,n)))}(this._flags,t))}read(t){return(this.read=this._flags.read().F)(t)}markTouched(t=!0){const e=this._flags.it;return t?e.touched||(this._flags.it={...e,touched:t}):e.touched&&(this._flags.it={...e,touched:e.hasFocus,edited:!1}),this}markEdited(t=!0){const e=this._flags.it;return t?e.edited||(this._flags.it={...e,touched:!0,edited:t}):e.edited&&(this._flags.it={...e,edited:t}),this}}class Ai extends Ti{constructor(t){super(),this._container=t}read(t){return(this.read=(e=this._container,e.controls.read().tillOff(e).keepThru_((t=>re(ee(...function(t){return tt(t,(t=>t.aspect(Ti)))}(t)))),Ei)).F)(t);var e}markEdited(t){return this._container.controls.read().once((e=>F(e,(e=>e.aspect(Ti).markEdited(t))))),this}markTouched(t){return this._container.controls.read().once((e=>F(e,(e=>e.aspect(Ti).markTouched(t))))),this}}function Ei(...t){const e={hasFocus:!1,touched:!1,edited:!1};return F(t,(([{hasFocus:t,touched:n,edited:r}])=>{n&&(e.touched=!0),t&&(e.hasFocus=e.touched=!0),r&&(e.edited=e.touched=!0)})),e}const Di={applyTo(t){const e=t.aspect(Ls);return e?ms(e.element):gs}},Ri={get[ps](){return Di},to:(t=null)=>({applyAspect:e=>e===Di?ms(t):void 0})},zi={applyTo:t=>({instance:new Ki(t),convertTo:u})};class Pi{static get[ps](){return zi}[Ot](){return this.read()}}const Ui=Symbol("reason");function Mi(t){return t&&"object"==typeof t&&Ui in t}class Ki extends Pi{constructor(t){super(),this._control=t,this._sources=_e([new Map]);const e=t.aspect(Ri);e&&this.applyTo(e,this.schedule),At(t).whenOff((t=>this.done(t)))}get schedule(){return this._schedule||(this._schedule=Li(this._control,this._control.aspect(Ri)))}read(t){return(this.read=this._sources.read().tillOff(this._control).keepThru_((([t])=>re(ee(...t.keys()))),((...t)=>{const e={};return t.forEach((([t])=>qi(t,e))),e})).F)(t)}track(t){return(this.track=Zt((t=>{t.supply.needs(this._control);const e=new ds,n=new Pt;let r=!1;return n.on(t),this.read((t=>{const s=new Set(e),i=[];F(G(nt(t),(([,t])=>!!t)),(([t])=>{s.delete(t)||i.push(t)})),(!r||i.length||s.size)&&(e.delta(i,s),r=!0,e.redelta(((t,e)=>n.send(t,e))).undelta())}))})).F)(t)}specs(t){return Yt(Tt(t)?t:t(this._control))}resolve(t){const e=this._control.aspect(vs);return this.specs(t).keepThru(((...t)=>{const n={};return t.forEach((t=>{Ce(t)?n[Oe.name(t,e)]=!0:qi(t,n)})),n}))}add(t){const e=At(this._control);if(e.isOff)return e;const n=Et(),r=Zt((e=>{const r=this.resolve(t).to({receive(t,...n){e.receive(t,...n)}});e.supply.whenOff((t=>{n.off({[Ui]:t})})),n.needs(r).whenOff((t=>{Mi(t)&&r.off(t[Ui])}))})).share(),[s]=this._sources.it;return s.set(r,n),n.whenOff((t=>{Mi(t)||(s.delete(r),this._sources.it=[s])})),this._sources.it=[s],n.needs(e)}applyTo(t,e=Li(this._control,t)){const{classList:n}=t,r=new ds,s=()=>{r.redelta(((t,e)=>{n.remove(...e),n.add(...t)})).undelta()};return this.track(((t,n)=>{r.delta(t,n),e(s)})).whenOff((()=>{r.size&&(r.clear(),e(s))}))}done(t){return F(this._sources.it[0].values(),(e=>e.off(t))),this._sources.done(t),this}}function qi(t,e){F(nt(t),(([t,n])=>{null!=n&&(e[t]=n)}))}function Li(t,e){return t.aspect(ks)({node:e})}function Ni({mark:t,when:e}={}){let n;return n=e?Array.isArray(e)?e.length?t=>e.every((e=>t.has(e))):ji:t=>t.has(e):ji,e=>e.aspect(fi).read().keepThru((e=>n(e)?$t(...function(t){if(!t)return Bi;const e=(n=t,function(t){return Array.isArray(t)}(n)?n:null!=n?[n]:[]);var n;return e.length?e:Bi}(t)):$t()))}function ji(t){return!t.ok}const Bi=[["has-error",ws]];function Ii({ns:t=ws}={}){return e=>{const n=e=>[e,t];return te({md:e.aspect(js),vl:e.aspect(fi),st:e.aspect(Ti)}).keepThru((({md:[t],vl:[e],st:[{hasFocus:r,touched:s,edited:i}]})=>{const o=[];return js.hasData(t)||o.push(n("disabled")),"ro"!==t&&"-ro"!==t||o.push(n("readonly")),e.ok||o.push(n("invalid")),e.has("missing")&&o.push(n("missing")),e.has("incomplete")&&o.push(n("incomplete")),r&&o.push(n("has-focus")),s&&o.push(n("touched")),i&&o.push(n("edited")),$t(...o)}))}}function Wi(t){const e=t.length,n=t.charCodeAt(0);let r="",s=0;if(45===n){const n=t.charCodeAt(1);if(n>47&&n<58?(r+=`-\\${n.toString(16)} `,s=2):(r="-",s=1),1===e)return"\\-"}else n>47&&n<58&&(r+=`\\${n.toString(16)} `,s=1);for(;s<e;++s){const e=t.charCodeAt(s);r+=e>96&&e<123||45===e||95===e||e>47&&e<58||e>64&&e<91?t[s]:e>126?127===e?`\\${e.toString(16)} `:t[s]:e<32?e?`\\${e.toString(16)} `:"\ufffd":`\\${t[s]}`}return r}function Vi(t){let e="";const n=t.length;for(let r=0;r<n;++r){const n=t.charCodeAt(r);e+=n<32||127===n?n?`\\${n.toString(16)} `:"\ufffd":34===n||92===n?`\\${t[r]}`:t[r]}return e}const Gi=/[A-Z]+/g,Hi=new Map;function Qi(t,e,n){const r=t.toLowerCase();return r.length<2||e+r.length>=n.length?"-"+r:"-"+r.slice(0,-1)+"-"+r.slice(-1)}function Ji(t){return Array.isArray(t)}function Zi(t){return!!t.length}class Xi{constructor(t){this.priority=t&&t.priority||0}important(){return this.prioritize(1)}usual(){return this.prioritize(0)}}function Yi(t,e){return t===e||("object"==typeof t?t.is(e):"object"==typeof e&&e.is(t))}class to extends Xi{}class eo extends to{constructor(t,e){super(e),this.r=so(t.r,255),this.g=so(t.g,255),this.b=so(t.b,255),this.a=null!=t.a?io(t.a,1):1}get type(){return"rgb"}get rgb(){return this}get hsl(){const{a:t}=this,e=100*this.r/255,n=100*this.g/255,r=100*this.b/255,s=Math.max(e,n,r),i=Math.min(e,n,r),o=Math.round((s+i)/2);if(s===i)return new no({h:0,s:0,l:o,a:t},this);const u=s-i,c=Math.round(o>50?100*u/(200-s-i):100*u/(s+i));let a;switch(s){case e:a=(n-r)/u+(n<r?6:0);break;case n:a=(r-e)/u+2;break;default:a=(e-n)/u+4}return a*=60,a=Math.round(a),new no({h:a,s:c,l:o,a:t},this)}by(t){return ro.by(t)||this}is(t){return"object"==typeof t&&t.type===this.type&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a&&t.priority===this.priority}prioritize(t){return this.priority===t?this:new eo(this,{priority:t})}set(t){"function"==typeof t&&(t=t(this));const{r:e=this.r,g:n=this.g,b:r=this.b,a:s=this.a}=t;return new eo({r:e,g:n,b:r,a:s},this)}toString(){const t=`${this.r}, ${this.g}, ${this.b}`;return 1===this.a?`rgb(${t})`:`rgba(${t}, ${this.a})`}}class no extends to{constructor(t,e){var n;super(e),this.h=(n=t.h,(n%=360)<0?360+n:n),this.s=io(t.s,100),this.l=io(t.l,100),this.a=null!=t.a?io(t.a,1):1}get type(){return"hsl"}get rgb(){const{a:t}=this,e=this.s/100,n=this.l/100;if(!e){const e=255*n;return new eo({r:e,g:e,b:e,a:t},this)}const r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,i=this.h/360;return new eo({r:oo(s,r,i+1/3),g:oo(s,r,i),b:oo(s,r,i-1/3),a:t},this)}get hsl(){return this}by(t){return ro.by(t)||this}is(t){return"object"==typeof t&&t.type===this.type&&t.h===this.h&&t.s===this.s&&t.l===this.l&&t.a===this.a&&t.priority===this.priority}prioritize(t){return this.priority===t?this:new no(this,{priority:t})}set(t){"function"==typeof t&&(t=t(this));const{h:e=this.h,s:n=this.s,l:r=this.l,a:s=this.a}=t;return new no({h:e,s:n,l:r,a:s},this)}toString(){const t=`${this.h}, ${this.s}%, ${this.l}%`;return 1===this.a?`hsl(${t})`:`hsla(${t}, ${this.a})`}}const ro={by(t){if("object"==typeof t&&("rgb"===t.type||"hsl"===t.type))return t}};function so(t,e){return io(Math.round(t),e)}function io(t,e){return Math.max(Math.min(t,e),0)}function oo(t,e,n){let r,s=n;return s<0?s+=1:s>1&&(s-=1),r=s<1/6?t+6*s*(e-t):s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t,255*r}function uo(t,e,n){const r=2*n-1,s=t.rgb,i=e.rgb,o=s.a-i.a,u=((r*o==-1?r:(r+o)/(1+r*o))+1)/2,c=1-u;return new eo({r:s.r*u+i.r*c,g:s.g*u+i.g*c,b:s.b*u+i.b*c,a:s.a*n+i.a*(1-n)},t)}class co extends Xi{constructor(t){super(t),this.dim=t.dim}by(t){return this.dim.by(t)||this}toString(){return this.toFormula()}}const ao={map(t,e){const n={},r={from:e,get(r){if(r in n)return n[r];const s=function(t){switch(typeof t){case"function":return t;case"object":return t.by.bind(t)}const e=typeof t;return n=>typeof n===e?n:t}(t[r])(e[r],this,r);return n[r]=s,s}};return F(W(t),(t=>r.get(t))),n},by:t=>ao.map.bind(void 0,t)};function ho(t){if(null==t)return[void 0,0];switch(typeof t){case"object":return[t,t.priority];case"string":if(t.endsWith("!important"))return[t.substring(0,t.length-"!important".length).trim(),1]}return[t,0]}class lo extends co{constructor(t,e,n){super(n),this.val=t,this.unit=e}get type(){return"dimension"}toDim(t){const e=this.dim;if(t===e||t===e.pt||t===("%"===this.unit?t.pt:e.noPt))return this}is(t){return t===this||"object"==typeof t&&t.type===this.type&&this.unit===t.unit&&this.val===t.val&&this.priority===t.priority}prioritize(t){return this.priority===t?this:new lo(this.val,this.unit,{dim:this.dim,priority:t})}add(t,e){return"number"==typeof t&&(t=fo(t,e||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?fo(this.val+t.val,this.unit,this):yo(this,"+",t)}sub(t,e){return"number"==typeof t&&(t=fo(t,e||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?fo(this.val-t.val,this.unit,this):yo(this,"-",t)}mul(t){return 1===t?this:fo(this.val*t,this.unit,this)}div(t){return 1===t?this:fo(this.val/t,this.unit,this)}negate(){return fo(-this.val,this.unit,this)}toFormula(){return`${this.val}${this.unit}`}}function fo(t,e,n){return t?new lo(t,e,n):n.dim.zero.prioritize(n.priority||0)}class po extends co{constructor(t,e,n,r){super(r),this.left=t.usual(),this.op=e,this.right=n}get type(){return"calc"}is(t){return this===t||"object"==typeof t&&t.type===this.type&&(this.op===t.op&&this.left.is(t.left)&&Yi(this.right,t.right)&&this.priority===t.priority)}add(t,e){return"number"==typeof t&&(t=fo(t,e,this)),yo(this,"+",t)}sub(t,e){return"number"==typeof t&&(t=fo(t,e,this)),yo(this,"-",t)}mul(t){return mo(this,t)}div(t){return wo(this,t)}toString(){return"calc"+super.toString()}}class go extends po{constructor(t,e,n,r){super(t,e,n.usual(),r)}prioritize(t){return this.priority===t?this:new go(this.left,this.op,this.right,{dim:this.dim,priority:t})}toDim(t){const e=this.left.toDim(t);if(!e)return;const n=this.right.toDim(t);return n?e===this.left&&n===this.right?this:new go(e,this.op,n,{dim:t,priority:this.priority}):void 0}negate(){return"-"===this.op?new go(this.right,this.op,this.left,this):new go(this.left.negate(),"-",this.right,this)}toFormula(){return`(${this.left.toFormula()} ${this.op} ${this.right.toFormula()})`}}function yo(t,e,n){return n.type?new go(t,e,n,t):t}class _o extends po{prioritize(t){return this.priority===t?this:new _o(this.left,this.op,this.right,{dim:this.dim,priority:t})}toDim(t){const e=this.left.toDim(t);if(e)return e===this.left?this:new _o(e,this.op,this.right,{dim:t,priority:this.priority})}mul(t){return("*"===this.op?mo(this.left,this.right*t):wo(this.left,this.right/t)).prioritize(this.priority)}div(t){return("/"===this.op?wo(this.left,this.right*t):mo(this.left,this.right/t)).prioritize(this.priority)}negate(){return new _o(this.left,this.op,-this.right,this)}toFormula(){return`(${this.left.toFormula()} ${this.op} ${this.right})`}}function mo(t,e){return e?1===e?t.prioritize(t.priority):new _o(t,"*",e,t):t.dim.zero.prioritize(t.priority)}function wo(t,e){return 1===e?t.prioritize(t.priority):new _o(t,"/",e,t)}class bo extends co{constructor(t,e){super(e),this._byPriority=t}get type(){return 0}toDim(t){return t.zero.prioritize(this.priority)}is(t){return this===t||("object"==typeof t?t.type===this.type&&t.priority===this.priority:0===t||"0"===t?0===this.priority:"0 !important"===t&&1===this.priority)}add(t,e){return"number"==typeof t&&(t=fo(t,e,this)),t.prioritize(this.priority)}sub(t,e){return"number"==typeof t&&(t=fo(t,e,this)),t.negate().prioritize(this.priority)}mul(){return this}div(){return this}negate(){return this}prioritize(t){return this._byPriority.get(t)}important(){return this._byPriority.important}usual(){return this._byPriority.usual}toFormula(){return"0"}}class vo{constructor(t){this.dim=t,this.usual=new bo(this,{dim:t}),this.important=new bo(this,{dim:t,priority:1})}get(t){switch(t){case 0:return this.usual;case 1:return this.important}return new bo(this,{dim:this.dim,priority:t})}}function xo({pt:t,noPt:e}){const n={get zero(){return r},get pt(){return t()},get noPt(){return e()},of(t,e){return t?new lo(t,e,{dim:this}):r},by(t){if(function(t){return"object"==typeof t&&("dimension"===t.type||"calc"===t.type||0===t.type)}(t))return t.toDim(this)}},r=new vo(n).usual;return n}const ko=xo({pt:()=>$o,noPt:()=>ko}),$o=xo({pt:()=>$o,noPt:()=>ko});class So extends Xi{constructor(t,e){super(e),this.url=t}get type(){return"url"}static by(t){switch(typeof t){case"string":{const[e,n]=ho(t);return new So(e,{priority:n})}case"object":if("url"===t.type)return t}}by(t){return So.by(t)||this}prioritize(t){return t===this.priority?this:new So(this.url,{priority:t})}is(t){return"object"==typeof t&&"url"===t.type&&t.url===this.url&&t.priority===this.priority}toString(){return`url("${Vi(this.url)}")`}}const Oo=ne({});function To(){return Oo}function Co(t,e){if(!e)return Oo;if("string"!=typeof e){if(Tt(e))return Ao(e);if(Mt(e))return Ao(Fo(e));if("function"==typeof e){const n=e(t);if("string"!=typeof n){if(Tt(n))return Ao(n);if(Mt(n))return Ao(Fo(n))}return ne(Eo(n))}}return ne(Eo(e))}function Fo(t){return Yt(t,a({}))}function Ao(t){return Yt(t).keepThru(Eo,function(){let t;return e=>t&&function(t,e){const n=q(Do(e));for(const[e,r]of Do(t)){const{value:t}=n.next();if(!t||e!==t[0]||!Yi(r,t[1]))return!1}return!n.next().value}(e,t)?St():t={...e}}(),i)}function Eo(t){return"string"==typeof t?{$$css:t}:t}function Do(t){return G(nt(t),(([,t])=>l(t)))}function Ro(t,e){return Ao(te({base:t,addendum:e}).keepThru((({base:[t],addendum:[e]})=>function(t,e){return L(nt(e),((t,[e,n])=>function(t,e,n){zo(t[e])<=zo(n)&&(delete t[e],t[e]=n);return t}(t,e,n)),{...t})}(t,e))))}function zo(t){switch(typeof t){case"string":return t.endsWith("!important")?1:0;case"object":return t.priority;default:return 0}}function Po(t){return">"===t||"+"===t||"~"===t}function Uo(t){if(!Ji(t))return[Mo(t)];const e=[];let n;for(const r of t){const t=n;let s;if(n&&(e.push(n),n=void 0),Po(r)){if(n=r,!t)continue;s={}}else s=Mo(r);e.push(s)}return n&&e.push(n,{}),e}function Mo(t){return"string"==typeof t?t?{s:t}:{}:Ko(t)}function Ko(t){const e=t.ns||void 0,n=t.i||void 0,r=function(t){if(!t)return;if(Ce(t))return[t];const e=t.filter((t=>!!t));return Zi(e)?e.sort(Fe):void 0}(t.c),s=function(t){if(!t)return;if(function(t){return"string"!=typeof t[0]}(t)){const e=t.map(qo);return Zi(e)?e:void 0}return[qo(t)]}(t.u);return{ns:e,e:("*"!==t.e||!e&&!n&&!r&&s&&Lo(s[0]))&&t.e||void 0,i:n,c:r,u:s,s:t.s||void 0,$:No(t.$)}}function qo(t){if(!Lo(t))return t;if(t.length<3)return t;const[e,n,...r]=t;return Ji(r[0])?[e,n,...r.map(Uo)]:[e,n,Uo(r)]}function Lo(t){return t.length>1&&(":"===t[0]||"::"===t[0])}function No(t){if(t)return Zi(t=Ji(t)?[...new Set(Z(t,Bo))].sort():[...Bo(t)])?t:void 0}const jo=new Set;function Bo(t){if(!t)return jo;const e=t.indexOf("="),n=e<0?t:t.substring(0,e),r=new Set;let s;for(const t of n.split(":"))s?s+=":"+t:s=t,r.add(s);return e>=0&&r.add(t),r}const Io=[[]];function Wo(t){if(!t.length)return Io;let e,n=0;for(;;){const r=t[n++];if(Po(r)){e=r;continue}return[e?[e,r]:[r],t.slice(n)]}}const Vo=[];function Go(t,e){return t&&e.every((e=>t.find((t=>function(t,e){if("string"==typeof t)return"string"==typeof e?t===e:!e[1].url&&e[0]===t;const[n,{url:r}]=t;return"string"==typeof e?!r&&n===e:n===e[0]&&r===e[1].url}(e,t)))))}function Ho(t){return Uo(t)}const Qo={qualify:t=>`@${Wi(t)}`};function Jo(t){return Xo(t,Qo)}const Zo={};function Xo(t,{qualify:e,nsAlias:n=Ee()}=Zo){const r={qualify:e,nsAlias:n};return t.reduce(((t,e)=>Po(e)?t+e:(t&&!Po(t[t.length-1])&&(t+=" "),t+function(t,{qualify:e,nsAlias:n}){const{ns:r,e:s,i,c:o,s:u,u:c,$:a}=t;let h=!1,l="";i&&(h=!0,l+=`#${Wi($e.name(i,n))}`);o&&(h=!0,l=o.reduce(((t,e)=>`${t}.${Wi(Oe.name(e,n))}`),l));if(c){h=!0;const t={nsAlias:n};l=c.reduce(((e,n)=>function(t,e,n){if(Lo(e)){t+=e[0]+e[1];if(e.length>2){t+="("+Xo(e[2],n);for(let r=3;r<e.length;++r)t+=","+Xo(e[r],n);t+=")"}return t}const[r,s,i,o]=e;t+="["+Wi(r),s&&(t+=`${s}"${Vi(i)}"`);o&&(t+=" "+o);return t+"]"}(e,n,t)),l)}u&&(h=!0,l+=u);e&&a&&(l=a.reduce(((t,n)=>t+e(n)),l));if(r){const t=function(t,e){return"string"==typeof t?t:t.url?e(t):void 0}(r,n);l=t?`${t}|${s||"*"}${l}`:d()}else l=d();return l;function d(){return h?`${s?xe.name(s,n):""}${l}`:`${s?xe.name(s,n):"*"}${l}`}}(e,r))),"")}class Yo{constructor(t){this._rule=t}read(t){let e=this._rule.outer;for(;e;)t=Ro(e.read().keepThru(nu),t),e=e.outer;return t}render(t,e){const{selector:n}=t;let{writer:r}=t;if(!r.isGroup)return void t.render(e);let s=r;const i=function(t){const e=new Map,n=[];for(const r of t)Po(r)?n.push(r):n.push(su(r,e));if(!e.size)return;return[e,Ho(n)]}(n);if(!i)return void t.render(e);const[o,u]=i;for(const t of o){const[n,i]=tu(e,t);if(!i){r=s.addStyle(n);break}r=s=s.addGroup(n,i)}t.render(e,{writer:r,selector:u})}}function tu(t,[e,[n,r]]){let s="";const i=t=>{t&&(s&&(s+=" and "),s+=t)};for(const e of n){const[n]=ho(t[e]);i(n)}return i(r),s?[e,s]:[e]}const eu={order:-65535,create:t=>new Yo(t)};function nu(t){return L(G(nt(t),ru),((t,[e,n])=>(t[e]=n,t)),{})}function ru(t){return"@"===String(t[0])[0]}function su(t,e){const n=t.$;if(!n)return t;const r=[];for(const t of n)"@"===t[0]?iu(e,t):r.push(t);return r.length===n.length?t:Zi(r)?{...t,$:r}:{...t,$:void 0}}function iu(t,e){const n=e.indexOf("=");let r,s;n<0?r=e:(r=e.substring(0,n),s=e.substring(n+1));const i=r.indexOf(":"),o=i<0?r:r.substring(0,i),u=t.get(o);if(u){const[t,e]=u;t.add(r),s&&(u[1]=e?`${e} and ${s}`:s)}else t.set(o,[(new Set).add(r),s])}const ou={order:-65534,needs:eu,render(t,e){const n=!t.rule.selector.length,{sheet:r}=t;let s=0,i=0;for(const[t,o]of nt(e)){const e=String(t);if("@"===e[0]){const[t]=ho(o),u=n?uu(r,s,e,t):0;s+=u,i+=u;const c=So.by(t);c&&(i+=cu(r,i,e,c),i+=au(r,i,e,c))}}t.render(e)}};function uu(t,e,n,r){if(!n.startsWith("@import:"))return 0;const s=new So(n.substring("@import:".length));let i=String(s);return r&&(i+=` ${r}`),t.addGlobal("@import",i,e),1}function cu(t,e,n,r){return"@namespace"!==n?0:(t.addGlobal("@namespace",String(r),e),1)}function au(t,e,n,r){if(!n.startsWith("@namespace:"))return 0;const s=n.substring("@namespace:".length);return t.addGlobal("@namespace",`${s} ${r}`,e),1}function hu(t,e){const n=t.addStyle();F(G(nt(e),lu),(([t,e])=>{const[r,s]=ho(e);n.set(function(t){const e=Hi.get(t);if(e)return e;const n=t.replace(Gi,Qi);return Hi.set(t,n),n}(t),`${r}`,s)})),t.render(e,{writer:n})}function lu(t){const[e,n]=t;if(null==n)return!1;const r=String(e)[0];return r>="a"&&r<="z"||r>="A"&&r<="Z"}function du(t,e){const n=e.$$css;if(n){const r=t.addStyle();r.replace(n),t.render(e,{writer:r})}else t.render(e)}const fu={order:-65535,needs:ou,render(t,e){const n=t.selector.map((t=>!Po(t)&&t.ns&&"string"!=typeof t.ns?t.ns:null)).filter(l);if(n.length){const r=(e,n)=>(e[`@namespace:${t.nsAlias(n)}`]=new So(n.url),e);t.render(n.reduce(r,{...e}))}else t.render(e)}};function pu(t){if("function"==typeof t)return{create:()=>({render:t})};if(function(t){return"create"in t}(t))return{order:t.order,needs:t.needs,create:e=>function(t){return"function"==typeof t?{render:t}:t}(t.create(e))};const e=t.render.bind(t);return{order:t.order,needs:t.needs,create:()=>({render:e})}}function gu(t,e){const n=t.order||0,r=e.order||0;return n>r?1:n<r?-1:0}function yu(t,e=nn){return(n={})=>{const{node:r=t,error:s}=n;return e({...n,node:r,error:s&&s.bind(n)})}}function _u(t){var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}const mu={indent:"  "},wu={nv:"",eol:"",pre:"",indent(){return this}};class bu{constructor(t,e=""){this._config=t,this.pre=e}get nv(){return" "}get eol(){return"\n"}indent(){return new bu(this._config,this.pre+this._config.indent)}}class vu{constructor(t,e){this.f=t,this.selector=e,this.body="",this.nf=t.indent()}get isGroup(){return!1}set(t,e,n){const r=n>=1?" !important":"",{pre:s,nv:i,eol:o}=this.nf;this.body&&(this.body+=`;${o}`),this.body+=`${s}${t}:${i}${e}${r}`}replace(t){this.body=t.trim(),this.body.endsWith(";")&&(this.body=this.body.substr(0,this.body.length-1))}toString(){const{pre:t,nv:e,eol:n}=this.f;if(this.body){const r=n?`;${n}`:"";return`${t}${this.selector}${e}{${n}${this.body}${r}${t}}`}return""}}class xu{constructor(t){this.nf=t,this._nested=[]}get isGroup(){return!0}addGroup(t,e,n){return this._add(new ku(this.nf,t,e),n)}addStyle(t,e){return this._add(new vu(this.nf,t),e)}toString(){let t="";for(const e of this._nested){const n=String(e);n&&(t&&(t+=this.nf.eol),t+=n)}return t}_add(t,e=this._nested.length){return this._nested.splice(e,0,t),t}}class ku extends xu{constructor(t,e,n){super(t.indent()),this.f=t,this.name=e,this.params=n}toString(){const t=super.toString();if(!t)return"";const{pre:e,nv:n,eol:r}=this.f;return`${e}${this.name} ${this.params}${n}{${r}${t}${r}${e}}`}}class $u extends xu{constructor(t,e,n){super(e),this.id=t,this.f=e,this.sender=n}addGlobal(t,e,n){this._add(`${this.f.pre}${t} ${e};`,n)}clear(){this._nested.length=0}remove(){this.clear(),this.sender.send({id:this.id})}done(){this.sender.send({id:this.id,css:this.toString()})}}function Su(t={}){var e;const{document:n=(null===(e=t.parent)||void 0===e?void 0:e.ownerDocument)||window.document,parent:r=n.head}=t,s=function(t={}){const e=!0===t.pretty||null==t.pretty?mu:t.pretty||!1,{scheduler:n=tn}=t,r=new se;let s=t=>(s=r.on().F)(t);const i=e?new bu(e):wu;let o=0;return{...t,pretty:e,scheduler:n,onSheet:s,addSheet:()=>new $u(String(++o),i,r)}}(t),i=yu(r,t.scheduler),o=i(),u=new Map,c=s.onSheet((({id:t,css:e})=>{let s=u.get(t);null==e?(u.delete(t),_u(s)):s?s.textContent=e:(s=n.createElement("style"),s.setAttribute("type","text/css"),s.textContent=e,r.appendChild(s),u.set(t,s),c.whenOff((()=>o((()=>_u(s))))))}));return{...t,scheduler:i,addSheet(t){return c.needs(t),this.addSheet=s.addSheet.bind(s),this.addSheet(t)}}}class Ou{constructor(t){this._target=t}get isGroup(){return!1}set(t,e,n){this._target.style.setProperty(t,e,n>=1?"important":void 0)}replace(t){this._target.style.cssText=t}}class Tu{constructor(t){this._target=t}get isGroup(){return!0}addGroup(t,e,n){return new Tu(this._add(`${t} ${e}{}`,n))}addStyle(t,e){return new Ou(this._add(`${t}{}`,e))}_add(t,e=this._target.cssRules.length){const n=this._target.insertRule(t,e);return this._target.cssRules[n]}}class Cu extends Tu{constructor(t){super(t.sheet),this._element=t}addGlobal(t,e,n){this._add(`${t} ${e};`,n)}clear(){const{cssRules:t}=this._target;for(;t.length;)this._target.deleteRule(t.length-1)}remove(){_u(this._element)}done(){}}function Fu(t,e){const{rootSelector:n={e:"body"},scheduler:r=nn,nsAlias:s=Ee()}=e,i=Et(),o={nsAlias:s},c=function(t){const e=new Map;return n(t.renderer),e.delete(hu),[...e.values(),pu(hu)].sort(gu);function n(t){t&&(Ji(t)?t.forEach(r):r(t))}function r(t){if(e.has(t))return;const r=pu(t);e.set(t,r),n(r.needs)}}(e),a=L(tt(t,d),((t,e)=>Et().cuts(e).cuts(t)),Et());const h=function(){const e=Et();return oe(t).to({supply:e,receive:(t,n)=>{n.forEach((t=>d(t).needs(e)))}})}();return i.needs(a).needs(h).cuts(a).cuts(h);function l(t,e,n){return new class{get[Ct](){return i}get rule(){return t}get sheet(){return n.sheet}get writer(){return n.writer}get selector(){return n.selector}nsAlias(t){return s(t)}render(r,s){e(s?l(t,e,{sheet:n.sheet,writer:s.writer||n.writer,selector:s.selector||n.selector}):this,r)}addStyle(t=n.selector){const{writer:e}=n;return e.isGroup?e.addStyle(function(t,e){return Xo(Ho(t),e)}(t,o)):e}}}function d(t){const[s,i]=function(t){const e=c.map((e=>e.create(t)));return[e.reduce(((t,e)=>e.read?Yt(e.read(t)):t),t.read()),n(0)];function n(t){return(r,s)=>{const i=t+1;let o;o=i===c.length?u:n(i);const a=l(r.rule,o,r);e[t].render(a,s)}}}(t);let o;const a=function(t){const e=t.selector;if(!e.length)return Ho(n);if(Po(e[0]))return[...Ho(n),...e];return e}(t),h=r();return s.to((function(n){h((()=>{null==o||o.clear();const r=l(t,i,{get sheet(){return o||(o=e.addSheet(r)),o},get writer(){return this.sheet},selector:a});r.render(n),null==o||o.done()}))})).whenOff((function(){h((()=>{const t=o;if(t)return o=void 0,t.remove()}))}))}}function Au(t){const e=[eu,fu,ou,du];return t&&(Ji(t)?e.push(...t):e.push(t)),e}function Eu(t,e){return Fu(t,{...e,renderer:Au(e.renderer)})}class Du{[Ot](){return this.read()}add(t){return this.rules.add([],t)}clear(){return this.set()}}class Ru{[Ot](){return this.read()}[Ut](){return this.onUpdate()}}class zu extends Ru{}class Pu extends Ru{constructor(t,e){super(),this._list=t,e?(this._buildList=()=>G(t,e),this._filterArray=t=>t.filter(e)):(this._buildList=()=>t,this._filterArray=i)}read(t){return(this.read=Xt(this.onUpdate().thru(c(this)),a(this)).F)(t)}onUpdate(t){return(this.onUpdate=Ht((t=>{const e=this._ruleSet||(this._ruleSet=new Set(this._buildList()));oe(this._list).to({supply:t.supply.whenOff((()=>this._ruleSet=void 0)),receive:(n,r,s)=>{r=this._filterArray(r),((s=this._filterArray(s)).length||r.length)&&(s.forEach((t=>e.delete(t))),r.forEach((t=>e.add(t))),t.receive(n,r,s))}})})).share().F)(t)}[Symbol.iterator](){return this._ruleSet?this._ruleSet.values():q(this._buildList())}grab(t){return Uu(this,t)}}function Uu(t,e){const n=function(t){return Ko(t)}(e);return new Pu(t,(t=>function(t,e){if(!t.length)return!1;const n=t[t.length-1];return!(e.ns&&n.ns!==e.ns||e.e&&n.e!==e.e||e.i&&n.i!==e.i||e.c&&!Go(n.c,e.c)||e.$&&!Go(n.$,e.$))}(t.selector,n)))}class Mu extends zu{constructor(t,e){super(),this._root=t,this.nested=e,this._updates=new se,this.self=function(t,e){const n=new se,r=[t];e.onUpdate(((e,s)=>{s[0]===t&&(r.length=0,n.send([],[t]))})).cuts(n);class s{[Ut](){return n.on()}[Symbol.iterator](){return q(r)}}return new Pu(new s)}(t,this),this._it=h((()=>Ku(t)))}read(t){return(this.read=Xt(this._updates.on().thru(c(this)),a(this)).F)(t)}onUpdate(t){return(this.onUpdate=this._updates.on().F)(t)}[Symbol.iterator](){return this[d]()}[d](t){return this._it()[d](t)}grab(t){return Uu(this,t)}add(t,e){return Nu(this._root,Ho(t),e,!0)}get(t){return this._get(Ho(t))}_get(t){const[e,n]=Wo(t);if(!n)return this._root;const r=this.nested._rule(Jo(e));return r?r.rules.get(n):void 0}watch(t){const e=Ho(t);return Zt((t=>{const n=_e({}),r=this.read().consume((()=>{const t=this._get(e);return t&&t.read((t=>n.it=t)).whenOff((()=>n.it={}))}));return n.read(t).cuts(r)})).share()}_add(t,e){t.rules.onUpdate(((t,e)=>this._updates.send(t,e))),e&&this._updates.send(E(t.rules),[])}_remove(t){const e=E(this);this._updates.send([],e),e.forEach((e=>{e.rules._updates.done(t),e._spec.done(t)}))}}function Ku(t){return B(I(t),Z(t.rules.nested,(t=>Ku(t))))}class qu extends Ru{constructor(t){super(),this._updates=new se,this._byKey=new Map,this._all=new Mu(t,this)}read(t){return(this.read=Xt(this._updates.on().thru(c(this)),a(this)).F)(t)}onUpdate(t){return(this.onUpdate=this._updates.on().F)(t)}[Symbol.iterator](){return this._byKey.values()}grab(t){return Uu(this,t)}_rule(t){return this._byKey.get(t)}_add(t,e,n){this._byKey.set(t,e),e.rules.onUpdate(((n,r)=>{r[0]===e&&(this._byKey.delete(t),this._updates.send([],[e]))})),n&&this._updates.send([e],[]),this._all._add(e,n)}}class Lu extends Du{constructor(t,e,n,r=To){super(),this._root=t||this,this._selector=e,this._key=n,this._spec=_e(r),this._nested=new qu(this)}get root(){return this._root}get outer(){if(void 0!==this._outer)return this._outer;const t=function(t){let e=t.length-1;if(e<=0)return e?void 0:Vo;do{switch(--e,t[e]){case">":return t.slice(0,e);case"+":case"~":--e;continue;default:return t.slice(0,e+1)}}while(e>0)}(this.selector);return this._outer=t&&this.root.rules.get(t)||null}get selector(){return this._selector}get key(){return this._key}get empty(){return this._spec.it===To}get rules(){return this._nested._all}read(t){return(this.read=this._spec.read().keepThru((t=>re(t(this)))).F)(t)}set(t){return this._spec.it=t?e=>Co(e,t):To,this}remove(t){return this.rules._remove(t),this}}function Nu(t,e,n,r){const[s,i]=Wo(e);if(!i)return t._spec.it=function(t,e){const n=t._spec.it;if(!e)return n;if(t.empty)return t=>Co(t,e);return t=>Ro(n(t),Co(t,e))}(t,n),t;const o=Jo(s),u=t.rules.nested._rule(o);if(u)return Nu(u,i,n,r);const c=new Lu(t.root,[...t.selector,...s],s),a=Nu(c,i,n,!1);return t.rules.nested._add(o,c,r),a}const ju=[];class Bu{[Ot](){return this.read()}clear(){return this.set()}}class Iu extends Bu{constructor(t,e,n){super(),this._root=t,this._selector=e,this._map=n}read(t){return(this.read=te({ms:this._map(this._root),ps:this._root.rules.watch(this._selector)}).keepThru((({ms:[t],ps:[e]})=>kt(ao.map(t,e)))).F)(t)}add(t){return this._root.rules.add(this._selector,t),this}set(t){return this._root.rules.add(this._selector).set(t),this}}const Wu={by(t,e){let n;return n="function"==typeof e?t=>Vu(e(t)):c(Vu(e)),e=>new Iu(e,t,n)}};function Vu(t){return Tt(t)?t:ne(t)}class Gu{constructor(t){this.refs=t}static by(t,e){const n={};for(const r of Object.keys(t))n[r]=t[r](e);return new Gu(n)}read(t){const e=te(this.refs);return(this.read=e.keepThru(Hu).F)(t)}[Ot](){return this.read()}}function Hu(t){const e={};for(const n of Object.keys(t))e[n]=t[n][0];return e}const Qu=new Pu({[Ut]:()=>ie,[Symbol.iterator]:()=>[][Symbol.iterator]()});function Ju(...t){return t.length?tc(t.map(Zu)):Qu}function Zu(t){return"function"==typeof t?function(t){let e;const n=()=>e||(e=ec(t()));return{[Symbol.iterator]:()=>n()[Symbol.iterator](),[Ut]:()=>n()[Ut]()}}(t):ec(t)}function Xu(...t){return t.length?tc(t.map(Yu)):Qu}function Yu(t){return"function"==typeof t?function(t){const e=new Set,n=Ht((n=>{const r=ec(t());nc(r,e,n),r[Ut]().to({supply:n.supply.whenOff((()=>e.clear())),receive(t,r,s){s.forEach((t=>e.delete(t))),r.forEach((t=>e.add(t))),n.receive(t,r,s)}})})).share();return{[Ut]:()=>n,[Symbol.iterator]:()=>e.values()}}(t):ec(t)}function tc(t){if(1===t.length){const e=t[0];return e instanceof Ru?e:new Pu(e)}return new Pu({*[Symbol.iterator](){for(const e of t)yield*e},[Ut]:()=>Ht((e=>{t.forEach((t=>oe(t).to({supply:Et().needs(e.supply),receive(t,n,r){e.receive(t,n,r)}})))})).share()})}function ec(t){return t instanceof Du?t.rules.self:Mt(t)?t:function(t){const e=new Set,n=Ht((n=>{let r=Lt();const{supply:s}=n;s.cuts(r).whenOff((()=>e.clear())),t.then((t=>{if(!s.isOff){const i=t instanceof Du?t.rules:t;nc(i,e,n),r=oe(i).to({receive(t,r,s){s.forEach((t=>e.delete(t))),r.forEach((t=>e.add(t))),n.receive(t,r,s)}}).needs(s)}})).catch((t=>s.off(t)))})).share();return{[Ut]:()=>n,[Symbol.iterator]:()=>e.values()}}(t)}function nc(t,e,n){const r=[];if(F(t,(t=>{r.push(t),e.add(t)})),r.length){const t=new Pt;t.on(n),t.send(r,[])}}function rc({$:t="raw",n:e,t:n,v:r,x:s=[],p:i={},pl:o=[]}){return e&&(i[e]={$:t,n:e,v:r,x:[],p:{},pl:[]}),{$:t,n:e,t:n,v:r,x:s,p:i,pl:o}}function sc({p:t,pl:e},n){const r=n.n||n.v,s=t[r];(!s||!s.n&&n.n)&&(t[r]=n),e.push(n)}const ic=()=>!1,oc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d\d (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d\d\d\d \d\d:\d\d:\d\d GMT/;function uc({dateTime:t}){return t?cc:ic}function cc(t,e){return t.s=t.s.substring(t.i),t.i=0,!!oc.test(t.s)&&(e(t.s.substring(t.i,t.i+=29)),!0)}function ac({delimiterOf:t}){return e=>{const n=e.s[e.i];return e.d=t(n),n}}function hc(t,{named:e=!0,tagged:n=!0,extra:r=!0,next:s=ac(t)}={}){const i=function({delimiterOf:t}){return(e,n)=>{if(!(262144&t(e.s[e.i])))return!1;let r="";for(++e.i;e.i<e.s.length;){const n=e.s[e.i++];if(524288&t(n))break;r+=n}return n(r),!0}}(t),o=uc(t),u=function({delimiterOf:t}){return(e,n)=>{let r="";for(++e.i;e.i<e.s.length;++e.i){const s=e.s[e.i];if("\\"===s){r+=e.s[++e.i]||s}else{if(65536&t(s))return++e.i,void n(r);r+=s}}n(r)}}(t),c=r?hc(t,{next:s,tagged:!1,named:!1,extra:!1}):ic;return(t,r)=>{let a,h,l,d="",f="raw";for(;t.i<t.s.length;){const r=s(t);if(t.d){if(12&t.d)break;if(null==h){if(16&t.d){h=d?"":r,++t.i;continue}if(65536&t.d){!n&&d||u(t,(t=>{d?(f="tagged-string",a=d):f="quoted-string",d="",h=t}));break}if(!d&&i(t,(t=>{f="angle-bracketed-string",h=t})))break;h=d,d=""}else{if(65536&t.d){!n&&h||u(t,(t=>{h?(f="tagged-string",a=h):f="quoted-string",h=t}));break}if(!h&&i(t,(t=>{f="angle-bracketed-string",h=t})))break}}if(null==h){if(!d&&o(t,(t=>h=t))){f="date-time";break}e?d+=r:h=r}else{if(!h&&o(t,(t=>h=t))){f="date-time";break}h+=r}++t.i}if(null==h){if(!d)return!1;l=rc({$:f,v:d})}else l=rc({$:f,n:d||void 0,t:a,v:h});for(;c(t,(t=>l.x.push(t))););return r(l),!0}}function lc({delimiterOf:t}){return e=>{let n=e.s[e.i];return"\\"!==n?(e.d=t(n),n):(++e.i,e.i<e.s.length?(n=e.s[e.i],e.d=t(n)?1:0):e.d=1,n)}}function dc({delimiterOf:t}){return e=>{const n=e.i;do{const n=e.s[e.i];if(!(2&t(n)))break;e.i++}while(e.i<e.s.length);return e.i!==n}}function fc(t,e={}){const{delimiterOf:n}=t,r=dc(t),s=hc(t,{...e,tagged:!1});return(t,e)=>!!(8&n(t.s[t.i]))&&(++t.i,r(t),s(t,e))}const pc={" ":7,"\t":7,",":5,";":9,'"':65569,"\\":33,"<":262145,">":524289,"=":17,"(":1,")":1,"/":1,":":1,"?":1,"@":1,"[":1,"]":1,"{":1,"}":1};function gc({delimit:t,dateTime:e}={}){const n=t?{...pc,...t}:pc;return{dateTime:e,delimiterOf:t=>n[t]||(t>="\0"&&t<=" "||"\x7f"===t?1:0)}}const yc=gc(),_c=gc({delimit:{":":17,"(":131105,")":37," ":3,"\t":3,"=":1,",":1}});function mc(t){const e=t?gc(t):yc,n=function(t){const{delimiterOf:e}=t,n=dc(t);return t=>!!(4&e(t.s[t.i]))&&(t.i++,n(t),!0)}(e),r=fc(e),s=hc(e),i=(null==t?void 0:t.comments)?function(t){const{delimiterOf:e}=t,n=dc(t),r={next:lc(t)},s=hc(t,r),i=fc(t,r);return(t,r)=>{if(!(131072&e(t.s[t.i])))return!1;let o;for(++t.i;n(t)||i(t,(t=>{o||(o=rc({$:"raw",v:""})),sc(o,t)}))||s(t,(t=>o=t)););return++t.i,r(o||rc({$:"raw",v:""})),!0}}(_c):ic;return t=>{const e=[],o={i:0,s:t};for(;o.i<o.s.length&&(n(o)||r(o,(t=>{e.length||e.push(rc({$:"raw",v:""})),sc(e[e.length-1],t)}))||i(o,(t=>e.push(t)))||s(o,(t=>e.push(t)))););return e}}const wc=mc();function bc(t){if(!t)return'""';const{delimiterOf:e}=yc;let n,r=!1;for(let s=0;s<t.length;++s){const i=t[s],o=e(i);o?(32&o&&(n||(n=t.substring(0,s)),n+="\\"+i),r=!0):n&&(n+=i)}return r?`"${n||t}"`:t}class vc extends We{constructor(t){super(t),this.upKey=this.createUpKey((t=>t.insert(t.seed.keepThru(((...e)=>e.length?kt(function(t){return(e,n)=>{const r=(n,s)=>{const i=t[n];return i?oe(i(((t=s)=>r(n+1,t)),s)):e(s)};return r(0,n)}}(e)):t.hasFallback&&t.or?re(t.or):xc)))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ne(t.or):t.or}:void 0).to((t=>e=t)).whenOff((t=>e=Me(t))),t.insert(((t,n)=>e(t,n)))}}function xc(t,e){return t(e)}const kc=new vc("http-fetch-agent"),$c={};const Sc=new Ve("http-fetch",{byDefault:on((function(t){const e=t.get(Gn),n=t.get(kc);return(t,e)=>n(r,new Request(t,e));function r(t){return Ht((n=>{const r=new se;let s;if("AbortController"in e){const i=new e.AbortController,{signal:o}=i;s=Et((t=>{t===$c&&i.abort()})),n.supply.whenOff((()=>s.off($c))).needs(s),r.on({supply:s,receive(t,e){n.receive(t,e)}});const u=t.signal;u&&(new Ue(u).on("abort").once((()=>i.abort())),u.aborted&&i.abort()),t=new Request(t,{signal:o})}else s=r.on(n);e.fetch(t).then((t=>{r.send(t),s.off()})).catch((t=>s.off(t)))}))}}))});const Oc=new bt("hierarchy-root",{byDefault:t=>{const e=t.get(Hn);return new Ue(e).on("wesib:component").to((({context:t})=>t.get(Cc).issue())),_e()}}),Tc=new bt("hierarchy-updates",{byDefault:t=>new Cc(t.get(Rn))});class Cc{constructor(t){const e=new se,n=t.get(sn).get(Oc);this.on=e.on(),this.send=()=>e.send(t),this.issue=()=>{const e=Fc(t);e?e[0].get(Cc).send():n.it=t}}static get[rt](){return Tc}}function Fc(t){const e=t.get(sn).get(Hn);let{element:n}=t,r=!0;if(n!==e)for(;;){const t=n.parentNode;if(!t)return;const s=t[Dn];if(s)return[s,r];if(t===e)return;r=!1,n=t}}const Ac=new bt("hierarchy-context",{byDefault:t=>new Dc(t.get(Rn))});class Ec extends at{static get[rt](){return Ac}get[Ct](){return At(this.context)}}class Dc extends Ec{constructor(t){super(),this.context=t;const e=this._parent=_e();t.whenConnected(u).cuts(e);const n=this._registry=(r=this.up(),new lt((t=>function(t){return"upKey"in t}(t)?r.keepThru((e=>e?re(e.get(t)):$t())):void 0)));var r;this.get=n.newValues().get}provide(t){const e=this._registry.provide(t);return At(this).whenOff(e),e}up(t){return(this.up=Zt((t=>{const{supply:e}=t;e.needs(this);const n=_e();n.by(this._parent),e.cuts(n);const r=Et().needs(e),s=Et().needs(e),i=()=>{const t=Fc(this.context);if(t){const[e,i]=t;n.it=e.get(Ec),r.off(),i&&s.off()}else n.it=void 0};this.context.get(sn).get(Oc).read({supply:r,receive:()=>this.context.connected&&i()}),n.read().tillOff(s).consume((t=>t&&t.context.get(Cc).on.to(i))),n.read(t),this.context.whenConnected({supply:Et().needs(e),receive:i})})).share().F)(t)}inside(t){return this._parent.it=t&&t.get(Ec),this}}class Rc{[Ut](){return this.onUpdate()}[Ot](){return this.read()}}const zc={subtree:!0};function Pc(t,e,n,r,{deep:s,all:i}){const o=new se,u=s?zc:void 0;let c,h=new Set;const f=s?Uc:T;"string"==typeof n?c=n:t.whenDefined(n).then((({elementDef:{name:e}})=>{if(e&&(c=xe.name(e,t.get(Qn)),o.size)){const t=_();if(t.size){const e=E(G(tt(t,(t=>r(t))),l));e.length&&o.send(e,[])}}})).catch(console.error),i||e.addEventListener("wesib:component",(t=>{const e=t.target;if(h.has(e)){const t=r(e);o.send([t],[])}}));const g=G(tt(j((function(){return p(o.size?h:_())})),(t=>r(t))),l);class y extends Rc{onUpdate(n){const r=t.get(nr)(m);return(this.onUpdate=Ht((t=>{const n=!o.size,s=o.on(t);return n&&(_(),r.observe(e,u)),s.whenOff((()=>{o.size||(r.disconnect(),h.clear())}))})).F)(n)}read(t){return(this.read=Xt(this.onUpdate().thru((()=>this)),a(this)).F)(t)}track(t){const e=this.onUpdate();return(this.track=Zt((t=>{const n=new se;n.on(t),n.send(E(this),[]),e.to(t)})).F)(t)}first(t){return(this.first=Yt(this.read()).keepThru((t=>kt(z(t)))).F)(t)}[Symbol.iterator](){return this[d]()}[d](t){return g[d](t)}}return new y;function _(){const t=function(){const t=c;if(!t)return new Set;if(s)return new Set(T(e.querySelectorAll(t)));return new Set(V(e.children,(e=>e.matches(t))))}();return o.size&&(h=t),t}function m(t){const e=[],n=[];t.forEach((t=>{F(G(tt(f(t.removedNodes),b),l),(t=>n.push(t))),F(G(tt(f(t.addedNodes),w),l),(t=>e.push(t)))})),(e.length||n.length)&&o.send(e,n)}function w(t){if(cn(t))return c&&t.matches(c)&&!h.has(t)?(h.add(t),r(t)):void 0}function b(t){if(cn(t)&&h.delete(t))return r(t,!0)}}function Uc(t){return Q(t,(t=>T([t,...Uc(t.childNodes)])))}class Mc{constructor(t,e){this._bs=t,this.element=e,this._emitters=new Map}get observer(){if(this._observer)return this._observer;const t=this._bs.get(Gn).MutationObserver;return this._observer=new t((t=>this._update(t)))}observe(t,e){const n=this,r=this.observer,s=this._emitter(t),i=Dt(e),o=s.on({supply:Et((()=>{this._emitters.delete(t),r.disconnect(),this._emitters.size?u():this._observer=void 0})).needs(i.supply),receive:(t,e,n)=>i.receive(t,e,n)});return r.disconnect(),u(),o;function u(){n._update(r.takeRecords()),r.observe(n.element,{attributes:!0,attributeOldValue:!0,attributeFilter:[...n._emitters.keys()]})}}_update(t){t.forEach((t=>{const e=t.attributeName,n=this._emitters.get(e);n&&n.send(this.element.getAttribute(e),t.oldValue)}))}_emitter(t){const e=new se;return this._emitters.set(t,e),e}}class Kc extends ge{constructor(t,e){super(),this._observer=t,this._name=e,this._updates=new se}get[Ct](){return At(this._updates)}get it(){return this._observer.element.getAttribute(this._name)}set it(t){null!=t?this._observer.element.setAttribute(this._name,t):this._observer.element.removeAttribute(this._name)}on(t){let e=Lt();return(this.on=Ht((t=>{this._updates.size||(e=this._observer.observe(this._name,((t,e)=>this._updates.send(t,e)))),t.supply.needs(e),this._updates.on(t).whenOff((t=>{this._updates.size||e.off(t)}))})).F)(t)}}class qc{constructor(t,e){this._attrs=new Map,this._observer=new Mc(t,e)}get(t){const e=this._attrs.get(t);if(e)return e;const n=new Kc(this._observer,t);return this._attrs.set(t,n),n}}class Lc extends ge{constructor(t,e){super(),this._element=t,this._updates=new se,this._key=e}get[Ct](){return At(this._updates)}get it(){return this._element[this._key]}set it(t){this._element[this._key]=t}on(t){return(this.on=this._updates.on().F)(t)}bind(t){var e;t.get(Qr).track((e=this._key,[Xr,e])).onUpdate().to({supply:At(this),receive:(t,e,n,r)=>this._updates.send(n,r)})}}class Nc{constructor(t){this._element=t,this._props=new Map}bind(t){this._context=t,this._props.forEach((e=>e.bind(t)))}get(t){const e=this._props.get(t);if(e)return e;const n=new Lc(this._element,t);return this._context&&n.bind(this._context),this._props.set(t,n),n}}const jc=Symbol("element-node");class Bc{constructor(t,e){this._bs=t,this.element=e,this._attrs=new qc(t,e),this._props=new Nc(e),e[jc]=this;const n=e[Dn];n?this._bind(n):e.addEventListener("wesib:component",(t=>this._bind(t.context)))}get context(){return this.element[Dn]}get parent(){const t=this.element.parentNode;return t&&Ic(this._bs,t)}select(t,e){return function(t,e,n,r={}){if(r.all)return Pc(t,e,n,((e,n)=>Ic(t,e,n)),r);const s=t.get(er);return Pc(t,e,n,((e,n)=>s(e)&&Ic(t,e,n)),r)}(this._bs,this.element,t,e)}attribute(t){return this._attrs.get(t)}property(t){return this._props.get(t)}_bind(t){this._props.bind(t)}}function Ic(t,e,n){const r=e[jc];return r||n?r:new Bc(t,e)}const Wc=new bt("component-node",{byDefault:t=>Ic(t.get(sn),t.get(Rn).element)});function Vc(t){return new URL(t.hash.substring(1),t.origin)}const Gc=Symbol("page-param");class Hc{get[Gc](){return this}byDefault(t,e){}}class Qc extends We{constructor(t){super(t),this.upKey=this.createUpKey((t=>{const{document:e}=t.context.get(Gn);t.insert(t.seed.keepThru(((...n)=>n.length?function(t,r,s,i){return o(0,i);function o(i,u){const c=n[i];if(!c)return t(u);c((({url:t=u.url,title:n=u.title,data:r=u.data}=u)=>o(i+1,{url:new URL(String(t),e.baseURI),title:n,data:r,get visited(){return u.visited},get current(){return u.current},get:t=>u.get(t),put(t,e){u.put(t,e)}})),r,s,u)}}:t.hasFallback&&t.or?re(t.or):Jc)))}))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?ne(t.or):t.or}:void 0).to((t=>e=t)).whenOff((t=>e=Me(t))),t.insert(((t,n,r,s)=>e(t,n,r,s)))}}function Jc(t,e,n,r){t(r)}const Zc=new Qc("navigation-agent");class Xc extends at{}const Yc=new bt("nav-history",{byDefault:on((t=>new ea(t)))});function ta(t){return null==t||"object"!=typeof t?{data:t}:t["wesib:navigation:data"]}class ea{constructor(t){this._context=t,this._entries=new Map,this._lastId=0;const e=t.get(Gn);this._document=e.document,this._location=e.location,this._history=e.history,this._uid=btoa(String(Math.random()))}static get[rt](){return Yc}init(){const{data:t}=ta(this._history.state),e=this.newEntry({url:new URL(this._location.href),data:t,title:this._document.title});return this._entries.set(e.id,e),e.schedule((()=>{e.enter("init"),this._history.replaceState(this._historyState(e),"")})),e}newEntry(t){return new na(this._context,++this._lastId,t)}open(t,e){const{page:{title:n="",url:r}}=t;this._history.pushState(this._historyState(t),n,r.href),this._enter("open",t,e)}_enter(t,e,n){const r=n.it;this._entries.set(e.id,e);try{for(let t=r.next;t;t=t.next)this._forget(t)}finally{e.prev=r,r.next=e,e.schedule((()=>{try{r.leave()}finally{e.enter(t)}})),n.it=e}}replace(t,e){const n=e.it,{page:{title:r="",url:s}}=t;this._history.replaceState(this._historyState(t),r,s.href),this._entries.set(t.id,t);const i=n.prev;i&&(t.prev=i,i.next=t),t.schedule((()=>{try{n.leave()}finally{try{this._forget(n)}finally{t.enter("replace")}}})),e.it=t}popState(t,e){const{state:n}=t;if(null==n)return null==this._history.state?this._changeHash(e):void 0;const r=e.it,{uid:s,data:i,id:o}=ta(n);let u;const c=s===this._uid&&null!=o?this._entries.get(o):void 0;return c?u=c:(u=this.newEntry({url:new URL(this._location.href),data:i,title:this._document.title}),r.transfer(u,"return"),this._entries.set(u.id,u),this._history.replaceState(this._historyState(u),"")),u.schedule((()=>{try{r.leave()}finally{u.enter("return")}})),e.it=u,u}hashChange(t){if(null==this._history.state)return this._changeHash(t)}update(t,e){const n=t.it,r=new na(this._context,++this._lastId,{...n.page,url:e},n);return this._entries.set(r.id,r),this._history.replaceState(this._historyState(r),"",e.href),this._entries.delete(n.id),t.it=r}_changeHash(t){const e=t.it,n=this.newEntry({url:new URL(this._location.href),data:null,title:this._document.title});try{e.transfer(n,"enter")}finally{this._history.replaceState(this._historyState(n),""),this._enter("enter",n,t)}return n}_forget(t){this._entries.delete(t.id),t.forget()}_historyState({id:t,page:{data:e}}){return{"wesib:navigation:data":{uid:this._uid,id:t,data:e}}}}class na{constructor(t,e,n,r){this._bsContext=t,this.id=e,this._status=0,this._update=u,this._params=r?r._params:new Map;const s=this;this.page={get url(){return n.url},get title(){return n.title},get data(){return n.data},get visited(){return!!s._status},get current(){return 2===s._status},get:t=>s.get(t),put(t,e){s.put(t,e)}}}get(t){const e=t[Gc],n=this._params.get(e);if(n)return n.get();const r=e.byDefault(this.page,this._newContext());return r&&this._init(e,r)}put(t,e){const n=t[Gc],r=this._params.get(n);return r?(r.put(e),r.get()):this._init(n,n.create(this.page,e,this._newContext()))}_newContext(){const t=new lt(this._bsContext);return new class extends Xc{constructor(){super(...arguments),this.get=t.newValues().get}}}_init(t,e){return this._params.set(t,e),this.page.current&&e.enter&&e.enter(this.page,"init"),e.get()}transfer(t,e){F(this._params.entries(),(([n,r])=>{if(r.transfer){const s=r.transfer(t.page,e);s&&t._params.set(n,s)}}))}stay(t){F(this._params.values(),(e=>e.stay&&e.stay(t)))}enter(t){this._status=2,F(this._params.values(),(e=>e.enter&&e.enter(this.page,t)))}leave(){this._status=1,F(this._params.values(),(t=>t.leave&&t.leave()))}forget(){F(this._params.values(),(t=>t.forget&&t.forget())),this._params.clear()}schedule(t){this._update=t}apply(){const t=this._update;this._update=u,t()}}class ra extends Event{constructor(t,e){super(t,{...e,cancelable:!1}),this.when=e.when,this.to=e.to}}class sa extends Event{constructor(t,e){super(t,{...e,cancelable:!0}),this.when=e.when,this.from=e.from,this.to=e.to}}class ia extends Event{constructor(t,e){super(t,{...e,cancelable:!0}),this.from=e.from,this.to=e.to,this.reason=e.reason}get when(){return"stay"}}const oa=new bt("navigation",{byDefault:on((function(t){const e=t.get(Gn),{document:n,history:r}=e,s=new Ue(e),i=t.get(ea),c=t.get(Zc),a=_e(i.init());a.read((t=>t.apply()));let h=Promise.resolve();s.on("popstate").to((t=>{const e=i.popState(t,a);e&&s.dispatch(new ra("wesib:enterPage",{when:null!=t.state?"return":"enter",to:e.page}))})),s.on("hashchange").to((()=>{const t=i.hashChange(a);t&&s.dispatch(new ra("wesib:enterPage",{when:"enter",to:t.page}))}));return new class extends ua{get page(){return a.it.page}get length(){return r.length}onEnter(t){return(this.onEnter=s.on("wesib:enterPage").F)(t)}onLeave(t){return(this.onLeave=s.on("wesib:leavePage").F)(t)}onStay(t){return(this.onStay=s.on("wesib:stayOnPage").F)(t)}on(t){return(this.on=ue(this.onEnter(),this.onLeave(),this.onStay()).F)(t)}read(t){return(this.read=a.read().keepThru((t=>t.page)).F)(t)}go(t){r.go(t)}open(t){return p("pre-open","open",t)}replace(t){return p("pre-replace","replace",t)}update(t){return i.update(a,d(t)).page}with(t,e){return l((n=>n.put(t,e)))}};function l(t){return{with:(e,n)=>l(o(t,(t=>t.put(e,n)))),open:e=>p("pre-open","open",e,t),replace:e=>p("pre-replace","replace",e,t),pretend(e,n=((t,e)=>e)){let r;"function"==typeof e?(n=e,r=void 0):r=e;const s=f(r),i=a.it,o=g("pretend",i,s,t);try{return y("pretend",i,s,o)?n(i.page,o.page):void 0}finally{o.stay(a.it.page)}}}}function d(t){return"string"==typeof t?new URL(t,n.baseURI):t||a.it.page.url}function f(t){return null==t||"string"==typeof t||t instanceof URL?{url:d(t)}:t.url instanceof URL?t:{...t,url:d(t.url)}}function p(t,e,n,r=u){const o=f(n),c=h=h.then(l,l);return c;function l(){let n;try{const u=function(){if(h!==c)return d();const e=a.it,n=g(t,e,o,r),i=new sa("wesib:leavePage",{when:t,from:e.page,to:n.page});if(!s.dispatch(i)||h!==c||!y(t,e,o,n))return d(n);return n}();return u?(n=u,i[e](n,a),s.dispatch(new ra("wesib:enterPage",{when:e,to:n.page})),n.page):u}catch(t){throw d(n,t),t}}function d(t,e){return t&&t.stay(a.it.page),s.dispatch(new ia("wesib:stayOnPage",{from:a.it.page,to:o,reason:e})),null}}function g(t,e,n,r){const s=i.newEntry(n);try{e.transfer(s,t),r(s.page)}catch(t){throw s.stay(a.it.page),t}return s}function y(t,e,n,r){let s=!1;return c((({url:t,data:e,title:r})=>{s=!0,n.url=t,n.data=e,n.title=r}),t,e.page,r.page),s}}))});class ua{static get[rt](){return oa}[Ut](){return this.on()}[Ot](){return this.read()}back(){this.go(-1)}forward(){this.go(1)}reload(){this.go()}}function ca({node:t,page:e}){const{element:n}=t,r=n.getAttribute("href");if(null==r)return ne(t,-1);return ne(t,aa(new URL(r,n.ownerDocument.baseURI),e.url))}function aa(t,e){if(t.origin!==e.origin)return-1;const n=ha(t),r=ha(e);if(t.hash){if(n!==r)return-1;const s=la(t,e);return s<0||la(e,t)<0?-1:t.pathname.length+s+aa(Vc(t),Vc(e))}const s=la(t,e);return s?s<0||n!==r?-1:t.pathname.length+s:r.startsWith(n)?t.pathname.length:-1}function ha(t){const e=t.pathname;return e.endsWith("/")?e:e+"/"}function la({searchParams:t},{searchParams:e}){let n=0;return t.forEach(((t,r)=>{(function(t){return t.startsWith("__")&&t.endsWith("__")})(r)||n>=0&&(e.getAll(r).includes(t)?n+=1:n=-1)})),n}const da=Symbol("nav-link-render-schedule"),fa=["active",ls];function pa(t){return t.target.getAttribute("href")}function ga(t,e,n,r=ya){let s;"function"==typeof n?(r=n,s=null):s=n||null;const i=e.ownerDocument;if(cn(t)){const n=i.createElement(t.tagName.toLowerCase());return t.getAttributeNames().forEach((e=>n.setAttribute(e,t.getAttribute(e)))),r(t,n),e.insertBefore(n,s),n}const o=i.importNode(t,!1);return e.insertBefore(o,s),o}function ya(t,e){F(T(t.childNodes),(t=>ga(t,e)))}function _a(t){let e;return n=>{const r=function(t){return new URL("",t.url).href}(n);if(e){if(e.url===r)return e.on;e.sup.off()}let s;const i=Et().whenOff((()=>{e=void 0,s=void 0})),o=Ht((e=>{if(!s){const e=t(n),r=_e(),o=e.to((t=>{r.it=t})).whenOff((t=>{null!=t&&i.off(t)}));i.cuts(o).cuts(r),s={on:r.read().thru_((t=>t?$t(t):St())),num:0}}const r=s;return++r.num,r.on.tillOff(i).to(e).whenOff((t=>{--r.num||Promise.resolve().then((()=>{r.num||r!==s||i.off(t)})).catch(console.error)}))}));return e={url:r,on:o,sup:i},o}}class ma extends Error{}const wa=new class extends Hc{create(t,e){return{get:()=>e,put:u}}};class ba{constructor(t,e){this._navigation=t,this._loader=e,this._map=new Map,this._requests=Z(j((()=>this._map.values())))}get fragments(){const t=[];return function(t,e){let n=!0;return C(t,(t=>{if(n=!!e(t),!n)return!1})),n}(this._requests,(e=>!!e.fragment&&(t.push(e.fragment),!0)))?t:[]}handle(){const t=this,e=Et();let n=Lt();return{get(){},put(e){t._add(e)},transfer(e,n){if("pretend"===n)return;const r=t._transfer();return e.put(wa,r),r.handle()},enter(r,s){if("init"===s)return;n=Et().needs(e);const i=Ht((e=>{const s=new se,i=s.on(e);return t._loader(r).tillOff(n).to((t=>s.send(t))).whenOff((t=>{void 0===t||t instanceof ma||s.send({ok:!1,page:r,error:t})})),i})).share();F(t._requests,(({fragment:t,receiver:e})=>function(t,e){return e?t.thru_((t=>t.ok?{...t,fragment:(null!=e.tag?t.document.getElementsByTagName(e.tag)[0]:t.document.getElementById(e.id))||void 0}:t)):t}(i,t).to({supply:Et().needs(e.supply),receive(t,n){e.receive(t,n)}})))},leave(){n.off(new ma("page left"))},stay(){e.off(new ma("navigation cancelled"))},forget(){e.off(new ma("page forgotten"))}}}_add(t){const e={...t,receiver:Dt(t.receiver)},{supply:n}=e.receiver,r=this._map.get(n);r?r.push(e):(this._map.set(n,[e]),n.whenOff((()=>this._map.delete(n))))}_transfer(){const t=new ba(this._navigation,this._loader);for(const[e,n]of this._map.entries())t._map.set(e,n.slice());return t}}const va=new vc("page-load-agent"),xa=new Ve("page-load-url",{byDefault:c(u)}),ka=new bt("page-loader",{byDefault:on((function(t){const e=t.get(Gn),n=t.get(Sc),r=t.get(xa),s=t.get(va),i=new e.DOMParser;return t=>{const e=new URL(t.url.href);r(e);const o=new Request(e.href,{mode:"same-origin",credentials:"same-origin",headers:new Headers({Accept:"text/html"})});return Ht((t=>s(u,o).to(t)));function u(r){return function(t,e){var n;const r=null===(n=t.get(wa))||void 0===n?void 0:n.fragments;r&&r.length&&e.headers.set("Accept-Fragment",r.reduce(((t,e)=>(t?t+", ":"")+(null!=e.tag?"tag="+bc(e.tag):"id="+bc(e.id))),""))}(t,r),Ht((s=>{const o=new Pt;o.on(s),o.send({page:t}),ce(n(r).thru_((t=>Promise.all([t,t.text()])))).thru_(((...t)=>{return e=t,xt(((t,n)=>{for(const r of e)t.pass(n,r)}));var e}),(([n,r])=>{if(!n.ok)return{ok:!1,page:t,response:n,error:n.status};try{return{ok:!0,page:t,response:n,document:$a(i,e,n,r)}}catch(e){return{ok:!1,page:t,response:n,error:e}}})).to(s)}))}}}))});function $a(t,e,n,r){const s=t.parseFromString(r,wc(n.headers.get("Content-Type")||"text/html")[0].v);if(s.head){const t=s.head.querySelector("base");if(t)t.href=new URL(t.getAttribute("href"),e).href;else{const t=s.createElement("base");t.href=e.href,s.head.appendChild(t)}}return s}class Sa extends Hc{create(t,e,n){const r=new ba(n.get(ua),_a(n.get(ka))),s=r.handle();return t.put(wa,r),s.put(e),s}}const Oa=new Sa,Ta=new bt("page-cache-buster",{byDefault:on((t=>new Ca(t)))});class Ca{constructor(t){const e=Fa(t.get(Gn).document);if(e){const n=t.get(ua);this.urlModifier=ne((t=>t.searchParams.set("__wesib_app_rev__",e))),this.agent=ne(((t,r)=>t(new Request(r.url,r)).thru_((t=>{if(t.ok){const r=Fa(t.document);if(r&&r!==e){const e=new URL(t.page.url.href);e.searchParams.set("__wesib_app_rev__",r),n.update(e),n.reload()}}return t}))))}else this.urlModifier=ne(),this.agent=ne()}static get[rt](){return Ta}}function Fa(t){var e;return null===(e=t.querySelector("meta[name=wesib-app-rev]"))||void 0===e?void 0:e.getAttribute("content")}function Aa(t){const e=t.get(Gn).document;return t=>t().thru_((t=>{if(t.ok){const n=new Set(tt(Ea(e,e.scripts),(([t])=>t)));F(G(Ea(t.document,t.document.querySelectorAll("script")),(([t])=>!n.has(t))),(([t,r])=>{ga(r,e.head,((e,n)=>n.src=t)),n.add(t)}))}return t}))}function Ea(t,e){return tt(V(e,(({src:t})=>!!t)),(e=>[new URL(e.src,t.baseURI).href,e]))}function Da(t){const e=t.get(Gn).document;return t=>t().thru_((t=>{if(!t.ok)return t;const n=t.document.querySelectorAll("link[rel=stylesheet]");if(!n.length)return t;let r=e.head,s=null;const i=e.querySelectorAll("link[rel=stylesheet]"),o=new Map,u=i.item(0);return u&&(r=u.parentNode,s=u,F(T(i),(t=>o.set(new URL(t.href,e.baseURI).href,t)))),F(T(n),(t=>{const n=new URL(t.href,e.baseURI).href,i=o.get(n);i?(z(o.keys())===n?(r=i.parentNode,s=i.nextSibling):r.insertBefore(i,s),o.delete(n)):ga(t,r,s,((t,e)=>e.href=n))})),F(o.values(),(t=>t.parentNode.removeChild(t))),t}))}function Ra(t){const e=t.get(Gn).document;return t=>t().thru_((t=>{if(t.ok){const n=t.document.getElementsByTagName("title").item(0);n&&n.textContent&&(e.title=n.textContent)}return t}))}const za={setup(t){t.provide({a:xa,by:t=>t.urlModifier,with:[Ca]}),t.provide({a:va,by:t=>t.agent,with:[Ca]}),t.provide({a:va,by:Aa}),t.provide({a:va,by:Da}),t.provide({a:va,by:Ra})}};class Pa{static get[ln](){return za}}function Ua({url:t}){return new URL("",t).href}class Ma extends We{get upKey(){return this}constructor(){super("default-in-aspects")}grow(t){const e=t.context.get(Qn),n=t.context.get(rs);t.insert(t.seed.keepThru(((...t)=>$s(...t,ks.to(n),vs.to(e)))).tillOff(t.context.get(qe)))}}const Ka=new Ma,qa=new Ge("input-from-control",{byDefault:()=>({})});function La(t,e){return Et(t.get(Ec).provide({a:qa,by:()=>({root:t,control:e})})).needs(t).needs(e)}const Na=new bt("component-style-producer",{byDefault:on((()=>Fu))});function ja(t,e={},n){const{context:r}=t;return{...e,document:e.document||r.get(Gn).document,parent:e.parent||r.contentRoot,rootSelector:[],scheduler:e.scheduler||Ba(r,n),nsAlias:e.nsAlias||r.get(Qn),renderer:t.renderer(e)}}function Ba(t,e={}){const n=t.get(rs);return(t={})=>n({...t,...e})}const Ia=new gt("component-styp-renderer"),Wa=new Te("https://wesib.github.io/ns/element-id-class","elic","element-id-class"),Va=new bt("unique-element-class",{byDefault:function(t){const e=t.get(Qn),n=t.get(Rn),r=n.get(hr),s=`${r.name?xe.name(r.name,e):"component"}#${++Ga}`,i=Wa.name(e(Wa),s,Oe);return n.element.classList.add(i),i}});let Ga=0;const Ha=new bt("component-styp-format",{byDefault:t=>new Xa(t.get(Rn))});class Qa{static get[rt](){return Ha}produce(t,e){const n=this.newProducer(t,e),r=Et();return this.context.whenSettled((()=>{n().needs(r).cuts(r)})),r}newProducer(t,e){const n=Xu(t);let r;const s=At(this.context);return r=()=>this.context.get(Na)(n,this.format(e)).needs(s),s.whenOff((()=>{r=c(s)})),()=>r()}renderer(t){const s=this.context.get(is,{or:null}),{renderer:i}=t,o=r(n(i),this.context.get(Ia)),u=t.hostSelector?Ho(t.hostSelector)[0]:void 0;return o.add(s?function(t){return{order:-100,render(e,n){let{selector:r}=e;if(r.length){if(t){const[e,n]=Ja(r);n&&(r=n.length?[{u:[[":","host",Za(n,t)]]},...e]:[{u:[[":","host",[t]]]},...e])}}else r=[t||{u:[[":","host"]]}];e.render(n,{selector:r})}}}(u):function(t){return{order:-100,render(e,n){let{selector:r}=e;if(r.length){const[e,n]=Ja(r);r=n&&n.length?[...Za(n,t),...e]:[t,...e]}else r=[t];e.render(n,{selector:r})}}}(u||{c:[this.context.get(Va)]})),e(o)}}function Ja(t){if("string"!=typeof t[0]){const[{ns:e,e:n,i:r,c:s,u:i,s:o,$:u},...c]=t;if(!e&&!n&&!r&&!s&&!o&&i){const[[t,e,...n]]=i;if(":"===t&&"host"===e){let t;return n.length?(t=n[0].slice(),t[0].$=u):t=u?[{$:u}]:[],[c,t]}}}return[t]}function Za(t,{ns:e,e:n,i:r,c:s,u:i,s:o}){const[u,...c]=t;return[{ns:u.e||u.ns?u.ns:e,e:u.e||u.ns?u.e:n,i:u.i||r,c:u.c?s?[...u.c,...s]:u.c:s,u:u.u?i?[...u.u,...i]:u.u:i,s:(u.s||"")+(o||"")||void 0,$:u.$},...c]}class Xa extends Qa{constructor(t){super(),this.context=t}format(t){return function(t={}){const{parent:e=document.head}=t;return{...t,scheduler:yu(e,t.scheduler),addSheet(){const t=document.createElement("style");return t.setAttribute("type","text/css"),t.append(document.createTextNode("")),e.appendChild(t),new Cu(t)}}}(this.config(t))}config(t){return ja(this,t,{when:"connected"})}}class Ya extends Qa{constructor(t,{when:e="settled"}={}){super(),this.context=t,this.when=e}format(t){return Su(this.config(t))}config(t){return ja(this,t,{when:this.when})}}function th(t){return Un((({get:e})=>({componentDef:{define(n){n.whenComponent((n=>{n.whenReady((({component:r})=>{const s=e(r),i="function"==typeof s?s.bind(r):s;n.get(Qa).produce(i,t)}))}))}}})))}const eh={setup(t){t.provide({a:Na,is:Eu})}};class nh extends pt{constructor(){super("theme-style")}grow(t){const e=new Map;F(t.seed,(t=>{let n,r,s;"function"==typeof t?(n=r=t,s=!0):(n=t.style,r=t.provide.bind(t),s=!1);const i=e.get(n);if(i){const[t,o]=i;e.set(n,[s?sh(r,t):sh(t,r),s||o])}else e.set(n,[r,s])})),!e.size&&t.hasFallback||t.insert((function(t){const n=e.get(t);if(!n)return t;const[r,s]=n;return s?r:sh(t,r)}))}}const rh=new nh;function sh(t,e){return n=>Ju(t(n),e(n))}const ih=new bt("theme",{byDefault:on((t=>new uh(t.get(rh))))});class oh{static get[rt](){return ih}ref(t){return t(this.root)}}class uh extends oh{constructor(t){var e;super(),this._styles=t,this.root=new Lu(void 0,ju,[],e?t=>Co(t,e):void 0),this._rules=new Map}style(...t){const e=this;return Xu(...t.reduce((function(t,n){const r=e._rules.get(n);if(r)t.push(r);else{const r=e._styles(n)(e);e._rules.set(n,r),t.push(r)}return t}),[]))}}const ch=new Te("https://wesib.github.io/examples","bex","wesib-examples"),ah=Wu.by({$:"settings"},{$color:new eo({r:161,g:185,b:142}),$bgColor:new eo({r:40,g:43,b:36}),$fontFace:"'Exo 2', sans-serif",$fontSize:$o.of(1,"em"),$lineHeight:1.2,$fontWeight:"400",$linkFontWeight:"600",$layoutBreakpoint:ko.of(576,"px")});function hh({$layoutBreakpoint:t}){return{"@media:sm":`(max-width: ${t})`}}function lh(t){const e=t.ref(ah).read(),{root:{rules:n}}=t;return Ju(n.add({e:"a"},e.keepThru(dh)),n.add({e:"a",s:":visited"},e.keepThru(dh)),n.add({e:"a",s:":hover"},{textDecoration:"underline"}),n.add({e:"a",s:":active"},{textDecoration:"underline dotted"}),n.add({e:"a",s:":focus"},{textDecoration:"underline dotted"}))}function dh({$color:t,$linkFontWeight:e}){return{color:t,fontWeight:e,textDecoration:"none"}}function fh(t){const e=t.ref(ah).read();return Ju(t.root.add(e.keepThru(ph)).add(e.keepThru(hh)),t.style(lh))}function ph({$color:t,$fontFace:e,$fontSize:n,$lineHeight:r,$fontWeight:s}){return{color:t,font:`normal ${s} ${n}/${r} ${e}`}}function gh(t){const e=t.ref(ah).read(),{root:{rules:n}}=t;return Ju(n.add({e:"html"},{height:"100%",margin:0,padding:0}),n.add({e:"body"},e.keepThru(yh)),t.style(fh))}function yh({$bgColor:t}){return{backgroundColor:t,height:"100%",margin:0,padding:0}}const _h=Wu.by({$:"settings:form"},(t=>Gu.by({global:ah},t).read().keepThru(mh)));function mh({global:{$color:t,$bgColor:e,$fontFace:n,$fontSize:r,$lineHeight:s,$fontWeight:i}}){return{$color:t,$bgColor:e.hsl.set((({l:t})=>({l:.8*t}))),$roBgColor:e.hsl.set((({l:t})=>({l:.94*t}))),$fontFace:n,$fontSize:r,$errorFontSize:r.mul(.8),$lineHeight:s,$fontWeight:i,$borderColor:e,$marginV:r.div(4),$marginH:r.div(4),$paddingV:r.div(2),$paddingH:r,$borderW:ko.of(1,"px")}}let wh=class{constructor(t){this._context=t}style(){return this._context.get(oh).style(xh)}};var bh;t([th()],wh.prototype,"style",null),wh=t([On(["in-error",ch],function(...t){return On({define(e){const n=e.get(jr);for(const e of t)if("string"==typeof e){const t=Nr(e);n.declareAttribute({name:t,change:qr(t)})}else for(const[t,r]of Object.entries(e)){const e=Nr(t);n.declareAttribute({name:e,change:qr(e,r)})}}})}("code"),(bh=({control:{control:t},aspects:e,context:n})=>function(t,e,n=Kr(e)){return new Zr(t,e,n)}(n,"code").read().keepThru_((t=>t?t.trim().split(/\s+/):[])).keepThru((r=>t.convert(Ri.to(n.element),e).setup(Pi,(t=>{t.add(Ii()),t.add(Ni({when:r}))})))),On({define(t){t.whenComponent((t=>{const{up:e}=t.get(Ec);te({parent:e().keepThru_((t=>t?re(t.get(qa)):kt({}))),aspects:t.get(Ka)}).keepThru_((({parent:[e],aspects:[n]})=>{if(e.control){const r=bh({control:e,context:t,aspects:n});if(r)return r instanceof Fs?$t(r):re(r)}return $t()})).consume(((e,n)=>{if(!e)return;const r=La(t,e);return(n||At(e)).needs(r),r}))}))}})))],wh);const vh=["has-error",ws];function xh(t){const e=t.ref(_h).read(),{root:{rules:n}}=t,r=$o.of(4,"px");return Ju(n.add({u:[":","host"],$:"bex:in-error"},e.keepThru((({$color:t,$errorFontSize:e})=>({display:"none",fontSize:e,padding:e.div(2),borderLeft:`${r} dotted ${t}`,paddingLeft:e.sub(r)})))),n.add({u:[":","host",{c:[vh,["touched",ws]],u:[":","not",{c:["has-focus",ws]}]}],$:"bex:in-error"},{display:"block"}),n.add({u:[":","host",{c:vh,u:[[":","not",{u:["code","~=","missing"]}],[":","not",{u:["code","~=","incomplete"]}]]}],$:"bex:in-error"},{display:"block"}))}let kh=class{};kh=t([yn({needs:[wh]})],kh);let $h=class{};function Sh({$fontSize:t}){return{flex:"1 1 auto",padding:0,margin:`0 0 0 ${t.div(2)}`}}$h=t([On(["main",ch],function(t={}){const e=t.onResponse?t.onResponse.bind(t):u,n=t.contentKey?t.contentKey.bind(t):Ua;return On({feature:{needs:[Pa]},define(r){r.whenComponent((r=>{const{fragment:s,render:i}=t,o=r.get(Gn).document,u=r.get(rs)(i),a=r.get(ua);let h,l=n(a.page);h=s?c(s):()=>{const{element:{id:t,tagName:e}}=r;return t?{id:t}:{tag:e}},r.whenConnected((()=>{const t=o.createRange();t.selectNodeContents(r.contentRoot),a.read().once((s=>{s.put(Oa,{fragment:h(),receiver:{supply:Et().needs(r),receive:(s,i)=>function(s){const i=n(s.page);if(i===l)return;if(!s.ok)return void u((()=>e({context:r,range:t,response:s})));l=i,u((()=>{t.deleteContents();const n=o.createDocumentFragment(),{fragment:i}=s;i&&(ya(i,n),t.insertNode(n)),e({context:r,range:t,response:s})}))}(i)}})}))}))}))}})}({onResponse({response:t,range:e}){t.ok||(e.deleteContents(),null==t.ok?e.insertNode(document.createTextNode("Loading...")):e.insertNode(document.createTextNode(`Error. ${t.error}`)))}}))],$h);let Oh=class{constructor(t){this._theme=t.get(oh)}style(){return this._theme.style(Th)}};t([th()],Oh.prototype,"style",null),Oh=t([On(["nav",ch],function(t={}){const e=t.handle?t.handle.bind(t):function(t){const e=t.href?t.href.bind(t):pa;return({event:t,page:n,navigation:r})=>{const s=e(t);if(null==s)return;const i=t.target,o=n.url,u=new URL(s,i.ownerDocument.baseURI);u.origin===o.origin&&(t.preventDefault(),o.href!==u.href&&r.open(s).catch(console.error))}}(t),r=n(t.event||"click");return On({define(t){t.whenComponent((t=>{t.whenConnected((()=>{const n=t.get(ua);for(const s of r)t.on(s).to((r=>{n.read().once((s=>e({event:r,page:s,context:t,navigation:n})))}))}))}))}})}(),function(t={}){const{select:e="a",pick:n={all:!0,deep:!0}}=t;return On({define(r){r.whenComponent((r=>{const s=function(t,e){const n=t.get(rs),{render:r,active:s=fa}=e,i=Oe.name(s,t.get(Qn)),o=e.activate?e.activate.bind(e):u,c=(t,{node:e})=>{const{element:n}=e,{classList:r}=n;t?r.add(i):r.remove(i)};return t=>{const{element:e}=t.node,s=e[da]||(e[da]=n(r)),i=e=>{s((()=>c(e,t))),o(e,t)};let u;return i(!0),{supply(){const t=u=Et((()=>{u===t&&i(!1)}));return t}}}}(r,t),i=function(t){if(!t.weigh)return ca;return e=>{const n=t.weigh(e);if("number"==typeof n)return ne(e.node,n);let r=Yt(n).keepThru_((t=>$t(e.node,t)));return Zt((t=>{r.to({supply:Et().needs(t.supply).whenOff((()=>{r=ne(e.node,0),r.to(t)})),receive:t.receive.bind(t)})}))}}(t),o=r.get(ua),c=r.get(Wc);r.whenConnected((()=>{let t=new Map;o.read().tillOff(r).consume((o=>c.select(e,n).read().keepThru_((t=>re(ee(...tt(t,(t=>i({node:t,context:r,page:o}))))))).consume(((...e)=>{const n=function(t){let e=0,n=[];return t.forEach((([t,r])=>{r>e?(e=r,n=[t]):r===e&&n.push(t)})),n}(e),i=new Map,u=Et();return n.forEach((e=>{let n;const c=t.get(e);c?(i.set(e,c),n=c):(n=s({node:e,context:r,page:o}),i.set(e,n)),n.supply().needs(u)})),t=i,u}))))}))}))}})}())],Oh);function Th(t){const e=t.ref(ah).read(),{root:{rules:n}}=t;return Ju(n.add({u:[":","host"],$:"bex:nav"},e.keepThru(Ch)),n.add({u:[":","host"],$:"bex:nav"},e.keepThru((t=>({flex:"0 1 200px",height:"100%",background:Fh(t)})))),n.add({u:[":","host"],$:["bex:nav","@media:sm"]},{flex:"0 1 100%"}),n.add([{u:[":","host"],$:"bex:nav"},{e:"a",$:"bex:nav"}],e.keepThru(Ah)),n.add([{u:[":","host"],$:"bex:nav"},{e:"a",c:["active",ls],$:"bex:nav"}],e.keepThru(Eh)))}function Ch({$fontSize:t}){return{padding:0,margin:`0 ${t.div(2)} 0 0`}}function Fh({$bgColor:t}){return t.hsl.set((({l:t})=>({l:.8*t})))}function Ah(t){const{$fontSize:e}=t;return{display:"block",margin:0,padding:`${e.div(2)} ${e}`,border:0,outline:0,background:Fh(t)}}function Eh({$fontSize:t,$color:e,$bgColor:n}){const r=$o.of(4,"px");return{background:n,borderLeft:`${r} solid ${e}`,paddingLeft:t.sub(r)}}let Dh=class{constructor(t){this._context=t}async style(){const{elementDef:{name:t}}=await this._context.get(sn).whenDefined($h);return this._context.get(oh).style(function(t){return e=>{const n=e.ref(ah).read(),{root:{rules:r}}=e;return Ju(r.add({u:[":","host"],$:"bex:container"},{height:"100%",display:"flex",flexFlow:"row wrap",alignItems:"stretch",alignContent:"flex-start"}).add(n.keepThru(hh)),r.add({u:[":","host"],$:["bex:container","@media:sm"]},{height:"auto"}),r.add([{u:[":","host"],$:"bex:container"},{e:t,$:"bex:container"}],n.keepThru(Sh)))}}(t))}};t([th()],Dh.prototype,"style",null),Dh=t([On({name:["container",ch],feature:{needs:[$h,Oh]}})],Dh);let Rh=class{};Rh=t([yn({needs:[Dh,Pa,class{static get[ln](){return eh}}]})],Rh);let zh=class{};zh=t([yn({setup(t){t.perComponent({a:Qa,as:Ya})},init(t){t.whenReady((()=>{Fu(t.get(oh).style(gh),Su())}))}})],zh);let Ph=class{};function Uh(t){const e=t.ref(_h).read(),{root:{rules:n}}=t;return Ju(n.add({e:"input"},e.thru(Mh)),n.add({e:"input",s:"[readonly]"},e.thru(Kh)),n.add({e:"input",s:"[disabled]"},e.thru(Kh)),n.add({e:"input",s:":focus"},e.thru(qh)),n.add({e:"input",c:[["invalid",ws],["touched",ws]]},e.keepThru(Lh)),n.add({e:"input",c:[["missing",ws],["touched",ws]]},{outlineStyle:"dotted"}),n.add({e:"input",c:[["incomplete",ws],["touched",ws]]},{outlineStyle:"dotted"}))}function Mh({$color:t,$fontFace:e,$fontSize:n,$lineHeight:r,$fontWeight:s,$marginV:i,$marginH:o,$paddingV:u,$paddingH:c,$bgColor:a,$borderColor:h,$borderW:l}){return{color:t,font:`normal ${s} ${n}/${r} ${e}`,padding:`${u} ${c}`,margin:`${i} ${o}`,backgroundColor:a,border:"0 none",outline:`${l} solid ${h}`,boxShadow:"inset 1px 1px 2px -2px black",boxSizing:"border-box",width:"100%"}}function Kh({$roBgColor:t}){return{backgroundColor:t}}function qh({$color:t,$borderColor:e}){return{outlineColor:uo(e,t,.5)}}function Lh({$color:t,$borderW:e,$borderColor:n}){return{outline:`${e.mul(2)} dashed ${uo(n,t,.25)}`}}Ph=t([yn({needs:[zh,kh,Rh]})],Ph);const Nh=function(...t){const e=Ln.create(),{bootstrapContext:n,complete:r}=function(t){const e=_e(0),n=t.values;class r extends sn{constructor(){super(),this.get=n.get,t.provide({a:Qn,by:Ee}),t.provide({a:sn,is:this})}whenDefined(t){return function(t,e){if(e.hasOwnProperty(Ur))return e[Ur];const n=ae(Promise.resolve(t.whenReady()).then((()=>t.get(or).whenDefined(e))).then((()=>sr(e))));return e[Ur]=n}(this,t)}whenReady(t){return(this.whenReady=e.read().thru((t=>t?$t(this):St())).once().F)(t)}load(t){const e=Zt((e=>{const n=s.get(Pr).request(t),r=_e({status:{feature:t,ready:!1}});this.get($r.of(t)).to({supply:e.supply,receive(t,e){const n=e;r.it={status:{feature:n.request.feature,ready:n.ready},down:n.down},n.ready||n.init().then((()=>{r.it={status:{feature:n.request.feature,ready:!0},down:n.down}})).catch(console.error)}}).whenOff((()=>{n.unuse()})),r.read(e)})).share();let n;const r=e.to((({down:t})=>{n=t}));class i extends bn{get down(){return n}read(t){return(this.read=e.tillOff(r).keepThru((t=>t.status)).F)(t)}dismiss(t){return r.off(t),n}}return new i}}const s=new r;return{bootstrapContext:s,complete(){e.it=1}}}(e),s=1===t.length?t[0]:(i=t,gn.define(class{},{needs:i}));var i;return n.get(Pr).request(s),n.get($r.of(s)).to((t=>{t.init().then(r).catch(console.error)})),n}(Ph);export{Vr as A,Gn as B,On as C,fh as D,ch as E,_h as F,Ri as I,th as P,ss as R,oh as T,me as V,hs as a,ah as b,Wc as c,oi as d,te as e,Ka as f,xi as g,fi as h,Mh as i,bi as j,Pi as k,Ii as l,La as m,At as n,Ph as o,Uh as p,Nh as q,Kh as r,Ju as s};//# sourceMappingURL=common.6cc1bc75.js.map
