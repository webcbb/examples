import{_ as t}from"./lib.fa155c56.js";function e(t){return function(t){return Array.isArray(t)}(t)?t:null!=t?[t]:[]}function n(t,e){return t===e}function r(t){return()=>t}function s(...t){return()=>t}function o(t){let e=()=>{e=i;const n=t();return e=r(n),n};return()=>e()}function i(){throw new TypeError("Recurrent evaluation")}function u(t){return"function"==typeof t?t:r(t)}function c(t,e,n,r,s){let o,i;if(void 0!==s?(o=r?Math.max(r,0):0,i=null!=s?s:Math.max(t.length,e.length)):null!=r?(o=0,i=r):(o=0,i=Math.max(t.length,e.length)),(t.length<=i||e.length<=i)&&t.length!==e.length)return!1;for(let r=o;r<i;++r)if(!n(t[r],e[r],r))return!1;return!0}function a(t){const e=Array.from(t),{length:n}=e;if(n)return 1===n?e[0]:e}function h(t){return e=t,Array.isArray(e)?new Set(t):null!=t?new Set([t]):new Set;var e}function l(t,e){var n;return n=e,Array.isArray(n)?e.forEach((e=>t.add(e))):null!=e&&t.add(e),t}function d(t,e=(()=>!0)){const n=Object.getPrototypeOf(t.prototype);if(null==n)return;const r=n.constructor;return e(r)?r:d(r,e)}function f(t){return t}function p(t){let e=t.length;for(;e>0;){const n=e-1;if(void 0!==t[n])break;e=n}return e}function y(t,e,n=((t,e)=>e)){return t?e?function(...r){return n(t.apply(this,r),e.apply(this,r))}:t:e}function g(){}function _(t){return null!=t}function m(t){return void 0!==t}const w=Symbol("push-iterator");function b(t){return!!t[w]}function v(t){return t[Symbol.iterator]()}function x(t){return{[Symbol.iterator]:S,[w]:t}}function S(){return this[w]()}function $(t,e){return!t[w](e).isOver()}function k(t){let e=!1,n=r=>{r&&!t(r)&&(e=!0,n=D)};return{[Symbol.iterator]:C,[w](t){return n(t),this},next:A,isOver:()=>e}}function C(){return this}function A(){for(;;){let t;const e=!$(this,(e=>(t={value:e},!0)));if(t)return t;if(e)return{done:!0}}}function O(){return{done:!0}}function D(t){}const R={[Symbol.iterator]:C,[w](t){return this},next:()=>({done:!0}),isOver:()=>!0};function E(t,e){return t[w](e)}function T(t,e){return t[e]}function F(t){return e=t,n=T,t=>{let r=0;const s=t=>{if(r>=e.length)return!1;for(;;){const s=t(n(e,r++));if(r>=e.length||!1===s)return!1;if(!0===s)return!0}};if(t&&!s(t))return R;let o=!1,i=t=>{t&&!s(t)&&(o=!0,i=D,u=O)},u=()=>r<e.length?{value:n(e,r++)}:(o=!0,i=D,u=O,{done:!0});return{[Symbol.iterator]:C,[w](t){return i(t),this},next:()=>u(),isOver:()=>o}};var e,n}function M(t){return x(F(t))}function P(t,e){if(b(t))return $(t,e);const n=v(t);if(b(n))return $(n,e);for(;;){const t=n.next();if(t.done)return!1;const r=e(t.value);if("boolean"==typeof r)return r}}function z(t,e){P(t,(t=>{e(t)}))}const K=t=>t;function N(t,e=K){if(b(t))return U(t,e);const n=v(t);return b(n)?U(n,e):Array.from(t,e)}function U(t,e){const n=[];return $(t,(t=>{n.push(e(t))})),n}function B(t){let e=!0;return $(t,(t=>e=!1)),e}function j(t,e){let n=!0;return P(t,(t=>{if(n=!!e(t),!n)return!1})),n}function L(t){if(b(t))return q(t);const e=v(t);return b(e)?q(e):function(t){const e=t.next();return e.done?void 0:e.value}(e)}function q(t){let e;return $(t,(t=>(e=t,!1))),e}function V(t,e){let n=!1,r=t=>{(n=!!t&&!e(t))&&(r=D,s=O)},s=()=>{const e=t.next();return e.done&&(n=!0,r=D,s=O),e};return{[Symbol.iterator]:C,[w](t){return r(t),this},next:()=>s(),isOver:()=>n}}function W(t){return e=>{for(;;){const n=t.next();if(n.done)return!1;const r=e(n.value);if("boolean"==typeof r)return r}}}function I(t,e){return b(t)?E(t,e):Array.isArray(t)?function(t,e){return t.length?F(t)(e):R}(t,e):function(t,e){const n=v(t);if(b(n))return E(n,e);const r=W(n);return r(e)?V(n,r):R}(t,e)}function H(t){const e=v(t);return b(e)?e:V(e,W(e))}function G(t,e,n){let r=n;return P(t,(t=>{r=e(r,t)})),r}function J(){return R}function Q(t){return x(function(t){return e=>{const n=t();if(b(n))return n[w](e);const r=W(n);return e&&!r(e)?J():V(n,r)}}(t))}function Z(...t){return t.length>1?x(function(t){return e=>{let n=0,r=t[0];const s=e=>{for(;;){let s;const o=I(r,(t=>s=e(t)));if(o.isOver()){if(++n>=t.length)return!1;r=t[n]}else r=o;if("boolean"==typeof s)return s}};return e&&!s(e)?J():k(s)}}(t)):t.length?(e=t[0],Array.isArray(e)?M(e):Q((()=>v(e)))):J();var e}function X(t){return x(function(t){return e=>{if(e)return e(t),J();let n=!1;return{[Symbol.iterator]:C,[w](e){return n?J():e?(n=!0,e(t),J()):this},next:()=>n?{done:n}:(n=!0,{value:t}),isOver:()=>n}}}(t))}function Y(t){return M(Reflect.ownKeys(t))}function tt(t,e){return x(function(t,e,n){return r=>{let s=0;const o=r=>{for(;;){if(s>=t.length)return!1;const o=e(t,s++);if(n(o)){const t=r(o);if("boolean"==typeof t)return t}}};if(r&&!o(r))return J();let i=!1,u=t=>{t&&!o(t)&&(i=!0,u=D,c=O)},c=()=>{for(;;){if(s>=t.length)return i=!0,u=D,c=O,{done:!0};const r=e(t,s++);if(n(r))return{value:r}}};return{[Symbol.iterator]:C,[w](t){return u(t),this},next:()=>c(),isOver:()=>i}}}(t,T,e))}function et(t,e){return x((n=>{const r=b(t)?nt(t,e):function(t,e){const n=v(t);if(b(n))return nt(n,e);return t=>{for(;;){const r=n.next();if(r.done)return!1;const s=r.value;if(e(s)){const e=t(s);if("boolean"==typeof e)return e}}}}(t,e);return n&&!r(n)?J():k(r)}))}function nt(t,e){return n=>{const r=E(t,(t=>{if(e(t))return n(t)}));return t=r,!r.isOver()}}function rt(t,e){return x((n=t,r=e?(t,n)=>e(t[n]):st,t=>{let e,s=0;const o=t=>{if(s>=n.length)return!1;for(e||(e=r(n,s));;){let o;const i=I(e,(e=>o=t(e)));if(i.isOver()){if(++s>=n.length)return!1;e=r(n,s)}else e=i;if("boolean"==typeof o)return o}};return t&&!o(t)?J():k(o)}));var n,r}function st(t,e){return t[e]}function ot(t,e=ut){return x((n=>{const r=b(t)?it(t,e):function(t,e){const n=v(t);if(b(n))return it(n,e);let r;return t=>{for(;;){if(!r){const t=n.next();if(t.done)return!1;r=e(t.value)}let s;const o=I(r,(e=>s=t(e)));if(r=o.isOver()?void 0:o,"boolean"==typeof s)return s}}}(t,e);return n&&!r(n)?J():k(r)}))}function it(t,e){let n,r=!1;return s=>{for(;;){for(;!n;){const s=E(t,(t=>(n=e(t),!0)));if(t=s,s.isOver()){if(!n)return!1;r=!0}}let o;const i=I(n,(t=>o=s(t)));if(i.isOver()){if(n=void 0,r)return!1}else n=i;if("boolean"==typeof o)return o}}}function ut(t){return t}function ct(t,e){return x((n=>{const r=b(t)?at(t,e):function(t,e){const n=v(t);if(b(n))return at(n,e);return t=>{for(;;){const r=n.next();if(r.done)return!1;const s=t(e(r.value));if("boolean"==typeof s)return s}}}(t,e);return n&&!r(n)?J():k(r)}))}function at(t,e){return n=>{const r=E(t,(t=>n(e(t))));return t=r,!r.isOver()}}function ht(t,e){return x((n=>{const r=b(t)?lt(t,e):function(t,e){const n=v(t);if(b(n))return lt(n,e);return t=>{for(;;){const r=n.next();if(r.done)return!1;const s=e(r.value);if(null!=s&&!1!==s){const e=t(s);if("boolean"==typeof e)return e}}}}(t,e);return n&&!r(n)?J():k(r)}))}function lt(t,e){return n=>{const r=E(t,(t=>{const r=e(t);if(null!=r&&!1!==r)return n(r)}));return t=r,!r.isOver()}}function dt(t){return ct(Y(t),(e=>[e,t[e]]))}let ft=pt;function pt(t){console.error("Supply aborted unexpectedly.",t)}let yt,gt=!1;function _t(){const t=gt;return gt=!0,t}function mt(t){if(gt=t,!t){const t=yt;if(t){yt=void 0;for(const e of t)ft(e)}}}const wt=Symbol("SupplyState"),bt={isOff:!0,off:xt,whenOff(t,e){e()}};function vt(t){return void 0===t?bt:{isOff:!0,off:xt,whenOff(e,n){n(t)}}}function xt(t,e){}const St={isOff:!1,off(t,e){const n=_t();try{t[wt]=vt(e),function(t){void 0!==t&&(yt||(yt=new Set),yt.add(t))}(e)}finally{mt(n)}},whenOff(t,e){t[wt]=$t(e)}};function $t(t){return{isOff:!1,off(e,n){const r=_t();try{e[wt]=vt(n),t(n)}finally{mt(r)}},whenOff(e,n){const r=t;t=t=>{r(t),n(t)}}}}class kt{constructor(t){this[wt]=t?$t(t):St}static onUnexpectedAbort(t){!function(t=pt){ft=t}(t)}get supply(){return this}get isOff(){return this[wt].isOff}off(t){return this[wt].off(this,t),this}whenOff(t){return this[wt].whenOff(this,t),this}whenDone(){return new Promise(((t,e)=>this.whenOff((n=>void 0===n?t():e(n)))))}cuts(t){return t.supply.needs(this),this}needs(t){return t.supply.whenOff((t=>this.off(t))),this}as(t){return this.needs(t).cuts(t)}}class Ct extends kt{get isOff(){return!1}off(t){return this}whenOff(t){return this}cuts(t){return this}needs(t){return this}}const At=new Ct;function Ot(){return At}function Dt(t){return t===At}class Rt extends kt{get isOff(){return!0}off(){return this}whenOff(t){return t(),this}cuts(t){return t.supply.off(),this}needs(t){return this}}const Et=new Rt;function Tt(){return Et}class Ft extends Error{constructor(t,e=`There is no value with key ${t}`){super(e),this.key=t}}const Mt=Symbol("ContextKey");class Pt{constructor(t){this.name=t}get[Mt](){return this}toString(){return`ContextKey(${this.name})`}}class zt extends Pt{constructor(t){super(`${t.name}:seed`)}get seedKey(){return this}grow(t){const{seeder:e,seed:n}=t;e.isEmpty(n)&&t.hasFallback||t.insert(n)}}class Kt{}const Nt=Symbol("Contextual");function Ut(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t[Nt]}class Bt{constructor(){this._providers=new Map}provide(t){const e=new kt;return this._providers.set(e,t),e.whenOff((()=>this._providers.delete(e)))}seed(t,e=J()){return Z(e,function(t,e){return ht(N(Q((()=>e.values())),(e=>o(e.bind(void 0,t)))),(t=>t()))}(t,this._providers))}isEmpty(t){return function(t){if(b(t))return B(t);const e=v(t);return b(e)?B(e):!!e.next().done}(t)}combine(t,e){return Z(t,e)}}class jt extends zt{seeder(){return new Bt}}class Lt extends Pt{constructor(t,{seedKey:e}={}){super(t),this.seedKey=e||new jt(this)}}class qt extends Lt{constructor(t,{seedKey:e,byDefault:n=s()}={}){super(t,e),this.byDefault=n}grow(t){const e=N(t.seed);if(e.length)t.insert(e);else if(!t.hasFallback){const e=this.byDefault(t.context,this);e&&t.insert(Array.from(e))}}}class Vt{constructor(){this._providers=[]}provide(t){const e=[t];return this._providers.unshift(e),new kt((()=>this._providers.splice(this._providers.lastIndexOf(e),1)))}seed(t,e){const{length:n}=this._providers;if(!n)return e||g;const r=([e])=>o(e.bind(void 0,t));if(!e&&1===n)return r(this._providers[0]);const s=this._providers.map(r);return e&&s.push(e),Wt(s)}isEmpty(t){return null==t()}combine(t,e){return t===g?e:e===g?t:Wt([e,t])}}function Wt(t){return o((()=>{for(const e of t){const t=e();if(null!=t)return t}}))}class It extends zt{seeder(){return new Vt}}class Ht extends Pt{constructor(t,{seedKey:e}={}){super(t),this.seedKey=e||new It(this)}}class Gt extends Ht{constructor(t,{seedKey:e,byDefault:n=g}={}){super(t,{seedKey:e}),this.byDefault=n}grow(t){const e=t.seed();null!=e?t.insert(e):t.hasFallback||t.insert(this.byDefault(t.context,this))}}class Jt extends Ht{constructor(){super("context-supply")}grow(t){t.insert(t.seed()||t.context.supply||(t.hasFallback?t.or:Ot()))}}const Qt=new Jt,Zt=Symbol("ContextBuilder");class Xt{constructor(t){this._initial=t,this._issuers=new Map}issuer(t){const e=this._issuers.get(t);if(e)return e;const n=t.seeder(),r=[n,e=>n.seed(e,this._initial(t,e))];return this._issuers.set(t,r),r}newSeed(t,e){const{seedKey:n}=e,[r,s]=this.issuer(n);return n!==e?[r,t.get(n)]:[r,s(t)]}}function Yt(t){return"with"in t}class te{constructor(t,e,n,r={}){this.context=e,this.key=n,this._opts=r,this._constructed=null,this._setup=g;const[s,o]=t.newSeed(e,n);this.seeder=s,this.seed=o,this.hasFallback="or"in r}get or(){return this._opts.or}insert(t){this._constructed=t}fillBy(t){return t(this),this._constructed}setup(t){const e=this._setup;this._setup=n=>{e(n),t(n)}}_grow(){if(this.key.grow(this),null!=this._constructed)return[this._constructed,this._setup];if(!this.hasFallback)throw new Ft(this.key);return[this.or]}}class ee{constructor(t){this._seeders=new Xt(t?"function"==typeof t?t:e=>t.get(e):g)}provide(t){if(function(t){return"function"==typeof t[Zt]}(t))return t[Zt](this);const{a:{[Mt]:{seedKey:e}},by:n}=function(t){if(function(t){return"by"in t}(t)){if(!Yt(t))return t;const{a:e,by:n,with:r}=t;return{a:e,by:t=>n(...r.map((e=>t.get(e))))}}if(function(t){return"is"in t}(t)){const{a:e,is:n}=t;return{a:e,by:r(n)}}if(function(t){return"via"in t}(t)){const{a:e,via:n}=t;return{a:e,by:t=>t.get(n)}}if(function(t){return"as"in t}(t)){if(function(t){return!("a"in t)}(t)&&(t=function(t){return{...t,a:t.as}}(t)),!Yt(t)){const{as:e}=t;return{a:t.a,by:t=>new e(t)}}const{as:e,with:n}=t;return{a:t.a,by:t=>new e(...n.map((e=>t.get(e))))}}throw new TypeError(`Malformed context value specifier: ${JSON.stringify(t)}`)}(t),[s]=this._seeders.issuer(e);return s.provide(n)}seed(t,e){const[,n]=this._seeders.issuer(e);return n(t)}seeds(){return(t,e)=>this.seed(e,t)}seedIn(t){return this.newValues().get.bind(t)}newValues(){return function(t,e){const n=new Map;return new class extends Kt{get({[Mt]:r},s){const o=n.get(r);if(null!=o)return o;const[i,u]=new te(e,this,r,s)._grow();return u&&(n.set(r,i),u({key:r,context:this,registry:t})),i}}}(this,this._seeders)}append(t){const e="function"==typeof t?t:t.seeds();return new ee(((t,n)=>{const r=e(t,n),[s,o]=this._seeders.issuer(t),i=o(n);return r?s.combine(i,r,n):i}))}}class ne{name(t,e){if("string"==typeof t)return t;const[n,r]=t;return r.name(e(r),n,this)}}class re extends ne{applyAlias(t,e){return`${e}-${t}`}}const se=new re,oe=new re;class ie extends ne{applyAlias(t,e){return`${e}:${t}`}}const ue=new ie;class ce extends ne{applyAlias(t,e){return`${t}@${e}`}}const ae=new ce;class he{constructor(t,...e){this.url=t,this.aliases=e}get alias(){return this.aliases[0]||"ns"}name(t,e,n=se){return n.applyAlias(e,t,this)}}function le(t){return"string"==typeof t||function(t){return Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&t[1]instanceof he}(t)}function de(t,e){if("string"==typeof t)return"string"==typeof e?fe(t,e):e[1].url?-1:fe(t,e[0]);const[n,{url:r}]=t;return"string"==typeof e?r?1:fe(n,e):fe(r,e[1].url)||fe(n,e[0])}function fe(t,e){return t<e?-1:t>e?1:0}function pe(){const t=new Map,e=new Map;return function(n){const r=t.get(n.url);if(r)return r;const s=n.alias;let o=0;for(const r of[s,...n.aliases]){const s=e.get(r);if(!s)return t.set(n.url,r),e.set(r,1),r;o||(o=s)}const i=`${s}${++o}`;return t.set(n.url,i),e.set(s,o),i}}const ye=Symbol("after-event");function ge(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t[ye]}function _e(t){let e,n;return"function"==typeof t?(e=new kt,n=(e,...n)=>t(...n)):(e=t.supply||new kt,n=(n,...r)=>{e.isOff||t.receive(n,...r)}),e.whenOff((()=>n=me)),{supply:e,receive:(t,...e)=>n(t,...e)}}function me(t,...e){}function we(t){let e=function n(r){let s=t;const o=[];e=t=>o.push(t);try{for(;;){s=be(s,r);const t=o.shift();if(!t)break;r=t}}finally{e=n}};return(...t)=>e(t)}function be(t,e){const n=[];for(const r of t){const t=n.length;n.push(r);const s={onRecurrent(e){n[t]=_e({supply:r.supply,receive(t,...n){e(...n)}})}};r.receive(s,...e)}return n}class ve{constructor(){const t=this._rcs=new Set;this.send=we(t),this.supply=new kt((()=>{t.clear(),delete this._rcs}))}get size(){return this._rcs?this._rcs.size:0}on(t){const e=_e(t),n=e.supply.needs(this),r=this._rcs;return r&&!n.isOff&&(r.add(e),n.whenOff((()=>r.delete(e)))),n}}const xe=Symbol("on-event");function Se(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t[xe]}class $e extends TypeError{constructor(t="No events to send"){super(t)}}function ke(t){const e=_e(t);let n=we([e]);return e.supply.whenOff((()=>n=g)),(...t)=>n(...t)}function Ce(){throw new $e}function Ae(t,e){return({supply:n,receive:r})=>{let s=Tt();t({supply:n,receive:(t,...o)=>{const i=s,u=e(...o);s=u?u({supply:new kt((t=>{t!==Ae&&n.off(t)})).needs(n),receive:r}):Tt(),i.off(Ae)}})}}function Oe(...t){return t.reduce(((t,e)=>e(t)),this)}function De(){return this}function Re(t){return({supply:e,receive:n})=>{t({supply:e,receive:(t,...r)=>{n(t,...r),e.off()}})}}function Ee(t,e){return new Promise(((n,r)=>{Re(this)({supply:new kt(e?t=>{try{n(e(t))}catch(t){r(t)}}:r),receive:t?(e,...s)=>{try{n(t(...s))}catch(t){r(t)}}:(t,e)=>n(e)})}))}function Te(t){const e=new Fe(t);return e.on.bind(e)}class Fe extends ve{constructor(t){super(),this.supplier=t,this._on=this._onInit()}on(t){return this._on.on(t),t.supply}_onInit(){return{on:t=>{const e=[],n=new kt((()=>this._on=this._onInit())),r=this._on=this._onFirst(n,e);try{r.on(t),this.supplier({supply:n,receive:(t,...e)=>this._on.dispatch(...e)})}finally{this._on===r&&(this._on=this._onNext(n,e))}},dispatch:null}}_onFirst(t,e){return{on:n=>this._addReceiver(n,t,e),dispatch:(...t)=>{e.push(t),this.send(...t)}}}_onNext(t,e){return{on:n=>this._addReceiver(n,t,e),dispatch:(...t)=>{e.length=0,this.send(...t)}}}_addReceiver(t,e,n){if(e.cuts(t),super.on(t).whenOff((t=>{this.size||e.off(t)})),n.length){const e=ke(t);n.forEach((t=>e(...t)))}}}function Me(t,e,n){return r=>{n?t({supply:(new kt).needs(e).cuts(n),receive:r.receive}):(r.supply.needs(e),t(r))}}function Pe(t,e){return n=>{const r=ke(n);t({supply:n.supply,receive:(t,...n)=>{e(r,...n)}})}}function ze({supply:t}){t.off()}function Ke(t){const e=e=>{const n=_e(e),{supply:r}=n;if(!r.isOff)try{t(n)}catch(t){r.off(t)}return r};return e[xe]=De,e.do=Oe,e.then=Ee,e}function Ne(t,e=Ce,n=Ue){let r,s=0;const o=o=>{let i=g;const u=_e(o);if(u.supply.isOff)return u.supply;const c=new kt(g).needs(u);let a=!1;++s;try{t({supply:c,receive:(t,...e)=>{a=!0,r=e,i(t,...e)}})}catch(t){c.off(t)}if(!c.isOff||a){if(!r)try{r=e()}catch(t){c.off(t)}r&&(u.receive({onRecurrent(t){i=(e,...n)=>t(...n)}},...r),i=(t,...e)=>u.receive(t,...e))}return c.whenOff((t=>{--s||(r=void 0),u.supply.off(t),s||n(t)}))};return o[xe]=De,o.do=Oe,o.then=Ee,o[ye]=De,o}function Ue(t){}function Be(t){return function(t){return"function"==typeof t&&t[xe]===De&&t.do===Oe&&t.then===Ee}(t)&&t[ye]===De}function je(t){const e=Object.keys(t);return Ne(Te(Ne((n=>{const{supply:r}=n,s=ke(n);let o=g;const i={};e.forEach((e=>{r.needs(t[e][ye]()(((...t)=>{i[e]=t,o()})).needs(r))})),r.isOff||(o=()=>s(i))}),(()=>{const n={};return e.forEach((e=>Re(t[e][ye]())({supply:new kt,receive:(t,...r)=>n[e]=r}))),[n]}))))}function Le(...t){return Ne(Te(Ne((e=>{const{supply:n}=e,r=ke(e);let s=g;const o=[];t.forEach(((t,e)=>{n.needs(t[ye]()(((...t)=>{o[e]=t,s()})).needs(n))})),n.isOff||(s=()=>r(...o))}),(()=>{const e=[];return t.forEach((t=>Re(t[ye]())({supply:new kt,receive:(t,...n)=>e.push(n)}))),e}))))}function qe(t,e){return Ne((e=>t[xe]()(e)),e)}function Ve(t,e){return ge(t)?t[ye]():qe(t,e)}function We(...t){return Ne(g,r(t))}function Ie(t){return Be(t)?t:We(t)}function He(t){return e=>{let n=Tt();const r=new kt((t=>n.off(t)));return e({supply:r,receive(e,...r){const s=n;try{n=(t(...r)||Tt()).supply}finally{n!==s&&s.off()}}}),r}}function Ge(t){return Ne(Te(t))}let Je,Qe;function Ze(t,e){return t||e?Xe(t,e):Je||(Je=Xe())}function Xe(t,e){const n=Ye(t,e);return t=>Ge(n(t))}function Ye(t,e){return t||e?en(t,e):Qe||(Qe=en())}const tn={};function en(t=nn,e=f){return n=>{let r=tn;return Ne((({supply:s,receive:o})=>n({supply:s,receive(n,...s){const i=e(s);r!==tn&&t(r,i)||(r=i,o(n,...s))}})),void 0,(t=>r=tn))}}function nn(t,e){return r=t,s=e,"function"==typeof(o=Math.max(p(t),p(e)))?c(r,s,o,i,u):c(r,s,n,o,i);var r,s,o,i,u}function rn(t,e){const n=sn(t,e);return t=>Ge(n(t))}function sn(t,e){const n=(...e)=>{const n=t(...e);return n&&Ve(n)};return t=>Ne(Ae(t,n),e)}class on extends ve{constructor(){super(...arguments),this.on=Ke((t=>super.on(t)))}[xe](){return this.on}}const un=Ke(ze);function cn(t){return Se(t)?t[xe]():t[ye]()}function an(...t){return t.length?Ke(Te(Ke((({supply:e,receive:n})=>{let r=t.length;const s=t=>{--r||e.off(t)};t.forEach((t=>cn(t)({supply:new kt(s).needs(e),receive:n})))})))):un}function hn(t){let e=n=>{t.then((()=>e(n)),(()=>e(n)))};return t.then((t=>{e=function(t){return e=>{try{ke(e)(t),e.supply.off()}catch(t){e.supply.off(t)}}}(t)})).catch((t=>{var n;n=t,e=({supply:t})=>t.off(n)})),Ke((t=>e(t)))}function ln(t){return Ke(Te(t))}function dn(t){const e=(...e)=>{const n=t(...e);return n&&cn(n)};return t=>Ke(Ae(t,e))}function fn(t){const e=pn(t);return t=>ln(e(t))}function pn(t){return e=>Ke(Pe(e,t))}function yn(t,e){const n=gn(t,e);return t=>Ge(n(t))}function gn(t,e){return n=>Ne(Pe(n,((e,...n)=>e(t(...n)))),e&&(()=>[e()]))}function _n(t){const e=mn(t);return t=>ln(e(t))}function mn(t){return e=>Ke(Pe(e,((e,...n)=>e(t(...n)))))}function wn(t){return Ne(Re(t))}function bn(t){return Ke(Re(t))}function vn(t,e){return Dt(t.supply)?f:n=>Ke(Me(n,t,e))}function xn(t){return Ke((e=>{const{supply:n}=e,r=ke(e),s=new kt;let o=0;const i=t.do(vn(n,s),_n((t=>(++o,t))));let u=[],c=1,a=0;s.whenOff((t=>{o||n.off(t)})),function(t){return Ke((e=>{const{supply:n}=e,r=ke(e);let s=0;t({supply:n,receive(t,e){const o=++s;Promise.resolve().then((()=>e)).then((t=>r(t,o)),(t=>n.off(t)))}})}))}(i)({supply:n,receive(t,e,i){const h=i-c;if(u[h]=e,++a,a>h){let t;a===u.length?(t=u,u=[]):t=u.splice(0,h+1),c+=t.length,a-=t.length,o-=t.length,r(...t),!o&&s.isOff&&n.needs(s)}}})}))}function Sn(t,e){return Dt(t.supply)?f:n=>Ne(Me(n,t,e))}function $n(t,e){const n=kn(t,e);return t=>Ge(n(t))}function kn(t,e){return n=>Ne(Pe(n,t),e)}function Cn(t){const e=An(t);return t=>ln(e(t))}function An(t){return pn(((e,...n)=>{const r=t(...n);null!=r&&!1!==r&&e(r)}))}function On(t){return Array.isArray(t)?t:[t]}class Dn{constructor(t){this._drop=t,this.emitter=new on,this._nested=new Map,this.emitter.on(((t,e,n)=>{const r=t[0],s=this._nested.get(r);s&&s.emitter.send(t.slice(1),e,n)}))}on(t){const e=this.emitter.on(t);return new kt((t=>{e.off(t),this._dropIfEmpty()})).needs(e)}nest(t,e){const n=this._nested.get(t);if(n||e)return n;const r=new Dn((()=>this._remove(t)));return this._nested.set(t,r),r}done(t){for(const e of this._nested.values())e.done(t);this.emitter.supply.off(t)}_remove(t){this._nested.delete(t),this._dropIfEmpty()}_dropIfEmpty(){!this._nested.size&&this.emitter.size<=1&&this._drop()}}class Rn{constructor(){this._root=new Dn(g)}on(t,e){return this._entry(t).on(e)}send(t,e,n){this._root.emitter.send(t,e,n)}done(t,e){const n=this._entry(t,!0);n&&n.done(e)}_entry(t,e){let n=this._root;for(const r of t){const t=n.nest(r,e);if(!t)return;n=t}return n}}class En{constructor(t,e){this._trackers=t,this._path=e,this.onUpdate=Ke((t=>this._trackers.on(this._path,t))),this.update=(t,e,n)=>{this._trackers.send([...this._path,...On(t)],e,n)}}get _tracker(){return this}[xe](){return this.onUpdate}track(t){return(t=On(t)).length?new En(this._trackers,[...this._path,...t]):this}done(t){this._trackers.done(this._path,t)}}class Tn{constructor(){this._tracker=new En(new Rn,[])}get onUpdate(){return this._tracker.onUpdate}[xe](){return this.onUpdate}get update(){return this._tracker.update}track(t){const e=this._tracker.track(t);return e===this._tracker?this:e}done(t){this._tracker.done(t)}}class Fn{constructor(){this._by=Tt(),this.read=Ne((t=>{return this.on({supply:(e=t).supply,receive(t,n){e.receive({onRecurrent(e){t.onRecurrent((t=>e(t)))}},n)}});var e}),(()=>[this.it]))}[xe](){return this.on}[ye](){return this.read}by(t,e){const n=t=>(ge(t)?t[ye]():t[xe]())((t=>this.it=t));if(this.byNone(),e){const r=t;this._by=cn(r).do(He(((...t)=>{const r=e(...t);if(r)return n(r)})))}else{const e=t;this._by=n(e)}return this._by.whenOff((()=>this._by=Tt())),this}byNone(t){return this._by.off(t),this}}class Mn extends Fn{constructor(t){super(),this._it=t,this._on=new on}get supply(){return this._on.supply}get on(){return this._on.on}get it(){return this._it}set it(t){const e=this._it;e!==t&&(this._it=t,this._on.send(t,e))}}function Pn(t){return new Mn(t)}function zn(t,e){return Pn().by(t,e)}class Kn extends Fn{constructor(t){super(),this._on=new on,this._it=t}get on(){return this._on.on}get supply(){return this._on.supply}get it(){return this._it}set it(t){const e=this.it;e!==t&&(this._it=t,this._on.send(t,e))}sync(t,e,n){let r,s,o=t=>c(this,t);"string"==typeof t?("in"===t&&(o=t=>c(t,this)),r=e,s=n):(r=t,s=e);const i=s;if(!i)return o(r);const u=r;return(ge(u)?Ve(u):cn(u)).do(He(((...t)=>{const e=i(...t);return e&&o(e)})));function c(t,e){const n=t.read((t=>{e.it=t})),r=e.on((e=>{t.it=e}));return new kt((t=>{r.off(t),n.off(t)})).needs(n).needs(r)}}}class Nn extends TypeError{constructor(t,e,n,r=t.workName(e)+(void 0!==n?` already terminated (${n})`:" already done")){super(r),this.workload=t,this.work=e,this.reason=n}}class Un{constructor(t,e){this.name=t,this.allocator=e}workName(t){return`The work of ${this.name}`}toString(){return`Workload(${this.name})`}}class Bn{constructor(t){this._allotment=t,this._queues=new Map}runAfter(t,e){let n=this._queues.get(t);return n||(n=new jn(this._allotment),this._queues.set(t,n)),n.enqueue(e)}}class jn{constructor(t){this._allotment=t,this._tasks=[]}enqueue(t){return new Promise((e=>{const n={task:t,run:()=>{e(this._allotment.run(t).finally((()=>{this._tasks.shift(),this._runNext()})))}};this._tasks.push(n),1===this._tasks.length&&this._runNext()}))}_runNext(){const[t]=this._tasks;t&&t.run()}}class Ln extends Un{constructor(){super("ordering",{start:t=>new Bn(t)})}}Ln.$=new Ln;class qn extends Un{constructor(t,e={}){super(t,{start(t){const{workbench:n,workload:r,supply:s}=t,o=new Vn(t,e);return{workbench:n,stage:r,supply:s,async run(t){return await o.run(this,t)}}}})}workName(t){return`The ${this.name} stage`}toString(){return`WorkStage(${this.name})`}}class Vn{constructor(t,e){this.allotment=t,this.allocator=e,this._whenTaskDone=Promise.resolve();const{supply:n}=t;this._whenAllDone=new Promise((t=>this._end=t)).then((()=>n.off())).catch((t=>n.off(t))),n.whenOff((e=>{void 0===e?this._end():this._end(Promise.reject(e)),this.run=(n,r)=>Promise.reject(new Nn(t.workload,n,e))}))}run(t,e){const n=this._start(t).then((()=>this.allotment.run(e)));return this._addTask(n),n}_addTask(t){const e=this._whenTaskDone=Promise.all([this._whenTaskDone,t.catch(g)]);e.finally((()=>{e===this._whenTaskDone&&this._end(e)}))}_start(t){let e=this._awaitDeps();return this.allocator.start&&(e=e.then((async()=>{await this.allocator.start(t)}))),this._start=r(e),this._addTask(e),e}_awaitDeps(){const t=[],e=e=>{t.push(new Promise((t=>{this.allotment.workbench.work(Ln.$).runAfter(e,(()=>(t(),this._whenAllDone))).catch(g)})))},{after:n}=this.allocator;return n&&e(n),e(this.allotment.workload),Promise.all(t)}}const Wn=Symbol("Workbench.impl");class In{constructor(t,e){this.workbench=t,this._works=new Map;const{supply:n=Ot(),run:r}=e;this.supply=new kt((t=>{this.work=e=>{throw new Nn(e,void 0,t,"The workbench is stopped")}})).as(n),this._run=r?r.bind(e):Hn}work(t){if(this._works.has(t))return this._works.get(t);let e=g;const n=async(n,r)=>{const s=await this._run(r,n,t);return e(),s},r=(new kt).needs(this.supply);let s,o,i;const u=new Promise((e=>{s=r=>(o=r,this._works.set(t,r),i=async t=>await n(r,t),e(r),r)}));return i=async t=>await n(await u,t),r.whenOff((n=>{i=e=()=>{throw new Nn(t,o,n)},this._works.delete(t)})),s(t.allocator.start({workbench:this.workbench,workload:t,supply:r,run:async t=>await i(t)}))}}async function Hn(t,e,n){return await t()}class Gn{constructor(t={}){this[Wn]=new In(this,t)}get supply(){return this[Wn].supply}work(t){return this[Wn].work(t)}}function Jn(t=new TypeError("Context destroyed")){return()=>{throw t}}const Qn=$n(((t,...e)=>t(...N(Z(...e)))));class Zn{constructor(){this._providers=Pn([new Map])}provide(t){const[e]=this._providers.it,n=new kt;return e.set(n,t),this._providers.it=[e],n.whenOff((()=>{const[t]=this._providers.it;t.delete(n),this._providers.it=[t]}))}seed(t,e=We()){return this.combine(e,function(t,e){return e.read.do(sn((([e])=>e.size?Le(...ct(ct(Q((()=>e.values())),(e=>e(t))),Xn)):We())),Qn)}(t,this._providers))}isEmpty(){return!1}combine(t,e){return Le(t,e).do(Qn)}}function Xn(t){return Be(t)?t:null!=t?We(t):We()}class Yn extends zt{get upKey(){return this}seeder(){return new Zn}}class tr extends Pt{constructor(t,e){super(t.name+":up"),this._key=t,this.grow=t=>{const n=t.fillBy(e);null!=n&&t.insert(n.do(Sn(t.context.get(Qt))))}}get seedKey(){return this._key.seedKey}get upKey(){return this}}class er extends Pt{constructor(t,{seedKey:e}={}){super(t),this.seedKey=e||new Yn(this)}createUpKey(t){return new tr(this,t)}}function nr(t){const e=function(t){return kn(((e,...n)=>e(...et(ct(n,(e=>Ut(e)?e[Nt](t):e)),_))))}(t);return t=>Ge(e(t))}class rr extends er{constructor(t,{seedKey:e,byDefault:n=g}={}){super(t,e),this.byDefault=(t,e)=>n(t,e)||(()=>{throw new Ft(this)}),this.upKey=this.createUpKey((t=>t.insert(t.seed.do(rn(((...e)=>e.length?We(e[e.length-1]):t.hasFallback&&t.or?t.or:We(this.byDefault(t.context,this))))))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?We(t.or):t.or}:void 0)((t=>e=t)).whenOff((t=>e=Jn(t))),t.insert(((...t)=>e(...t)))}}class sr extends Error{constructor(t,e=[],n=function(t,e){const n=e.reduce(((t,[e,n])=>(t?t+=", ":t=": ",t+=void 0!==n?`${e} failed to load (${n})`:`${e} not loaded`)),"");return`Failed to load ${t}${n}`}(t,e)){super(n),this.module=t,this.reasons=e,this.message=n}}class or{constructor(t,e){this.module=e,this._useCounter=0,this._impl=Pn(),this._rev=Pn({status:{module:this.module,provided:!1,used:!1,settled:!1,ready:!1},supply:Tt()});const n=t.get(Qt);n.cuts(this._impl),n.cuts(this._rev),this._impl.read((t=>{const e=this._rev.it.supply;t&&this._load(t),e.off()}))}createHandle(){const t=this._rev.read.do(gn((({status:t})=>t))),e={read:t,[ye]:r(t),use:t=>this._use(e,t)};return e}setup(t,e){this._setup=()=>{const n=this._rev.it,{status:{module:r},supply:s}=n;r!==this.module?t.get(r).use(s).read({supply:s,receive:(t,{settled:e,ready:r,error:s})=>{this._updateStatus(n,e,r,s)}}):async function(t,e,{status:{module:n},supply:r}){const s=new ir(n);return await n.setup({module:n,supply:r,get:e=>t.get(e),provide:t=>e.provide(t).needs(r),initBy(t){s.initBy(t)}}),s}(t,e,n).then((({whenReady:t})=>(this._updateStatus(n,!0,!1),t))).then((()=>this._updateStatus(n,!0,!0))).catch((t=>n.supply.off(t)))}}implementBy(t){this._impl.by(t)}_updateStatus(t,e,n,r){this._rev.it.supply!==t.supply?t.supply.off():this._rev.it=t={status:{module:t.status.module,provided:t.status.provided,used:!0,settled:e,ready:n,error:r},supply:t.supply}}_load(t){const e=new kt(g).needs(this._rev).whenOff((t=>{this._rev.it.supply===e&&(this._rev.it={status:{...this._rev.it.status,provided:!1,settled:!1,ready:!1,error:t},supply:e})})),n=!!this._useCounter;this._rev.it={status:{module:t,provided:!0,used:n,settled:!1,ready:!1},supply:e},n&&this._setup()}_use(t,e){const n=new kt(g);e&&n.needs(e);const r=t.read.do(Sn(n)),s={...t,read:r,whenSettled:ur(r,cr),whenReady:ur(r,ar),supply:n};if(!n.isOff&&(n.whenOff((t=>{if(!--this._useCounter){const e=this._rev.it;this._rev.it={status:{...e.status,used:!1,settled:!1,ready:!1,error:t},supply:new kt(g).off(t)},e.supply.off(t)}})),!this._useCounter++)){const t=this._rev.it;this._rev.it={status:{...t.status,used:!0},supply:t.supply},this._setup()}return s}}class ir{constructor(t){this._module=t,this._whenDone=Promise.resolve(),this.whenReady=new Promise((t=>this._ready=t))}initBy(t){const e=this._whenDone=this._whenDone.then(t).finally((()=>this._done(e)))}_done(t){this._whenDone===t&&(this._ready(t),this.initBy=t=>{throw new TypeError(`${this._module} initialized already, and does not accept new initializers`)})}}function ur(t,e){return Ke((n=>t({supply:n.supply,receive:(t,r)=>{e(r)?(n.receive(t,r),n.supply.off()):r.error&&n.supply.off(r.error)}})))}function cr({settled:t}){return t}function ar({ready:t}){return t}class hr extends er{constructor(t,e){super(t),this._module=e}get upKey(){return this}grow(t){const e=new or(t.context,this._module);var n;t.insert(e.createHandle()),t.setup((({context:t,registry:n})=>e.setup(t,n))),e.implementBy((n=this._module,t.seed.do(gn(((...t)=>{let e;for(let r=t.length-1;r>=0&&(e=t[r],e===n);--r);return e})))))}}const lr=Symbol("ContextModule.impl");class dr{constructor(t,e,n){this.name=e,this.options=n,this.key=new hr(`${e}:module`,t);const{needs:r,has:s,setup:o}=n;this.has=h(s).add(t),this.needs=h(r),this._setup=o?o.bind(n):g}replace(t,e,n){for(const r of t.has)r!==t&&e.provide({a:r,is:t}).needs(n)}async setup(t){const e=function(t){const{module:e,supply:n}=t;return N(ht(e.needs,(r=>r!==e&&t.provide(r).needs(n)&&{dep:r,use:t.get(r).use(t)})))}(t);await fr(t,e,pr)&&(t.initBy((async()=>{await fr(t,e,yr)})),await this._setup(t))}}function fr(t,e,n){const{module:s,supply:o}=t,i=r(!1),u=o.whenDone().then(i,i);return Promise.race([u,Promise.all(e.map((({dep:t,use:e})=>n(e).then(g,(e=>[t,e]))))).then((t=>{const e=t.filter(m);return!e.length||new sr(s,e)}))]).then((t=>"boolean"!=typeof t?Promise.reject(t):t))}function pr(t){return t.whenSettled}function yr(t){return t.whenReady}class gr{constructor(t,e={}){this[lr]=new dr(this,t,e)}get[Mt](){return this[lr].key}get name(){return this[lr].name}get needs(){return this[lr].needs}get has(){return this[lr].has}[Zt](t){const e=t.provide({a:this,is:this});return this[lr].replace(this,t,e),e}setup(t){return this[lr].setup(t)}toString(){return`ContextModule(${this.name})`}}const _r=Ke(g);const mr={onRecurrent:g};class wr{constructor(t){this.supply=new kt,this._target=t}on(t){return function(t){const e=(e,n)=>{const r=_e(e),{supply:s}=r;return s.isOff||t(r,n),s};return e[xe]=_r[xe],e.do=_r.do,e.then=_r.then,e}(((e,n)=>{const{supply:r}=e;if(r.needs(this),!r.isOff){const r=t=>e.receive(mr,t);this._target.addEventListener(t,r,n),e.supply.whenOff((()=>this._target.removeEventListener(t,r)))}}))}dispatch(t){return!this.supply.isOff&&this._target.dispatchEvent(t)}}const br={by(t={}){let e;return{get node(){return t.node},get window(){return e||(e=t.window||t.node&&((n=t.node).ownerDocument||n).defaultView||window);var n},error(...e){t&&t.error?t.error(...e):console.error(...e)}}}};const vr=Symbol("render-q");class xr{constructor(t,e){this.q=t,this.schedule=this.doSchedule,this.ref=e||[this,this]}static by(t,e){return t[vr]||(t[vr]=new xr(t,e))}add(t){this.q.add(t)}doSchedule(t){this.schedule=()=>{};const e=[],n={get config(){return t},postpone(t){e.unshift(t)}};this.q.schedule((()=>{const t=this.reset();t.suspend(),this.exec(n),this.ref[1]=this.ref[0],e.forEach((t=>this.q.add(t))),n.postpone=t=>this.q.post(t),this.exec(n),t.resume()}))}exec(t){for(;;){const e=this.q.pull();if(!e)break;e(t)}}reset(){return this.ref[0]=xr.by(this.q.reset(),this.ref)}suspend(){this.schedule=t=>{this.scheduled=t,this.schedule=()=>{}}}resume(){this.scheduled?this.doSchedule(this.scheduled):this.schedule=this.doSchedule}}function Sr(t){return e=>{const n=br.by(e),r=xr.by(t.newQueue(n)).ref;let s=[];return t=>{const[e,,o]=s,[i,u]=r;let c=e||u;if(e===u&&!o||e===i)s[1]=t;else{const e=s=[c=o?i:u,t];c.add((t=>{e[2]=!0;try{e[1]({get config(){return n},postpone(e){t.postpone(e)}})}catch(t){n.error(t)}}))}c.schedule(n)}}}const $r={by({schedule:t,replace:e=(()=>{})}){const n=[];return{schedule:t,add(t){n.push(t)},post(t){n.unshift(t)},pull:()=>n.shift(),reset(){const n=$r.by({schedule:t,replace:e});return e(n),n}}}},kr=new WeakMap,Cr=t=>{const e=br.by(t);return t=>{const n=[],r={get config(){return e},postpone(t){n.push(t)}};for(s(t);;){const t=n.pop();if(!t)break;s(t)}function s(t){try{t(r)}catch(t){e.error(t)}}}};let Ar=Sr({newQueue({window:t}){const e=kr.get(t);if(e)return e;const n=$r.by({schedule:e=>t.requestAnimationFrame(e),replace:e=>kr.set(t,e)});return kr.set(t,n),n}});function Or(t){return Ar(t)}function Dr(t){const e=t.length,n=t.charCodeAt(0);let r="",s=0;if(45===n){const n=t.charCodeAt(1);if(n>47&&n<58?(r+=`-\\${n.toString(16)} `,s=2):(r="-",s=1),1===e)return"\\-"}else n>47&&n<58&&(r+=`\\${n.toString(16)} `,s=1);for(;s<e;++s){const e=t.charCodeAt(s);r+=e>96&&e<123||45===e||95===e||e>47&&e<58||e>64&&e<91?t[s]:e>126?127===e?`\\${e.toString(16)} `:t[s]:e<32?e?`\\${e.toString(16)} `:"\ufffd":`\\${t[s]}`}return r}function Rr(t){let e="";const n=t.length;for(let r=0;r<n;++r){const n=t.charCodeAt(r);e+=n<32||127===n?n?`\\${n.toString(16)} `:"\ufffd":34===n||92===n?`\\${t[r]}`:t[r]}return e}const Er=/[A-Z]+/g;function Tr(t,e,n){const r=t.toLowerCase();return r.length>1&&e+r.length<n.length?`-${r.slice(0,-1)}-${r.slice(-1)}`:"-"+r}const Fr=new Map;function Mr(t){return t.replace(Er,Tr)}function Pr(t){const e=Mr(t);return e.startsWith("-")?e.substr(1):e}const zr=new Gt("bootstrap-context");class Kr extends Kt{static get[Mt](){return zr}}function Nr(t){return(e,n)=>{const r=e.get(Kr);return e===r?t(r,n):r.get(n)}}function Ur(t,e,n,r){const s=!n,o=r(n?function(t){if(function(t){return void 0===t.value&&void 0===t.writable}(t))return t;const e=Symbol("value"),n=t.value,r={...t,writable:void 0,value:void 0,get(){return e in this?this[e]:n}};return t.writable&&(r.set=function(t){this[e]=t}),delete r.writable,delete r.value,r}(n):function(t,e){const n=Symbol(`${String(e)}:value`),r=t[e];return{configurable:!0,enumerable:!0,get(){return n in this?this[n]:r},set(t){this[n]=t}}}(t,e));if(!s||!o)return o;Object.defineProperty(t,e,o)}function Br(t){return t.nodeType===Node.ELEMENT_NODE}class jr{constructor(t){this.symbol=t}own(t,e){return t.hasOwnProperty(this.symbol)?Reflect.get(t,this.symbol,e):void 0}of(t,e=t){const n=this.own(t,e),r=d(t),s=r&&this.of(r,e);return n?s?this.merge([s,n]):n:s}define(t,e){const n=this.own(t),r=e.map((e=>this.meta(e,t))),s=this.merge(n?[n,...r]:r);return Object.defineProperty(t,this.symbol,{configurable:!0,value:s}),t}}function Lr(t){const{parentNode:e}=t;return e&&Br(e)&&e||t.getRootNode().host||null}function qr(t,e,n,r){const s=e&&e.bind(t),o=r&&r.bind(n);return o?s?async(...t)=>{await s(...t),await o(...t)}:o:s}const Vr=Symbol("feature-def");class Wr extends jr{constructor(){super(Vr)}merge(t){return t.reduce(((t,e)=>({needs:a(l(h(t.needs),e.needs)),has:a(l(h(t.has),e.has)),setup:qr(t,t.setup,e,e.setup),init:qr(t,t.init,e,e.init)})),{})}meta(t,e){const n=t[Vr];return null==n?t:this.meta("function"==typeof n?t[Vr](e):n,e)}}const Ir=new Wr,Hr={[Vr]:()=>({})},Gr={of:t=>Ir.of(t)||{},for:(t,e)=>Ir.meta(e,t),merge:(...t)=>Ir.merge(t),all:(...t)=>t.reduce(((t,e)=>({[Vr]:n=>Gr.merge(Gr.for(n,t),Gr.for(n,e))})),Hr),define:(t,...e)=>Ir.define(t,e)};function Jr(...t){return e=>Gr.define(e,...t)}const Qr=new Gt("feature-context");class Zr extends Kr{static get[Mt](){return Qr}whenDefined(t){return this.get(Kr).whenDefined(t)}load(t,e){return this.get(Kr).load(t,e?(new kt).needs(this).needs(e):this)}}const Xr=new Gt("bootstrap-workbench",{byDefault:Nr((()=>new Gn))}),Yr=new qn("feature setup"),ts=new qn("feature init",{after:Yr}),es=new qn("component definition",{after:ts}),ns=Symbol("component-def");class rs extends jr{constructor(){super(ns)}merge(t){return t.reduce(((t,e)=>({...t,...e,setup:y(t.setup,e.setup),define:y(t.define,e.define),feature:t.feature?e.feature?Gr.merge(t.feature,e.feature):t.feature:e.feature})),{})}meta(t,e){const n=t[ns];return null!=n?this.meta("function"==typeof n?t[ns](e):n,e):null!=t[Vr]?{feature:Gr.for(e,t)}:le(t)?{name:t}:t}}const ss=new rs,os={[ns]:()=>({})},is={of:t=>ss.of(t)||{},for:(t,e)=>ss.meta(e,t),merge:(...t)=>ss.merge(t),all:(...t)=>t.reduce(((t,e)=>({[ns]:n=>is.merge(is.for(n,t),is.for(n,e))})),os),define:(t,...e)=>ss.define(t,e)};function us(...t){const e=e=>is.define(e,...t);return e[ns]=()=>is.all(...t),e}const cs=new Gt("component-context"),as=new Gt("component-event-dispatcher",{byDefault(t){const e=t.get(cs),n=new wr(e.element);return n.supply.needs(e),{dispatch:t=>n.dispatch(t),on:t=>n.on(t)}}}),hs=new Gt("content-root",{byDefault:t=>t.get(cs).element});class ls extends er{constructor(){super("state-updater"),this.upKey=this.createUpKey((t=>t.insert(t.seed.do(rn(((...e)=>{if(e.length){const t=e.reduce(((t,e)=>y(e,t)),g);return We(((e,n,r)=>t(On(e),n,r)))}return t.hasFallback&&t.or?t.or:We(g)}))))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?We(t.or):t.or}:void 0)((t=>e=t)).whenOff((()=>e=g)),t.insert(((t,n,r)=>e(t,n,r)))}}const ds=new ls,fs=Symbol("component-context");class ps extends Kt{constructor(){super(),this.updateState=(t,e,n)=>{this.get(ds)(t,e,n)}}static get[Mt](){return cs}static of(t){if("function"!=typeof t[fs])throw new TypeError(`No component context found in ${String(t)}`);return t[fs]()}get contentRoot(){return this.get(hs)}on(t){return this.get(as).on(t)}dispatchEvent(t){this.get(as).dispatch(t)}}const ys=Symbol("component-slot"),gs={of(t){const e=t[ys];return e||(t[ys]=new _s)}};class _s{constructor(){this._ctx=Pn(),this.whenReady=this._ctx.read.do(dn((t=>t&&t.whenReady)),bn)}get context(){return this._ctx.it}get read(){return this._ctx.read}[ye](){return this._ctx.read}bind(t){this._ctx.it=t}unbind(){this._ctx.it=void 0}}class ms extends Event{get context(){return gs.of(this.target).context}}const ws=Symbol("anonymous-component-property");function bs(...t){const e=(e,n=ws,r)=>us({[ns](s){const o=function(t,{get:e,set:n},r,s){return o=>{const i=o({type:t,key:r,readable:!0,writable:s,enumerable:!1,configurable:!1,get:t=>e(t,r),set:(t,e)=>n(t,e,r)});return i&&i.componentDef||{}}}(s,e,n,r);return is.all(...t.map(o))}}),n=(t,n)=>e({get:(e,n)=>t(e,n)},n,!1),s=(e,n,r)=>{const s=function(t,e){return(n,r)=>{const{get:s,set:o}=n,i=t.constructor,{get:u,set:c,configurable:a,enumerable:h,componentDef:l={}}=r({type:i,key:e,readable:!!n.get,writable:!!n.set,enumerable:!!n.enumerable,configurable:!!n.configurable,get:s?t=>s.call(t):vs(e),set:o?(t,e)=>o.call(t,e):xs(e)})||{};is.define(i,l);const d={...n,configurable:null!=a?a:n.configurable,enumerable:null!=h?h:n.enumerable};return(u||c)&&(d.get=u&&function(){return u(this,e)},d.set=c&&function(t){c(this,t,e)}),d}}(e,n);return Ur(e,n,r,(e=>t.reduce(s,e)))};return s.With=(t,n)=>e(t,n,!0),s.By=n,s.As=(t,e)=>n(r(t),e),s.Bind=(t,n=ws)=>{const r=Symbol(`${String(n)}:accessor`),s=e=>{const s=e[r];if(s)return s;const o=t(e,n);return e[r]={get:o.get?o.get.bind(o):vs(n),set:o.set?o.set.bind(o):xs(n)}};return e({get:t=>s(t).get(),set:(t,e)=>s(t).set(e)},n,!0)},s}function vs(t){return()=>{throw new TypeError(`"${String(t)}" is not readable`)}}function xs(t){return()=>{throw new TypeError(`"${String(t)}" is not writable`)}}const Ss=new Gt("bootstrap-context-registry");class $s extends ee{constructor(){super(),this.provide({a:$s,is:this}),this.values=this.newValues()}static get[Mt](){return Ss}static create(){return new $s}}const ks=new Gt("per-component-registry",{byDefault:Nr((()=>new Cs))});class Cs extends ee{}const As=new Gt("per-definition-registry",{byDefault:Nr((t=>new Os(t)))});class Os extends ee{}const Ds=Symbol("post-def-setup");function Rs(t){if(t.hasOwnProperty(Ds))return t[Ds];const e=Pn(),n=new on,r=an(e.read.do(Cn(f)),n),s=d(t,(t=>ns in t));if(s){const t=Rs(s);r((e=>t.send(e)))}const o={on:r,send(t){n.send(t)},setup(t){e.it=t}};return Object.defineProperty(t,Ds,{value:o}),o}const Es=new Gt("window",{byDefault:()=>window}),Ts=new Gt("default-namespace-aliaser");class Fs extends er{constructor(){super("default-render-scheduler"),this.upKey=this.createUpKey((t=>t.insert(t.seed.do(rn(((...e)=>e.length?We(Ms(t.context,e[e.length-1])):t.hasFallback&&t.or?t.or:We(Ms(t.context,Or))))))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?We(t.or):t.or}:void 0)((n=>e=Ms(t.context,n))).whenOff((t=>e=Jn(t))),t.insert(((...t)=>e(...t)))}}function Ms(t,e){return(n={})=>e({...n,window:n.window||t.get(Es)})}const Ps=new Fs;class zs extends er{constructor(){super("element-adapter"),this.upKey=this.createUpKey((t=>t.insert(t.seed.do(rn(((...e)=>{if(0===e.length)return t.hasFallback&&t.or?t.or:We(Ks);const n=t.context.get(Ts),r=new Map;for(const t of e){const e=oe.name(t.to,n).toLowerCase(),s=r.get(e)||Ks;r.set(e,(e=>{const n=s(e);return n||(t.bind(e),Ks(e))}))}return We((t=>(r.get(t.tagName.toLowerCase())||Ks)(t)))}))))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?We(t.or):t.or}:void 0)((t=>e=t)).whenOff((t=>e=Jn(t))),t.insert((t=>e(t)))}}function Ks(t){const e=t[ys];return e&&e.context}const Ns=new zs,Us=new rr("element-observer",{byDefault:Nr((t=>{const e=t.get(Ns);class n extends MutationObserver{constructor(t){super((n=>{n.forEach((t=>{z(M(t.removedNodes),(t=>{var e;return null===(e=function(t){var e,n;return null===(n=null===(e=t[ys])||void 0===e?void 0:e.context)||void 0===n?void 0:n.mount}(t))||void 0===e?void 0:e.checkConnected()})),z(tt(t.addedNodes,Br),(t=>{var n,r;return null===(r=null===(n=e(t))||void 0===n?void 0:n.mount)||void 0===r?void 0:r.checkConnected()}))})),t(n,this)}))}observe(t,e){super.observe(t,{...e,childList:!0})}}return t=>new n(t)}))});const Bs=Symbol("definition-context");function js(t){if(!t.hasOwnProperty(Bs))throw new TypeError(`Component is not defined: ${t}`);return t[Bs]}const Ls=new Gt("custom-elements",{byDefault:Nr((function(t){const e=t.get(Es).customElements,n=t.get(Ts);return new class extends qs{define(t,r){if(le(t))return void e.define(oe.name(t,n),r);const s=js(t),{tagName:o,extend:i}=s.elementDef;o?i&&i.name?e.define(o,r,{extends:i.name}):e.define(o,r):Ws(t).resolve(void 0)}whenDefined(t){if(le(t))return e.whenDefined(oe.name(t,n));const r=js(t),{name:s}=r.elementDef;return s?e.whenDefined(oe.name(s,n)):Ws(t).promise()}}}))});class qs{static get[Mt](){return Ls}}const Vs=Symbol("component-resolver");function Ws(t){return t.hasOwnProperty(Vs)?t[Vs]:t[Vs]=function(){let t,e,n=o((()=>new Promise(((n,r)=>{t=n,e=r}))));const r=r=>{n=o(r),t=g,e=g};return t=t=>{r((()=>Promise.resolve(t)))},e=t=>{r((()=>Promise.reject(t)))},{resolve(e){t(e)},reject(t){e(t)},promise:()=>n()}}()}const Is=new Gt("definition-context"),Hs=new Gt("element-def",{byDefault(t){const e=t.get(Is).componentType,{name:n,extend:r}=is.of(e);let s;const o={get type(){return r&&r.type||t.get(Es).HTMLElement},get name(){return r&&r.name}};return{get name(){return n},get tagName(){return s||n&&(s=oe.name(n,t.get(Ts)))},get extend(){return o}}}});class Gs extends Kt{static get[Mt](){return Is}get elementDef(){return this.get(Hs)}connectTo(t){const e=this.mountTo(t);return e.connect(),e}}const Js=Symbol("newComponent");function Qs(t){const e=t.componentType;return e[Js]||(e[Js]=function(t){const e=Symbol("component-context");let n;return t.prototype[fs]=function(){return this[e]||(this[e]=n)},function(t){const r=n;n=t;try{const s=new this(t);return s[e]=t,s}finally{n=r}}}(e)),e[Js](t)}class Zs{constructor(t){this._ctx=t,this._val=Pn(0),this._canSettle=0}get supply(){return this._val.supply}read(){return(this.read=r(this._val.read.do(gn(r(this._ctx)))))()}isReady(){return!!this._val.it&&!this._val.supply.isOff}onceReady(){return(this.onceReady=r(this.read().do(Xs((({ready:t})=>t)))))()}whenReady(){return(this.whenReady=r(this.onceReady().do(bn)))()}isSettled(){return this._val.it>=2&&!this._val.supply.isOff}onceSettled(){return(this.onceSettled=r(this.read().do(Xs((({settled:t})=>t)))))()}whenSettled(){return(this.whenSettled=r(this.onceSettled().do(bn)))()}isConnected(){return this._val.it>=3&&!this._val.supply.isOff}onceConnected(){return(this.onceConnected=r(this.read().do((t=({connected:t})=>t,pn(((e,...n)=>t(...n)&&e(...n)))))))();var t}whenConnected(){return(this.whenConnected=r(this.onceConnected().do(bn)))()}ready(){this._val.it=1}settle(){this._canSettle&&this._val.it<2&&(this._val.it=2)}connect(){this._val.it=3}create(){this._canSettle=1}}function Xs(t){return e=>Ke((n=>{let r=!1;e({supply:n.supply,receive(e,s){const o=t(s);o&&!r&&(r=o,n.receive(e,s))}})}))}class Ys extends ps{constructor(t,e){super(),this._definitionContext=t,this.element=e;const n=t._newComponentRegistry();n.provide({a:ps,is:this}),this.get=n.newValues().get,this._status=new Zs(this)}get componentType(){return this._definitionContext.componentType}get component(){return this._component()}get supply(){return this._status.supply}get ready(){return this._status.isReady()}get onceReady(){return this._status.onceReady()}get whenReady(){return this._status.whenReady()}get settled(){return this._status.isSettled()}get onceSettled(){return this._status.onceSettled()}get whenSettled(){return this._status.whenSettled()}get connected(){return this._status.isConnected()}get onceConnected(){return this._status.onceConnected()}get whenConnected(){return this._status.whenConnected()}get readStatus(){return this._status.read()}_component(){throw new TypeError("Component is not constructed yet. Consider to use a `whenReady()` callback")}settle(){this._status.settle()}destroy(t){try{this._status.supply.off(t)}finally{delete this.component[fs],this._component=to,gs.of(this.element).unbind(),function(t){const{parentNode:e}=t;e&&e.removeChild(t)}(this.element)}}_createComponent(){const t=this._definitionContext._whenComponent;let e=0;gs.of(this.element).bind(this),t.readNotifier.do(bn)((t=>e=t(this,e))),this.whenConnected((()=>{t.readNotifier({supply:(new kt).needs(this),receive:(t,n)=>{e=n(this,e)}})})),this._definitionContext._elementBuilder.components.send(this);const n=Qs(this);return this._component=r(n),this._status.ready(),this}_connect(){this._status.connect()}_created(){this._status.create(),this.whenConnected((()=>this.dispatchEvent(new ms("wesib:component",{bubbles:!0}))))}}function to(){throw new TypeError("Component destroyed already")}class eo extends class{get component(){return this.context.component}get element(){return this.context.element}}{constructor(t){super(),this.context=t}get connected(){return this.context.connected}connect(){this.context._connect()}checkConnected(){const t=this.context.element,e=t.ownerDocument,n=null!=e&&e.contains(t);return n!==this.connected&&(n?this.connect():this.context.destroy()),n}}class no extends Ys{constructor(t,e){super(t,e),this.mount=this.mount=new eo(this)}}class ro extends Ys{get mount(){}}class so{constructor(){const t=Pn(0),e=new on;this.onCreated=Ke((n=>{const r=t.it+1;e.on({supply:n.supply,receive:(t,e,s)=>{s<r&&n.receive({onRecurrent(e){t.onRecurrent((t=>e(t)))}},e)}}),++t.it})),this.readNotifier=t.read.do(gn((t=>(n,r)=>(e.send(n,r),t))))}}class oo extends Gs{constructor(t,e,n){var s,o;super(),this._bsContext=t,this._elementBuilder=e,this.componentType=n,this._whenComponent=new so,this._ready=Pn(!1),this._whenReady=this._ready.read.do(fn(((t,e)=>e&&t()))),this._def=is.of(n);const i=new Os(t.get(As).seeds());i.provide({a:Gs,is:this}),this.get=i.newValues().get;const u=t.get(ks).append((t=>this.get(t)));this._perComponentRegistry=new Cs(u.seeds()),this.whenReady=this._whenReady.do(mn(r(this)),bn);const c={get componentType(){return n},whenReady:this.whenReady,whenComponent:this.whenComponent,perDefinition:t=>i.provide(t),perComponent:t=>this._perComponentRegistry.provide(t)};null===(o=(s=this._def).setup)||void 0===o||o.call(s,c),Rs(n).setup(c)}get elementType(){return this._elementType()}get whenComponent(){return this._whenComponent.onCreated}mountTo(t){if(gs.of(t).context)throw new Error(`Element ${String(t)} already bound to component`);const e=new no(this,t);e._createComponent();const{mount:n}=e;return n.checkConnected(),e._created(),e.settle(),n}perComponent(t){return this._perComponentRegistry.provide(t)}_newComponentRegistry(){return new Cs(this._perComponentRegistry.seeds())}_elementType(){throw new Error("Custom element class is not constructed yet. Consider to use a `whenReady()` callback")}_define(){var t,e;null===(e=(t=this._def).define)||void 0===e||e.call(t,this),this._elementBuilder.definitions.send(this),this._elementType=r(function(t){const e=t.get(Hs);class n extends e.extend.type{constructor(){super();const e=new ro(t,this);e._createComponent(),e._created()}connectedCallback(){var t;null===(t=super.connectedCallback)||void 0===t||t.call(this),gs.of(this).context._connect()}disconnectedCallback(){var t;gs.of(this).context.destroy(),null===(t=super.disconnectedCallback)||void 0===t||t.call(this)}}return n}(this)),this.componentType[Bs]=this,this._ready.it=!0}}const io=new Gt("element-builder",{byDefault:Nr((function(t){return{definitions:new on,components:new on,buildElement(e){const n=new oo(t,this,e);return n._define(),n}}}))});class uo{constructor(t){this._setup=t,this._components=void 0}define(t){this._components?this._components.push(t):(this._components=[t],this._defineAll(this._components))}_defineAll(t){const e=this._setup.get(Xr).work(es).run((()=>{const e=this._setup.get(qs),n=this._setup.get(io);t.forEach((t=>{const r=n.buildElement(t);e.define(t,r.elementType)})),this._components=void 0}));this._setup.initBy(r(e))}}class co extends Zr{constructor(t,e){super(),this.feature=t,this._setup=e,this._bsContext=e.get(Kr);const n=e.get(e.module),r=new ee(this._bsContext);r.provide({a:Zr,is:this}),this.get=r.newValues().get,this.whenReady=n.read.do(An((({ready:t})=>t&&this)),bn),this._componentRegistry=new uo(this._setup)}get supply(){return this._setup.supply}get onDefinition(){return this._onDefinition||(this._onDefinition=this._setup.get(io).definitions.on.do(vn(this)))}get onComponent(){return this._onComponent||(this._onComponent=this._setup.get(io).components.on.do(vn(this)))}provide(t){return this._bsContext.get($s).provide(t).needs(this)}perDefinition(t){return this._bsContext.get(As).provide(t).needs(this)}perComponent(t){return this._bsContext.get(ks).provide(t).needs(this)}setupDefinition(t){return function(t,e){const{on:n}=Rs(t);return Ke((t=>{n({supply:t.supply.needs(e),receive(n,r){const s=r.whenReady.do(vn(e)),o=r.whenComponent.do(vn(e));t.receive(n,{get componentType(){return r.componentType},get whenReady(){return s},get whenComponent(){return o},perDefinition:t=>r.perDefinition(t).needs(e),perComponent:t=>r.perComponent(t).needs(e)})}})}))}(t,this.supply)}define(t){this._componentRegistry.define(t)}}const ao=Symbol("feature-module");class ho extends gr{constructor(t){super(t.name,function(t){const e=function(t){let e=Gr.of(t);if(ns in t){e=Gr.merge(e,{init(e){e.define(t)}});const{feature:n}=is.of(t);n&&(e=Gr.merge(e,n))}return e}(t),n=[],s=[];for(const t of h(e.has))n.push(ho.of(t));for(const t of h(e.needs))s.push(ho.of(t));return{needs:s,has:n,async setup(n){var s;const o=n.get(Xr),i=new co(t,n);if(e.init){const t=o.work(ts).run((async()=>{await e.init(i)}));n.initBy(r(t))}await(null===(s=e.setup)||void 0===s?void 0:s.call(e,i))}}}(t)),this.feature=t}static of(t){return Object.prototype.hasOwnProperty.call(t,ao)?t[ao]:t[ao]=new ho(t)}async setup(t){const e=t.get(Xr);await e.work(Yr).run((()=>super.setup(t)))}}const lo=Symbol("when-defined");const fo=Symbol("attribute");function po(t){return[fo,t]}function yo(t,e=!0){if(!1===e)return g;if(!0===e||"function"==typeof e){const n=po(t),r=!0===e?go:e;return(t,e,s)=>r(t,n,e,s)}return(t,n,r)=>go(t,e,n,r)}function go(t,e,n,r){ps.of(t).updateState(e,n,r)}const _o=new Gt("attribute-registry",{byDefault:t=>new mo(t.get(Gs))});class mo{constructor(t){this._context=t,this.attrs=new Map,t.whenReady((({elementType:t})=>this.define(t))),t.whenComponent((({mount:t})=>{t&&this.mount(t)}))}declareAttribute({name:t,change:e}){this.attrs.set(t,y(this.attrs.get(t),e))}define(t){const{attrs:e}=this;e.size&&(Object.defineProperty(t,"observedAttributes",{configurable:!0,enumerable:!0,value:wo(t,[...e.keys()])}),Object.defineProperty(t.prototype,"attributeChangedCallback",{configurable:!0,enumerable:!0,value:bo(t,e)}))}mount(t){const{element:e}=t,{attrs:n}=this,r=[...n.keys()];if(!r.length)return;new(0,this._context.get(Es).MutationObserver)((r=>r.forEach((r=>{const s=r.attributeName;return n.get(s)(t.context.component,e.getAttribute(s),r.oldValue)})))).observe(e,{attributes:!0,attributeFilter:r,attributeOldValue:!0})}}function wo(t,e){const n=t.observedAttributes;if(Array.isArray(n)){const t=new Set(n);e.forEach((e=>t.add(e))),e=[...t]}return e}function bo(t,e){const n=t.prototype.attributeChangedCallback;return n?function(t,r,s){const o=e.get(t);o?gs.of(this).whenReady((({component:t})=>o(t,s,r))):n.call(this,t,r,s)}:function(t,n,r){gs.of(this).whenReady((({component:s})=>{e.get(t)(s,r,n)}))}}function vo(t){return bs((({type:e,key:n,set:r})=>{const{name:s,change:o}=function(t,e,n){let r,s;if("string"==typeof n)r=Pr(n),s=yo(r);else{if(n&&n.name)r=Pr(n.name);else{if("string"!=typeof e)throw new TypeError(`Attribute name is required as property key is not a string: ${t.constructor.name}.prototype.${String(e)}`);r=Pr(e)}s=yo(r,n&&n.updateState)}return{name:r,change:s}}(e.prototype,n,t);return{componentDef:{define(t){t.get(_o).declareAttribute({name:s,change(t,e,n){r(t,e),o(t,e,n)}})}},get:t=>ps.of(t).element.getAttribute(s),set(t,e){const{element:n}=ps.of(t);null!=e?n.setAttribute(s,e):n.removeAttribute(s),r(t,e)}}}))}class xo extends Ht{constructor(){super("component-state")}grow(t){const e=t.seed();let n;if(null!=e)n=e,t.insert(n);else{if(t.hasFallback)return;n=new $o,t.context.get(ps).supply.whenOff((t=>n.done(t))),t.insert(n)}t.setup((({registry:t})=>{t.provide({a:ds,is:n.update})}))}}const So=new xo;class $o extends Tn{static get[Mt](){return So}}class ko extends Fn{constructor(t,e,n){super(),this._context=t,this._name=e,this.supply=new kt,this.on=this._context.get($o).track(n).onUpdate.do(fn(((t,e,n,r)=>t(n,r))),vn(this))}get it(){return this._context.element.getAttribute(this._name)}set it(t){this.supply.isOff||(null==t?this._context.element.removeAttribute(this._name):this._context.element.setAttribute(this._name,t))}}function Co(t,e,n=po(e)){return new ko(t,e,n)}const Ao=Symbol("dom-property");const Oo=Symbol("render"),Do={spec:(t,e)=>function(t,...e){return"function"==typeof t?t(...e):t}(e,t),fulfill(t,e={}){const{on:n=e.on,error:r}=t;return{on:n,error:r?r.bind(t):e.error&&e.error.bind(e)}},trigger(t,e={}){const{on:n=[]}=e;if(("object"==typeof n||"function"==typeof n)&&Se(n))return cn(n).do(vn(t));const r=t.get($o).track(n).onUpdate.do(vn(t));return Array.isArray(n)&&!n.length?r.do(pn(((t,e)=>e[0]!==Oo&&t()))):r}};class Ro{constructor(t){this._context=t,this._renders=new Set}renderBy(t,e={}){const n=Do.spec(this._context,e),r=Do.trigger(this._context,n),s=this._context.get(Ps)({...Do.fulfill(n),node:this._context.element}),o="connected"===n.when;let i=1;const u=r(o?()=>this._context.connected&&a():()=>this._context.settled&&a()).needs(this._context).whenOff((function(){2===i&&s(g);i=-1}));(o?this._context.whenConnected:this._context.whenSettled)((()=>i&&a()));const c=Cr();return this._renders.add(h),u.whenOff((()=>this._renders.delete(h)));function a(){i=2,s(l)}function h(){c(l)}function l(e){if(i>0)for(i=0;;){const n=t(e);if(n===t||"function"!=typeof n)break;t=n}}}renderNow(){this._renders.forEach((t=>t()))}}const Eo=new Gt("element-render-ctl",{byDefault:t=>new Ro(t.get(ps))});const To=new Gt("element-render-scheduler",{byDefault:function(t){const e=t.get(Eo);return(t={})=>{const n=Pn(g);return e.renderBy((t=>{n.it(t)}),Do.fulfill({on:n.on},t)),t=>{n.it=e=>t(e)}}}});function Fo(t){return bs((({get:e})=>({componentDef:{define(n){n.whenComponent((n=>{n.whenReady((()=>{const{component:r}=n,s=e(r).bind(r);n.get(Eo).renderBy(s,t)}))}))}}})))}const Mo=new Gt("shadow-content-root");class Po extends Event{get shadowRoot(){return this.target.shadowRoot}}const zo=new rr("shadow-root-builder",{byDefault:()=>Ko});function Ko(t,e){const n=function(t,e){const n=t.shadowRoot;if(n)return n;if("attachShadow"in t)return t.attachShadow(e);return}(t.element,e);return n&&t.whenConnected((()=>t.dispatchEvent(new Po("wesib:shadowAttached",{bubbles:!0})))),n}const No={mode:"open"};function Uo(t=No){return us({setup(e){e.perComponent({a:Mo,by:e=>e.get(zo)(e,t)}),e.perComponent({a:hs,by:t=>t.get(Mo,{or:null})})}})}const Bo=new he("https://wesib.github.io/ns","b","wesib");class jo extends Set{constructor(t){super(),this._added=new Set(t),this._removed=new Set,this._added.forEach((t=>this.add(t)))}add(t){return this.has(t)||(this._added.add(t),this._removed.delete(t),super.add(t)),this}delete(t){return!!super.delete(t)&&(this._added.delete(t),this._removed.add(t),!0)}clear(){this._added.clear(),this.forEach((t=>this._removed.add(t))),super.clear()}delta(t,e=[]){return Lo(this)(t,e),this}redelta(t){return("function"==typeof t?t:Lo(t))([...this._added],[...this._removed]),this}undelta(){return this._added.clear(),this._removed.clear(),this}}function Lo(t){return(e,n)=>{for(const e of n)t.delete(e);for(const n of e)t.add(n)}}const qo={instance:null,convertTo:g};function Vo(){return qo}function Wo(t){return{instance:t,convertTo(t){return this}}}function Io(t,e,n=null){return Go(t,e,r(null),n)}function Ho(t,e,n){return Go(t,e,n)}function Go(t,e,n,r,s){return void 0===r&&(r=n(t,s)),{instance:r,convertTo:r=>Go(r,e,n,void 0,t),attachTo:r=>Go(r,e,n,t.aspect(e)||n(r))}}const Jo=Symbol("in-aspect"),Qo=new he("https://surol.github.io/input-aspects/ns","inasp","input-aspects"),Zo={applyTo:()=>Wo(pe())},Xo={get[Jo](){return Zo},to:t=>({applyAspect:e=>e===Zo?Wo(t):void 0})},Yo={applyTo:()=>Wo(Or)},ti={get[Jo](){return Yo},to:t=>({applyAspect:e=>e===Yo?Wo(t):void 0})},ei={applyTo:t=>({instance:new si(t),convertTo:g})};class ni{static get[Jo](){return ei}[ye](){return this.read}}class ri{constructor(t){this.roles=t,this._activate=g,this.active={[Symbol.iterator]:()=>t.keys(),has:e=>t.has(e)}}static create(){const t=new ri(new Map);return t.add("default",!0),t}modify(){const t=new ri(this.roles);return t._defaultSupply=this._defaultSupply,t}add(t,e){const n=this.roles.get(t);if(n)return void++n.active;const r=new kt;if(this.roles.set(t,{active:1,supply:r}),e)this._defaultSupply=r.whenOff((()=>{--this.roles.get(t).active||this.roles.delete(t)}));else{const t=this._defaultSupply;this.activateBy((()=>t.off()))}return r}remove(t,e){const n=this.roles.get(t);--n.active||(this.roles.delete(t),this.activateBy((()=>n.supply.off(e))))}activateBy(t){const e=this._activate;this._activate=()=>{e(),t()}}activate(){const t=this._activate;this._activate=g,t()}}class si extends ni{constructor(t){super(),this._control=t,this._active=Pn(ri.create()),this._activators=new Map,this._active.on((t=>t.activate())),this._active.supply.needs(t),this.read=this._active.read.do(gn((({active:t})=>t)))}add(t){const e=this._active.it.modify();return this._add(e,t),this._active.it=e,new kt((e=>{const n=this._active.it.modify();n.remove(t,e),n.roles.size||this._add(n,"default",!0),this._active.it=n}))}when(t,e){let n=this._activators.get(t);n||(n=new Map,this._activators.set(t,n));const r=(new kt).needs(this._control);n.set(r,((t,n,s)=>e(t,n,s).supply.needs(r))),r.whenOff((()=>{n.delete(r),n.size||this._activators.delete(t)}));const s=this._active.it.roles.get(t);return s&&s.supply.cuts(e(this._control,t,this._active.it.active)),r}_add(t,e,n=!1){const r=t.add(e,n);if(r){const t=this._activators.get(e);if(t)for(const n of t.values())r.cuts(n(this._control,e,this._active.it.active))}}}function oi(t){return Jo in t}const ii={applyAspect(t){}};function ui(){return ii}function ci(t,...e){if(!t)return ui;const n=hi(t);if(!e.length)return n;const r=e.map(hi);return(t,e)=>{const s=n(t,e),o=G(Z([s],tt(r.map((n=>n(t,e))),_)),((t,e)=>e.applyAspect?n=>t(n)||e.applyAspect(n):t),g);return function(t){return!t.set}(s)?{applyAspect:o}:{set:s.set.bind(s),get:s.get.bind(s),applyAspect:o}}}function ai(t){return t?ci(...e(t)):ci()}function hi(t){return"function"==typeof t?t:r(t)}const li=Symbol("InBuilder.impl");class di{constructor(){this._aspectsByKey=new Map,this._commonAspects=void 0,this._setup=void 0}addAspect(t,e){const n=this._aspectsByKey.get(t);this._aspectsByKey.set(t,n?ci(n,e):ci(e))}addAspects(t){this._commonAspects=this._commonAspects?ci(this._commonAspects,...t):ci(...t)}setup(t){const e=this._setup;this._setup=e?n=>{e(n),t(n)}:t}build(t){const e=t({aspects:this._aspects()});return this._setup&&e.setup(this._setup),e}_aspects(){if(this._aspectsByKey.size){const t=function(t){return(e,n)=>({applyAspect(r){const s=t.get(r);return s&&s(e,n).applyAspect(r)}})}(this._aspectsByKey);return this._commonAspects?ci(t,this._commonAspects):t}return this._commonAspects}}var fi;class pi{constructor(){this[fi]=new di}addAspect(t,e){return this[li].addAspect(t[Jo],e),this}addAspects(...t){return t.length&&this[li].addAspects(t),this}setup(t,e){return oi(t)?this[li].setup((n=>n.setup(t,e))):this[li].setup(t),this}build(t){return this[li].build(t)}}fi=li;const yi=Symbol("InControl.aspects");class gi{constructor(t,e){this.control=t,this.aspects=e,this._byKey=new Map}aspect(t){const e=this._byKey.get(t);if(e)return e;const n=this.control._applyAspect(t)||t.applyTo(this.control);return this._byKey.set(t,n),n}}class _i extends Fn{constructor({aspects:t}={}){super();const n=e(t);this[yi]=new gi(this,n.length?ai(n)(new mi(this),this):ii)}aspect(t){return this[yi].aspect(t[Jo]).instance}setup(t,e){return oi(t)?e(this.aspect(t),this):t(this),this}convert(t,...e){return new wi(this,ci(t,...e))}_applyAspect(t){return this[yi].aspects.applyAspect(t)}}class mi extends _i{constructor(t){super(),this._control=t}get supply(){return this._supply||(this._supply=new kt(g).needs(this._control))}get it(){return this._control.it}set it(t){this._control.it=t}get on(){return this._control.on}}class wi extends _i{constructor(t,e){super(),this._on=new on,this.supply=(new kt).needs(t);let n,r=0;const s=e(t,this);let o,i,u;!function(t){return!t.set}(s)?(o=s.set,i=s.get,u=e=>t[yi].aspect(e).convertTo(this)):(o=f,i=f,u=e=>{const n=t[yi].aspect(e);return n.attachTo?n.attachTo(this):n.convertTo(this)}),this._applyAspect=t=>{var e;return(null===(e=s.applyAspect)||void 0===e?void 0:e.call(s,t))||u(t)},this._it=Pn([o(t.it),0]),this._it.supply.needs(this.supply),this._it.on((([t],[e])=>{t!==e&&this._on.send(t,e)})).cuts(this._on),t.on((t=>{t!==n&&(this._it.it=[o(t),++r])})).cuts(this),this._it.on((([e,s])=>{if(s!==r){r=s,n=i(e);try{t.it=n}finally{n=void 0}}}))}get it(){return this._it.it[0]}set it(t){const[e,n]=this._it.it;t!==e&&(this._it.it=[t,n+1])}get on(){return this._on.on}}const bi={applyTo:t=>Io(t,vi)};class vi extends _i{static get[Jo](){return bi}_applyAspect(t){return t===bi?Io(this,vi,this):super._applyAspect(t)}}const xi={applyTo:t=>Wo(new $i(t))};class Si{static get[Jo](){return xi}[xe](){return this.on}[ye](){return this.read}}class $i extends Si{constructor(t){super(),this._control=t,this._map=new Map,this._on=new on,this._on.supply.needs(this._control);const e=()=>({[Symbol.iterator]:()=>this._map.keys()});this.read=this.on.do(yn(e,e))}add(t){const e=this._map.get(t);if(e)return e;const n=new kt((()=>{this._map.delete(t),this._on.send([],[t])}));return this._map.set(t,n),this._on.send([t],[]),n.needs(this._control).needs(t.parent)}get on(){return this._on.on}}const ki={applyTo:t=>Io(t,Ci)};class Ci extends _i{static get[Jo](){return ki}_applyAspect(t){return t===ki?Io(this,Ci,this):super._applyAspect(t)}}const Ai={applyTo:t=>Ho(t,Oi,(t=>new Ei(t)))};class Oi{static get[Jo](){return Ai}[xe](){return this.on}[ye](){return this.read}static hasData(t){return"off"!==t&&"-"!==t[0]}done(t){return this.own.supply.off(t),this}}class Di extends Fn{constructor(t){super(),this._tracker=Pn(t?function(t){return null!=t.getAttribute("disabled")?"off":null!=t.getAttribute("readonly")?"ro":"on"}(t.element):"on")}get supply(){return this._tracker.supply}get it(){return this._tracker.it}set it(t){switch(t){case"off":case"ro":case"-on":case"-ro":break;default:t="on"}this._tracker.it=t}get on(){return this._tracker.on}}class Ri{constructor(){this._all=new Set,this._on=new on;const t=qe(this._on.on.do(_n((()=>this._all))),s(this._all));this.read=t.do(sn((t=>Le(...t))),yn(Fi))}add(t){const e=new kt((()=>{this._all.delete(t),this._on.send()}));return this._all.add(t),this._on.send(),e}}class Ei extends Oi{constructor(t){super(),this._control=t,this._derived=new Ri;const e=t.aspect(Ci);this.own=new Di(e),this.own.supply.needs(t),this.derive(t.aspect(Si).read.do(rn(Ti)));let n="on";this.read=je({derived:this._derived.read,own:this.own}).do($n(((t,{derived:[e],own:[r]})=>{let s;if("off"===r||"off"===e)s="off";else{let t=!1;"-"===r[0]&&(t=!0,r=r.substring(1)),"-"===e[0]&&(t=!0,e=e.substring(1)),s="ro"===e?"ro":r,t&&(s="-"+s)}n!==s&&t(n=s)}),s(n)));let r="on";this.on=this.read.do(fn(((t,e)=>{const n=r;n!==e&&t(r=e,n)}))),e&&this.read((t=>function(t,e){switch(e){case"off":t.setAttribute("disabled","");break;case"ro":case"-ro":t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly","");break;default:t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly",""),t.removeAttribute("readonly")}}(e.element,t)))}derive(t){return this._derived.add(Ve(ge(t)?t:t(this._control)).do(Sn(this._control))).needs(this._control)}}function Ti(t){const e=N(t);if(!e.length)return We("on");return Le(...e.map((({parent:t})=>t.aspect(Oi)))).do(yn(Fi))}function Fi(...t){return Mi(...Z(...t))}function Mi(...t){let e=!1,n=!1;for(const r of t)switch(r){case"off":return"off";case"ro":e=!0;break;case"-on":n=!0;break;case"-ro":n=!0,e=!0}return n?e?"-ro":"-on":e?"ro":"on"}const Pi={applyTo:t=>Ho(t,zi,(t=>je({value:t,mode:t.aspect(Oi)}).do(yn((({value:[t],mode:[e]})=>Oi.hasData(e)?t:void 0)))))},zi={get[Jo](){return Pi}},Ki={applyTo:t=>Io(t,Ni)};class Ni extends vi{static get[Jo](){return Ki}_applyAspect(t){return t===Ki?Io(this,Ni,this):super._applyAspect(t)}}const Ui=We();function Bi(){return Ui}const ji={};class Li{constructor(t){const n=new on,o=new Map,i=new Map;let u=g,c=g;this._messages=Ne((t=>{const e=Ve(n,s())(t).whenOff((()=>{u=g,c=g}));c=(t,n)=>{const r=t(((...e)=>{if(e.length)i.set(t,e);else if(!i.delete(t))return;u()})).needs(n).whenOff((e=>{e!==ji&&n.off(e),i.delete(t)&&u()}));e.whenOff((()=>r.off(ji)))},z(o.entries(),(([t,e])=>c(t,e))),u=()=>{n.send(...ot(i.values()))},i.size&&u()})).do(Ge,Sn(t)),this.from=n=>{const s=function(t){return ge(t)?r(Ve(t)):"function"==typeof t?e=>Ve(t(e)):n=>n.read.do($n((r=>r(...e(t.validate(n))))))}(n)(t),i=new kt((()=>{o.delete(s)}));return o.set(s,i),c(s,i),i.needs(t)}}[ye](){return this._messages}}const qi={applyTo:t=>Ho(t,Vi,((t,e)=>{const n=new Gi(t);return e&&n.by(e.aspect(Vi).read.do($n(((t,e)=>t(...e.messages()))))),n}))};class Vi{static get[Jo](){return qi}[ye](){return this.read}}const Wi={get ok(){return!0},messages:()=>[],has:()=>!1,hasBut:()=>!1,[Symbol.iterator]:()=>J(),[w]:t=>J()};class Ii{constructor(t){this._byCode=new Map,this._all=[],this._it=M(this._all),t.forEach((t=>{let e=!1;z(dt(t),(([n,r])=>{if(r){e=!0;const r=this._byCode.get(n);r?r.push(t):this._byCode.set(n,[t])}})),e&&this._all.push(t)}))}get ok(){return!this._all.length}messages(t){return null==t?this._all:this._byCode.get(t)||[]}has(t){return null==t||this._byCode.has(t)}hasBut(...t){return this._all.some((e=>t.every((t=>!e[t]))))}[Symbol.iterator](){return this[w]()}[w](t){return this._it[w](t)}}function Hi(...t){return t.length?new Ii(t):Wi}class Gi extends Vi{constructor(t){super(),this._messages=new Li(t),this.read=Ve(this._messages).do(yn(Hi));const e=t.aspect(vi);e&&this._messages.from(function(t){return t.controls.read.do(sn((t=>Le(...ct(t,(t=>t.aspect(Vi)))))),$n(((t,...e)=>t(...rt(e,(([t])=>t))))))}(e))}by(...t){return this._messages.from(function(...t){const e=t.length;return 1===e?t[0]:e?e=>{const n=new Li(e);return t.forEach((t=>n.from(t))),n}:Bi}(...t))}}function Ji(t){return t?t.read.do($n(((t,e)=>e?t():t({missing:"missing"})))):Ji}const Qi={applyTo:t=>Ho(t,Yi,(t=>new tu(t)))};class Zi extends Error{constructor(...t){super(),this.errors=Hi(...t.map((t=>t.submit?t:{...t,submit:!0})))}}class Xi extends Zi{constructor(t){super({submit:"rejected",rejected:t,[t]:!0})}}class Yi{static get[Jo](){return Qi}[ye](){return this.read}}class tu extends Yi{constructor(t){super(),this._control=t,this._flags=Pn({submitted:!1,busy:!1}),this._errors=Pn([]),this.read=je({flags:this._flags,data:this._control.aspect(zi),messages:this._control.aspect(Vi)}).do(Sn(this._control),yn((({flags:[t],data:[e],messages:[n]})=>({ready:void 0!==e&&(n.ok||j(n,(t=>t.submit))),submitted:t.submitted,busy:t.busy}))));t.aspect(Vi).by(this._errors.read.do($n(((t,e)=>t(...e)))))}async submit(t){if(this._control.supply.isOff)throw new Xi("noInput");if(this._flags.it.busy)throw new Xi("busy");const e=this,n=this._control;let r;this._flags.it={...this._flags.it,submitted:!0,busy:!0};try{return this._errors.it.length&&(this._errors.it=[]),await t(await async function(){const{data:[t],flags:[{ready:r}]}=await je({data:n.aspect(zi),flags:e});return r?t:Promise.reject(new Xi("notReady"))}(),n)}catch(t){throw r=function(t){if(t instanceof Zi)return[...t.errors];return[{submit:t}]}(t),t}finally{this._flags.it={...this._flags.it,busy:!1},r&&(this._errors.it=r)}}reset(){const t=this._flags.it;t.submitted&&(this._flags.it={...t,submitted:!1}),this._errors.it.length&&(this._errors.it=[])}}class eu extends Ci{constructor(t,{aspects:e,get:n,set:r}){super({aspects:e}),this.element=t,this._input=new on;const s=this;this._get=n,this._set=r,this._value=this.it;const o=this._update=(t,e)=>i({value:t},e);function i(t,e){for(;;){let n;s._value=t.value,s._update=(e,r)=>{n=[{...t,value:e},r]};try{s._input.send(t,e)}finally{s._update=o}if(!n)break;[t,e]=n}}this.events=new wr(t),this.events.supply.needs(this),this.listenForInput((t=>i(t,this._value))),this.on=this._input.on.do(fn(((t,{value:e},n)=>e!==n&&t(e,n)))),this.input=this._input.on.do(yn(f,(()=>({value:this.it}))))}get supply(){return this._input.supply}get it(){return this._get()}set it(t){const e=this.it;t!==e&&(this._set(t),this._update(this._get(),e))}listenForInput(t){const e=e=>t({value:this.it,event:e});this.events.on("input")(e),this.events.on("change")(e)}}function nu(t,{aspects:e}={}){return new eu(t,{get(){return this.element.value},set(t){this.element.value=t},aspects:e})}const ru={applyTo:t=>Ho(t,su,(t=>{const e=t.aspect(Ci);return e&&new ou(e)}))};class su extends Fn{static get[Jo](){return ru}}class ou extends su{constructor(t){super();const{element:e,events:n}=t,r=e.getRootNode?e.getRootNode():e.ownerDocument;this._it=Pn(r.activeElement===e),this.supply.needs(t),n.on("focus")((()=>this._it.it=!0)),n.on("blur")((()=>this._it.it=!1)),this.on({receive(t,n){t.onRecurrent(g),n?e.focus():e.blur()}})}get supply(){return this._it.supply}get it(){return this._it.it}set it(t){this._it.it=t}get on(){return this._it.on}}const iu={applyTo:t=>Ho(t,uu,(t=>{const e=t.aspect(vi);return null!=e?new hu(e):new au(t)}))};class uu{static get[Jo](){return iu}[ye](){return this.read}}const cu={hasFocus:!1,touched:!1,edited:!1};class au extends uu{constructor(t){super(),this._flags=Pn(cu),this._flags.supply.needs(t),this._flags.by(function(t,e){const n=e.aspect(Ci);return je({hasFocus:e.aspect(su)||We(!1),edited:n?n.input.do(yn((({event:t})=>!!t))):We(!1)}).do(yn((({hasFocus:[e],edited:[n]})=>function(t,e,n){t=e?{...t,hasFocus:e,touched:!0}:{...t,hasFocus:e};n&&(t={...t,edited:n,touched:!0});return t}(t.it,e,n))))}(this._flags,t))}get read(){return this._flags.read}markTouched(t=!0){const e=this._flags.it;return t?e.touched||(this._flags.it={...e,touched:t}):e.touched&&(this._flags.it={...e,touched:e.hasFocus,edited:!1}),this}markEdited(t=!0){const e=this._flags.it;return t?e.edited||(this._flags.it={...e,touched:!0,edited:t}):e.edited&&(this._flags.it={...e,edited:t}),this}}class hu extends uu{constructor(t){var e;super(),this._container=t,this.read=(e=this._container).controls.read.do(Sn(e),sn((t=>Le(...function(t){return ct(t,(t=>t.aspect(uu)))}(t)))),yn(lu))}markEdited(t){return this._container.controls.read.do(wn)((e=>z(e,(e=>e.aspect(uu).markEdited(t))))),this}markTouched(t){return this._container.controls.read.do(wn)((e=>z(e,(e=>e.aspect(uu).markTouched(t))))),this}}function lu(...t){const e={hasFocus:!1,touched:!1,edited:!1};return z(t,(([{hasFocus:t,touched:n,edited:r}])=>{n&&(e.touched=!0),t&&(e.hasFocus=e.touched=!0),r&&(e.edited=e.touched=!0)})),e}function du(t,e){const{form:n,aspects:r,modes:s}=e,o=new eu(t,{aspects:[ai(r)],get:g,set:g});return o.supply.needs(n),o.setup(Oi,(t=>t.derive(function(t,{notReady:e="on",invalid:n="on",busy:r="ro"}={}){return t.aspect(Yi).read.do(yn((t=>Mi(t.busy?r:"on",t.ready?"on":t.submitted?n:e))))}(n,s))))}const fu={applyTo(t){const e=t.aspect(Ci);return e?Wo(e.element):Vo()}},pu={get[Jo](){return fu},to:(t=null)=>({applyAspect:e=>e===fu?Wo(t):void 0})},yu={applyTo:t=>({instance:new wu(t),convertTo:g})};class gu{static get[Jo](){return yu}[ye](){return this.read}}const _u=Symbol("reason");function mu(t){return t&&"object"==typeof t&&_u in t}class wu extends gu{constructor(t){super(),this._control=t,this._sources=Pn([new Map]),t.supply.whenOff((t=>this.done(t))),this.read=this._sources.read.do(Sn(this._control),sn((([t])=>Le(...t.keys()))),gn(((...t)=>{const e={};return t.forEach((([t])=>bu(t,e))),e}))),this.track=Ne((t=>{t.supply.needs(this._control);const e=new jo,n=new ve;let r=!1;return n.on(t),this.read((t=>{const s=new Set(e),o=[];z(et(dt(t),(([,t])=>!!t)),(([t])=>{s.delete(t)||o.push(t)})),(!r||o.length||s.size)&&(e.delta(o,s),r=!0,e.redelta(((t,e)=>n.send(t,e))).undelta())}))}));const e=t.aspect(pu);e&&this.applyTo(e,this.schedule)}get schedule(){return this._schedule||(this._schedule=vu(this._control,this._control.aspect(pu)))}specs(t){return Ve(ge(t)?t:t(this._control))}resolve(t){const e=this._control.aspect(Xo);return this.specs(t).do(yn(((...t)=>{const n={};return t.forEach((t=>{le(t)?n[ae.name(t,e)]=!0:bu(t,n)})),n})))}add(t){const e=this._control.supply;if(e.isOff)return e;const n=new kt,r=Ne((e=>{const r=this.resolve(t)({receive(t,...n){e.receive(t,...n)}});e.supply.whenOff((t=>{n.off({[_u]:t})})),n.needs(r).whenOff((t=>{mu(t)&&r.off(t[_u])}))})).do(Ge),[s]=this._sources.it;return s.set(r,n),n.whenOff((t=>{mu(t)||(s.delete(r),this._sources.it=[s])})),this._sources.it=[s],n.needs(e)}applyTo(t,e=vu(this._control,t)){const{classList:n}=t,r=new jo,s=()=>{r.redelta(((t,e)=>{n.remove(...e),n.add(...t)})).undelta()};return this.track(((t,n)=>{r.delta(t,n),e(s)})).whenOff((()=>{r.size&&(r.clear(),e(s))}))}done(t){return z(this._sources.it[0].values(),(e=>e.off(t))),this._sources.supply.off(t),this}}function bu(t,e){z(dt(t),(([t,n])=>{null!=n&&(e[t]=n)}))}function vu(t,e){return t.aspect(ti)({node:e})}function xu({mark:t,when:n}={}){let r;return r=n?Array.isArray(n)?n.length?t=>n.every((e=>t.has(e))):Su:t=>t.has(n):Su,n=>n.aspect(Vi).read.do($n(((n,s)=>r(s)?n(...function(t){if(!t)return $u;const n=e(t);return n.length?n:$u}(t)):n())))}function Su(t){return!t.ok}const $u=[["has-error",Qo]];function ku({ns:t=Qo}={}){return e=>{const n=e=>[e,t];return je({md:e.aspect(Oi),vl:e.aspect(Vi),st:e.aspect(uu)}).do($n(((t,{md:[e],vl:[r],st:[{hasFocus:s,touched:o,edited:i}]})=>{const u=[];Oi.hasData(e)||u.push(n("disabled")),"ro"!==e&&"-ro"!==e||u.push(n("readonly")),r.ok||u.push(n("invalid")),r.has("missing")&&u.push(n("missing")),r.has("incomplete")&&u.push(n("incomplete")),s&&u.push(n("has-focus")),o&&u.push(n("touched")),i&&u.push(n("edited")),t(...u)})))}}function Cu({$:t="raw",n:e,t:n,v:r,x:s=[],p:o={},pl:i=[]}){return e&&(o[e]={$:t,n:e,v:r,x:[],p:{},pl:[]}),{$:t,n:e,t:n,v:r,x:s,p:o,pl:i}}function Au({p:t,pl:e},n){const r=n.n||n.v,s=t[r];(!s||!s.n&&n.n)&&(t[r]=n),e.push(n)}const Ou=()=>!1,Du=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d\d (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d\d\d\d \d\d:\d\d:\d\d GMT/;function Ru({dateTime:t}){return t?Eu:Ou}function Eu(t,e){return t.s=t.s.substring(t.i),t.i=0,!!Du.test(t.s)&&(e(t.s.substring(t.i,t.i+=29)),!0)}function Tu({delimiterOf:t}){return e=>{const n=e.s[e.i];return e.d=t(n),n}}function Fu(t,{named:e=!0,tagged:n=!0,extra:r=!0,next:s=Tu(t)}={}){const o=function({delimiterOf:t}){return(e,n)=>{if(!(262144&t(e.s[e.i])))return!1;let r="";for(++e.i;e.i<e.s.length;){const n=e.s[e.i++];if(524288&t(n))break;r+=n}return n(r),!0}}(t),i=Ru(t),u=function({delimiterOf:t}){return(e,n)=>{let r="";for(++e.i;e.i<e.s.length;++e.i){const s=e.s[e.i];if("\\"===s){r+=e.s[++e.i]||s}else{if(65536&t(s))return++e.i,void n(r);r+=s}}n(r)}}(t),c=r?Fu(t,{next:s,tagged:!1,named:!1,extra:!1}):Ou;return(t,r)=>{let a,h,l,d="",f="raw";for(;t.i<t.s.length;){const r=s(t);if(t.d){if(12&t.d)break;if(null==h){if(16&t.d){h=d?"":r,++t.i;continue}if(65536&t.d){!n&&d||u(t,(t=>{d?(f="tagged-string",a=d):f="quoted-string",d="",h=t}));break}if(!d&&o(t,(t=>{f="angle-bracketed-string",h=t})))break;h=d,d=""}else{if(65536&t.d){!n&&h||u(t,(t=>{h?(f="tagged-string",a=h):f="quoted-string",h=t}));break}if(!h&&o(t,(t=>{f="angle-bracketed-string",h=t})))break}}if(null==h){if(!d&&i(t,(t=>h=t))){f="date-time";break}e?d+=r:h=r}else{if(!h&&i(t,(t=>h=t))){f="date-time";break}h+=r}++t.i}if(null==h){if(!d)return!1;l=Cu({$:f,v:d})}else l=Cu({$:f,n:d||void 0,t:a,v:h});for(;c(t,(t=>l.x.push(t))););return r(l),!0}}function Mu({delimiterOf:t}){return e=>{let n=e.s[e.i];return"\\"!==n?(e.d=t(n),n):(++e.i,e.i<e.s.length?(n=e.s[e.i],e.d=t(n)?1:0):e.d=1,n)}}function Pu({delimiterOf:t}){return e=>{const n=e.i;do{const n=e.s[e.i];if(!(2&t(n)))break;e.i++}while(e.i<e.s.length);return e.i!==n}}function zu(t,e={}){const{delimiterOf:n}=t,r=Pu(t),s=Fu(t,{...e,tagged:!1});return(t,e)=>!!(8&n(t.s[t.i]))&&(++t.i,r(t),s(t,e))}const Ku={" ":7,"\t":7,",":5,";":9,'"':65569,"\\":33,"<":262145,">":524289,"=":17,"(":1,")":1,"/":1,":":1,"?":1,"@":1,"[":1,"]":1,"{":1,"}":1};function Nu({delimit:t,dateTime:e}={}){const n=t?{...Ku,...t}:Ku;return{dateTime:e,delimiterOf:t=>n[t]||(t>="\0"&&t<=" "||"\x7f"===t?1:0)}}const Uu=Nu(),Bu=Nu({delimit:{":":17,"(":131105,")":37," ":3,"\t":3,"=":1,",":1}});function ju(t){const e=t?Nu(t):Uu,n=function(t){const{delimiterOf:e}=t,n=Pu(t);return t=>!!(4&e(t.s[t.i]))&&(t.i++,n(t),!0)}(e),r=zu(e),s=Fu(e),o=(null==t?void 0:t.comments)?function(t){const{delimiterOf:e}=t,n=Pu(t),r={next:Mu(t)},s=Fu(t,r),o=zu(t,r);return(t,r)=>{if(!(131072&e(t.s[t.i])))return!1;let i;for(++t.i;n(t)||o(t,(t=>{i||(i=Cu({$:"raw",v:""})),Au(i,t)}))||s(t,(t=>i=t)););return++t.i,r(i||Cu({$:"raw",v:""})),!0}}(Bu):Ou;return t=>{const e=[],i={i:0,s:t};for(;i.i<i.s.length&&(n(i)||r(i,(t=>{e.length||e.push(Cu({$:"raw",v:""})),Au(e[e.length-1],t)}))||o(i,(t=>e.push(t)))||s(i,(t=>e.push(t)))););return e}}const Lu=ju();function qu(t){if(!t)return'""';const{delimiterOf:e}=Uu;let n,r=!1;for(let s=0;s<t.length;++s){const o=t[s],i=e(o);i?(32&i&&(n||(n=t.substring(0,s)),n+="\\"+o),r=!0):n&&(n+=o)}return r?`"${n||t}"`:t}class Vu extends er{constructor(t){super(t),this.upKey=this.createUpKey((t=>t.insert(t.seed.do(rn(((...e)=>e.length?We(function(t){return(e,n)=>{const r=(n,s)=>{const o=t[n];return o?cn(o(((t=s)=>r(n+1,t)),s)):e(s)};return r(0,n)}}(e)):t.hasFallback&&t.or?t.or:We(Wu)))))))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?We(t.or):t.or}:void 0)((t=>e=t)).whenOff((t=>e=Jn(t))),t.insert(((t,n)=>e(t,n)))}}function Wu(t,e){return t(e)}const Iu=new Vu("http-fetch-agent"),Hu={};const Gu=new rr("http-fetch",{byDefault:Nr((function(t){const e=t.get(Es),n=t.get(Iu);return(t,e)=>n(r,new Request(t,e));function r(t){return Ke((n=>{const r=new on;let s;if("AbortController"in e){const o=new e.AbortController,{signal:i}=o;s=new kt((t=>{t===Hu&&o.abort()})),n.supply.whenOff((()=>s.off(Hu))).needs(s),r.on({supply:s,receive(t,e){n.receive(t,e)}});const u=t.signal;u&&(new wr(u).on("abort").do(bn)((()=>o.abort())),u.aborted&&o.abort()),t=new Request(t,{signal:i})}else s=r.on(n);e.fetch(t).then((t=>{r.send(t),s.off()})).catch((t=>s.off(t)))}))}}))});class Ju{[xe](){return this.onUpdate}[ye](){return this.read}}const Qu={subtree:!0};function Zu(t,e,n,s,{deep:o,all:i}){const u=new on,c=o?Qu:void 0;let a,h=new Set;const l=o?Xu:M;"string"==typeof n?a=n:t.whenDefined(n).then((({elementDef:{name:e}})=>{if(e&&(a=oe.name(e,t.get(Ts)),u.size)){const t=p();if(t.size){const e=N(et(ct(t,(t=>s(t))),_));e.length&&u.send(e,[])}}})).catch(console.error),i||e.addEventListener("wesib:component",(t=>{const e=t.target;if(h.has(e)){const t=s(e);u.send([t],[])}}));const d=et(ct(Q((function(){return v(u.size?h:p())})),(t=>s(t))),_);class f extends Ju{constructor(){super();const n=t.get(Us)(y);this.onUpdate=Ke((t=>{const r=!u.size,s=u.on(t);r&&(p(),n.observe(e,c)),s.whenOff((()=>{u.size||(n.disconnect(),h.clear())})).needs(t.supply)}));const s=r(this);this.read=this.onUpdate.do(yn(s,s)),this.track=Ne((t=>{const e=new on;e.on(t),e.send(N(this),[]),this.onUpdate(t)})),this.first=Ve(this.read).do($n(((t,e)=>t(L(e)))))}[Symbol.iterator](){return this[w]()}[w](t){return d[w](t)}}return new f;function p(){const t=function(){const t=a;if(!t)return new Set;if(o)return new Set(M(e.querySelectorAll(t)));return new Set(tt(e.children,(e=>e.matches(t))))}();return u.size&&(h=t),t}function y(t){const e=[],n=[];t.forEach((t=>{z(et(ct(l(t.removedNodes),m),_),(t=>n.push(t))),z(et(ct(l(t.addedNodes),g),_),(t=>e.push(t)))})),(e.length||n.length)&&u.send(e,n)}function g(t){if(Br(t))return a&&t.matches(a)&&!h.has(t)?(h.add(t),s(t)):void 0}function m(t){if(Br(t)&&h.delete(t))return s(t,!0)}}function Xu(t){return rt(t,(t=>M([t,...Xu(t.childNodes)])))}class Yu{constructor(t,e){this._bs=t,this.element=e,this._emitters=new Map}get observer(){if(this._observer)return this._observer;const t=this._bs.get(Es).MutationObserver;return this._observer=new t((t=>this._update(t)))}observe(t,e){const n=this,r=this.observer,s=this._emitter(t),o=_e(e),i=s.on({supply:new kt((()=>{this._emitters.delete(t),r.disconnect(),this._emitters.size?u():this._observer=void 0})).needs(o.supply),receive:(t,e,n)=>o.receive(t,e,n)});return r.disconnect(),u(),i;function u(){n._update(r.takeRecords()),r.observe(n.element,{attributes:!0,attributeOldValue:!0,attributeFilter:[...n._emitters.keys()]})}}_update(t){t.forEach((t=>{const e=t.attributeName,n=this._emitters.get(e);n&&n.send(this.element.getAttribute(e),t.oldValue)}))}_emitter(t){const e=new on;return this._emitters.set(t,e),e}}class tc extends Fn{constructor(t,e){super(),this._observer=t,this._name=e,this._updates=new on;let n=Tt();this.on=Ke((t=>{this._updates.size||(n=this._observer.observe(this._name,((t,e)=>this._updates.send(t,e)))),t.supply.needs(n),this._updates.on(t).whenOff((t=>{this._updates.size||n.off(t)}))}))}get supply(){return this._updates.supply}get it(){return this._observer.element.getAttribute(this._name)}set it(t){null!=t?this._observer.element.setAttribute(this._name,t):this._observer.element.removeAttribute(this._name)}}class ec{constructor(t,e){this._attrs=new Map,this._observer=new Yu(t,e)}get(t){const e=this._attrs.get(t);if(e)return e;const n=new tc(this._observer,t);return this._attrs.set(t,n),n}}class nc extends Fn{constructor(t,e){super(),this._element=t,this._updates=new on,this._key=e}get supply(){return this._updates.supply}get it(){return this._element[this._key]}set it(t){this._element[this._key]=t}get on(){return this._updates.on}bind(t){var e;t.get($o).track((e=this._key,[Ao,e])).onUpdate({supply:this.supply,receive:(t,e,n,r)=>this._updates.send(n,r)})}}class rc{constructor(t){this._element=t,this._props=new Map}bind(t){this._context=t,this._props.forEach((e=>e.bind(t)))}get(t){const e=this._props.get(t);if(e)return e;const n=new nc(this._element,t);return this._context&&n.bind(this._context),this._props.set(t,n),n}}const sc=Symbol("element-node");class oc{constructor(t,e){this._bs=t,this.element=e,this._attrs=new ec(t,e),this._props=new rc(e),e[sc]=this;const n=this.context;n?this._bind(n):e.addEventListener("wesib:component",(t=>this._bind(t.context)))}get context(){var t;return null===(t=this.element[ys])||void 0===t?void 0:t.context}get parent(){const t=this.element.parentNode;return t&&ic(this._bs,t)}select(t,e){return function(t,e,n,r={}){if(r.all)return Zu(t,e,n,((e,n)=>ic(t,e,n)),r);const s=t.get(Ns);return Zu(t,e,n,((e,n)=>s(e)&&ic(t,e,n)),r)}(this._bs,this.element,t,e)}attribute(t){return this._attrs.get(t)}property(t){return this._props.get(t)}_bind(t){this._props.bind(t)}}function ic(t,e,n){const r=e[sc];return r||n?r:new oc(t,e)}const uc=new Gt("component-node",{byDefault:t=>ic(t.get(Kr),t.get(ps).element)});function cc(t){return new URL(t.hash.substring(1),t.origin)}const ac=Symbol("page-param");class hc{get[ac](){return this}byDefault(t,e){}}class lc extends er{constructor(t){super(t),this.upKey=this.createUpKey((t=>{const{document:e}=t.context.get(Es);t.insert(t.seed.do(rn(((...n)=>n.length?We((function(t,r,s,o){return i(0,o);function i(o,u){const c=n[o];if(!c)return t(u);c((({url:t=u.url,title:n=u.title,data:r=u.data}=u)=>i(o+1,{url:new URL(String(t),e.baseURI),title:n,data:r,get visited(){return u.visited},get current(){return u.current},get:t=>u.get(t),put(t,e){u.put(t,e)}})),r,s,u)}})):t.hasFallback&&t.or?t.or:We(dc)))))}))}grow(t){let e;t.context.get(this.upKey,t.hasFallback?{or:null!=t.or?We(t.or):t.or}:void 0)((t=>e=t)).whenOff((t=>e=Jn(t))),t.insert(((t,n,r,s)=>e(t,n,r,s)))}}function dc(t,e,n,r){t(r)}const fc=new lc("navigation-agent");class pc extends Kt{}const yc=new Gt("nav-history",{byDefault:Nr((t=>new _c(t)))});function gc(t){return null==t||"object"!=typeof t?{data:t}:t["wesib:navigation:data"]}class _c{constructor(t){this._context=t,this._entries=new Map,this._lastId=0;const e=t.get(Es);this._document=e.document,this._location=e.location,this._history=e.history,this._uid=btoa(String(Math.random()))}static get[Mt](){return yc}init(){const{data:t}=gc(this._history.state),e=this.newEntry({url:new URL(this._location.href),data:t,title:this._document.title});return this._entries.set(e.id,e),e.schedule((()=>{e.enter("init"),this._history.replaceState(this._historyState(e),"")})),e}newEntry(t){return new mc(this._context,++this._lastId,t)}open(t,e){const{page:{title:n="",url:r}}=t;this._history.pushState(this._historyState(t),n,r.href),this._enter("open",t,e)}_enter(t,e,n){const r=n.it;this._entries.set(e.id,e);try{for(let t=r.next;t;t=t.next)this._forget(t)}finally{e.prev=r,r.next=e,e.schedule((()=>{try{r.leave()}finally{e.enter(t)}})),n.it=e}}replace(t,e){const n=e.it,{page:{title:r="",url:s}}=t;this._history.replaceState(this._historyState(t),r,s.href),this._entries.set(t.id,t);const o=n.prev;o&&(t.prev=o,o.next=t),t.schedule((()=>{try{n.leave()}finally{try{this._forget(n)}finally{t.enter("replace")}}})),e.it=t}popState(t,e){const{state:n}=t;if(null==n)return null==this._history.state?this._changeHash(e):void 0;const r=e.it,{uid:s,data:o,id:i}=gc(n);let u;const c=s===this._uid&&null!=i?this._entries.get(i):void 0;return c?u=c:(u=this.newEntry({url:new URL(this._location.href),data:o,title:this._document.title}),r.transfer(u,"return"),this._entries.set(u.id,u),this._history.replaceState(this._historyState(u),"")),u.schedule((()=>{try{r.leave()}finally{u.enter("return")}})),e.it=u,u}hashChange(t){if(null==this._history.state)return this._changeHash(t)}update(t,e){const n=t.it,r=new mc(this._context,++this._lastId,{...n.page,url:e},n);return this._entries.set(r.id,r),this._history.replaceState(this._historyState(r),"",e.href),this._entries.delete(n.id),t.it=r}_changeHash(t){const e=t.it,n=this.newEntry({url:new URL(this._location.href),data:null,title:this._document.title});try{e.transfer(n,"enter")}finally{this._history.replaceState(this._historyState(n),""),this._enter("enter",n,t)}return n}_forget(t){this._entries.delete(t.id),t.forget()}_historyState({id:t,page:{data:e}}){return{"wesib:navigation:data":{uid:this._uid,id:t,data:e}}}}class mc{constructor(t,e,n,r){this._bsContext=t,this.id=e,this._status=0,this._update=g,this._params=r?r._params:new Map;const s=this;this.page={get url(){return n.url},get title(){return n.title},get data(){return n.data},get visited(){return!!s._status},get current(){return 2===s._status},get:t=>s.get(t),put(t,e){s.put(t,e)}}}get(t){const e=t[ac],n=this._params.get(e);if(n)return n.get();const r=e.byDefault(this.page,this._newContext());return r&&this._init(e,r)}put(t,e){const n=t[ac],r=this._params.get(n);return r?(r.put(e),r.get()):this._init(n,n.create(this.page,e,this._newContext()))}_newContext(){const t=new ee(this._bsContext);return new class extends pc{constructor(){super(...arguments),this.get=t.newValues().get}}}_init(t,e){return this._params.set(t,e),this.page.current&&e.enter&&e.enter(this.page,"init"),e.get()}transfer(t,e){z(this._params.entries(),(([n,r])=>{if(r.transfer){const s=r.transfer(t.page,e);s&&t._params.set(n,s)}}))}stay(t){z(this._params.values(),(e=>e.stay&&e.stay(t)))}enter(t){this._status=2,z(this._params.values(),(e=>e.enter&&e.enter(this.page,t)))}leave(){this._status=1,z(this._params.values(),(t=>t.leave&&t.leave()))}forget(){z(this._params.values(),(t=>t.forget&&t.forget())),this._params.clear()}schedule(t){this._update=t}apply(){const t=this._update;this._update=g,t()}}class wc extends Event{constructor(t,e){super(t,{...e,cancelable:!1}),this.when=e.when,this.to=e.to}}class bc extends Event{constructor(t,e){super(t,{...e,cancelable:!0}),this.when=e.when,this.from=e.from,this.to=e.to}}class vc extends Event{constructor(t,e){super(t,{...e,cancelable:!0}),this.from=e.from,this.to=e.to,this.reason=e.reason}get when(){return"stay"}}const xc=new Gt("navigation",{byDefault:Nr((function(t){const e=t.get(Es),{document:n,history:r}=e,s=new wr(e),o=t.get(_c),i=t.get(fc),u=Pn(o.init());u.read((t=>t.apply()));let c=Promise.resolve();s.on("popstate")((t=>{const e=o.popState(t,u);e&&s.dispatch(new wc("wesib:enterPage",{when:null!=t.state?"return":"enter",to:e.page}))})),s.on("hashchange")((()=>{const t=o.hashChange(u);t&&s.dispatch(new wc("wesib:enterPage",{when:"enter",to:t.page}))}));return new class extends Sc{constructor(){super(),this.onEnter=s.on("wesib:enterPage"),this.onLeave=s.on("wesib:leavePage"),this.onStay=s.on("wesib:stayOnPage"),this.on=an(cn(this.onEnter),cn(this.onLeave),cn(this.onStay)),this.read=u.read.do(yn((({page:t})=>t)))}get page(){return u.it.page}get length(){return r.length}go(t){r.go(t)}open(t){return d("pre-open","open",t)}replace(t){return d("pre-replace","replace",t)}update(t){return o.update(u,h(t)).page}with(t,e){return a((n=>n.put(t,e)))}};function a(t){return{with:(e,n)=>a(y(t,(t=>t.put(e,n)))),open:e=>d("pre-open","open",e,t),replace:e=>d("pre-replace","replace",e,t),pretend(e,n=((t,e)=>e)){let r;"function"==typeof e?(n=e,r=void 0):r=e;const s=l(r),o=u.it,i=f("pretend",o,s,t);try{return p("pretend",o,s,i)?n(o.page,i.page):void 0}finally{i.stay(u.it.page)}}}}function h(t){return"string"==typeof t?new URL(t,n.baseURI):t||u.it.page.url}function l(t){return null==t||"string"==typeof t||t instanceof URL?{url:h(t)}:t.url instanceof URL?t:{...t,url:h(t.url)}}function d(t,e,n,r=g){const i=l(n),a=c=c.then(h,h);return a;function h(){let n;try{const h=function(){if(c!==a)return d();const e=u.it,n=f(t,e,i,r),o=new bc("wesib:leavePage",{when:t,from:e.page,to:n.page});if(!s.dispatch(o)||c!==a||!p(t,e,i,n))return d(n);return n}();return h?(n=h,o[e](n,u),s.dispatch(new wc("wesib:enterPage",{when:e,to:n.page})),n.page):h}catch(t){throw d(n,t),t}}function d(t,e){return t&&t.stay(u.it.page),s.dispatch(new vc("wesib:stayOnPage",{from:u.it.page,to:i,reason:e})),null}}function f(t,e,n,r){const s=o.newEntry(n);try{e.transfer(s,t),r(s.page)}catch(t){throw s.stay(u.it.page),t}return s}function p(t,e,n,r){let s=!1;return i((({url:t,data:e,title:r})=>{s=!0,n.url=t,n.data=e,n.title=r}),t,e.page,r.page),s}}))});class Sc{static get[Mt](){return xc}[xe](){return this.on}[ye](){return this.read}back(){this.go(-1)}forward(){this.go(1)}reload(){this.go()}}function $c({node:t,page:e}){const{element:n}=t,r=n.getAttribute("href");if(null==r)return We(t,-1);return We(t,kc(new URL(r,n.ownerDocument.baseURI),e.url))}function kc(t,e){if(t.origin!==e.origin)return-1;const n=Cc(t),r=Cc(e);if(t.hash){if(n!==r)return-1;const s=Ac(t,e);return s<0||Ac(e,t)<0?-1:t.pathname.length+s+kc(cc(t),cc(e))}const s=Ac(t,e);return s?s<0||n!==r?-1:t.pathname.length+s:r.startsWith(n)?t.pathname.length:-1}function Cc(t){const e=t.pathname;return e.endsWith("/")?e:e+"/"}function Ac({searchParams:t},{searchParams:e}){let n=0;return t.forEach(((t,r)=>{(function(t){return t.startsWith("__")&&t.endsWith("__")})(r)||n>=0&&(e.getAll(r).includes(t)?n+=1:n=-1)})),n}const Oc=Symbol("nav-link-render-schedule"),Dc=["active",Bo];function Rc(t){return t.target.getAttribute("href")}function Ec(t,e,n,r=Tc){let s;"function"==typeof n?(r=n,s=null):s=n||null;const o=e.ownerDocument;if(Br(t)){const n=o.createElement(t.tagName.toLowerCase());return t.getAttributeNames().forEach((e=>n.setAttribute(e,t.getAttribute(e)))),r(t,n),e.insertBefore(n,s),n}const i=o.importNode(t,!1);return e.insertBefore(i,s),i}function Tc(t,e){z(M(t.childNodes),(t=>Ec(t,e)))}function Fc(t){let e;return n=>{const r=function(t){return new URL("",t.url).href}(n);if(e){if(e.url===r)return e.on;e.sup.off()}let s;const o=new kt((()=>{e=void 0,s=void 0})),i=Ke((e=>{if(!s){const e=t(n),r=Pn(),i=e((t=>{r.it=t})).whenOff((t=>{null!=t&&o.off(t)}));o.cuts(i).cuts(r),s={on:r.read.do(An(f)),num:0}}const r=s;return++r.num,r.on.do(vn(o))(e).whenOff((t=>{--r.num||Promise.resolve().then((()=>{r.num||r!==s||o.off(t)})).catch(console.error)}))}));return e={url:r,on:i,sup:o},i}}class Mc extends Error{}const Pc=new class extends hc{create(t,e){return{get:()=>e,put:g}}};class zc{constructor(t,e){this._navigation=t,this._loader=e,this._map=new Map,this._requests=ot(Q((()=>this._map.values())))}get fragments(){const t=[];return j(this._requests,(e=>!!e.fragment&&(t.push(e.fragment),!0)))?t:[]}handle(){const t=this,e=new kt(g);let n=Tt();return{get(){},put(e){t._add(e)},transfer(e,n){if("pretend"===n)return;const r=t._transfer();return e.put(Pc,r),r.handle()},enter(r,s){if("init"===s)return;n=new kt(g).needs(e);const o=Ke((e=>{const s=new on,o=s.on(e);return t._loader(r).do(vn(n))((t=>s.send(t))).whenOff((t=>{void 0===t||t instanceof Mc||s.send({ok:!1,page:r,error:t})})),o})).do(ln);z(t._requests,(({fragment:t,receiver:e})=>function(t,e){return e?t.do(mn((t=>t.ok?{...t,fragment:(null!=e.tag?t.document.getElementsByTagName(e.tag)[0]:t.document.getElementById(e.id))||void 0}:t))):t}(o,t)({supply:(new kt).needs(e.supply),receive(t,n){e.receive(t,n)}})))},leave(){n.off(new Mc("page left"))},stay(){e.off(new Mc("navigation cancelled"))},forget(){e.off(new Mc("page forgotten"))}}}_add(t){const e={...t,receiver:_e(t.receiver)},{supply:n}=e.receiver,r=this._map.get(n);r?r.push(e):(this._map.set(n,[e]),n.whenOff((()=>this._map.delete(n))))}_transfer(){const t=new zc(this._navigation,this._loader);for(const[e,n]of this._map.entries())t._map.set(e,n.slice());return t}}const Kc=new Vu("page-load-agent"),Nc=new rr("page-load-url",{byDefault:r(g)}),Uc=new Gt("page-loader",{byDefault:Nr((function(t){const e=t.get(Es),n=t.get(Gu),r=t.get(Nc),s=t.get(Kc),o=new e.DOMParser;return t=>{const e=new URL(t.url.href);r(e);const i=new Request(e.href,{mode:"same-origin",credentials:"same-origin",headers:new Headers({Accept:"text/html"})});return Ke((t=>s(u,i)(t)));function u(r){return function(t,e){var n;const r=null===(n=t.get(Pc))||void 0===n?void 0:n.fragments;r&&r.length&&e.headers.set("Accept-Fragment",r.reduce(((t,e)=>(t?t+", ":"")+(null!=e.tag?"tag="+qu(e.tag):"id="+qu(e.id))),""))}(t,r),Ke((s=>{const i=new ve;i.on(s),i.send({page:t}),n(r).do(mn((t=>Promise.all([t,t.text()]))),xn,dn(((...t)=>We(...t))),mn((([n,r])=>{if(!n.ok)return{ok:!1,page:t,response:n,error:n.status};try{return{ok:!0,page:t,response:n,document:Bc(o,e,n,r)}}catch(e){return{ok:!1,page:t,response:n,error:e}}})))(s)}))}}}))});function Bc(t,e,n,r){const s=t.parseFromString(r,Lu(n.headers.get("Content-Type")||"text/html")[0].v);if(s.head){const t=s.head.querySelector("base");if(t)t.href=new URL(t.getAttribute("href"),e).href;else{const t=s.createElement("base");t.href=e.href,s.head.appendChild(t)}}return s}class jc extends hc{create(t,e,n){const r=new zc(n.get(Sc),Fc(n.get(Uc))),s=r.handle();return t.put(Pc,r),s.put(e),s}}const Lc=new jc,qc=new Gt("page-cache-buster",{byDefault:Nr((t=>new Vc(t)))});class Vc{constructor(t){const e=Wc(t.get(Es).document);if(e){const n=t.get(Sc);this.urlModifier=We((t=>t.searchParams.set("__wesib_app_rev__",e))),this.agent=We(((t,r)=>t(new Request(r.url,r)).do(mn((t=>{if(t.ok){const r=Wc(t.document);if(r&&r!==e){const e=new URL(t.page.url.href);e.searchParams.set("__wesib_app_rev__",r),n.update(e),n.reload()}}return t})))))}else this.urlModifier=We(),this.agent=We()}static get[Mt](){return qc}}function Wc(t){var e;return null===(e=t.querySelector("meta[name=wesib-app-rev]"))||void 0===e?void 0:e.getAttribute("content")}function Ic(t){const e=t.get(Es).document;return t=>t().do(mn((t=>{if(t.ok){const n=new Set(ct(Hc(e,e.scripts),(([t])=>t)));z(et(Hc(t.document,t.document.querySelectorAll("script")),(([t])=>!n.has(t))),(([t,r])=>{Ec(r,e.head,((e,n)=>n.src=t)),n.add(t)}))}return t})))}function Hc(t,e){return ct(tt(e,(({src:t})=>!!t)),(e=>[new URL(e.src,t.baseURI).href,e]))}function Gc(t){const e=t.get(Es).document;return t=>t().do(mn((t=>{if(!t.ok)return t;const n=t.document.querySelectorAll("link[rel=stylesheet]");if(!n.length)return t;let r=e.head,s=null;const o=e.querySelectorAll("link[rel=stylesheet]"),i=new Map,u=o.item(0);return u&&(r=u.parentNode,s=u,z(M(o),(t=>i.set(new URL(t.href,e.baseURI).href,t)))),z(M(n),(t=>{const n=new URL(t.href,e.baseURI).href,o=i.get(n);o?(L(i.keys())===n?(r=o.parentNode,s=o.nextSibling):r.insertBefore(o,s),i.delete(n)):Ec(t,r,s,((t,e)=>e.href=n))})),z(i.values(),(t=>t.parentNode.removeChild(t))),t})))}function Jc(t){const e=t.get(Es).document;return t=>t().do(mn((t=>{if(t.ok){const n=t.document.getElementsByTagName("title").item(0);n&&n.textContent&&(e.title=n.textContent)}return t})))}const Qc={setup(t){t.provide({a:Nc,by:t=>t.urlModifier,with:[Vc]}),t.provide({a:Kc,by:t=>t.agent,with:[Vc]}),t.provide({a:Kc,by:Ic}),t.provide({a:Kc,by:Gc}),t.provide({a:Kc,by:Jc})}};class Zc{static get[Vr](){return Qc}}function Xc({url:t}){return new URL("",t).href}const Yc=Symbol("Share");function ta(t){return!(!t||"object"!=typeof t&&"function"!=typeof t||!t[Yc])}const ea=new Gt("share-registry",{byDefault:Nr((t=>new na(t.get(Ts))))});class na{constructor(t){this.nsAlias=t,this._sharers=new Map}static get[Mt](){return ea}addSharer(t,e,n,r){let s=this._sharers.get(t);s?(oa(s,e,r),sa(s,n,r),s.it={...s.it}):(s=ra(),this._sharers.set(t,s),oa(s,e,r),sa(s,n,r))}sharers(t){let e=this._sharers.get(t);return e||(e=ra(),this._sharers.set(t,e)),e}}function ra(){return Pn({names:new Map,sharers:new Map})}function sa(t,e,n){if(!e)return;const r=t.it,s=r.names.get(e)||0;r.names.set(e,s+1),n.whenOff((()=>{const n=r.names.get(e)-1;n>0?r.names.set(e,n):r.names.delete(e),t.it={...r}}))}function oa(t,e,n){const r=t.it,s=r.sharers.get(e)||0;r.sharers.set(e,s+1),n.whenOff((()=>{const n=r.sharers.get(e)-1;n>0?r.sharers.set(e,n):r.sharers.delete(e),t.it={...r}}))}class ia extends er{constructor(t,e){super(`${t}:share`),this._share=e}get upKey(){return this}grow(t){t.insert(t.seed.do(rn(((...t)=>this._share.selectValue(...t)))))}}const ua=Symbol("Share.impl");class ca{constructor(t,n,r){this._share=t,this.name=n,this.key=new ia(n,t),this._aliases=e(r.as).map((t=>t[Yc]))}addSharer(t,e={}){const{local:n,name:r=t.elementDef.name}=e,s=t.get(Kr).get(na),o=new kt,{componentType:i}=t,u=n?void 0:r&&oe.name(r,s.nsAlias).toLowerCase();s.addSharer(this._share,i,u,o);for(const t of this._aliases)s.addSharer(t,i,u,o);return o}shareValue(t){t.shareAs(this._share);const e=t.priority+1;this._aliases.forEach(((n,r)=>{n.shareValue(t.withPriority(e+r))}))}}const aa=Symbol("SharedValue"),ha={hasDetails:t=>!!t&&"object"==typeof t&&"object"==typeof t[aa]};function la(t,e){return da(t,function(t){const e=t.priority?Math.max(0,t.priority):0,{supply:n=new kt}=t;return{priority:e,supply:n,provide:e=>{const n=t.provide(e);return Be(n)?n.do(nr(e)):function(t){return Ut(t)?e=>t[Nt](e):r(t)}(n)(e)}}}(e))}function da(t,e){const{priority:n,supply:r,provide:s}=e;return{priority:n,supply:r,shareAs:(e,o=n)=>{o=Math.max(0,o),t.provide({a:e[Yc],by:o?pa(s,o):fa(s)}).as(r)},withPriority:n=>da(t,{...e,priority:Math.max(0,n)})}}function fa(t){return e=>{const n=t(e);return Be(n)?n.do($n(((t,e)=>void 0!==e?t(e):t()))):n}}function pa(t,e){return n=>({[aa]:{priority:e,get:()=>t(n)}})}class ya{constructor(t,e={}){this[ua]=new ca(this,t,e)}get[Yc](){return this}get name(){return this[ua].name}get[Mt](){return this[ua].key}addSharer(t,e){return this[ua].addSharer(t,e)}shareValue(t){this[ua].shareValue(t)}createRegistrar(t,e){return la(t,e)}valueFor(t,e={}){const{local:n}=e;return je({sharers:t.get(Kr).get(na).sharers(this),status:t.readStatus.do(Ye(((t,e)=>t===e),ga))}).do(sn((({sharers:[e]})=>{if(n){if(e.sharers.has(t.componentType))return _a(this,t);if(!0===n)return We()}let r=Lr(t.element);for(;r;){if(e.names.has(r.tagName.toLowerCase()))return gs.of(r).read.do(sn((t=>t?_a(this,t):We())));r=Lr(r)}return We()})),Ze())}selectValue(...t){let e;for(let n=t.length-1;n>=0;--n){const r=t[n];if(!ha.hasDetails(r))return We(r);const s=r[aa];(!e||e.priority>s.priority)&&(e=s)}return e?Ne((t=>{const n=e.get();Be(n)?n(t):ke(t)(n)})).do(Ge):We()}}function ga([{settled:t,connected:e}]){return e?2:t?1:0}function _a(t,e){return e.get(t).do(kn(((t,n)=>n?t(n,e):t())))}function ma(t,e={}){if(ta(t)){const n=t[Yc];return(t,r={})=>{const{local:s=e.local}=r;return n.valueFor(t,{local:s})}}if("function"==typeof t){const{local:n=!1,share:r}=e;return(e,s={})=>{const{share:o=r,local:i=n}=s;return t(e,{share:o,local:i})}}const{share:n=e.share,local:r=e.local}=t||{},s=n[Yc];return(t,e={})=>{const{local:n=r}=e;return s.valueFor(t,{local:n})}}const wa=Symbol("Shareable.internals");class ba{constructor(t){this[wa]=new va(this,t)}static provider(t){const e=u(t);return t=>Ie(e(t))}get sharer(){return this[wa].sharer()}get read(){return this[wa].get().read}[Nt](t){return this[wa].bind(t),this}[ye](){return this.read}get body(){return this[wa].get().it}}class va{constructor(t,e){this._source=t,this._get=ba.provider(e)}sharer(){this._notBound()}get(){this._notBound()}bind(t){this.bind=g,this.sharer=r(t),this.get=()=>{const e=zn(this._get(t));return this.get=r(e),e}}_notBound(){throw new TypeError(`${String(this._source)} is not properly shared yet`)}}class xa{constructor(t,e){this._get=t.get.bind(void 0,e),this._set=t.writable?t.set.bind(void 0,e):g,this._ctx=ps.of(e);const n=this._get();let r=!1;Be(n)?(r=!0,this.val=zn(n)):this.val=Pn(n),this.val.supply.needs(this._ctx),this.val.read((t=>Ut(t)&&t[Nt](this._ctx))),r?this._syncDyn():this._syncVal()}get(){return this._valSupply?this.val.it:this.val.read}set(t){Be(t)?(this.val.by(t),this._syncDyn()):(this.val.it=t,this._syncVal())}_syncVal(){this._valSupply||(this._valSupply=this.val.read((t=>this._set(t))))}_syncDyn(){this._valSupply&&(this._valSupply.off(),this._valSupply=void 0,this._set(this.val.read))}}function Sa(t,...e){const{share:{[Yc]:n},local:r}=ta(o=t)?{share:o}:o;var o;return bs((t=>{const e=Symbol(`${String(t.key)}:shared`),o=n=>n[e]||(n[e]=new xa(t,n));return{get:t=>o(t).get(),set:t.writable?(t,e)=>o(t).set(e):void 0,componentDef:{setup(t){t.perComponent(function(t,e){return{[Zt]:n=>{const r=t.createRegistrar(n,e);return t.shareValue(r),r.supply}}}(n,{provide:t=>t.onceReady.do(sn((({component:t})=>o(t).val),s()))}))},define(t){n.addSharer(t,{local:r})}}}}),...e.map((t=>e=>t({...e,share:n}))))}const $a={setupField({sharer:t,control:e}){ka(t,e)},setupForm({sharer:t,control:e,element:n}){ka(t,e),ka(t,n)}};function ka(t,e){const n=t.get(Ts),r=t.get(To);e.addAspect(Xo,{applyAspect:t=>Wo(n)}).addAspect(ti,{applyAspect:t=>Wo(r)})}class Ca extends er{constructor(){super("form-preset")}get upKey(){return this}grow(t){t.insert(new Da(t.seed.do(yn(((...t)=>Da.combine(...t,$a))),Sn(t.context.get(Qt)))))}}const Aa=new Ca,Oa=Symbol("FormPreset.rules");class Da{constructor(t){this.rules=t,t((t=>{this[Oa]=t}))}static get[Mt](){return Aa}static combine(...t){return{setupField:Ra(t),setupForm:Ta(t)}}[ye](){return this.rules}setupField(t){this[Oa].setupField(t)}setupForm(t){this[Oa].setupForm(t)}}function Ra(t){return t.reduce(((t,e)=>e.setupField?n=>{t(n),e.setupField(n)}:t),Ea)}function Ea(t){}function Ta(t){return t.reduce(((t,e)=>e.setupForm?n=>{t(n),e.setupForm(n)}:t),Fa)}function Fa(t){}class Ma extends ba{constructor(t){super(t)}get control(){var t;return null===(t=this.body)||void 0===t?void 0:t.control}[Nt](t){return super[Nt](t),this.read(g).needs(t),this}}class Pa extends Ma{static by(t){return new this(this.providerBy(t))}static providerBy(t){return e=>({control:e.control.build(t)})}constructor(t){var e,n;super((e=()=>this,n=u(t),t=>t.get(Da).rules.do(sn((r=>{const s={sharer:t,field:e(),control:new pi};return r.setupField(s),Ie(n(s))})),Ye(za,(([t])=>t)),yn((t=>t&&{field:e(),control:t.control})))))}toString(){return"Field"}}function za(t,e){return(null==t?void 0:t.control)===(null==e?void 0:e.control)||(null==t||t.control.supply.off(),!1)}const Ka=new WeakMap;class Na extends ya{static get[Yc](){let t=Ka.get(this);return t||(t=new this("field"),Ka.set(this,t)),t}static get[Mt](){return this[Yc][Mt]}}const Ua=new WeakMap;class Ba extends ya{static get[Yc](){let t=Ua.get(this);return t||(t=new this("form"),Ua.set(this,t)),t}static get[Mt](){return this[Yc][Mt]}}function ja(t,e){return new Pa((n=u(t),r=ma(e,{local:"too"}),t=>r(t.sharer).do(rn(((e,r)=>e?e.read.do(rn((r=>r?Ie(n({...t,adjacentTo:e,adjusted:r})):We()))):We())))));var n,r}function La(t){return"string"==typeof t?t:null}function qa(t={}){return function(t={}){return({key:e,share:n,locateForm:r,name:o})=>{const{name:i=o}=t;let u;if(i)u=i;else{if(null!=i)return;{const t=La(e);if(!t)return;u=t}}const c=ma(t.form||r,{share:Ba});return{componentDef:{setup(t){t.whenComponent((t=>{je({unit:t.get(n).do(sn(f,s())),form:c(t).do(sn(((t,e)=>t),s()))}).do(He((({unit:[t],form:[e]})=>{if(!e||!t)return;const n=e.control.aspect(Ni);return n?n.controls.set(u,t.control):void 0})))}))}}}}}(t)}const Va={applyTo:t=>Vo()};class Wa extends Ma{static forElement(t,e,n){return{control:t,element:du(e,{...n,form:t})}}static by(t,e){return new this(this.providerBy(t,e))}static providerBy(t,e){return n=>{let r=()=>n.control.build((e=>(r=o((()=>t(e))))())),s=()=>n.element.build((t=>(s=o((()=>e({form:r(),...t}))))()));return{get control(){return r()},get element(){return s()}}}}static get[Jo](){return Va}constructor(t){super(function(t,e){const n=e=>({applyAspect:n=>Io(e,Wa,t())});return r=>r.get(Da).rules.do(sn((s=>{const o={sharer:r,form:t(),control:(new pi).addAspect(Wa,n),element:(new pi).addAspect(Wa,n)};return s.setupForm(o),Ie(e(o))})),Ye(Ia,(([t])=>t)),yn((e=>e&&{get form(){return t()},get control(){return e.control},get element(){return e.element}})))}((()=>this),u(t)))}get element(){var t;return null===(t=this.body)||void 0===t?void 0:t.element}toString(){return"Form"}}function Ia(t,e){let n=!0;return(null==t?void 0:t.control)!==(null==e?void 0:e.control)&&(null==t||t.control.supply.off(),n=!1),(null==t?void 0:t.element)!==(null==e?void 0:e.element)&&(null==t||t.element.supply.off(),n=!1),n}const Ha={createSetup(t,n,r="default"){if(!1===t)return t=>Tt();if(!0===t)return t=>n(t).supply;let s=e(t);return s.length||(s=[r]),1===s.length?t=>t.aspect(ni).when(s[0],(()=>n(t))):t=>s.reduce(((e,r)=>t.aspect(ni).when(r,(()=>n(t))).as(e)),new kt)}},Ga=new WeakMap;class Ja{static get[Vr](){const t=Ga.get(this);if(t)return t;const e=new this,n={setup:t=>{t.provide(e)}};return Ga.set(this,n),n}[Zt](t){return t.provide({a:Da,is:this})}setupField(t){}setupForm(t){}}const Qa={createSetup(t,e,n){let r,s;if(Array.isArray(t)){const[e,...n]=t;Za(e)?(r=n.length>1?n:n[0],s=e):r=t}else Za(t)?s=t:r=t;return Ha.createSetup(r,e(s),n)}};function Za(t){return null!=t&&"string"!=typeof t&&"boolean"!=typeof t}function Xa(t={},...e){let n,r,s;"function"==typeof t?(n={},s=[qa(),t,...e]):(n=t,r=t.name,s=[qa({name:r}),...e]);const{share:o=Na,form:i}=n,u=ma(i,{share:Ba});return function(t,...e){return Sa(t,...e)}(o,...s.map((t=>e=>{return t({...e,locateForm:u,name:(n=e.key,s=r,""===s?null:s||La(n))});var n,s})))}function Ya(t){return Array.isArray(t)}function th(t){return!!t.length}class eh{constructor(t){this.priority=t&&t.priority||0}important(){return this.prioritize(1)}usual(){return this.prioritize(0)}}function nh(t,e){return t===e||("object"==typeof t?t.is(e):"object"==typeof e&&e.is(t))}class rh extends eh{}class sh extends rh{constructor(t,e){super(e),this.r=uh(t.r,255),this.g=uh(t.g,255),this.b=uh(t.b,255),this.a=null!=t.a?ch(t.a,1):1}get type(){return"rgb"}get rgb(){return this}get hsl(){const{a:t}=this,e=100*this.r/255,n=100*this.g/255,r=100*this.b/255,s=Math.max(e,n,r),o=Math.min(e,n,r),i=Math.round((s+o)/2);if(s===o)return new oh({h:0,s:0,l:i,a:t},this);const u=s-o,c=Math.round(i>50?100*u/(200-s-o):100*u/(s+o));let a;switch(s){case e:a=(n-r)/u+(n<r?6:0);break;case n:a=(r-e)/u+2;break;default:a=(e-n)/u+4}return a*=60,a=Math.round(a),new oh({h:a,s:c,l:i,a:t},this)}by(t){return ih.by(t)||this}is(t){return"object"==typeof t&&t.type===this.type&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a&&t.priority===this.priority}prioritize(t){return this.priority===t?this:new sh(this,{priority:t})}set(t){"function"==typeof t&&(t=t(this));const{r:e=this.r,g:n=this.g,b:r=this.b,a:s=this.a}=t;return new sh({r:e,g:n,b:r,a:s},this)}toString(){const t=`${this.r}, ${this.g}, ${this.b}`;return 1===this.a?`rgb(${t})`:`rgba(${t}, ${this.a})`}}class oh extends rh{constructor(t,e){var n;super(e),this.h=(n=t.h,(n%=360)<0?360+n:n),this.s=ch(t.s,100),this.l=ch(t.l,100),this.a=null!=t.a?ch(t.a,1):1}get type(){return"hsl"}get rgb(){const{a:t}=this,e=this.s/100,n=this.l/100;if(!e){const e=255*n;return new sh({r:e,g:e,b:e,a:t},this)}const r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,o=this.h/360;return new sh({r:ah(s,r,o+1/3),g:ah(s,r,o),b:ah(s,r,o-1/3),a:t},this)}get hsl(){return this}by(t){return ih.by(t)||this}is(t){return"object"==typeof t&&t.type===this.type&&t.h===this.h&&t.s===this.s&&t.l===this.l&&t.a===this.a&&t.priority===this.priority}prioritize(t){return this.priority===t?this:new oh(this,{priority:t})}set(t){"function"==typeof t&&(t=t(this));const{h:e=this.h,s:n=this.s,l:r=this.l,a:s=this.a}=t;return new oh({h:e,s:n,l:r,a:s},this)}toString(){const t=`${this.h}, ${this.s}%, ${this.l}%`;return 1===this.a?`hsl(${t})`:`hsla(${t}, ${this.a})`}}const ih={by(t){if("object"==typeof t&&("rgb"===t.type||"hsl"===t.type))return t}};function uh(t,e){return ch(Math.round(t),e)}function ch(t,e){return Math.max(Math.min(t,e),0)}function ah(t,e,n){let r,s=n;return s<0?s+=1:s>1&&(s-=1),r=s<1/6?t+6*s*(e-t):s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t,255*r}function hh(t,e,n){const r=2*n-1,s=t.rgb,o=e.rgb,i=s.a-o.a,u=((r*i==-1?r:(r+i)/(1+r*i))+1)/2,c=1-u;return new sh({r:s.r*u+o.r*c,g:s.g*u+o.g*c,b:s.b*u+o.b*c,a:s.a*n+o.a*(1-n)},t)}class lh extends eh{constructor(t){super(t),this.dim=t.dim}by(t){return this.dim.by(t)||this}toString(){return this.toFormula()}}const dh={map(t,e){const n={},r={from:e,get(r){if(r in n)return n[r];const s=function(t){switch(typeof t){case"function":return t;case"object":return t.by.bind(t)}const e=typeof t;return n=>typeof n===e?n:t}(t[r])(e[r],this,r);return n[r]=s,s}};return z(Y(t),(t=>r.get(t))),n},by:t=>dh.map.bind(void 0,t)};function fh(t){if(null==t)return[void 0,0];switch(typeof t){case"object":return[t,t.priority];case"string":if(t.endsWith("!important"))return[t.substring(0,t.length-"!important".length).trim(),1]}return[t,0]}class ph extends lh{constructor(t,e,n){super(n),this.val=t,this.unit=e}get type(){return"dimension"}toDim(t){const e=this.dim;if(t===e||t===e.pt||t===("%"===this.unit?t.pt:e.noPt))return this}is(t){return t===this||"object"==typeof t&&t.type===this.type&&this.unit===t.unit&&this.val===t.val&&this.priority===t.priority}prioritize(t){return this.priority===t?this:new ph(this.val,this.unit,{dim:this.dim,priority:t})}add(t,e){return"number"==typeof t&&(t=yh(t,e||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?yh(this.val+t.val,this.unit,this):mh(this,"+",t)}sub(t,e){return"number"==typeof t&&(t=yh(t,e||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?yh(this.val-t.val,this.unit,this):mh(this,"-",t)}mul(t){return 1===t?this:yh(this.val*t,this.unit,this)}div(t){return 1===t?this:yh(this.val/t,this.unit,this)}negate(){return yh(-this.val,this.unit,this)}toFormula(){return`${this.val}${this.unit}`}}function yh(t,e,n){return t?new ph(t,e,n):n.dim.zero.prioritize(n.priority||0)}class gh extends lh{constructor(t,e,n,r){super(r),this.left=t.usual(),this.op=e,this.right=n}get type(){return"calc"}is(t){return this===t||"object"==typeof t&&t.type===this.type&&(this.op===t.op&&this.left.is(t.left)&&nh(this.right,t.right)&&this.priority===t.priority)}add(t,e){return"number"==typeof t&&(t=yh(t,e,this)),mh(this,"+",t)}sub(t,e){return"number"==typeof t&&(t=yh(t,e,this)),mh(this,"-",t)}mul(t){return bh(this,t)}div(t){return vh(this,t)}toString(){return"calc"+super.toString()}}class _h extends gh{constructor(t,e,n,r){super(t,e,n.usual(),r)}prioritize(t){return this.priority===t?this:new _h(this.left,this.op,this.right,{dim:this.dim,priority:t})}toDim(t){const e=this.left.toDim(t);if(!e)return;const n=this.right.toDim(t);return n?e===this.left&&n===this.right?this:new _h(e,this.op,n,{dim:t,priority:this.priority}):void 0}negate(){return"-"===this.op?new _h(this.right,this.op,this.left,this):new _h(this.left.negate(),"-",this.right,this)}toFormula(){return`(${this.left.toFormula()} ${this.op} ${this.right.toFormula()})`}}function mh(t,e,n){return n.type?new _h(t,e,n,t):t}class wh extends gh{prioritize(t){return this.priority===t?this:new wh(this.left,this.op,this.right,{dim:this.dim,priority:t})}toDim(t){const e=this.left.toDim(t);if(e)return e===this.left?this:new wh(e,this.op,this.right,{dim:t,priority:this.priority})}mul(t){return("*"===this.op?bh(this.left,this.right*t):vh(this.left,this.right/t)).prioritize(this.priority)}div(t){return("/"===this.op?vh(this.left,this.right*t):bh(this.left,this.right/t)).prioritize(this.priority)}negate(){return new wh(this.left,this.op,-this.right,this)}toFormula(){return`(${this.left.toFormula()} ${this.op} ${this.right})`}}function bh(t,e){return e?1===e?t.prioritize(t.priority):new wh(t,"*",e,t):t.dim.zero.prioritize(t.priority)}function vh(t,e){return 1===e?t.prioritize(t.priority):new wh(t,"/",e,t)}class xh extends lh{constructor(t,e){super(e),this._byPriority=t}get type(){return 0}toDim(t){return t.zero.prioritize(this.priority)}is(t){return this===t||("object"==typeof t?t.type===this.type&&t.priority===this.priority:0===t||"0"===t?0===this.priority:"0 !important"===t&&1===this.priority)}add(t,e){return"number"==typeof t&&(t=yh(t,e,this)),t.prioritize(this.priority)}sub(t,e){return"number"==typeof t&&(t=yh(t,e,this)),t.negate().prioritize(this.priority)}mul(){return this}div(){return this}negate(){return this}prioritize(t){return this._byPriority.get(t)}important(){return this._byPriority.important}usual(){return this._byPriority.usual}toFormula(){return"0"}}class Sh{constructor(t){this.dim=t,this.usual=new xh(this,{dim:t}),this.important=new xh(this,{dim:t,priority:1})}get(t){switch(t){case 0:return this.usual;case 1:return this.important}return new xh(this,{dim:this.dim,priority:t})}}function $h({pt:t,noPt:e}){const n={get zero(){return r},get pt(){return t()},get noPt(){return e()},of(t,e){return t?new ph(t,e,{dim:this}):r},by(t){if(function(t){return"object"==typeof t&&("dimension"===t.type||"calc"===t.type||0===t.type)}(t))return t.toDim(this)}},r=new Sh(n).usual;return n}const kh=$h({pt:()=>Ch,noPt:()=>kh}),Ch=$h({pt:()=>Ch,noPt:()=>kh});class Ah extends eh{constructor(t,e){super(e),this.url=t}get type(){return"url"}static by(t){switch(typeof t){case"string":{const[e,n]=fh(t);return new Ah(e,{priority:n})}case"object":if("url"===t.type)return t}}by(t){return Ah.by(t)||this}prioritize(t){return t===this.priority?this:new Ah(this.url,{priority:t})}is(t){return"object"==typeof t&&"url"===t.type&&t.url===this.url&&t.priority===this.priority}toString(){return`url("${Rr(this.url)}")`}}const Oh=We({});function Dh(){return Oh}function Rh(t,e){if(!e)return Oh;if("string"!=typeof e){if(ge(e))return Th(e);if(Se(e))return Th(Eh(e));if("function"==typeof e){const n=e(t);if("string"!=typeof n){if(ge(n))return Th(n);if(Se(n))return Th(Eh(n))}return We(Fh(n))}}return We(Fh(e))}function Eh(t){return Ve(t,s({}))}function Th(t){return Ve(t).do(gn(Fh),Ze(Mh,Ph))}function Fh(t){return"string"==typeof t?{$$css:t}:t}function Mh(t,e){const n=H(zh(e));for(const[e,r]of zh(t)){const{value:t}=n.next();if(!t||e!==t[0]||!nh(r,t[1]))return!1}return!n.next().value}function Ph([t]){return{...t}}function zh(t){return et(dt(t),(([,t])=>_(t)))}function Kh(t,e){return Th(je({base:t,addendum:e}).do(yn((({base:[t],addendum:[e]})=>function(t,e){return G(dt(e),((t,[e,n])=>function(t,e,n){Nh(t[e])<=Nh(n)&&(delete t[e],t[e]=n);return t}(t,e,n)),{...t})}(t,e)))))}function Nh(t){switch(typeof t){case"string":return t.endsWith("!important")?1:0;case"object":return t.priority;default:return 0}}function Uh(t){return">"===t||"+"===t||"~"===t}function Bh(t){if(!Ya(t))return[jh(t)];const e=[];let n;for(const r of t){const t=n;let s;if(n&&(e.push(n),n=void 0),Uh(r)){if(n=r,!t)continue;s={}}else s=jh(r);e.push(s)}return n&&e.push(n,{}),e}function jh(t){return"string"==typeof t?t?{s:t}:{}:Lh(t)}function Lh(t){const e=t.ns||void 0,n=t.i||void 0,r=function(t){if(!t)return;if(le(t))return[t];const e=t.filter((t=>!!t));return th(e)?e.sort(de):void 0}(t.c),s=function(t){if(!t)return;if(function(t){return"string"!=typeof t[0]}(t)){const e=t.map(qh);return th(e)?e:void 0}return[qh(t)]}(t.u);return{ns:e,e:("*"!==t.e||!e&&!n&&!r&&s&&Vh(s[0]))&&t.e||void 0,i:n,c:r,u:s,s:t.s||void 0,$:Wh(t.$)}}function qh(t){if(!Vh(t))return t;if(t.length<3)return t;const[e,n,...r]=t;return Ya(r[0])?[e,n,...r.map(Bh)]:[e,n,Bh(r)]}function Vh(t){return t.length>1&&(":"===t[0]||"::"===t[0])}function Wh(t){if(t)return th(t=Ya(t)?[...new Set(ot(t,Hh))].sort():[...Hh(t)])?t:void 0}const Ih=new Set;function Hh(t){if(!t)return Ih;const e=t.indexOf("="),n=e<0?t:t.substring(0,e),r=new Set;let s;for(const t of n.split(":"))s?s+=":"+t:s=t,r.add(s);return e>=0&&r.add(t),r}const Gh=[[]];function Jh(t){if(!t.length)return Gh;let e,n=0;for(;;){const r=t[n++];if(Uh(r)){e=r;continue}return[e?[e,r]:[r],t.slice(n)]}}const Qh=[];function Zh(t,e){return t&&e.every((e=>t.find((t=>function(t,e){if("string"==typeof t)return"string"==typeof e?t===e:!e[1].url&&e[0]===t;const[n,{url:r}]=t;return"string"==typeof e?!r&&n===e:n===e[0]&&r===e[1].url}(e,t)))))}function Xh(t){return Bh(t)}const Yh={qualify:t=>`@${Dr(t)}`};function tl(t){return nl(t,Yh)}const el={};function nl(t,{qualify:e,nsAlias:n=pe()}=el){const r={qualify:e,nsAlias:n};return t.reduce(((t,e)=>Uh(e)?t+e:(t&&!Uh(t[t.length-1])&&(t+=" "),t+function(t,{qualify:e,nsAlias:n}){const{ns:r,e:s,i:o,c:i,s:u,u:c,$:a}=t;let h=!1,l="";o&&(h=!0,l+=`#${Dr(ue.name(o,n))}`);i&&(h=!0,l=i.reduce(((t,e)=>`${t}.${Dr(ae.name(e,n))}`),l));if(c){h=!0;const t={nsAlias:n};l=c.reduce(((e,n)=>function(t,e,n){if(Vh(e)){t+=e[0]+e[1];if(e.length>2){t+="("+nl(e[2],n);for(let r=3;r<e.length;++r)t+=","+nl(e[r],n);t+=")"}return t}const[r,s,o,i]=e;t+="["+Dr(r),s&&(t+=`${s}"${Rr(o)}"`);i&&(t+=" "+i);return t+"]"}(e,n,t)),l)}u&&(h=!0,l+=u);e&&a&&(l=a.reduce(((t,n)=>t+e(n)),l));if(r){const t=function(t,e){return"string"==typeof t?t:t.url?e(t):void 0}(r,n);l=t?`${t}|${s||"*"}${l}`:d()}else l=d();return l;function d(){return h?`${s?oe.name(s,n):""}${l}`:`${s?oe.name(s,n):"*"}${l}`}}(e,r))),"")}class rl{constructor(t){this._rule=t}read(t){let e=this._rule.outer;for(;e;)t=Kh(e.read.do(yn(il)),t),e=e.outer;return t}render(t,e){const{selector:n}=t;let{writer:r}=t;if(!r.isGroup)return void t.render(e);let s=r;const o=function(t){const e=new Map,n=[];for(const r of t)Uh(r)?n.push(r):n.push(cl(r,e));if(!e.size)return;return[e,Xh(n)]}(n);if(!o)return void t.render(e);const[i,u]=o;for(const t of i){const[n,o]=sl(e,t);if(!o){r=s.addStyle(n);break}r=s=s.addGroup(n,o)}t.render(e,{writer:r,selector:u})}}function sl(t,[e,[n,r]]){let s="";const o=t=>{t&&(s&&(s+=" and "),s+=t)};for(const e of n){const[n]=fh(t[e]);o(n)}return o(r),s?[e,s]:[e]}const ol={order:-65535,create:t=>new rl(t)};function il(t){return G(et(dt(t),ul),((t,[e,n])=>(t[e]=n,t)),{})}function ul(t){return"@"===String(t[0])[0]}function cl(t,e){const n=t.$;if(!n)return t;const r=[];for(const t of n)"@"===t[0]?al(e,t):r.push(t);return r.length===n.length?t:th(r)?{...t,$:r}:{...t,$:void 0}}function al(t,e){const n=e.indexOf("=");let r,s;n<0?r=e:(r=e.substring(0,n),s=e.substring(n+1));const o=r.indexOf(":"),i=o<0?r:r.substring(0,o),u=t.get(i);if(u){const[t,e]=u;t.add(r),s&&(u[1]=e?`${e} and ${s}`:s)}else t.set(i,[(new Set).add(r),s])}const hl={order:-65534,needs:ol,render(t,e){const n=!t.rule.selector.length,{sheet:r}=t;let s=0,o=0;for(const[t,i]of dt(e)){const e=String(t);if("@"===e[0]){const[t]=fh(i),u=n?ll(r,s,e,t):0;s+=u,o+=u;const c=Ah.by(t);c&&(o+=dl(r,o,e,c),o+=fl(r,o,e,c))}}t.render(e)}};function ll(t,e,n,r){if(!n.startsWith("@import:"))return 0;const s=new Ah(n.substring("@import:".length));let o=String(s);return r&&(o+=` ${r}`),t.addGlobal("@import",o,e),1}function dl(t,e,n,r){return"@namespace"!==n?0:(t.addGlobal("@namespace",String(r),e),1)}function fl(t,e,n,r){if(!n.startsWith("@namespace:"))return 0;const s=n.substring("@namespace:".length);return t.addGlobal("@namespace",`${s} ${r}`,e),1}function pl(t,e){const n=t.addStyle();z(et(dt(e),yl),(([t,e])=>{const[r,s]=fh(e);n.set(function(t){const e=Fr.get(t);if(e)return e;let n=Mr(t);return n.startsWith("ms-")&&(n="-"+n),Fr.set(t,n),n}(t),`${r}`,s)})),t.render(e,{writer:n})}function yl(t){const[e,n]=t;if(null==n)return!1;const r=String(e)[0];return r>="a"&&r<="z"||r>="A"&&r<="Z"}function gl(t,e){const n=e.$$css;if(n){const r=t.addStyle();r.replace(n),t.render(e,{writer:r})}else t.render(e)}const _l={order:-65535,needs:hl,render(t,e){const n=t.selector.map((t=>!Uh(t)&&t.ns&&"string"!=typeof t.ns?t.ns:null)).filter(_);if(n.length){const r=(e,n)=>(e[`@namespace:${t.nsAlias(n)}`]=new Ah(n.url),e);t.render(n.reduce(r,{...e}))}else t.render(e)}};function ml(t){if("function"==typeof t)return{create:()=>({render:t})};if(function(t){return"create"in t}(t))return{order:t.order,needs:t.needs,create:e=>function(t){return"function"==typeof t?{render:t}:t}(t.create(e))};const e=t.render.bind(t);return{order:t.order,needs:t.needs,create:()=>({render:e})}}function wl(t,e){const n=t.order||0,r=e.order||0;return n>r?1:n<r?-1:0}function bl(t,e=Or){return(n={})=>{const{node:r=t,error:s}=n;return e({...n,node:r,error:s&&s.bind(n)})}}function vl(t){var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}const xl={indent:"  "},Sl={nv:"",eol:"",pre:"",indent(){return this}};class $l{constructor(t,e=""){this._config=t,this.pre=e}get nv(){return" "}get eol(){return"\n"}indent(){return new $l(this._config,this.pre+this._config.indent)}}class kl{constructor(t,e){this.f=t,this.selector=e,this.body="",this.nf=t.indent()}get isGroup(){return!1}set(t,e,n){const r=n>=1?" !important":"",{pre:s,nv:o,eol:i}=this.nf;this.body&&(this.body+=`;${i}`),this.body+=`${s}${t}:${o}${e}${r}`}replace(t){this.body=t.trim(),this.body.endsWith(";")&&(this.body=this.body.substr(0,this.body.length-1))}toString(){const{pre:t,nv:e,eol:n}=this.f;if(this.body){const r=n?`;${n}`:"";return`${t}${this.selector}${e}{${n}${this.body}${r}${t}}`}return""}}class Cl{constructor(t){this.nf=t,this._nested=[]}get isGroup(){return!0}addGroup(t,e,n){return this._add(new Al(this.nf,t,e),n)}addStyle(t,e){return this._add(new kl(this.nf,t),e)}toString(){let t="";for(const e of this._nested){const n=String(e);n&&(t&&(t+=this.nf.eol),t+=n)}return t}_add(t,e=this._nested.length){return this._nested.splice(e,0,t),t}}class Al extends Cl{constructor(t,e,n){super(t.indent()),this.f=t,this.name=e,this.params=n}toString(){const t=super.toString();if(!t)return"";const{pre:e,nv:n,eol:r}=this.f;return`${e}${this.name} ${this.params}${n}{${r}${t}${r}${e}}`}}class Ol extends Cl{constructor(t,e,n){super(e),this.id=t,this.f=e,this.sender=n}addGlobal(t,e,n){this._add(`${this.f.pre}${t} ${e};`,n)}clear(){this._nested.length=0}remove(){this.clear(),this.sender.send({id:this.id})}done(){this.sender.send({id:this.id,css:this.toString()})}}function Dl(t={}){var e;const{document:n=(null===(e=t.parent)||void 0===e?void 0:e.ownerDocument)||window.document,parent:r=n.head}=t,s=function(t={}){const e=!0===t.pretty||null==t.pretty?xl:t.pretty||!1,{scheduler:n=Cr}=t,r=new on,s=e?new $l(e):Sl;let o=0;return{...t,pretty:e,scheduler:n,onSheet:r.on,addSheet:()=>new Ol(String(++o),s,r)}}(t),o=bl(r,t.scheduler),i=o(),u=new Map,c=s.onSheet((({id:t,css:e})=>{let s=u.get(t);null==e?(u.delete(t),vl(s)):s?s.textContent=e:(s=n.createElement("style"),s.setAttribute("type","text/css"),s.textContent=e,r.appendChild(s),u.set(t,s),c.whenOff((()=>i((()=>vl(s))))))}));return{...t,scheduler:o,addSheet(t){return c.needs(t),this.addSheet=s.addSheet.bind(s),this.addSheet(t)}}}class Rl{constructor(t){this._target=t}get isGroup(){return!1}set(t,e,n){this._target.style.setProperty(t,e,n>=1?"important":void 0)}replace(t){this._target.style.cssText=t}}class El{constructor(t){this._target=t}get isGroup(){return!0}addGroup(t,e,n){return new El(this._add(`${t} ${e}{}`,n))}addStyle(t,e){return new Rl(this._add(`${t}{}`,e))}_add(t,e=this._target.cssRules.length){const n=this._target.insertRule(t,e);return this._target.cssRules[n]}}class Tl extends El{constructor(t){super(t.sheet),this._element=t}addGlobal(t,e,n){this._add(`${t} ${e};`,n)}clear(){const{cssRules:t}=this._target;for(;t.length;)this._target.deleteRule(t.length-1)}remove(){vl(this._element)}done(){}}function Fl(t,e){const{rootSelector:n={e:"body"},scheduler:r=Or,nsAlias:s=pe()}=e,o=new kt,i={nsAlias:s},u=function(t){const e=new Map;return n(t.renderer),e.delete(pl),[...e.values(),ml(pl)].sort(wl);function n(t){t&&(Ya(t)?t.forEach(r):r(t))}function r(t){if(e.has(t))return;const r=ml(t);e.set(t,r),n(r.needs)}}(e),c=G(ct(t,l),((t,e)=>(new kt).cuts(e).cuts(t)),new kt);const a=function(){const e=new kt;return cn(t)({supply:e,receive:(t,n)=>{n.forEach((t=>l(t).needs(e)))}})}();return o.as(c).as(a);function h(t,e,n){return new class{get supply(){return o}get rule(){return t}get sheet(){return n.sheet}get writer(){return n.writer}get selector(){return n.selector}nsAlias(t){return s(t)}render(r,s){e(s?h(t,e,{sheet:n.sheet,writer:s.writer||n.writer,selector:s.selector||n.selector}):this,r)}addStyle(t=n.selector){const{writer:e}=n;return e.isGroup?e.addStyle(function(t,e){return nl(Xh(t),e)}(t,i)):e}}}function l(t){const[s,o]=function(t){const e=u.map((e=>e.create(t)));return[e.reduce(((t,e)=>e.read?Ve(e.read(t)):t),t.read),n(0)];function n(t){return(r,s)=>{const o=t+1;let i;i=o===u.length?g:n(o);const c=h(r.rule,i,r);e[t].render(c,s)}}}(t);let i;const c=function(t){const e=t.selector;if(!e.length)return Xh(n);if(Uh(e[0]))return[...Xh(n),...e];return e}(t),a=r();return s((function(n){a((()=>{null==i||i.clear();const r=h(t,o,{get sheet(){return i||(i=e.addSheet(r)),i},get writer(){return this.sheet},selector:c});r.render(n),null==i||i.done()}))})).whenOff((function(){a((()=>{const t=i;if(t)return i=void 0,t.remove()}))}))}}function Ml(t){const e=[ol,_l,hl,gl];return t&&(Ya(t)?e.push(...t):e.push(t)),e}function Pl(t,e){return Fl(t,{...e,renderer:Ml(e.renderer)})}class zl{[ye](){return this.read}add(t){return this.rules.add([],t)}clear(){return this.set()}}class Kl{[ye](){return this.read}[xe](){return this.onUpdate}}class Nl extends Kl{}class Ul extends Kl{constructor(t,e){let n;super(),this._list=t,e?(this._buildList=()=>et(t,e),n=t=>t.filter(e)):(this._buildList=r(t),n=f),this.onUpdate=Ke((t=>{const e=this._ruleSet||(this._ruleSet=new Set(this._buildList()));cn(this._list)({supply:t.supply.whenOff((()=>this._ruleSet=void 0)),receive:(r,s,o)=>{s=n(s),((o=n(o)).length||s.length)&&(o.forEach((t=>e.delete(t))),s.forEach((t=>e.add(t))),t.receive(r,s,o))}})})).do(ln);const s=r(this);this.read=this.onUpdate.do(yn(s,s))}[Symbol.iterator](){return this._ruleSet?this._ruleSet.values():H(this._buildList())}grab(t){return Bl(this,t)}}function Bl(t,e){const n=function(t){return Lh(t)}(e);return new Ul(t,(t=>function(t,e){if(!t.length)return!1;const n=t[t.length-1];return!(e.ns&&n.ns!==e.ns||e.e&&n.e!==e.e||e.i&&n.i!==e.i||e.c&&!Zh(n.c,e.c)||e.$&&!Zh(n.$,e.$))}(t.selector,n)))}class jl extends Nl{constructor(t,e){super(),this._root=t,this.nested=e,this._updates=new on,this.self=function(t,e){const n=new on,r=[t];e.onUpdate(((e,s)=>{s[0]===t&&(r.length=0,n.send([],[t]))})).cuts(n);class s{[xe](){return n.on}[Symbol.iterator](){return H(r)}}return new Ul(new s)}(t,this),this._it=o((()=>Ll(t)));const n=r(this);this.read=this._updates.on.do(yn(n,n))}get onUpdate(){return this._updates.on}[Symbol.iterator](){return this[w]()}[w](t){return this._it()[w](t)}grab(t){return Bl(this,t)}add(t,e){return Wl(this._root,Xh(t),e,!0)}get(t){return this._get(Xh(t))}_get(t){const[e,n]=Jh(t);if(!n)return this._root;const r=this.nested._rule(tl(e));return r?r.rules.get(n):void 0}watch(t){const e=Xh(t);return Ne((t=>{const n=Pn({}),r=this.read.do(He((()=>{const t=this._get(e);return t&&t.read((t=>n.it=t)).whenOff((()=>n.it={}))})));return n.read(t).cuts(r)})).do(Ge)}_add(t,e){t.rules.onUpdate(((t,e)=>this._updates.send(t,e))),e&&this._updates.send(N(t.rules),[])}_remove(t){const e=N(this);this._updates.send([],e),e.forEach((e=>{e.rules._updates.supply.off(t),e._spec.supply.off(t)}))}}function Ll(t){return Z(X(t),ot(t.rules.nested,(t=>Ll(t))))}class ql extends Kl{constructor(t){super(),this._updates=new on,this._byKey=new Map,this._all=new jl(t,this);const e=r(this);this.read=this._updates.on.do(yn(e,e))}get onUpdate(){return this._updates.on}[Symbol.iterator](){return this._byKey.values()}grab(t){return Bl(this,t)}_rule(t){return this._byKey.get(t)}_add(t,e,n){this._byKey.set(t,e),e.rules.onUpdate(((n,r)=>{r[0]===e&&(this._byKey.delete(t),this._updates.send([],[e]))})),n&&this._updates.send([e],[]),this._all._add(e,n)}}class Vl extends zl{constructor(t,e,n,r=Dh){super(),this._root=t||this,this._selector=e,this._key=n,this._spec=Pn(r),this.read=this._spec.read.do(rn((t=>t(this)))),this._nested=new ql(this)}get root(){return this._root}get outer(){if(void 0!==this._outer)return this._outer;const t=function(t){let e=t.length-1;if(e<=0)return e?void 0:Qh;do{switch(--e,t[e]){case">":return t.slice(0,e);case"+":case"~":--e;continue;default:return t.slice(0,e+1)}}while(e>0)}(this.selector);return this._outer=t&&this.root.rules.get(t)||null}get selector(){return this._selector}get key(){return this._key}get empty(){return this._spec.it===Dh}get rules(){return this._nested._all}set(t){return this._spec.it=t?e=>Rh(e,t):Dh,this}remove(t){return this.rules._remove(t),this}}function Wl(t,e,n,r){const[s,o]=Jh(e);if(!o)return t._spec.it=function(t,e){const n=t._spec.it;if(!e)return n;if(t.empty)return t=>Rh(t,e);return t=>Kh(n(t),Rh(t,e))}(t,n),t;const i=tl(s),u=t.rules.nested._rule(i);if(u)return Wl(u,o,n,r);const c=new Vl(t.root,[...t.selector,...s],s),a=Wl(c,o,n,!1);return t.rules.nested._add(i,c,r),a}const Il=[];class Hl{[ye](){return this.read}clear(){return this.set()}}class Gl extends Hl{constructor(t,e,n){super(),this._root=t,this._selector=e,this._map=n,this.read=je({ms:this._map(this._root),ps:this._root.rules.watch(this._selector)}).do(yn((({ms:[t],ps:[e]})=>dh.map(t,e))))}add(t){return this._root.rules.add(this._selector,t),this}set(t){return this._root.rules.add(this._selector).set(t),this}}const Jl={by(t,e){let n;return n="function"==typeof e?t=>Ql(e(t)):r(Ql(e)),e=>new Gl(e,t,n)}};function Ql(t){return ge(t)?t:We(t)}class Zl{constructor(t){this.refs=t;const e=je(this.refs);this.read=e.do(yn(Xl))}static by(t,e){const n={};for(const r of Object.keys(t))n[r]=t[r](e);return new Zl(n)}[ye](){return this.read}}function Xl(t){const e={};for(const n of Object.keys(t))e[n]=t[n][0];return e}const Yl=new Ul({[xe]:()=>un,[Symbol.iterator]:()=>[][Symbol.iterator]()});function td(...t){return t.length?sd(t.map(ed)):Yl}function ed(t){return"function"==typeof t?function(t){let e;const n=()=>e||(e=od(t()));return{[Symbol.iterator]:()=>n()[Symbol.iterator](),[xe]:()=>n()[xe]()}}(t):od(t)}function nd(...t){return t.length?sd(t.map(rd)):Yl}function rd(t){return"function"==typeof t?function(t){const e=new Set,n=Ke((n=>{const r=od(t());id(r,e,n),r[xe]()({supply:n.supply.whenOff((()=>e.clear())),receive(t,r,s){s.forEach((t=>e.delete(t))),r.forEach((t=>e.add(t))),n.receive(t,r,s)}})})).do(ln);return{[xe]:()=>n,[Symbol.iterator]:()=>e.values()}}(t):od(t)}function sd(t){if(1===t.length){const e=t[0];return e instanceof Kl?e:new Ul(e)}return new Ul({*[Symbol.iterator](){for(const e of t)yield*e},[xe]:()=>Ke((e=>{t.forEach((t=>cn(t)({supply:(new kt).needs(e.supply),receive(t,n,r){e.receive(t,n,r)}})))})).do(ln)})}function od(t){return t instanceof zl?t.rules.self:Se(t)?t:function(t){const e=new Set,n=Ke((n=>{let r=Tt();const{supply:s}=n;s.cuts(r).whenOff((()=>e.clear())),t.then((t=>{if(!s.isOff){const o=t instanceof zl?t.rules:t;id(o,e,n),r=cn(o)({receive(t,r,s){s.forEach((t=>e.delete(t))),r.forEach((t=>e.add(t))),n.receive(t,r,s)}}).needs(s)}})).catch((t=>s.off(t)))})).do(ln);return{[xe]:()=>n,[Symbol.iterator]:()=>e.values()}}(t)}function id(t,e,n){const r=[];if(z(t,(t=>{r.push(t),e.add(t)})),r.length){const t=new ve;t.on(n),t.send(r,[])}}const ud=new Gt("component-style-producer",{byDefault:Nr((()=>Fl))});function cd(t,e={},n){const{context:r}=t;return{...e,document:e.document||r.get(Es).document,parent:e.parent||r.contentRoot,rootSelector:[],scheduler:e.scheduler||ad(r,n),nsAlias:e.nsAlias||r.get(Ts),renderer:t.renderer(e)}}function ad(t,e={}){const n=t.get(To);return(t={})=>n({...t,...e})}const hd=new qt("component-styp-renderer"),ld=new he("https://wesib.github.io/ns/element-id-class","elic","element-id-class"),dd=new Gt("unique-element-class",{byDefault:function(t){const e=t.get(Ts),n=t.get(ps),r=n.get(Hs),s=`${r.name?oe.name(r.name,e):"component"}#${++fd}`,o=ld.name(e(ld),s,ae);return n.element.classList.add(o),o}});let fd=0;const pd=new Gt("component-styp-format",{byDefault:t=>new md(t.get(ps))});class yd{static get[Mt](){return pd}produce(t,e){const n=this.newProducer(t,e),r=new kt;return this.context.whenSettled((()=>n().as(r))),r}newProducer(t,e){const n=nd(t);let s;const o=this.context.supply;return s=()=>this.context.get(ud)(n,this.format(e)).needs(o),o.whenOff((()=>{s=r(o)})),()=>s()}renderer(t){const e=this.context.get(Mo,{or:null}),{renderer:n}=t,r=l(h(n),this.context.get(hd)),s=t.hostSelector?Xh(t.hostSelector)[0]:void 0;return r.add(e?function(t){return{order:-100,render(e,n){let{selector:r}=e;if(r.length){if(t){const[e,n]=gd(r);n&&(r=n.length?[{u:[[":","host",_d(n,t)]]},...e]:[{u:[[":","host",[t]]]},...e])}}else r=[t||{u:[[":","host"]]}];e.render(n,{selector:r})}}}(s):function(t){return{order:-100,render(e,n){let{selector:r}=e;if(r.length){const[e,n]=gd(r);r=n&&n.length?[..._d(n,t),...e]:[t,...e]}else r=[t];e.render(n,{selector:r})}}}(s||{c:[this.context.get(dd)]})),a(r)}}function gd(t){if("string"!=typeof t[0]){const[{ns:e,e:n,i:r,c:s,u:o,s:i,$:u},...c]=t;if(!e&&!n&&!r&&!s&&!i&&o){const[[t,e,...n]]=o;if(":"===t&&"host"===e){let t;return n.length?(t=n[0].slice(),t[0].$=u):t=u?[{$:u}]:[],[c,t]}}}return[t]}function _d(t,{ns:e,e:n,i:r,c:s,u:o,s:i}){const[u,...c]=t;return[{ns:u.e||u.ns?u.ns:e,e:u.e||u.ns?u.e:n,i:u.i||r,c:u.c?s?[...u.c,...s]:u.c:s,u:u.u?o?[...u.u,...o]:u.u:o,s:(u.s||"")+(i||"")||void 0,$:u.$},...c]}class md extends yd{constructor(t){super(),this.context=t}format(t){return function(t={}){const{parent:e=document.head}=t;return{...t,scheduler:bl(e,t.scheduler),addSheet(){const t=document.createElement("style");return t.setAttribute("type","text/css"),t.append(document.createTextNode("")),e.appendChild(t),new Tl(t)}}}(this.config(t))}config(t){return cd(this,t,{when:"connected"})}}class wd extends yd{constructor(t,{when:e="settled"}={}){super(),this.context=t,this.when=e}format(t){return Dl(this.config(t))}config(t){return cd(this,t,{when:this.when})}}function bd(t){return bs((({get:e})=>({componentDef:{define(n){n.whenComponent((n=>{n.whenReady((({component:r})=>{const s=e(r),o="function"==typeof s?s.bind(r):s;n.get(yd).produce(o,t)}))}))}}})))}const vd={setup(t){t.provide({a:ud,is:Pl})}};class xd extends Lt{constructor(){super("theme-style")}grow(t){const e=new Map;z(t.seed,(t=>{let n,r,s;"function"==typeof t?(n=r=t,s=!0):(n=t.style,r=t.provide.bind(t),s=!1);const o=e.get(n);if(o){const[t,i]=o;e.set(n,[s?$d(r,t):$d(t,r),s||i])}else e.set(n,[r,s])})),!e.size&&t.hasFallback||t.insert((function(t){const n=e.get(t);if(!n)return t;const[r,s]=n;return s?r:$d(t,r)}))}}const Sd=new xd;function $d(t,e){return n=>td(t(n),e(n))}const kd=new Gt("theme",{byDefault:Nr((t=>new Ad(t.get(Sd))))});class Cd{static get[Mt](){return kd}ref(t){return t(this.root)}}class Ad extends Cd{constructor(t){var e;super(),this._styles=t,this.root=new Vl(void 0,Il,[],e?t=>Rh(t,e):void 0),this._rules=new Map}style(...t){const e=this;return nd(...t.reduce((function(t,n){const r=e._rules.get(n);if(r)t.push(r);else{const r=e._styles(n)(e);e._rules.set(n,r),t.push(r)}return t}),[]))}}const Od=new he("https://wesib.github.io/examples","bex","wesib-examples"),Dd=Jl.by({$:"settings"},{$color:new sh({r:161,g:185,b:142}),$bgColor:new sh({r:40,g:43,b:36}),$fontFace:"'Exo 2', sans-serif",$fontSize:Ch.of(1,"em"),$lineHeight:1.2,$fontWeight:"400",$linkFontWeight:"600",$layoutBreakpoint:kh.of(576,"px")});function Rd({$layoutBreakpoint:t}){return{"@media:sm":`(max-width: ${t})`}}function Ed(t){const e=t.ref(Dd).read,{root:{rules:n}}=t;return td(n.add({e:"a"},e.do(yn(Td))),n.add({e:"a",s:":visited"},e.do(yn(Td))),n.add({e:"a",s:":hover"},{textDecoration:"underline"}),n.add({e:"a",s:":active"},{textDecoration:"underline dotted"}),n.add({e:"a",s:":focus"},{textDecoration:"underline dotted"}))}function Td({$color:t,$linkFontWeight:e}){return{color:t,fontWeight:e,textDecoration:"none"}}function Fd(t){const e=t.ref(Dd).read;return td(t.root.add(e.do(yn(Md))).add(e.do(yn(Rd))),t.style(Ed))}function Md({$color:t,$fontFace:e,$fontSize:n,$lineHeight:r,$fontWeight:s}){return{color:t,font:`normal ${s} ${n}/${r} ${e}`}}function Pd(t){const e=t.ref(Dd).read,{root:{rules:n}}=t;return td(n.add({e:"html"},{height:"100%",margin:0,padding:0}),n.add({e:"body"},e.do(yn(zd))),t.style(Fd))}function zd({$bgColor:t}){return{backgroundColor:t,height:"100%",margin:0,padding:0}}const Kd=Jl.by({$:"settings:form"},(t=>Zl.by({global:Dd},t).read.do(yn(Nd))));function Nd({global:{$color:t,$bgColor:e,$fontFace:n,$fontSize:r,$lineHeight:s,$fontWeight:o}}){return{$color:t,$bgColor:e.hsl.set((({l:t})=>({l:.8*t}))),$roBgColor:e.hsl.set((({l:t})=>({l:.94*t}))),$fontFace:n,$fontSize:r,$errorFontSize:r.mul(.8),$lineHeight:s,$fontWeight:o,$borderColor:e,$marginV:r.div(4),$marginH:r.div(4),$paddingV:r.div(2),$paddingH:r,$borderW:kh.of(1,"px")}}let Ud=class{constructor(t){this._context=t,this._code=Pn();const e=this._code.read.do(kn(((t,e)=>e?t(...e.trim().split(/\s+/)):t())));this.indicator=function(t,e=Na){return ja(t,e)}((n=>e.do(gn(((...e)=>({control:n.adjusted.control.convert(pu.to(t.element)).setup(gu,(t=>t.add(ku()))).setup(gu,(t=>t.add(xu({when:e}))))}))))))}get code(){return this._code.it}set code(t){this._code.it=t}style(){return this._context.get(Cd).style(jd)}};t([Xa({share:{share:class extends Na{constructor(){super("field-error")}},local:!0},name:""})],Ud.prototype,"indicator",void 0),t([vo({updateState:!1})],Ud.prototype,"code",null),t([bd()],Ud.prototype,"style",null),Ud=t([us(["field-error",Od])],Ud);const Bd=["has-error",Qo];function jd(t){const e=t.ref(Kd).read,{root:{rules:n}}=t,r=Ch.of(4,"px");return td(n.add({u:[":","host"],$:"bex:in-error"},e.do(yn((({$color:t,$errorFontSize:e})=>({display:"none",fontSize:e,padding:e.div(2),borderLeft:`${r} dotted ${t}`,paddingLeft:e.sub(r)}))))),n.add({u:[":","host",{c:[Bd,["touched",Qo]],u:[":","not",{c:["has-focus",Qo]}]}],$:"bex:in-error"},{display:"block"}),n.add({u:[":","host",{c:Bd,u:[[":","not",{u:["code","~=","missing"]}],[":","not",{u:["code","~=","incomplete"]}]]}],$:"bex:in-error"},{display:"block"}))}let Ld=class{};Ld=t([Jr({needs:[class extends Ja{constructor(t={}){super(),this._byValidity=Qa.createSetup(t.byValidity,(t=>{const e=function({invalid:t="-on",ignore:e="submit"}={}){return n=>n.aspect(Vi).read.do(yn((n=>n.hasBut(..."string"==typeof e?[e]:e)?t:"on")))}(t);return t=>t.aspect(Oi).derive(e)})),this._byForm=Ha.createSetup(t.byForm,(t=>t.aspect(Si).read.do(He((e=>{const n=new kt;return z(e,(({parent:e})=>{const r=e.aspect(Wa);r&&t.aspect(Oi).derive(r.element.aspect(Oi)).as(n)})),n})))))}setupField(t){t.control.setup(this._byForm)}setupForm(t){t.control.setup(this._byValidity)}},class extends Ja{constructor(t={}){super(),this._info=Qa.createSetup(t.info,(t=>{const e=ku(t);return t=>t.aspect(gu).add(e)})),this._error=Qa.createSetup(t.error,(t=>{const e=xu(t);return t=>t.aspect(gu).add(e)}))}setupField(t){t.control.setup(this._info).setup(this._error)}setupForm(t){t.control.setup(this._info),t.element.setup(gu,((t,e)=>t.add(e.aspect(Wa).control.aspect(gu))))}},Ud]})],Ld);let qd=class{};function Vd({$fontSize:t}){return{flex:"1 1 auto",padding:0,margin:`0 0 0 ${t.div(2)}`}}qd=t([us(["main",Od],function(t={}){const e=t.onResponse?t.onResponse.bind(t):g,n=t.contentKey?t.contentKey.bind(t):Xc;return us({feature:{needs:[Zc]},define(s){s.whenComponent((s=>{const{fragment:o,render:i}=t,u=s.get(Es).document,c=s.get(To)(i),a=s.get(Sc);let h,l=n(a.page);h=o?r(o):()=>{const{element:{id:t,tagName:e}}=s;return t?{id:t}:{tag:e}},s.whenConnected((()=>{const t=u.createRange();t.selectNodeContents(s.contentRoot),a.read.do(wn)((r=>{r.put(Lc,{fragment:h(),receiver:{supply:(new kt).needs(s),receive:(r,o)=>function(r){const o=n(r.page);if(o===l)return;if(!r.ok)return void c((()=>e({context:s,range:t,response:r})));l=o,c((()=>{t.deleteContents();const n=u.createDocumentFragment(),{fragment:o}=r;o&&(Tc(o,n),t.insertNode(n)),e({context:s,range:t,response:r})}))}(o)}})}))}))}))}})}({onResponse({response:t,range:e}){t.ok||(e.deleteContents(),null==t.ok?e.insertNode(document.createTextNode("Loading...")):e.insertNode(document.createTextNode(`Error. ${t.error}`)))}}))],qd);let Wd=class{constructor(t){this._theme=t.get(Cd)}style(){return this._theme.style(Id)}};t([bd()],Wd.prototype,"style",null),Wd=t([us(["nav",Od],function(t={}){const e=t.handle?t.handle.bind(t):function(t){const e=t.href?t.href.bind(t):Rc;return({event:t,page:n,navigation:r})=>{const s=e(t);if(null==s)return;const o=t.target,i=n.url,u=new URL(s,o.ownerDocument.baseURI);u.origin===i.origin&&(t.preventDefault(),i.href!==u.href&&r.open(s).catch(console.error))}}(t),n=h(t.event||"click");return us({define(t){t.whenComponent((t=>{t.whenConnected((()=>{const r=t.get(Sc);for(const s of n)t.on(s)((n=>{r.read.do(wn)((s=>e({event:n,page:s,context:t,navigation:r})))}))}))}))}})}(),function(t={}){const{select:e="a",pick:n={all:!0,deep:!0}}=t;return us({define(r){r.whenComponent((r=>{const s=function(t,e){const n=t.get(To),{render:r,active:s=Dc}=e,o=ae.name(s,t.get(Ts)),i=e.activate?e.activate.bind(e):g,u=(t,{node:e})=>{const{element:n}=e,{classList:r}=n;t?r.add(o):r.remove(o)};return t=>{const{element:e}=t.node,s=e[Oc]||(e[Oc]=n(r)),o=e=>{s((()=>u(e,t))),i(e,t)};let c;return o(!0),{supply(){const t=c=new kt((()=>{c===t&&o(!1)}));return t}}}}(r,t),o=function(t){if(!t.weigh)return $c;return e=>{const n=t.weigh(e);if("number"==typeof n)return We(e.node,n);let r=n[ye]().do(kn(((t,n)=>t(e.node,n))));return Ne((t=>{r({supply:(new kt).needs(t.supply).whenOff((()=>{r=We(e.node,0),r(t)})),receive:t.receive})}))}}(t),i=r.get(Sc),u=r.get(uc);r.whenConnected((()=>{let t=new Map;i.read.do(Sn(r),He((i=>u.select(e,n).read.do(sn((t=>Le(...ct(t,(t=>o({node:t,context:r,page:i})))))),He(((...e)=>{const n=function(t){let e=0,n=[];return t.forEach((([t,r])=>{r>e?(e=r,n=[t]):r===e&&n.push(t)})),n}(e),o=new Map,u=new kt;return n.forEach((e=>{let n;const c=t.get(e);c?(o.set(e,c),n=c):(n=s({node:e,context:r,page:i}),o.set(e,n)),n.supply().needs(u)})),t=o,u}))))))}))}))}})}())],Wd);function Id(t){const e=t.ref(Dd).read,{root:{rules:n}}=t;return td(n.add({u:[":","host"],$:"bex:nav"},e.do(yn(Hd))),n.add({u:[":","host"],$:"bex:nav"},e.do(yn((t=>({flex:"0 1 200px",height:"100%",background:Gd(t)}))))),n.add({u:[":","host"],$:["bex:nav","@media:sm"]},{flex:"0 1 100%"}),n.add([{u:[":","host"],$:"bex:nav"},{e:"a",$:"bex:nav"}],e.do(yn(Jd))),n.add([{u:[":","host"],$:"bex:nav"},{e:"a",c:["active",Bo],$:"bex:nav"}],e.do(yn(Qd))))}function Hd({$fontSize:t}){return{padding:0,margin:`0 ${t.div(2)} 0 0`}}function Gd({$bgColor:t}){return t.hsl.set((({l:t})=>({l:.8*t})))}function Jd(t){const{$fontSize:e}=t;return{display:"block",margin:0,padding:`${e.div(2)} ${e}`,border:0,outline:0,background:Gd(t)}}function Qd({$fontSize:t,$color:e,$bgColor:n}){const r=Ch.of(4,"px");return{background:n,borderLeft:`${r} solid ${e}`,paddingLeft:t.sub(r)}}let Zd=class{constructor(t){this._context=t}async style(){const{elementDef:{name:t}}=await this._context.get(Kr).whenDefined(qd);return this._context.get(Cd).style(function(t){return e=>{const n=e.ref(Dd).read,{root:{rules:r}}=e;return td(r.add({u:[":","host"],$:"bex:container"},{height:"100%",display:"flex",flexFlow:"row wrap",alignItems:"stretch",alignContent:"flex-start"}).add(n.do(yn(Rd))),r.add({u:[":","host"],$:["bex:container","@media:sm"]},{height:"auto"}),r.add([{u:[":","host"],$:"bex:container"},{e:t,$:"bex:container"}],n.do(yn(Vd))))}}(t))}};t([bd()],Zd.prototype,"style",null),Zd=t([us({name:["container",Od],feature:{needs:[qd,Wd]}})],Zd);let Xd=class{};Xd=t([Jr({needs:[Zd,Zc,class{static get[Vr](){return vd}}]})],Xd);let Yd=class{};Yd=t([Jr({setup(t){t.perComponent({a:yd,as:wd})},init(t){t.whenReady((()=>{Fl(t.get(Cd).style(Pd),Dl())}))}})],Yd);let tf=class{};function ef(t){const e=t.ref(Kd).read,{root:{rules:n}}=t;return td(n.add({e:"input"},e.do(yn(nf))),n.add({e:"input",s:"[readonly]"},e.do(yn(rf))),n.add({e:"input",s:"[disabled]"},e.do(yn(rf))),n.add({e:"input",s:":focus"},e.do(yn(sf))),n.add({e:"input",c:[["invalid",Qo],["touched",Qo]]},e.do(yn(of))),n.add({e:"input",c:[["missing",Qo],["touched",Qo]]},{outlineStyle:"dotted"}),n.add({e:"input",c:[["incomplete",Qo],["touched",Qo]]},{outlineStyle:"dotted"}))}function nf({$color:t,$fontFace:e,$fontSize:n,$lineHeight:r,$fontWeight:s,$marginV:o,$marginH:i,$paddingV:u,$paddingH:c,$bgColor:a,$borderColor:h,$borderW:l}){return{color:t,font:`normal ${s} ${n}/${r} ${e}`,padding:`${u} ${c}`,margin:`${o} ${i}`,backgroundColor:a,border:"0 none",outline:`${l} solid ${h}`,boxShadow:"inset 1px 1px 2px -2px black",boxSizing:"border-box",width:"100%"}}function rf({$roBgColor:t}){return{backgroundColor:t}}function sf({$color:t,$borderColor:e}){return{outlineColor:hh(e,t,.5)}}function of({$color:t,$borderW:e,$borderColor:n}){return{outline:`${e.mul(2)} dashed ${hh(n,t,.25)}`}}tf=t([Jr({needs:[Yd,Ld,Xd]})],tf);const uf=function(...t){const e=$s.create(),{bootstrapContext:n,complete:s}=function(t){const e=Pn(0),n=t.values;class s extends Kr{constructor(){super(),this.get=n.get,this.whenReady=e.read.do(Cn((t=>!!t&&this)),bn),t.provide({a:Ts,by:pe}),t.provide({a:Kr,is:this})}whenDefined(t){return function(t,e){if(e.hasOwnProperty(lo))return e[lo];const n=hn(Promise.resolve(t.whenReady).then((()=>t.get(qs).whenDefined(e))).then((()=>js(e))));return e[lo]=n}(this,t)}load(e,n){const s=ho.of(e),o=t.provide(s);n?o.needs(n):n=o;const i=function(t,e){const n=Pn({feature:t,ready:!1});return e.read((({module:t,ready:e})=>{const r=t.feature,s=n.it;s&&s.feature===r&&s.ready===e||(n.it={feature:r,ready:e})})).needs(e),n.supply.needs(e),n.read}(e,this.get(s).use(n));return{read:i,whenReady:i.do(An((t=>t.ready&&t)),bn),[ye]:r(i),supply:o}}}return{bootstrapContext:new s,complete(){e.it=1}}}(e),o=1===t.length?t[0]:(i=t,Gr.define(class{},{needs:i}));var i;return n.load(o).read.do(An((({ready:t})=>t)),bn).then(s).catch(console.error),n}(tf);export{vo as A,Es as B,us as C,Fd as D,Od as E,Kd as F,Vi as I,bd as P,Fo as R,Xa as S,Cd as T,Kn as V,Uo as a,Dd as b,Kr as c,Pa as d,nu as e,Ji as f,gs as g,tf as h,nf as i,ef as j,uf as k,yn as m,rf as r,td as s,Co as t};//# sourceMappingURL=common.7a321739.js.map
