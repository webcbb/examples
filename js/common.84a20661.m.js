import{a2 as e,a3 as t,a4 as n,a5 as o,a6 as r,J as s,a7 as a,a8 as i,L as d,$ as l,a9 as c,t as u,D as h,f as $,R as f,aa as g}from"./lib.af643059.m.js";import{R as p,P as b,C as m,i as x,D as y,T as v,A as k,F as _,a as C,b as w,N as S,p as z,B as F,c as W,d as L,e as D,f as H,g as N,S as E,h as B}from"./wesib.2fefb743.m.js";const R=new e("https://wesib.github.io/examples","bex","wesib-examples"),T=t.by({$:"settings"},{$color:new n({r:161,g:185,b:142}),$bgColor:new n({r:40,g:43,b:36}),$fontFace:"'Exo 2', sans-serif",$fontSize:o.of(1,"em"),$lineHeight:1.2,$fontWeight:"400",$linkFontWeight:"600",$layoutBreakpoint:r.of(576,"px")});function V({$layoutBreakpoint:e}){return{"@media:sm":`(max-width: ${e})`}}function A(e){const t=e.ref(T).read.keep,{root:{rules:n}}=e;return s(n.add({e:"a"},t.thru(O)),n.add({e:"a",s:":visited"},t.thru(O)),n.add({e:"a",s:":hover"},{textDecoration:"underline"}),n.add({e:"a",s:":active"},{textDecoration:"underline dotted"}),n.add({e:"a",s:":focus"},{textDecoration:"underline dotted"}))}function O({$color:e,$linkFontWeight:t}){return{color:e,fontWeight:t,textDecoration:"none"}}function j(e){const t=e.ref(T).read.keep;return s(e.root.add(t.thru(I)).add(t.thru(V)),e.style(A))}function I({$color:e,$fontFace:t,$fontSize:n,$lineHeight:o,$fontWeight:r}){return{color:e,font:`normal ${r} ${n}/${o} ${t}`}}function J(e){const t=e.ref(T).read.keep,{root:{rules:n}}=e;return s(n.add({e:"html"},{height:"100%",margin:0,padding:0}),n.add({e:"body"},t.thru(M)),e.style(j))}function M({$bgColor:e}){return{backgroundColor:e,height:"100%",margin:0,padding:0}}const P=t.by({$:"settings:form"},e=>a.by({global:T},e).read.keep.thru(U));function U({global:{$color:e,$bgColor:t,$fontFace:n,$fontSize:o,$lineHeight:s,$fontWeight:a}}){return{$color:e,$bgColor:t.hsl.set(({l:e})=>({l:.8*e})),$roBgColor:t.hsl.set(({l:e})=>({l:.94*e})),$fontFace:n,$fontSize:o,$errorFontSize:o.mul(.8),$lineHeight:s,$fontWeight:a,$borderColor:t,$marginV:o.div(4),$marginH:o.div(4),$paddingV:o.div(2),$paddingH:o,$borderW:r.of(1,"px")}}let q=class{constructor(e){this._context=e,this._validity=d(),this._codes=new Set,x(e)(e=>this.validity=e)}get validity(){return this._validity}set validity(e){const t=this._validity;this._validity=e,this._context.updateState("validity",e,t)}setCode(e){this._codes=new Set(e.trim().split(/\s+/))}render(){const e=this._context.element,t=l.name(G,this._context.get(y));return()=>{c(this._codes,e=>!this.validity.has(e))?e.classList.remove(t):e.classList.add(t)}}style(){return this._context.get(v).style(K)}};i([k("code")],q.prototype,"setCode",null),i([p()],q.prototype,"render",null),i([b()],q.prototype,"style",null),q=i([m(["in-error",R])],q);const G=["display-block",R];function K(e){const t=e.ref(P).read.keep,{root:{rules:n}}=e,r=o.of(4,"px");return s(n.add({u:[":","host"],$:"bex:in-error"},t.thru(({$color:e,$errorFontSize:t})=>({display:"none",fontSize:t,padding:t.div(2),borderLeft:`${r} dotted ${e}`,paddingLeft:t.sub(r)}))),n.add({u:[":","host",{c:G}],$:"bex:in-error"},{display:"block"}))}let Q=class{};Q=i([_({needs:[C,q,w]})],Q);let X=class{constructor(e){this._context=e,this._response=u(),this._response.on((t,n)=>e.updateState("response",t,n));const t=e.get(S);e.whenOn(n=>{t.read.once(t=>{t.put(z,{fragment:{tag:e.element.tagName},receiver:{supply:n,receive:(e,t)=>this._response.it=t}})})})}render(){const e=this._context.get(F).document,t=e.createRange();return t.selectNodeContents(this._context.element),()=>{const n=this._response.it;if(n)if(t.deleteContents(),n.ok){const o=e.createDocumentFragment(),{fragment:r}=n;r&&(W(r,o),t.insertNode(o))}else null==n.ok?t.insertNode(e.createTextNode("Loading...")):t.insertNode(e.createTextNode(`Error. ${n.error}`))}}};function Y({$fontSize:e}){return{flex:"1 1 auto",padding:0,margin:`0 0 0 ${e.div(2)}`}}i([p()],X.prototype,"render",null),X=i([m(["main",R])],X);let Z=class{constructor(e){this._theme=e.get(v);const t=e.get(y),n=l.name(oe,t),o=e.get(L),r=e.get(S);e.whenOn(e=>{const t=o.select("a",{all:!0}),s=new Map;t.track.tillOff(e)((t,o)=>{o.forEach(e=>{const t=s.get(e);t&&(s.delete(e),t.off())}),t.forEach(t=>{const o=t.element,a=new h(o).on("click").instead(()=>{o.classList.contains(n)||r.open(o.getAttribute("href")||"")}).needs(e);s.set(t,a)})}),$({links:t,page:r})({supply:e,receive(e,{links:[t],page:[o]}){const r=ee(o.url);let s,a="";t.forEach(e=>{const t=e.element,o=ee(new URL(t.href));t.classList.remove(n),r.startsWith(o)&&a.length<o.length&&(s=t,a=o)}),s&&s.classList.add(n)}})})}style(){return this._theme.style(te)}};function ee(e){const t=e.pathname;return t.endsWith("/")?t:t+"/"}i([b()],Z.prototype,"style",null),Z=i([m(["nav",R])],Z);function te(e){const t=e.ref(T).read.keep,{root:{rules:n}}=e;return s(n.add({u:[":","host"],$:"bex:nav"},t.thru(ne)),n.add({u:[":","host"],$:"bex:nav"},t.thru(e=>({flex:"0 1 200px",height:"100%",background:re(e)}))),n.add({u:[":","host"],$:["bex:nav","@media:sm"]},{flex:"0 1 100%"}),n.add([{u:[":","host"]},{e:"a",$:"bex:nav"}],t.thru(se)),n.add([{u:[":","host"]},{e:"a",c:oe,$:"bex:nav"}],t.thru(ae)))}function ne({$fontSize:e}){return{padding:0,margin:`0 ${e.div(2)} 0 0`}}const oe=["nav-active",R];function re({$bgColor:e}){return e.hsl.set(({l:e})=>({l:.8*e}))}function se(e){const{$fontSize:t}=e;return{display:"block",margin:0,padding:`${t.div(2)} ${t}`,border:0,outline:0,background:re(e)}}function ae({$fontSize:e,$color:t,$bgColor:n}){const r=o.of(4,"px");return{background:n,borderLeft:`${r} solid ${t}`,paddingLeft:e.sub(r)}}let ie=class{constructor(e){this._context=e}async style(){const{elementDef:{name:e}}=await this._context.get(D).whenDefined(X);return this._context.get(v).style(function(e){return t=>{const n=t.ref(T).read.keep,{root:{rules:o}}=t;return s(o.add({u:[":","host"],$:"bex:container"},{height:"100%",display:"flex",flexFlow:"row wrap",alignItems:"stretch",alignContent:"flex-start"}).add(n.thru(V)),o.add({u:[":","host"],$:["bex:container","@media:sm"]},{height:"auto"}),o.add([{u:[":","host"],$:"bex:container"},{e}],n.thru(Y)))}}(e))}};i([b()],ie.prototype,"style",null),ie=i([m({name:["container",R],feature:{needs:[X,Z]}})],ie);let de=class{};de=i([_({needs:[ie,C,H,N,E,w]})],de);let le=class{};le=i([_({needs:w,init:function(e){e.whenReady(()=>{f(e.get(v).style(J))})}})],le);let ce=class{};function ue(e){const t=e.ref(P).read.keep,{root:{rules:n}}=e;return s(n.add({e:"input"},t.thru(he)),n.add({e:"input",s:"[readonly]"},t.thru($e)),n.add({e:"input",s:"[disabled]"},t.thru($e)),n.add({e:"input",s:":focus"},t.thru(fe)),n.add({e:"input",c:["inap-invalid","inap-touched"]},t.thru(ge)),n.add({e:"input",c:["inap-missing","inap-touched"]},{outlineStyle:"dotted"}),n.add({e:"input",c:["inap-incomplete","inap-touched"]},{outlineStyle:"dotted"}))}function he({$color:e,$fontFace:t,$fontSize:n,$lineHeight:o,$fontWeight:r,$marginV:s,$marginH:a,$paddingV:i,$paddingH:d,$bgColor:l,$borderColor:c,$borderW:u}){return{color:e,font:`normal ${r} ${n}/${o} ${t}`,padding:`${i} ${d}`,margin:`${s} ${a}`,backgroundColor:l,border:"0 none",outline:`${u} solid ${c}`,boxShadow:"inset 1px 1px 2px -2px black",boxSizing:"border-box",width:"100%"}}function $e({$roBgColor:e}){return{backgroundColor:e}}function fe({$color:e,$borderColor:t}){return{outlineColor:g(t,e,.5)}}function ge({$color:e,$borderW:t,$borderColor:n}){return{outline:`${t.mul(2)} dashed ${g(n,e,.25)}`}}ce=i([_({needs:[le,Q,de]})],ce);const pe=B(ce);export{ce as A,j as D,R as E,P as F,ue as I,T,pe as e,he as i,$e as r};
//# sourceMappingURL=common.84a20661.m.js.map
