System.register([],(function(t){"use strict";return{execute:function(){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t("ar",(function(t){return typeof t})):t("ar",(function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})))(e)}function e(t,n,e,r,i,u,o){try{var a=t[u](o),c=a.value}catch(t){return void e(t)}a.done?n(c):Promise.resolve(c).then(r,i)}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}function o(t,n){for(var e in n){(u=n[e]).configurable=u.enumerable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,e,u)}if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(n),i=0;i<r.length;i++){var u,o=r[i];(u=n[o]).configurable=u.enumerable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,o,u)}return t}function a(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function c(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&f(t,n)}function s(n){return(s=t("r",Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)}))(n)}function f(t,n){return(f=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t,n,e){return(h=l()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var i=new(Function.bind.apply(t,r));return e&&f(i,e.prototype),i}).apply(null,arguments)}function v(n){var e="function"==typeof Map?new Map:void 0;return(v=t("a3",(function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,s(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)})))(n)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?y(t):n}function d(n,e,r){return(d="undefined"!=typeof Reflect&&Reflect.get?t("ab",Reflect.get):t("ab",(function(t,n,e){var r=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=s(t)););return t}(t,n);if(r){var i=Object.getOwnPropertyDescriptor(r,n);return i.get?i.get.call(e):i.value}})))(n,e,r||n)}function g(t,n){return b(t)||function(t,n){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var e=[],r=!0,i=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(t){i=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}return e}(t,n)||w()}function k(t){return b(t)||m(t)||w()}function _(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||m(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(t){if(Array.isArray(t))return t}function m(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function O(t){return t}function A(){}function S(t){return null!=t}function x(t){return function(){return t}}function j(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return function(){return n}}t({B:$t,D:Wt,E:Nt,F:D,G:g,H:Yt,J:Vt,K:J,O:Y,P:yn,T:mt,U:bt,X:A,Z:Rn,_:function(t,n,e,r){var i,u=arguments.length,o=u<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,n,e,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(u<3?i(o):u>3?i(n,e,o):i(n,e))||o);return u>3&&o&&Object.defineProperty(n,e,o),o},a0:S,a2:B,a3:v,a5:ln,a6:function(t){return function(){var n=this,r=arguments;return new Promise((function(i,u){var o=t.apply(n,r);function a(t){e(o,i,u,a,c,"next",t)}function c(t){e(o,i,u,a,c,"throw",t)}a(void 0)}))}},a7:E,a8:Ut,aA:function(t){return new Yr(void 0,Br,[],t?function(n){return Le(n,t)}:void 0)},aD:Oi,aG:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.aspects;return new ou(t,{aspects:e})},aH:function(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,u=e.call(t),o=[];try{for(;(void 0===n||n-- >0)&&!(r=u.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=u.return)&&e.call(u)}finally{if(i)throw i.error}}return o},aI:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.aspects;return new wu(t,{get:function(){return this.element.value},set:function(t){this.element.value=t},aspects:e})},aK:function t(n){return n?n.read().keepThru((function(t){return t?D():{missing:"missing"}})):t},aa:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];if(!n.length)return Jt;return Ut((function(t){var e=t.supply,r=n.length,i=function(t){--r||e.off(t)},u=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];t.receive.apply(t,[n].concat(r))};n.forEach((function(t){return Gt(t).to({supply:mt(i).needs(e),receive:u})}))})).share()},ab:d,ac:L,ad:tt,af:Lt,ai:U,aj:wt,al:function(t){return Ut((function(n){var e=n.supply,r=Rt(n),i=mt(),u=0,o=Gt(t).tillOff(e,i).thru_((function(t){return++u,E(t)})),a=[],c=1,s=0;i.whenOff((function(t){u||e.off(t)})),function(t){return Ut((function(n){var e=n.supply,r=Rt(n),i=0;t[xt]().to({supply:e,receive:function(t,n){var u=++i;Promise.resolve().then((function(){return n})).then((function(t){return r(t,u)}),(function(t){return e.off(t)}))}})}))}(o).to({supply:e,receive:function(t,e,o){var f,l=o-c;(a[l]=e,++s>l)&&(s===a.length?(f=a,a=[]):f=a.splice(0,l+1),c+=f.length,s-=f.length,u-=f.length,r.apply(void 0,_(f)),!u&&i.isOff&&n.supply.needs(i))}})}))},am:function(t){return F((function(n,e){var r=!0,i=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var c=o.value;n.pass(e,c)}}catch(t){i=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}}))},an:function(t){if(!t)return'""';for(var n,e=!1,r=0;r<t.length;++r){var i=t[r],u=Qn.delimiterOf(i);u?(32&u&&(n||(n=t.substring(0,r)),n+="\\"+i),e=!0):n&&(n+=i)}return e?'"'.concat(n||t,'"'):t},ap:V,aq:Gt,ar:n,as:Ft,at:It,au:j,av:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?ti(n.map(Xr)):Zr},ax:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Dr(t,Object.assign(Object.assign({},n),{renderer:Kr(n.renderer)}))},ay:cr,az:k,f:function(){var t,n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.mark,i=e.when;t=i?Array.isArray(i)?i.length?function(t){return i.every((function(n){return t.has(n)}))}:Lu:function(t){return t.has(i)}:Lu;n=r?Array.isArray(r)?r.length?r:Iu:[r]:Iu;return function(e){return e.aspect(pu).read().keepThru((function(e){return t(e)?D.apply(void 0,_(n)):D()}))}},g:function(t,n,e,r){return new(e||(e=Promise))((function(i,u){function o(t){try{c(r.next(t))}catch(t){u(t)}}function a(t){try{c(r.throw(t))}catch(t){u(t)}}function c(t){t.done?i(t.value):new e((function(n){n(t.value)})).then(o,a)}c((r=r.apply(t,n||[])).next())}))},h:function(t,n){var e,r,i,u,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function a(u){return function(a){return function(u){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=n.call(t,o)}catch(t){u=[6,t],r=0}finally{e=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}},i:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ns,e=void 0===n?ki:n;return function(t){var n=function(t){return[t,e]};return Nt({md:t.aspect(Ni),vl:t.aspect(pu),st:t.aspect(ju)}).keepThru((function(t){var e=g(t.md,1)[0],r=g(t.vl,1)[0],i=g(t.st,1)[0],u=i.hasFocus,o=i.touched,a=i.edited,c=[];return Ni.hasData(e)||c.push(n("disabled")),"ro"!==e&&"-ro"!==e||c.push(n("readonly")),r.ok||c.push(n("invalid")),r.has("missing")&&c.push(n("missing")),r.has("incomplete")&&c.push(n("incomplete")),u&&c.push(n("has-focus")),o&&c.push(n("touched")),a&&c.push(n("edited")),D.apply(void 0,c)}))}},j:a,l:W,m:function(t,n,e){var r=2*e-1,i=t.rgb,u=n.rgb,o=i.a-u.a,a=((r*o==-1?r:(r+o)/(1+r*o))+1)/2,c=1-a;return new ge({r:i.r*a+u.r*c,g:i.g*a+u.g*c,b:i.b*a+u.b*c,a:i.a*e+u.a*(1-e)},t)},n:r,o:c,p:Dr,q:p,r:s,s:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?ti(n.map(Hr)):Zr},t:en,u:u,v:_,w:y,y:x});var T=Symbol("next-call");function F(t){var n=function t(){return t};return n[T]=function(n,e){return t(n,e)},n}function R(t){return"function"==typeof t&&T in t}function E(t){return F((function(n,e){return n.pass(e,t)}))}function D(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return F((function(t,e){return t.call(e,n)}))}var M,z=t("L",F((function(t){return t.skip()})));function P(t){return"length"in t}function K(t){return"reverse"in t}function U(t){return t[Symbol.iterator]()}function q(t){return regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.delegateYield(t,"t0",1);case 1:case"end":return n.stop()}}),n)}))()}function C(t,n){var e=a({},Symbol.iterator,t);if(!n)return e;var r=e;return r.reverse=n,r}function $(t){if(P(t))return I(t);if(K(t)){var n=t.reverse();return C((function(){return U(n)}))}return I(Array.from(t))}function I(t){return C(regeneratorRuntime.mark((function n(){var e,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=t.length,r=e-1;case 2:if(!(r>=0)){n.next=8;break}return n.next=5,t[r];case 5:--r,n.next=2;break;case 8:case"end":return n.stop()}}),n)})))}function L(t,n){var e=!0,r=!1,i=void 0;try{for(var u,o=t[Symbol.iterator]();!(e=(u=o.next()).done);e=!0){n(u.value)}}catch(t){r=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}}function N(t){return!!U(t).next().done}function V(t){return U(t).next().value}function W(t,n,e){var r=e,i=!0,u=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){r=n(r,a.value)}}catch(t){u=!0,o=t}finally{try{i||null==c.return||c.return()}finally{if(u)throw o}}return r}function Y(t,n){return C(regeneratorRuntime.mark((function e(){var r,i,u,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,u=void 0,e.prev=3,o=t[Symbol.iterator]();case 5:if(r=(a=o.next()).done){e.next=13;break}if(c=a.value,!n(c)){e.next=10;break}return e.next=10,c;case 10:r=!0,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),i=!0,u=e.t0;case 19:e.prev=19,e.prev=20,r||null==o.return||o.return();case 22:if(e.prev=22,!i){e.next=25;break}throw u;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}}),e,null,[[3,15,19,27],[20,,22,26]])})))}function B(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;return C(regeneratorRuntime.mark((function e(){var r,i,u,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,u=void 0,e.prev=3,o=t[Symbol.iterator]();case 5:if(r=(a=o.next()).done){e.next=11;break}return c=a.value,e.delegateYield(n(c),"t0",8);case 8:r=!0,e.next=5;break;case 11:e.next=17;break;case 13:e.prev=13,e.t1=e.catch(3),i=!0,u=e.t1;case 17:e.prev=17,e.prev=18,r||null==o.return||o.return();case 20:if(e.prev=20,!i){e.next=23;break}throw u;case 23:return e.finish(20);case 24:return e.finish(17);case 25:case"end":return e.stop()}}),e,null,[[3,13,17,25],[18,,20,24]])})))}function J(t,n){return C(regeneratorRuntime.mark((function e(){var r,i,u,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,i=!1,u=void 0,e.prev=3,o=t[Symbol.iterator]();case 5:if(r=(a=o.next()).done){e.next=12;break}return c=a.value,e.next=9,n(c);case 9:r=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),i=!0,u=e.t0;case 18:e.prev=18,e.prev=19,r||null==o.return||o.return();case 21:if(e.prev=21,!i){e.next=24;break}throw u;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}}),e,null,[[3,14,18,26],[19,,21,25]])})))}function G(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i=[],u=function t(n){var r=n>=e.length,u=++n<e.length?e[n]:A,o=function(e,o){R(e)?e[T](t(n),u):r?i.push([o]):t(n).pass(u,e)};return{call:function(t,n){o(t.apply(void 0,_(n)),n)},pass:function(t,n){o(t(n),n)},skip:function(){},iterate:function(t,n){i.push(a({},Symbol.iterator,regeneratorRuntime.mark((function e(){var r,u,a,c,s,f,l,h,v,y,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,u=!1,a=void 0,e.prev=3,c=n[Symbol.iterator]();case 5:if(r=(s=c.next()).done){e.next=20;break}f=s.value,l=i,h=[];try{i=h,o(t(f),f)}finally{i=l}v=0,y=h;case 11:if(!(v<y.length)){e.next=17;break}return p=y[v],e.delegateYield(p,"t0",14);case 14:v++,e.next=11;break;case 17:r=!0,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(3),u=!0,a=e.t1;case 26:e.prev=26,e.prev=27,r||null==c.return||c.return();case 29:if(e.prev=29,!u){e.next=32;break}throw a;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}}),e,null,[[3,22,26,34],[27,,29,33]])}))))}}};return u(0).iterate(e[0],t),B(i,O)}var Q=["every","filter","flatMap","forEach","map","reduce","reverse","some"],Z=t("A",function(){function t(){r(this,t)}return u(t,[{key:"every",value:function(t){return function(t,n){var e=!0,r=!1,i=void 0;try{for(var u,o=t[Symbol.iterator]();!(e=(u=o.next()).done);e=!0){if(!n(u.value))return!1}}catch(t){r=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}return!0}(this,t)}},{key:"filter",value:function(t){var n=this;return X((function(){return Y(n,t)}),(function(){return Y(n.reverse(),t)}))}},{key:"flatMap",value:function(t){var n=this;return X((function(){return B(n,t)}),(function(){return B(n.reverse(),(function(n){return $(t(n))}))}))}},{key:"forEach",value:function(t){L(this,t)}},{key:"map",value:function(t){var n=this;return X((function(){return J(n,t)}),(function(){return J(n.reverse(),t)}))}},{key:"reduce",value:function(t,n){return W(this,t,n)}},{key:"reverse",value:function(){var t=this;return X((function(){return I(Array.from(t))}),(function(){return t}))}},{key:"some",value:function(t){return function(t,n){var e=!0,r=!1,i=void 0;try{for(var u,o=t[Symbol.iterator]();!(e=(u=o.next()).done);e=!0){if(n(u.value))return!0}}catch(t){r=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}return!1}(this,t)}},{key:"thru",value:function(){for(var t=this,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=G;return X((function(){return i.apply(void 0,[t].concat(e))}))}}],[{key:"none",value:function(){return H}},{key:"is",value:function(t){return Q.every((function(n){return n in t}))}},{key:"of",value:function(n){return t.is(n)?n:t.from(n)}},{key:"from",value:function(t){return X((function(){return t}),(function(){return $(t)}))}}]),t}()),H=new(function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))},{key:"reverse",value:function(){return this}}]),n}(Z));function X(t,n){return new(function(e){function i(){return r(this,i),p(this,s(i).apply(this,arguments))}return c(i,e),u(i,[{key:Symbol.iterator,value:function(){return U(t())}},{key:"reverse",value:function(){var t=this;return n?Z.from(C((function(){return U(n())}),(function(){return t}))):d(s(i.prototype),"reverse",this).call(this)}}]),i}(Z))}function tt(t){return C(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=0;case 1:if(!(e<t.length)){n.next=7;break}return n.next=4,t[e];case 4:++e,n.next=1;break;case 7:case"end":return n.stop()}}),n)})),(function(){return I(t)}))}var nt=(a(M={},Symbol.iterator,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),a(M,"reverse",(function(){return this})),M);function et(){return nt}function rt(t){return tt(Reflect.ownKeys(t))}function it(t){var n=rt(t);function e(n){return J(n,(function(n){return[n,t[n]]}))}return C((function(){return U(e(n))}),(function(){return e(n.reverse())}))}var ut=t("C",Symbol("context-key")),ot=function(){function t(n){r(this,t),this.name=n}return u(t,[{key:"toString",value:function(){return"ContextKey(".concat(this.name,")")}},{key:ut,get:function(){return this}}]),t}(),at=function(t){function n(t){return r(this,n),p(this,s(n).call(this,"".concat(t.name,":seed")))}return c(n,t),u(n,[{key:"grow",value:function(t){var n=t.seeder,e=t.seed;return n.isEmpty(e)?t.byDefault((function(){return e})):e}},{key:"seedKey",get:function(){return this}}]),n}(ot),ct=function(t){function n(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"There is no value with key ".concat(t);return r(this,n),(e=p(this,s(n).call(this,i))).key=t,e}return c(n,t),n}(v(Error));function st(t){if(function(t){return"by"in t}(t)){if(!ft(t))return t;var n=t,e=n.a,r=n.by,i=n.with;return{a:e,by:function(t){return r.apply(void 0,_(i.map((function(n){return t.get(n)}))))}}}if(function(t){return"is"in t}(t)){var u=t;return{a:u.a,by:x(u.is)}}if(function(t){return"via"in t}(t)){var o=t,a=o.a,c=o.via;return{a:a,by:function(t){return t.get(c)}}}if(function(t){return"as"in t}(t)){if(function(t){return!("a"in t)}(t)&&(t=function(t){return Object.assign(Object.assign({},t),{a:t.as})}(t)),!ft(t)){var s=t.as;return{a:t.a,by:function(t){return new s(t)}}}var f=t,l=f.as,v=f.with;return{a:t.a,by:function(t){return h(l,_(v.map((function(n){return t.get(n)}))))}}}throw new TypeError("Malformed context value specifier: ".concat(t))}function ft(t){return"with"in t}var lt=t("x",(function t(){r(this,t)})),ht=(t("z",function(){function t(n){r(this,t),this._seeds=new Map,this._initial=null==n?A:"function"==typeof n?n:function(t){return n.get(t)}}return u(t,[{key:"provide",value:function(t){var n=st(t),e=n.a[ut].seedKey,r=n.by;return g(this._seeding(e),1)[0].provide(r)}},{key:"_seeding",value:function(t){var n=this,e=this._seeds.get(t);if(e)return e;var r=t.seeder(),i=[r,function(e){return r.seed(e,n._initial(t,e))}];return this._seeds.set(t,i),i}},{key:"seed",value:function(t,n){return(0,g(this._seeding(n),2)[1])(t)}},{key:"seedIn",value:function(t,n){return this.newValues(n).get.bind(t)}},{key:"newValues",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!t&&this._nonCachedValues)return this._nonCachedValues;var n=new Map,e=this,i=function(e){function i(){return r(this,i),p(this,s(i).apply(this,arguments))}return c(i,e),u(i,[{key:"get",value:function(e,r){var i=e[ut],u=n.get(i);if(null!=u)return u;var a=g(o(this,i,r),2),c=a[0],s=a[1];return t&&!s&&n.set(i,c),c}}]),i}(lt);return t?new i:this._nonCachedValues=new i;function o(t,n,e){var r=g(a(t,n),2),i=r[0],u=r[1],o=!1,c={context:t,seeder:i,seed:u,byDefault:e&&"or"in e?function(){return o=!0,e.or}:function(t){var e=t();if(null==e)throw new ct(n);return e}};return e&&"or"in e&&(c.or=e.or),[n.grow(c),o]}function a(t,n){var r=n.seedKey,i=g(e._seeding(r),2),u=i[0],o=i[1];return r!==n?[u,t.get(r)]:[u,o(t)]}}},{key:"append",value:function(n){var e=this;return new t((function(t,r){var i=g(e._seeding(t),2),u=i[0],o=i[1];return u.combine(o(r),n.seed(r,t),r)}))}}]),t}()),function(){function t(){r(this,t),this._providers=[]}return u(t,[{key:"provide",value:function(t){var n=this;return this._providers.push(t),function(){var e=n._providers.indexOf(t);e>=0&&n._providers.splice(e,1)}}},{key:"seed",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.from(et());return Z.from([n,pt(t,this._providers)]).flatMap(O)}},{key:"isEmpty",value:function(t){return N(t)}},{key:"combine",value:function(t,n){return Z.from([t,n]).flatMap(O)}}]),t}()),vt=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"seeder",value:function(){return new ht}}]),n}(at),yt=t("aw",function(t){function n(t,e){var i;return r(this,n),(i=p(this,s(n).call(this,t))).seedKey=e||new vt(y(i)),i}return c(n,t),n}(ot));t("k",function(t){function n(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey,o=i.byDefault,a=void 0===o?A:o;return r(this,n),(e=p(this,s(n).call(this,t,u))).byDefault=a,e}return c(n,t),u(n,[{key:"grow",value:function(t){var n=this,e=function(t){if(P(t))return t[t.length-1];if(K(t))return V(t.reverse());var n,e=!0,r=!1,i=void 0;try{for(var u,o=t[Symbol.iterator]();!(e=(u=o.next()).done);e=!0){n=u.value}}catch(t){r=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(r)throw i}}return n}(t.seed);return null!=e?e:t.byDefault((function(){return n.byDefault(t.context,n)}))}}]),n}(yt)),t("Q",function(t){function n(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey,o=i.byDefault,a=void 0===o?j():o;return r(this,n),(e=p(this,s(n).call(this,t,u))).byDefault=a,e}return c(n,t),u(n,[{key:"grow",value:function(t){var n=this,e=Array.from(t.seed);return e.length?e:t.byDefault((function(){var e=n.byDefault(t.context,n);if(e)return Array.from(e)}))}}]),n}(yt));function pt(t,n){return Z.from(tt(n.map((function(t){return[t]})))).map((function(n){if(n.length>1)return n[1];var e=n[0](t);return n.push(e),e})).filter(S)}var dt=t("a4",Symbol("after-event"));function gt(t){return dt in t}var kt=t("W",Symbol("events-supply")),_t=function(){function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;r(this,t),this._off=function(t){n._whenOff=function(n){return n(t)},n._off=A,e(t)},this._whenOff=function(t){var e=n._off;n._off=function(n){e(n),t(n)}}}return u(t,[{key:"off",value:function(t){return this._off(t),this}},{key:"whenOff",value:function(t){return this._whenOff(t),this}},{key:"cuts",value:function(t){return bt(t).needs(this),this}},{key:"needs",value:function(t){var n=this;return bt(t).whenOff((function(t){return n._off(t)})),this}},{key:"isOff",get:function(){return this._off===A}},{key:kt,get:function(){return this}}]),t}();function bt(t){return t[kt]}function mt(t){return new _t(t)}function wt(t){var n;return(n="function"==typeof t?{supply:mt(),receive:function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];t.apply(void 0,r)}}:{supply:t.supply||mt(),receive:function(n){if(!this.supply.isOff){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];t.receive.apply(t,[n].concat(r))}}}).supply.whenOff((function(){return n.receive=A})),n}function Ot(t){var n=function e(r){var i=t,u=[];n=function(t){return u.push(t)};try{for(;;){i=At(i,r);var o=u.shift();if(!o)break;r=o}}finally{n=e}};return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n(e)}}function At(t,n){var e=[],r=!0,i=!1,u=void 0;try{for(var o,a=function(){var t=o.value,r=e.length;e.push(t);var i={onRecurrent:function(n){e[r]=wt({supply:t.supply,receive:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.apply(void 0,r)}})}};t.receive.apply(t,[i].concat(_(n)))},c=t[Symbol.iterator]();!(r=(o=c.next()).done);r=!0)a()}catch(t){i=!0,u=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw u}}return e}var St=t("ak",function(){function t(){var n=this;r(this,t);var e=this._rcs=new Set;this.send=Ot(e),this[kt]=mt((function(){e.clear(),delete n._rcs}))}return u(t,[{key:"on",value:function(t){var n=wt(t),e=n.supply.needs(this),r=this._rcs;return r&&!e.isOff&&(r.add(n),e.whenOff((function(){return r.delete(n)}))),e}},{key:"done",value:function(t){return bt(this).off(t),this}},{key:"size",get:function(){return this._rcs?this._rcs.size:0}}]),t}()),xt=t("ah",Symbol("on-event"));function jt(t){return xt in t}var Tt=new(function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"off",value:function(){return this}},{key:"whenOff",value:function(t){return t(),this}},{key:"cuts",value:function(t){return bt(t).off(),this}},{key:"needs",value:function(){return this}},{key:"isOff",get:function(){return!0}}]),n}(_t));function Ft(){return Tt}function Rt(t){var n=wt(t),e=Ot([n]);return n.supply.whenOff((function(){return e=A})),function(){return e.apply(void 0,arguments)}}function Et(t){return function(n){return t.to({supply:n.supply,receive:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n.receive.apply(n,[t].concat(r)),n.supply.off()}})}}function Dt(t){var n,e,r=new St;return function(i){if(r.size||(e=[],n=mt((function(){return e=void 0})),t.to({supply:n,receive:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),u=1;u<n;u++)i[u-1]=arguments[u];e&&(r.size?e=void 0:e.push(i)),r.send.apply(r,i)}})),i.supply.needs(n),r.on(i).whenOff((function(t){r.size||n.off(t)})),e){var u=Rt(i);e.forEach((function(t){return u.apply(void 0,_(t))}))}}}function Mt(t,n){return function(e){var r=[];t.to({supply:e.supply,receive:function(t){var i=function i(u,o){var a=u>=n.length;++u;var c=r[u];if(c){var s=c.supply;return c.supply=o,[c.chain,s]}var f=u<n.length?n[u]:A,l={chain:{call:function(t,n){h(t.apply(void 0,_(n)),n)},pass:function(t,n){h(t(n),[n])},skip:function(){l.supply.off()},onEvent:function(t,n){var e=mt().needs(l.supply);n[xt]().to({supply:e,receive:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];h(t.apply(void 0,i),i,e)}})}},supply:o};return r[u]=l,[l.chain,Ft()];function h(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.supply,c=i(u,mt().needs(o)),s=g(c,2),h=s[0],v=s[1];try{R(n)?n[T](h,f):a?e.receive.apply(e,[t].concat(_(r))):h.pass(f,n)}finally{v.off()}}},u=i(0,mt().needs(e.supply)),o=g(u,2),a=o[0],c=o[1];try{for(var s=arguments.length,f=new Array(s>1?s-1:0),l=1;l<s;l++)f[l-1]=arguments[l];a.call(n[0],f)}finally{c.off()}}})}}function zt(t,n,e){return function(r){e?t.to({supply:mt().needs(n).cuts(e),receive:r.receive.bind(r)}):(r.supply.needs(n),t.to(r))}}function Pt(t){t.supply.off()}var Kt=function(){function t(n){r(this,t),this._on=n}return u(t,[{key:xt,value:function(){return this}},{key:"to",value:function(t){if(!t)return this;var n=wt(t),e=n.supply;return e.isOff||this._on(n),e}},{key:"then",value:function(t,n){return function(t,n,e){return new Promise((function(r,i){Et(t)({supply:mt(e?function(t){try{r(e(t))}catch(t){i(t)}}:i),receive:n?function(t){try{for(var e=arguments.length,u=new Array(e>1?e-1:0),o=1;o<e;o++)u[o-1]=arguments[o];r(n.apply(void 0,u))}catch(t){i(t)}}:function(t,n){return r(n)}})}))}(this,t,n)}},{key:"once",value:function(t){return(this.once=Ut(Et(this)).F)(t)}},{key:"tillOff",value:function(t,n){return Ut(zt(this,t,n))}},{key:"consume",value:function(t){var n=Ft(),e=mt((function(t){return n.off(t)}));return this.to({supply:e,receive:function(e){var r=n;try{for(var i=arguments.length,u=new Array(i>1?i-1:0),o=1;o<i;o++)u[o-1]=arguments[o];n=bt(t.apply(void 0,u)||Ft())}finally{n!==r&&r.off()}}}),e}},{key:"share",value:function(){return Ut(Dt(this))}},{key:"thru",value:function(){return this.thru_.apply(this,arguments).share()}},{key:"thru_",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Ut(Mt(this,n))}},{key:"F",get:function(){return this.to.bind(this)}}]),t}();function Ut(t){return new Kt(t)}function qt(){throw new Error("No events to send")}var Ct=function(t){function n(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qt;return r(this,n),(e=p(this,s(n).call(this,t)))._rcn=0,e._or=i,e}return c(n,t),u(n,[{key:dt,value:function(){return this}},{key:"to",value:function(t){var n=this;if(!t)return this;var e=A,r=wt(t);if(r.supply.isOff)return r.supply;var i=mt().needs(r.supply),u=!1;return this._on({supply:i,receive:function(t){u=!0;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n._last=i,e.apply(void 0,[t].concat(i))}}),++this._rcn,i.isOff&&!u||(r.receive.apply(r,[{onRecurrent:function(t){e=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return t.apply(void 0,r)}}}].concat(_(this._last||(this._last=this._or())))),e=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return r.receive.apply(r,[t].concat(e))}),i.whenOff((function(t){--n._rcn||(n._last=void 0),r.supply.off(t)})),i}},{key:"once",value:function(t){return(this.once=$t(Et(this)).F)(t)}},{key:"tillOff",value:function(t,n){return $t(zt(this,t,n))}},{key:"share",value:function(){return $t(Dt(this))}},{key:"keepThru",value:function(){return this.keepThru_.apply(this,arguments).share()}},{key:"keepThru_",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return $t(Mt(this,n))}},{key:"F",get:function(){return this.to.bind(this)}}]),n}(Kt);function $t(t,n){return new Ct(t,n)}function It(t,n){return $t((function(n){return t[xt]().to(n)}),n)}function Lt(t,n){return gt(t)?t[dt]():It(t,n)}function Nt(t){var n=Object.keys(t);return $t((function(e){var r=e.supply,i=Rt(e),u=A,o={};n.forEach((function(n){r.needs(t[n][dt]().to((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];o[n]=e,u()})).needs(r))})),r.isOff||(u=function(){return i(o)})}),(function(){var e={};return n.forEach((function(n){return Lt(t[n]).once((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e[n]=r}))})),[e]})).share()}function Vt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return $t(r,i).share();function r(t){var e=t.supply,r=Rt(t),i=A,u=[];n.forEach((function(t,n){e.needs(t[dt]().to((function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];u[n]=e,i()})).needs(e))})),e.isOff||(i=function(){return r.apply(void 0,u)})}function i(){var t=[];return n.forEach((function(n){return Lt(n).once((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return t.push(e)}))})),t}}function Wt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return $t(A,x(n))}function Yt(t){return F((function(n,e){return n.onEvent(e,Lt(t))}))}var Bt=t("a9",function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"on",value:function(t){var e=this;return(this.on=Ut((function(t){return d(s(n.prototype),"on",e).call(e,t)})).F)(t)}},{key:xt,value:function(){return this.on()}}]),n}(St)),Jt=Ut(Pt);function Gt(t){return jt(t)?t[xt]():t[dt]()}function Qt(t){return Array.isArray(t)?t:[t]}var Zt=function(){function t(n){var e=this;r(this,t),this._drop=n,this.emitter=new Bt,this._nested=new Map,this.emitter.on((function(t,n,r){var i=(t=Qt(t))[0],u=e._nested.get(i);u&&u.emitter.send(t.slice(1),n,r)}))}return u(t,[{key:"on",value:function(t){var n=this,e=this.emitter.on(t);return mt((function(t){e.off(t),n._dropIfEmpty()})).needs(e)}},{key:"nest",value:function(n,e){var r=this,i=this._nested.get(n);if(i||e)return i;var u=new t((function(){return r._remove(n)}));return this._nested.set(n,u),u}},{key:"done",value:function(t){var n=!0,e=!1,r=void 0;try{for(var i,u=this._nested.values()[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){i.value.done(t)}}catch(t){e=!0,r=t}finally{try{n||null==u.return||u.return()}finally{if(e)throw r}}this.emitter.done(t)}},{key:"_remove",value:function(t){this._nested.delete(t),this._dropIfEmpty()}},{key:"_dropIfEmpty",value:function(){!this._nested.size&&this.emitter.size<=1&&this._drop()}}]),t}(),Ht=function(){function t(){r(this,t),this._root=new Zt(A)}return u(t,[{key:"on",value:function(t,n){return this._entry(t).on(n)}},{key:"send",value:function(t,n,e){this._root.emitter.send(t,n,e)}},{key:"done",value:function(t,n){var e=this._entry(t,!0);e&&e.done(n)}},{key:"_entry",value:function(t,n){var e=this._root,r=!0,i=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var c=o.value,s=e.nest(c,n);if(!s)return;e=s}}catch(t){i=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}return e}}]),t}(),Xt=function(){function t(n,e){var i=this;r(this,t),this._trackers=n,this._path=e,this.update=function(t,n,e){i._trackers.send([].concat(_(i._path),_(Qt(t))),n,e)}}return u(t,[{key:"onUpdate",value:function(t){var n=this;return(this.onUpdate=Ut((function(t){return n._trackers.on(n._path,t)})).F)(t)}},{key:xt,value:function(){return this.onUpdate()}},{key:"track",value:function(n){return(n=Qt(n)).length?new t(this._trackers,[].concat(_(this._path),_(n))):this}},{key:"done",value:function(t){this._trackers.done(this._path,t)}},{key:"_tracker",get:function(){return this}}]),t}(),tn=(t("a1",function(){function t(){r(this,t),this._tracker=new Xt(new Ht,[])}return u(t,[{key:"onUpdate",value:function(t){return(this.onUpdate=this._tracker.onUpdate().F)(t)}},{key:xt,value:function(){return this.onUpdate()}},{key:"track",value:function(t){var n=this._tracker.track(t);return n===this._tracker?this:n}},{key:"done",value:function(t){this._tracker.done(t)}},{key:"update",get:function(){return this._tracker.update}}]),t}()),t("V",function(){function t(){r(this,t),this._by=Ft()}return u(t,[{key:"read",value:function(t){var n=this;return(this.read=$t((function(t){return n.on({supply:(e=t).supply,receive:function(t,n){e.receive({onRecurrent:function(n){t.onRecurrent((function(t){return n(t)}))}},n)}});var e}),(function(){return[n.it]})).F)(t)}},{key:xt,value:function(){return this.on()}},{key:dt,value:function(){return this.read()}},{key:"by",value:function(t,n){var e=this,r=function(t){return(gt(t)?t[dt]():t[xt]()).to((function(t){return e.it=t}))};if(this.byNone(),n){var i=t;this._by=Gt(i).consume((function(){var t=n.apply(void 0,arguments);if(t)return r(t)}))}else{var u=t;this._by=r(u)}return this._by.whenOff((function(){return e._by=Ft()})),this}},{key:"byNone",value:function(t){return this._by.off(t),this}},{key:"done",value:function(t){return bt(this).off(t),this}}]),t}()));var nn=function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this)))._it=t,e._on=new Bt,e}return c(n,t),u(n,[{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:kt,get:function(){return bt(this._on)}},{key:"it",get:function(){return this._it},set:function(t){var n=this._it;n!==t&&(this._it=t,this._on.send(t,n))}}]),n}(tn);function en(t){return new nn(t)}t("aL",function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this)))._on=new Bt,e._it=t,e}return c(n,t),u(n,[{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:"sync",value:function(t,n,e){var r,i,u=this,o=function(t){return s(u,t)};"string"==typeof t?("in"===t&&(o=function(t){return s(t,u)}),r=n,i=e):(r=t,i=n);var a=i;if(!a)return o(r);var c=r;return(gt(c)?Lt(c):Gt(c)).consume((function(){var t=a.apply(void 0,arguments);return t&&o(t)}));function s(t,n){var e=t.read((function(t){n.it=t})),r=n.on((function(n){t.it=n}));return mt((function(t){r.off(t),e.off(t)})).needs(e).needs(r)}}},{key:kt,get:function(){return bt(this._on)}},{key:"it",get:function(){return this._it},set:function(t){var n=this.it;n!==t&&(this._it=t,this._on.send(t,n))}}]),n}(tn));var rn=function(){function t(){r(this,t)}return u(t,[{key:"name",value:function(t,n){if("string"==typeof t)return t;var e=g(t,2),r=e[0],i=e[1];return i.name(n(i),r,this)}}]),t}(),un=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"applyAlias",value:function(t,n){return"".concat(n,"-").concat(t)}}]),n}(rn),on=new un,an=t("ae",new un),cn=new(function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"applyAlias",value:function(t,n){return"".concat(n,":").concat(t)}}]),n}(rn)),sn=t("ag",new(function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"applyAlias",value:function(t,n){return"".concat(t,"@").concat(n)}}]),n}(rn))),fn=t("N",function(){function t(n){r(this,t),this.url=n;for(var e=arguments.length,i=new Array(e>1?e-1:0),u=1;u<e;u++)i[u-1]=arguments[u];this.aliases=i}return u(t,[{key:"name",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on;return e.applyAlias(n,t,this)}},{key:"alias",get:function(){return this.aliases[0]||"ns"}}]),t}());function ln(t){return"string"==typeof t||function(t){return Array.isArray(t)&&2===t.length&&"string"==typeof t[0]&&t[1]instanceof fn}(t)}function hn(t,n){if("string"==typeof t)return"string"==typeof n?vn(t,n):n[1].url?-1:vn(t,n[0]);var e=g(t,2),r=e[0],i=e[1].url;return"string"==typeof n?i?1:vn(r,n):vn(i,n[1].url)||vn(r,n[0])}function vn(t,n){return t<n?-1:t>n?1:0}function yn(){var t=new Map,n=new Map;return function(e){var r=t.get(e.url);if(r)return r;for(var i=e.alias,u=0,o=0,a=[i].concat(_(e.aliases));o<a.length;o++){var c=a[o],s=n.get(c);if(!s)return t.set(e.url,c),n.set(c,1),c;u||(u=s)}var f=i+ ++u;return t.set(e.url,f),n.set(i,u),f}}var pn=function(){function t(){r(this,t),this._providers=en([])}return u(t,[{key:"provide",value:function(t){var n=this;return this._providers.it=[].concat(_(this._providers.it),[t]),function(){var e=n._providers.it,r=e.indexOf(t);r>=0&&(n._providers.it=e.slice(0,r).concat(e.slice(r+1)))}}},{key:"seed",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wt();return this.combine(n,dn(t,this._providers))}},{key:"isEmpty",value:function(){return!1}},{key:"combine",value:function(t,n){return Vt(t,n).keepThru(kn)}}]),t}();function dn(t,n){return n.read().keepThru((function(n){return n.length?Yt(Vt.apply(void 0,_(J(J(tt(n),(function(n){return n(t)})),gn)))):D()}),kn)}function gn(t){return null==t?Wt():function(t){return("object"===n(t)||"function"==typeof t)&&gt(t)}(t)?Lt(t):Wt(t)}function kn(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return D.apply(void 0,_(B(n)))}var _n=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"seeder",value:function(){return new pn}}]),n}(at),bn=function(t){function n(t,e){var i;return r(this,n),(i=p(this,s(n).call(this,t.name+":up")))._key=t,i.grow=e,i}return c(n,t),u(n,[{key:"seedKey",get:function(){return this._key.seedKey}}]),n}(ot),mn=t("M",function(t){function n(t,e){var i;return r(this,n),(i=p(this,s(n).call(this,t))).seedKey=e||new _n(y(i)),i}return c(n,t),u(n,[{key:"createUpKey",value:function(t){return new bn(this,t)}}]),n}(ot)),wn=(t("aC",function(t){function n(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey,o=i.byDefault,a=void 0===o?A:o;return r(this,n),(e=p(this,s(n).call(this,t,u))).byDefault=a,e}return c(n,t),u(n,[{key:"grow",value:function(t){var n=this;return t.seed.keepThru((function(){var e;if(arguments.length)return E((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]);var r=t.byDefault((function(){var e=n.byDefault(t.context,n);return e&&Wt(e)}));return Yt(null!=r?r:$t((function(){throw new ct(n)})))}))}},{key:"upKey",get:function(){return this}}]),n}(mn)),t("Y",function(t){function n(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=i.seedKey,o=i.byDefault,a=void 0===o?A:o;return r(this,n),(e=p(this,s(n).call(this,t,u))).byDefault=function(t,n){return a(t,n)||function(){throw new ct(y(e))}},e.upKey=e.createUpKey((function(t){return t.seed.keepThru((function(){var n;if(arguments.length)return(n=arguments.length-1)<0||arguments.length<=n?void 0:arguments[n];var r=function(){return Wt(e.byDefault(t.context,y(e)))};return Yt(t.byDefault(r)||r())}))})),e}return c(n,t),u(n,[{key:"grow",value:function(t){var n;return t.context.get(this.upKey,"or"in t?{or:null!=t.or?Wt(t.or):t.or}:void 0).to((function(t){return n=t})),function(){return n.apply(void 0,arguments)}}}]),n}(mn)),function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{get node(){return n.node},get window(){return t||(t=n.window||n.node&&On(n.node)||window)},error:function(){var t;n&&n.error?n.error.apply(n,arguments):(t=console).error.apply(t,arguments)}}});function On(t){return(t.ownerDocument||t).defaultView}var An=Symbol("render-q"),Sn=function(){function t(n,e){r(this,t),this.q=n,this.schedule=this.doSchedule,this.ref=e||[this,this]}return u(t,[{key:"add",value:function(t){this.q.add(t)}},{key:"doSchedule",value:function(t){var n=this;this.schedule=function(){};var e=[],r={get config(){return t},postpone:function(t){e.push(t)}};this.q.schedule((function(){var t=n.reset();t.suspend(),n.exec(r),n.ref[1]=n.ref[0],e.forEach(r.postpone=function(t){return n.q.add(t)}),n.exec(r),t.resume()}))}},{key:"exec",value:function(t){for(;;){var n=this.q.pull();if(!n)break;n(t)}}},{key:"reset",value:function(){return this.ref[0]=t.by(this.q.reset(),this.ref)}},{key:"suspend",value:function(){var t=this;this.schedule=function(n){t.scheduled=n,t.schedule=function(){}}}},{key:"resume",value:function(){this.scheduled?this.doSchedule(this.scheduled):this.schedule=this.doSchedule}}],[{key:"by",value:function(n,e){return n[An]||(n[An]=new t(n,e))}}]),t}();function xn(t){return function(n){var e=wn(n),r=Sn.by(t.newQueue(e)).ref,i=[];return function(t){var n=g(i,3),u=n[0],o=n[2],a=g(r,2),c=a[0],s=a[1],f=u||s;if(u===s&&!o||u===c)i[1]=t;else{var l=i=[f=o?c:s,t];f.add((function(t){l[2]=!0;try{l[1]({get config(){return e},postpone:function(n){t.postpone(n)}})}catch(t){e.error(t)}}))}f.schedule(e)}}}var jn={by:function(t){var n=t.schedule,e=t.replace,r=void 0===e?function(){}:e,i=[];return{schedule:n,add:function(t){i.push(t)},pull:function(){return i.shift()},reset:function(){var t=jn.by({schedule:n,replace:r});return r(t),t}}}},Tn=new WeakMap,Fn=xn({newQueue:function(t){var n=t.window,e=Tn.get(n);if(e)return e;var r=jn.by({schedule:function(t){return n.requestAnimationFrame(t)},replace:function(t){return Tn.set(n,t)}});return Tn.set(n,r),r}});function Rn(t){return Fn(t)}var En,Dn=function(t){function e(){return r(this,e),p(this,s(e).apply(this,arguments))}return c(e,t),u(e,[{key:"to",value:function(t,n){if(!t)return this;var e=wt(t),r=e.supply;return r.isOff||this._on(e,n),r}},{key:"once",value:function(t,n){return(this.once=Mn(Et(this)).F)(t,n)}},{key:"tillOff",value:function(t,n){return Mn(zt(this,t,n))}},{key:"capture",value:function(t,e){var r=this;return(this.capture=Mn((function(t,e){return null==e?r.to(t,!0):"object"===n(e)&&null==e.capture?r.to(t,Object.assign(Object.assign({},e),{capture:!0})):r.to(t,e)})).F)(t,e)}},{key:"instead",value:function(t,n){var e=this;return(this.instead=Mn((function(t,n){var r=wt(t);return e.to({supply:r.supply,receive:function(t,n){n.preventDefault(),r.receive(t,n)}},n)})).F)(t,n)}},{key:"just",value:function(t,n){var e=this;return(this.just=Mn((function(t,n){var r=wt(t);return e.to({supply:r.supply,receive:function(t,n){n.stopPropagation(),r.receive(t,n)}},n)})).F)(t,n)}},{key:"last",value:function(t,n){var e=this;return(this.last=Mn((function(t,n){var r=wt(t);return e.to({supply:r.supply,receive:function(t,n){n.stopImmediatePropagation(),r.receive(t,n)}},n)})).F)(t,n)}},{key:"passive",value:function(t,n){var e=this;return(this.passive=Mn((function(t,n){return null==n?e.to(t,{passive:!0}):"boolean"==typeof n?e.to(t,{capture:n,passive:!0}):null==n.passive?e.to(t,Object.assign(Object.assign({},n),{passive:!0})):e.to(t,n)})).F)(t,n)}},{key:"F",get:function(){return this.to.bind(this)}}]),e}(Kt);function Mn(t){return new Dn(t)}var zn={onRecurrent:A},Pn=t("$",function(){function t(n){r(this,t),this[En]=mt(),this._target=n}return u(t,[{key:"on",value:function(t){var n=this;return Mn((function(e,r){var i=e.supply;if(i.needs(bt(n)),!i.isOff){var u=function(t){return e.receive(zn,t)};n._target.addEventListener(t,u,r),e.supply.whenOff((function(){return n._target.removeEventListener(t,u)}))}}))}},{key:"dispatch",value:function(t){return!bt(this).isOff&&this._target.dispatchEvent(t)}},{key:"done",value:function(t){return bt(this).off(t),this}}]),t}());function Kn(t){var n=t.$,e=t.n,r=t.t,i=t.v,u=t.x,o=void 0===u?[]:u,a=t.p,c=void 0===a?{}:a,s=t.pl;return{$:n,n:e,t:r,v:i,x:o,p:c,pl:void 0===s?[]:s}}function Un(t,n){var e=t.p,r=t.pl,i=n.n||n.v,u=e[i];(!u||!u.n&&n.n)&&(e[i]=n),r.push(n)}function qn(t){return function(n,e){if(!(262144&t.delimiterOf(n.s[n.i])))return!1;var r="";for(++n.i;n.i<n.s.length;){var i=n.s[n.i++];if(524288&t.delimiterOf(i))break;r+=i}return e(r),!0}}function Cn(t){return function(n){var e=n.s[n.i];return n.d=t.delimiterOf(e),e}}En=kt;var $n=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), \d\d (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d\d\d\d \d\d:\d\d:\d\d GMT/;function In(t,n){return t.s=t.s.substring(t.i),t.i=0,!!t.s.match($n)&&(n(t.s.substring(t.i,t.i+=29)),!0)}var Ln=function(){return!1};function Nn(t){return function(n,e){var r="";for(++n.i;n.i<n.s.length;++n.i){var i=n.s[n.i];if("\\"===i){var u=n.s[++n.i];r+=u||i}else{if(65536&t.delimiterOf(i))return++n.i,void e(r);r+=i}}e(r)}}function Vn(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.named,r=void 0===e||e,i=n.tagged,u=void 0===i||i,o=n.extra,a=void 0===o||o,c=n.next,s=void 0===c?Cn(t):c,f=Nn(t),l=qn(t),h=a?Vn(t,{next:s,tagged:!1,named:!1,extra:!1}):Ln;return function(t,n){for(var e,i,o,a="",c="raw";t.i<t.s.length;){var v=s(t);if(t.d){if(12&t.d)break;if(null==i){if(16&t.d){i=a?"":v,++t.i;continue}if(65536&t.d){!u&&a||f(t,(function(t){a?(c="tagged-string",e=a):c="quoted-string",a="",i=t}));break}if(!a&&l(t,(function(t){c="angle-bracketed-string",i=t})))break;i=a,a=""}else{if(65536&t.d){!u&&i||f(t,(function(t){i?(c="tagged-string",e=i):c="quoted-string",i=t}));break}if(!i&&l(t,(function(t){c="angle-bracketed-string",i=t})))break}}if(null==i){if(!a&&In(t,(function(t){return i=t}))){c="date-time";break}r?a+=v:i=v}else{if(!i&&In(t,(function(t){return i=t}))){c="date-time";break}i+=v}++t.i}if(null==i){if(!a)return!1;o=Kn({$:c,v:a})}else o=Kn({$:c,n:a||void 0,t:e,v:i});for(;h(t,(function(t){return o.x.push(t)})););return n(o),!0}}function Wn(t){return function(n){var e=n.s[n.i];return"\\"!==e?(n.d=t.delimiterOf(e),e):(++n.i,n.i<n.s.length?(e=n.s[n.i],n.d=t.delimiterOf(e)?1:0):n.d=1,e)}}function Yn(t){return function(n){var e=n.i;do{var r=n.s[n.i];if(!(2&t.delimiterOf(r)))break;n.i++}while(n.i<n.s.length);return n.i!==e}}function Bn(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=Yn(t),r=Vn(t,Object.assign(Object.assign({},n),{tagged:!1}));return function(n,i){return!!(8&t.delimiterOf(n.s[n.i]))&&(++n.i,e(n),r(n,i))}}var Jn={" ":7,"\t":7,",":5,";":9,'"':65569,"\\":33,"<":262145,">":524289,"=":17,"(":1,")":1,"/":1,":":1,"?":1,"@":1,"[":1,"]":1,"{":1,"}":1};function Gn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.delimit,e=n?Object.assign(Object.assign({},Jn),n):Jn;return{delimiterOf:function(t){return e[t]||(t>="\0"&&t<=" "||"\x7f"===t?1:0)}}}var Qn=Gn(),Zn=Gn({delimit:{":":17,"(":131105,")":37," ":3,"\t":3,"=":1,",":1}});function Hn(t){var n,e=t?Gn(t):Qn,r=function(t){var n=Yn(t);return function(e){return!!(4&t.delimiterOf(e.s[e.i]))&&(e.i++,n(e),!0)}}(e),i=Bn(e),u=Vn(e),o=(null===(n=t)||void 0===n?void 0:n.comments)?function(t){var n=Yn(t),e={next:Wn(t)},r=Vn(t,e),i=Bn(t,e);return function(e,u){if(!(131072&t.delimiterOf(e.s[e.i])))return!1;var o;for(++e.i;n(e)||i(e,(function(t){o||(o=Kn({$:"raw",v:""})),Un(o,t)}))||r(e,(function(t){return o=t})););return++e.i,u(o||Kn({$:"raw",v:""})),!0}}(Zn):Ln;return function(t){for(var n=[],e={i:0,s:t};e.i<e.s.length&&(r(e)||i(e,(function(t){n.length||n.push(Kn({$:"raw",v:""})),Un(n[n.length-1],t)}))||o(e,(function(t){return n.push(t)}))||u(e,(function(t){return n.push(t)}))););return n}}t("ao",Hn());var Xn={}.hasOwnProperty,te=/[ -,\.\/:-@\[-\^`\{-~]/,ne=/[ -,\.\/:-@\[\]\^`\{-~]/,ee=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,re=function t(n,e){"single"!=(e=function(t,n){if(!t)return n;var e={};for(var r in n)e[r]=Xn.call(t,r)?t[r]:n[r];return e}(e,t.options)).quotes&&"double"!=e.quotes&&(e.quotes="single");for(var r="double"==e.quotes?'"':"'",i=e.isIdentifier,u=n.charAt(0),o="",a=0,c=n.length;a<c;){var s=n.charAt(a++),f=s.charCodeAt(),l=void 0;if(f<32||f>126){if(f>=55296&&f<=56319&&a<c){var h=n.charCodeAt(a++);56320==(64512&h)?f=((1023&f)<<10)+(1023&h)+65536:a--}l="\\"+f.toString(16).toUpperCase()+" "}else l=e.escapeEverything?te.test(s)?"\\"+s:"\\"+f.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(s)?"\\"+f.toString(16).toUpperCase()+" ":"\\"==s||!i&&('"'==s&&r==s||"'"==s&&r==s)||i&&ne.test(s)?"\\"+s:s;o+=l}return i&&(/^-[-\d]/.test(o)?o="\\-"+o.slice(1):/\d/.test(u)&&(o="\\3"+u+" "+o.slice(1))),o=o.replace(ee,(function(t,n,e){return n&&n.length%2?t:(n||"")+e})),!i&&e.wrap?r+o+r:o};re.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},re.version="3.0.0";var ie,ue=re,oe=/[A-Z]/g,ae=/^ms-/,ce={};function se(t){return"-"+t.toLowerCase()}var fe=regeneratorRuntime.mark(Vr);function le(t){return ue(t,{isIdentifier:!0})}function he(t){return Array.isArray(t)}function ve(t){return!!t.length}var ye=function(){function t(n){r(this,t),this.priority=n&&n.priority||0}return u(t,[{key:"important",value:function(){return this.prioritize(1)}},{key:"usual",value:function(){return this.prioritize(0)}}]),t}();function pe(t,e){return t===e||("object"===n(t)?t.is(e):"object"===n(e)&&e.is(t))}var de=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),n}(ye),ge=t("S",function(t){function e(t,n){var i;return r(this,e),(i=p(this,s(e).call(this,n))).r=be(t.r,255),i.g=be(t.g,255),i.b=be(t.b,255),i.a=null!=t.a?me(t.a,1):1,i}return c(e,t),u(e,[{key:"by",value:function(t){return _e.by(t)||this}},{key:"is",value:function(t){return"object"===n(t)&&t.type===this.type&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a&&t.priority===this.priority}},{key:"prioritize",value:function(t){return this.priority===t?this:new e(this,{priority:t})}},{key:"set",value:function(t){"function"==typeof t&&(t=t(this));var n=t,r=n.r,i=void 0===r?this.r:r,u=n.g,o=void 0===u?this.g:u,a=n.b,c=void 0===a?this.b:a,s=n.a;return new e({r:i,g:o,b:c,a:void 0===s?this.a:s},this)}},{key:"toString",value:function(){var t="".concat(this.r,", ").concat(this.g,", ").concat(this.b);return 1===this.a?"rgb(".concat(t,")"):"rgba(".concat(t,", ").concat(this.a,")")}},{key:"type",get:function(){return"rgb"}},{key:"rgb",get:function(){return this}},{key:"hsl",get:function(){var t=this.a,n=100*this.r/255,e=100*this.g/255,r=100*this.b/255,i=Math.max(n,e,r),u=Math.min(n,e,r),o=Math.round((i+u)/2);if(i===u)return new ke({h:0,s:0,l:o,a:t},this);var a,c=i-u,s=Math.round(o>50?100*c/(200-i-u):100*c/(i+u));switch(i){case n:a=(e-r)/c+(e<r?6:0);break;case e:a=(r-n)/c+2;break;default:a=(n-e)/c+4}return a*=60,a=Math.round(a),new ke({h:a,s:s,l:o,a:t},this)}}]),e}(de)),ke=function(t){function e(t,n){var i,u;return r(this,e),(i=p(this,s(e).call(this,n))).h=(u=t.h,(u%=360)<0?360+u:u),i.s=me(t.s,100),i.l=me(t.l,100),i.a=null!=t.a?me(t.a,1):1,i}return c(e,t),u(e,[{key:"by",value:function(t){return _e.by(t)||this}},{key:"is",value:function(t){return"object"===n(t)&&t.type===this.type&&t.h===this.h&&t.s===this.s&&t.l===this.l&&t.a===this.a&&t.priority===this.priority}},{key:"prioritize",value:function(t){return this.priority===t?this:new e(this,{priority:t})}},{key:"set",value:function(t){"function"==typeof t&&(t=t(this));var n=t,r=n.h,i=void 0===r?this.h:r,u=n.s,o=void 0===u?this.s:u,a=n.l,c=void 0===a?this.l:a,s=n.a;return new e({h:i,s:o,l:c,a:void 0===s?this.a:s},this)}},{key:"toString",value:function(){var t="".concat(this.h,", ").concat(this.s,"%, ").concat(this.l,"%");return 1===this.a?"hsl(".concat(t,")"):"hsla(".concat(t,", ").concat(this.a,")")}},{key:"type",get:function(){return"hsl"}},{key:"rgb",get:function(){var t=this.a,n=this.s/100,e=this.l/100;if(!n){var r=255*e;return new ge({r:r,g:r,b:r,a:t},this)}var i=e<.5?e*(1+n):e+n-e*n,u=2*e-i,o=this.h/360;return new ge({r:we(u,i,o+1/3),g:we(u,i,o),b:we(u,i,o-1/3),a:t},this)}},{key:"hsl",get:function(){return this}}]),e}(de),_e={by:function(t){if("object"===n(t)&&("rgb"===t.type||"hsl"===t.type))return t}};function be(t,n){return me(Math.round(t),n)}function me(t,n){return Math.max(Math.min(t,n),0)}function we(t,n,e){var r=e;return r<0?r+=1:r>1&&(r-=1),255*(r<1/6?t+6*r*(n-t):r<.5?n:r<2/3?t+(n-t)*(2/3-r)*6:t)}var Oe=function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this,t))).dim=t.dim,e}return c(n,t),u(n,[{key:"by",value:function(t){return this.dim.by(t)||this}},{key:"toString",value:function(){return this.toFormula()}}]),n}(ye),Ae={map:function(t,e){var r={},i={from:e,get:function(i){if(i in r)return r[i];var u=function(t){switch(n(t)){case"function":return t;case"object":return t.by.bind(t)}var e=n(t);return function(r){return n(r)===e?r:t}}(t[i])(e[i],this,i);return r[i]=u,u}};return L(rt(t),(function(t){return i.get(t)})),r},by:function(t){return Ae.map.bind(void 0,t)}};function Se(t){if(null==t)return[void 0,0];switch(n(t)){case"object":return[t,t.priority];case"string":if(t.endsWith("!important"))return[t.substring(0,t.length-"!important".length).trim(),1]}return[t,0]}var xe=function(t){function e(t,n,i){var u;return r(this,e),(u=p(this,s(e).call(this,i))).val=t,u.unit=n,u}return c(e,t),u(e,[{key:"toDim",value:function(t){var n=this.dim;if(t===n||t===n.pt||t===("%"===this.unit?t.pt:n.noPt))return this}},{key:"is",value:function(t){return t===this||"object"===n(t)&&t.type===this.type&&this.unit===t.unit&&this.val===t.val&&this.priority===t.priority}},{key:"prioritize",value:function(t){return this.priority===t?this:new e(this.val,this.unit,{dim:this.dim,priority:t})}},{key:"add",value:function(t,n){return"number"==typeof t&&(t=je(t,n||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?je(this.val+t.val,this.unit,this):Re(this,"+",t)}},{key:"sub",value:function(t,n){return"number"==typeof t&&(t=je(t,n||this.unit,this)),"dimension"===t.type&&this.unit===t.unit?je(this.val-t.val,this.unit,this):Re(this,"-",t)}},{key:"mul",value:function(t){return 1===t?this:je(this.val*t,this.unit,this)}},{key:"div",value:function(t){return 1===t?this:je(this.val/t,this.unit,this)}},{key:"negate",value:function(){return je(-this.val,this.unit,this)}},{key:"toFormula",value:function(){return this.val+this.unit}},{key:"type",get:function(){return"dimension"}}]),e}(Oe);function je(t,n,e){return t?new xe(t,n,e):e.dim.zero.prioritize(e.priority||0)}var Te=function(t){function e(t,n,i,u){var o;return r(this,e),(o=p(this,s(e).call(this,u))).left=t.usual(),o.op=n,o.right=i,o}return c(e,t),u(e,[{key:"is",value:function(t){return this===t||"object"===n(t)&&t.type===this.type&&(this.op===t.op&&this.left.is(t.left)&&pe(this.right,t.right)&&this.priority===t.priority)}},{key:"add",value:function(t,n){return"number"==typeof t&&(t=je(t,n,this)),Re(this,"+",t)}},{key:"sub",value:function(t,n){return"number"==typeof t&&(t=je(t,n,this)),Re(this,"-",t)}},{key:"mul",value:function(t){return De(this,t)}},{key:"div",value:function(t){return Me(this,t)}},{key:"toString",value:function(){return"calc"+d(s(e.prototype),"toString",this).call(this)}},{key:"type",get:function(){return"calc"}}]),e}(Oe),Fe=function(t){function n(t,e,i,u){return r(this,n),p(this,s(n).call(this,t,e,i.usual(),u))}return c(n,t),u(n,[{key:"prioritize",value:function(t){return this.priority===t?this:new n(this.left,this.op,this.right,{dim:this.dim,priority:t})}},{key:"toDim",value:function(t){var e=this.left.toDim(t);if(e){var r=this.right.toDim(t);if(r)return e===this.left&&r===this.right?this:new n(e,this.op,r,{dim:t,priority:this.priority})}}},{key:"negate",value:function(){return"-"===this.op?new n(this.right,this.op,this.left,this):new n(this.left.negate(),"-",this.right,this)}},{key:"toFormula",value:function(){return"(".concat(this.left.toFormula()," ").concat(this.op," ").concat(this.right.toFormula(),")")}}]),n}(Te);function Re(t,n,e){return e.type?new Fe(t,n,e,t):t}var Ee=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"prioritize",value:function(t){return this.priority===t?this:new n(this.left,this.op,this.right,{dim:this.dim,priority:t})}},{key:"toDim",value:function(t){var e=this.left.toDim(t);if(e)return e===this.left?this:new n(e,this.op,this.right,{dim:t,priority:this.priority})}},{key:"mul",value:function(t){return("*"===this.op?De(this.left,this.right*t):Me(this.left,this.right/t)).prioritize(this.priority)}},{key:"div",value:function(t){return("/"===this.op?Me(this.left,this.right*t):De(this.left,this.right/t)).prioritize(this.priority)}},{key:"negate",value:function(){return new n(this.left,this.op,-this.right,this)}},{key:"toFormula",value:function(){return"(".concat(this.left.toFormula()," ").concat(this.op," ").concat(this.right,")")}}]),n}(Te);function De(t,n){return n?1===n?t.prioritize(t.priority):new Ee(t,"*",n,t):t.dim.zero.prioritize(t.priority)}function Me(t,n){return 1===n?t.prioritize(t.priority):new Ee(t,"/",n,t)}var ze=function(t){function e(t,n){var i;return r(this,e),(i=p(this,s(e).call(this,n)))._byPriority=t,i}return c(e,t),u(e,[{key:"toDim",value:function(t){return t.zero.prioritize(this.priority)}},{key:"is",value:function(t){return this===t||("object"===n(t)?t.type===this.type&&t.priority===this.priority:0===t||"0"===t?0===this.priority:"0 !important"===t&&1===this.priority)}},{key:"add",value:function(t,n){return"number"==typeof t&&(t=je(t,n,this)),t.prioritize(this.priority)}},{key:"sub",value:function(t,n){return"number"==typeof t&&(t=je(t,n,this)),t.negate().prioritize(this.priority)}},{key:"mul",value:function(){return this}},{key:"div",value:function(){return this}},{key:"negate",value:function(){return this}},{key:"prioritize",value:function(t){return this._byPriority.get(t)}},{key:"important",value:function(){return this._byPriority.important}},{key:"usual",value:function(){return this._byPriority.usual}},{key:"toFormula",value:function(){return"0"}},{key:"type",get:function(){return 0}}]),e}(Oe),Pe=function(){function t(n){r(this,t),this.dim=n,this.usual=new ze(this,{dim:n}),this.important=new ze(this,{dim:n,priority:1})}return u(t,[{key:"get",value:function(t){switch(t){case 0:return this.usual;case 1:return this.important}return new ze(this,{dim:this.dim,priority:t})}}]),t}();function Ke(t){var e=t.pt,r=t.noPt,i={get zero(){return u},get pt(){return e()},get noPt(){return r()},of:function(t,n){return t?new xe(t,n,{dim:this}):u},by:function(t){if(function(t){return"object"===n(t)&&("dimension"===t.type||"calc"===t.type||0===t.type)}(t))return t.toDim(this)}},u=new Pe(i).usual;return i}var Ue=t("b",Ke({pt:function(){return qe},noPt:function(){return Ue}})),qe=t("a",Ke({pt:function(){return qe},noPt:function(){return Ue}})),Ce=function(t){function e(t,n){var i;return r(this,e),(i=p(this,s(e).call(this,n))).url=t,i}return c(e,t),u(e,[{key:"by",value:function(t){return e.by(t)||this}},{key:"prioritize",value:function(t){return t===this.priority?this:new e(this.url,{priority:t})}},{key:"is",value:function(t){return"object"===n(t)&&"url"===t.type&&t.url===this.url&&t.priority===this.priority}},{key:"toString",value:function(){return"url('".concat(ue(this.url),"')")}},{key:"type",get:function(){return"url"}}],[{key:"by",value:function(t){switch(n(t)){case"string":var r=g(Se(t),2);return new e(r[0],{priority:r[1]});case"object":if("url"===t.type)return t}}}]),e}(ye),$e=Wt({});function Ie(){return $e}function Le(t,n){if(!n)return $e;if("string"!=typeof n){if(gt(n))return Ve(n);if(jt(n))return Ve(Ne(n));if("function"==typeof n){var e=n(t);if("string"!=typeof e){if(gt(e))return Ve(e);if(jt(e))return Ve(Ne(e))}return Wt(We(e))}}return Wt(We(n))}function Ne(t){return Lt(t,j({}))}function Ve(t){return Lt(t).keepThru(We,(function(t){return n&&function(t,n){var e=U(Ye(n)),r=!0,i=!1,u=void 0;try{for(var o,a=Ye(t)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var c=g(o.value,2),s=c[0],f=c[1],l=e.next().value;if(!l||s!==l[0]||!pe(f,l[1]))return!1}}catch(t){i=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}return!e.next().value}(t,n)?z():n=Object.assign({},t)}),O);var n}function We(t){return"string"==typeof t?{$$css:t}:t}function Ye(t){return Y(it(t),S)}function Be(t,n){return Ve(Nt({base:t,addendum:n}).keepThru((function(t){return function(t,n){return W(it(n),(function(t,n){var e=g(n,2);return function(t,n,e){Je(t[n])<=Je(e)&&(delete t[n],t[n]=e);return t}(t,e[0],e[1])}),Object.assign({},t))}(g(t.base,1)[0],g(t.addendum,1)[0])})))}function Je(t){switch(n(t)){case"string":return t.endsWith("!important")?1:0;case"object":return t.priority}return 0}function Ge(t){return">"===t||"+"===t||"~"===t}function Qe(t){if(!he(t))return[Ze(t)];var n,e=[],r=!0,i=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var c=o.value,s=n;n&&(e.push(n),n=void 0);var f=void 0;if(Ge(c)){if(n=c,!s)continue;f={}}else f=Ze(c);e.push(f)}}catch(t){i=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}return n&&e.push(n,{}),e}function Ze(t){return"string"==typeof t?t?{s:t}:{}:He(t)}function He(t){var n=t.ns||void 0,e=t.i||void 0,r=function(t){if(!t)return;if(ln(t))return[t];var n=t.filter((function(t){return!!t}));return ve(n)?n.sort(hn):void 0}(t.c),i=function(t){if(!t)return;if(function(t){return"string"!=typeof t[0]}(t)){var n=t.map(Xe);return ve(n)?n:void 0}return[Xe(t)]}(t.u);return{ns:n,e:("*"!==t.e||!n&&!e&&!r&&i&&tr(i[0]))&&t.e||void 0,i:e,c:r,u:i,s:t.s||void 0,$:nr(t.$)}}function Xe(t){if(!tr(t))return t;if(t.length<3)return t;var n=k(t),e=n[0],r=n[1],i=n.slice(2);return he(i[0])?[e,r].concat(_(i.map(Qe))):[e,r,Qe(i)]}function tr(t){return t.length>1&&(":"===t[0]||"::"===t[0])}function nr(t){if(t)return ve(t=he(t)?Array.from(new Set(B(t,rr))).sort():Array.from(rr(t)))?t:void 0}var er=new Set;function rr(t){if(!t)return er;var n,e=t.indexOf("="),r=e<0?t:t.substring(0,e),i=new Set,u=!0,o=!1,a=void 0;try{for(var c,s=r.split(":")[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var f=c.value;n?n+=":"+f:n=f,i.add(n)}}catch(t){o=!0,a=t}finally{try{u||null==s.return||s.return()}finally{if(o)throw a}}return e>=0&&i.add(t),i}var ir=[[]];function ur(t){if(!t.length)return ir;for(var n,e=0;;){var r=t[e++];if(!Ge(r))return[n?[n,r]:[r],t.slice(e)];n=r}}var or=[];function ar(t,n){return t&&n.every((function(n){return t.find((function(t){return function(t,n){if("string"==typeof t)return"string"==typeof n?t===n:!n[1].url&&n[0]===t;var e=g(t,2),r=e[0],i=e[1].url;return"string"==typeof n?!i&&r===n:r===n[0]&&i===n[1].url}(n,t)}))}))}function cr(t){return Qe(t)}var sr={qualify:function(t){return"@".concat(le(t))}};function fr(t){return hr(t,sr)}var lr={};function hr(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lr,e=n.qualify,r=n.nsAlias,i=void 0===r?yn():r,u={qualify:e,nsAlias:i};return t.reduce((function(t,n){return Ge(n)?t+n:(t&&!Ge(t[t.length-1])&&(t+=" "),t+vr(n,u))}),"")}function vr(t,n){var e=n.qualify,r=n.nsAlias,i=t.ns,u=t.e,o=t.i,a=t.c,c=t.s,s=t.u,f=t.$,l=!1,h="";if(o&&(l=!0,h+="#".concat(le(cn.name(o,r)))),a&&(l=!0,h=a.reduce((function(t,n){return"".concat(t,".").concat(le(sn.name(n,r)))}),h)),s){l=!0;var v={nsAlias:r};h=s.reduce((function(t,n){return function(t,n,e){if(tr(n)){if(t+=n[0]+n[1],n.length>2){t+="("+hr(n[2],e);for(var r=3;r<n.length;++r)t+=","+hr(n[r],e);t+=")"}return t}var i=g(n,4),u=i[0],o=i[1],a=i[2],c=i[3];t+="["+le(u),o&&(t+=o+ue(a,{quotes:"double",wrap:!0}));c&&(t+=" "+c);return t+"]"}(t,n,v)}),h)}if(c&&(l=!0,h+=c),e&&f&&(h=f.reduce((function(t,n){return t+e(n)}),h)),i){var y=function(t,n){return"string"==typeof t?t:t.url?n(t):void 0}(i,r);h=y?"".concat(y,"|").concat(u||"*").concat(h):p()}else h=p();return h;function p(){return l?"".concat(u?an.name(u,r):"").concat(h):"".concat(u?an.name(u,r):"*").concat(h)}}function yr(t,n){return hr(cr(t),n)}function pr(t){return"cssRules"in t}var dr=function(){function t(n){r(this,t),this._rule=n}return u(t,[{key:"read",value:function(t){for(var n=this._rule.outer;n;)t=Be(n.read().keepThru(_r),t),n=n.outer;return t}},{key:"render",value:function(t,n){var e=t.selector,r=t.target;if(pr(r)){var i=r,u=function(t){var n=new Map,e=[],r=!0,i=!1,u=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var c=o.value;Ge(c)?e.push(c):e.push(mr(c,n))}}catch(t){i=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}if(!n.size)return;return[n,cr(e)]}(e);if(u){var o=g(u,2),a=o[0],c=o[1],s=!0,f=!1,l=void 0;try{for(var h,v=a[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var y=h.value,p=i.insertRule("".concat(gr(n,y),"{}"),i.cssRules.length),d=i.cssRules[p];r=d,pr(d)&&(i=d)}}catch(t){f=!0,l=t}finally{try{s||null==v.return||v.return()}finally{if(f)throw l}}t.render(n,{target:r,selector:c})}else t.render(n)}else t.render(n)}}]),t}();function gr(t,n){var e=g(n,2),r=e[0],i=g(e[1],2),u=i[0],o=i[1],a="",c=function(t){t&&(a&&(a+=" and "),a+=t)},s=!0,f=!1,l=void 0;try{for(var h,v=u[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){c(g(Se(t[h.value]),1)[0])}}catch(t){f=!0,l=t}finally{try{s||null==v.return||v.return()}finally{if(f)throw l}}return c(o),a?"".concat(r," ").concat(a):r}var kr={order:-65535,create:function(t){return new dr(t)}};function _r(t){return W(Y(it(t),br),(function(t,n){var e=g(n,2),r=e[0],i=e[1];return t[r]=i,t}),{})}function br(t){return"@"===String(t[0])[0]}function mr(t,n){var e=t.$;if(!e)return t;var r=[],i=!0,u=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var s=a.value;"@"===s[0]?wr(n,s):r.push(s)}}catch(t){u=!0,o=t}finally{try{i||null==c.return||c.return()}finally{if(u)throw o}}return r.length===e.length?t:ve(r)?Object.assign(Object.assign({},t),{$:r}):Object.assign(Object.assign({},t),{$:void 0})}function wr(t,n){var e,r,i=n.indexOf("=");i<0?e=n:(e=n.substring(0,i),r=n.substring(i+1));var u=e.indexOf(":"),o=u<0?e:e.substring(0,u),a=t.get(o);if(a){var c=g(a,2),s=c[0],f=c[1];s.add(e),r&&(a[1]=f?"".concat(f," and ").concat(r):r)}else t.set(o,[(new Set).add(e),r])}var Or={order:-65534,needs:kr,render:function(t,n){var e=t.styleSheet,r=0,i=0,u=!0,o=!1,a=void 0;try{for(var c,s=it(n)[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var f=g(c.value,2),l=f[0],h=f[1],v=String(l);if("@"===v[0]){var y=g(Se(h),1)[0],p=Ar(e,r,v,y);r+=p,i+=p;var d=Ce.by(y);d&&(i+=Sr(e,i,v,d),i+=xr(e,i,v,d))}}}catch(t){o=!0,a=t}finally{try{u||null==s.return||s.return()}finally{if(o)throw a}}t.render(n)}};function Ar(t,n,e,r){if(!e.startsWith("@import:"))return 0;var i=new Ce(e.substring("@import:".length)),u="@import ".concat(i);return r&&(u+=" "+r),t.insertRule(u+";",n),1}function Sr(t,n,e,r){return"@namespace"!==e?0:(t.insertRule("@namespace ".concat(r,";"),n),1)}function xr(t,n,e,r){if(!e.startsWith("@namespace:"))return 0;var i=e.substring("@namespace:".length);return t.insertRule("@namespace ".concat(i," ").concat(r,";"),n),1}function jr(t,n){var e=t.addRule(),r=e.style;L(Y(it(n),Tr),(function(t){var n=g(t,2),e=n[0],i=g(Se(n[1]),2),u=i[0],o=i[1];r.setProperty(function(t){if(ce.hasOwnProperty(t))return ce[t];var n=t.replace(oe,se);return ce[t]=ae.test(n)?"-"+n:n}(e),"".concat(u),o>=1?"important":void 0)})),t.render(n,{target:e})}function Tr(t){var n=g(t,2),e=n[0];if(null==n[1])return!1;var r=String(e)[0];return r>="a"&&r<="z"||r>="A"&&r<="Z"}function Fr(t){var n=new Map;return e(t.renderer),n.delete(jr),[].concat(_(n.values()),[Rr(jr)]).sort(Er);function e(t){t&&(he(t)?t.forEach(r):r(t))}function r(t){if(!n.has(t)){var r=Rr(t);n.set(t,r),e(r.needs)}}}function Rr(t){if("function"==typeof t)return{create:function(){return{render:t}}};if(function(t){return"create"in t}(t))return{order:t.order,needs:t.needs,create:function(n){return function(t){return"function"==typeof t?{render:t}:t}(t.create(n))}};var n=t.render.bind(t);return{order:t.order,needs:t.needs,create:function(){return{render:n}}}}function Er(t,n){var e=t.order||0,r=n.order||0;return e>r?1:e<r?-1:0}function Dr(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.document,i=void 0===e?window.document:e,o=n.rootSelector,a=void 0===o?{e:"body"}:o,c=n.addStyleSheet,s=void 0===c?Mr:c,f=n.scheduler,l=void 0===f?Rn:f,h=n.nsAlias,v=void 0===h?yn():h,y=n.parent,p=void 0===y?i.head:y,d=i.defaultView||window,k={nsAlias:v},b=Fr(n),m=x(t),w=j();return mt().needs(m).needs(w).cuts(m).cuts(w);function O(t,n,e){return new(function(){function o(){r(this,o)}return u(o,[{key:"nsAlias",value:function(t){return v(t)}},{key:"render",value:function(r,i){n(i?O(t,n,{styleSheet:e.styleSheet,target:i.target||e.target,selector:i.selector||e.selector}):this,r)}},{key:"addRule",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selector,n=e.target;if(!pr(n))return n;var r=n.insertRule("".concat(S(t),"{}"),n.cssRules.length);return n.cssRules[r]}},{key:"document",get:function(){return i}},{key:"parent",get:function(){return p}},{key:"rule",get:function(){return t}},{key:"styleSheet",get:function(){return e.styleSheet}},{key:"target",get:function(){return e.target}},{key:"selector",get:function(){return e.selector}}]),o}())}function S(t){return yr(t,k)}function x(t){return W(J(t,T),(function(t,n){return mt().cuts(n).cuts(t)}),mt())}function j(){var n=mt();return Gt(t).to({supply:n,receive:function(t,e){e.forEach((function(t){return T(t).needs(n)}))}})}function T(t){var n,e=g(R(t),2),r=e[0],i=e[1],u=F(t),o=l({window:d});return r.to((function(e){o((function(){n&&function(t){for(;t.cssRules.length;)t.deleteRule(t.cssRules.length-1)}(n.styleSheet);var r=O(t,i,{get styleSheet(){return n||(n=s(r)),n.styleSheet},get target(){return this.styleSheet},selector:u});r.render(e)}))})).whenOff((function(){o((function(){var t=n;if(t)return n=void 0,t.remove()}))}))}function F(t){var n=t.selector;return n.length?Ge(n[0])?[].concat(_(cr(a)),_(n)):n:cr(a)}function R(t){var n=b.map((function(n){return n.create(t)}));return[n.reduce((function(t,n){return n.read?Lt(n.read(t)):t}),t.read()),function t(e){return function(r,i){var u,o=e+1;u=o===b.length?A:t(o);var a=O(r.rule,u,r);n[e].render(a,i)}}(0)]}}function Mr(t){var n=t.document,e=t.parent,r=n.createElement("style");return r.setAttribute("type","text/css"),r.append(n.createTextNode("")),e.append(r),{styleSheet:r.sheet,remove:function(){r.parentElement.removeChild(r)}}}function zr(t,n){var e=n.$$css;if(e){var r=t.addRule();r.style.cssText=e,t.render(n,{target:r})}else t.render(n)}var Pr={order:-65535,needs:Or,render:function(t,n){var e=Y(J(tt(t.selector),(function(t){return!Ge(t)&&t.ns&&"string"!=typeof t.ns?t.ns:null})),S);function r(n,e){var r=t.nsAlias(e);return n["@namespace:".concat(r)]=new Ce(e.url),n}t.render(N(e)?n:W(e,r,Object.assign({},n)))}};function Kr(t){var n=[kr,Pr,Or,zr];return t&&(he(t)?n.push.apply(n,_(t)):n.push(t)),n}var Ur=function(){function t(){r(this,t)}return u(t,[{key:dt,value:function(){return this.read()}},{key:"add",value:function(t){return this.rules.add([],t)}},{key:"clear",value:function(){return this.set()}}]),t}(),qr=function(){function t(){r(this,t)}return u(t,[{key:dt,value:function(){return this.read()}},{key:xt,value:function(){return this.onUpdate()}}]),t}(),Cr=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),n}(qr),$r=function(t){function n(t,e){var i;return r(this,n),(i=p(this,s(n).call(this)))._list=t,e?(i._buildList=function(){return Y(t,e)},i._filterArray=function(t){return t.filter(e)}):(i._buildList=function(){return t},i._filterArray=O),i}return c(n,t),u(n,[{key:"read",value:function(t){return(this.read=It(this.onUpdate().thru(x(this)),j(this)).F)(t)}},{key:"onUpdate",value:function(t){var n=this;return(this.onUpdate=Ut((function(t){var e=n._ruleSet||(n._ruleSet=new Set(n._buildList()));Gt(n._list).to({supply:t.supply.whenOff((function(){return n._ruleSet=void 0})),receive:function(r,i,u){i=n._filterArray(i),((u=n._filterArray(u)).length||i.length)&&(u.forEach((function(t){return e.delete(t)})),i.forEach((function(t){return e.add(t)})),t.receive(r,i,u))}})})).share().F)(t)}},{key:Symbol.iterator,value:function(){return this._ruleSet?this._ruleSet.values():q(this._buildList())}},{key:"grab",value:function(t){return Ir(this,t)}}]),n}(qr);function Ir(t,n){var e=function(t){return He(t)}(n);return new $r(t,(function(t){return function(t,n){if(!t.length)return!1;var e=t[t.length-1];return(!n.ns||e.ns===n.ns)&&((!n.e||e.e===n.e)&&((!n.i||e.i===n.i)&&(!(n.c&&!ar(e.c,n.c))&&!(n.$&&!ar(e.$,n.$)))))}(t.selector,e)}))}var Lr=function(t){function n(t,e){var i,o,a,c,f;return r(this,n),(i=p(this,s(n).call(this)))._root=t,i.nested=e,i._updates=new Bt,i.self=(o=t,a=y(i),c=new Bt,f=[o],a.onUpdate((function(t,n){n[0]===o&&(f.length=0,c.send([],[o]))})).cuts(c),new $r(new(function(){function t(){r(this,t)}return u(t,[{key:xt,value:function(){return c.on()}},{key:Symbol.iterator,value:function(){return q(f)}}]),t}()))),i}return c(n,t),u(n,[{key:"read",value:function(t){return(this.read=It(this._updates.on().thru(x(this)),j(this)).F)(t)}},{key:"onUpdate",value:function(t){return(this.onUpdate=this._updates.on().F)(t)}},{key:Symbol.iterator,value:function(){return Vr(this._root)}},{key:"grab",value:function(t){return Ir(this,t)}},{key:"add",value:function(t,n){return function t(n,e,r,i){var u=g(ur(e),2),o=u[0],a=u[1];if(!a)return n._spec.it=function(t,n){var e=t._spec.it;if(!n)return e;if(t.empty)return function(t){return Le(t,n)};return function(t){return Be(e(t),Le(t,n))}}(n,r),n;var c=fr(o),s=n.rules.nested._rule(c);if(s)return t(s,a,r,i);var f=new Yr(n.root,[].concat(_(n.selector),_(o)),o),l=t(f,a,r,!1);return n.rules.nested._add(c,f,i),l}(this._root,cr(t),n,!0)}},{key:"get",value:function(t){return this._get(cr(t))}},{key:"_get",value:function(t){var n=g(ur(t),2),e=n[0],r=n[1];if(!r)return this._root;var i=this.nested._rule(fr(e));return i?i.rules.get(r):void 0}},{key:"watch",value:function(t){var n=this,e=cr(t);return $t((function(t){var r=en({}),i=n.read().consume((function(){var t=n._get(e);return t&&t.read((function(t){return r.it=t})).whenOff((function(){return r.it={}}))}));return r.read(t).cuts(i)})).share()}},{key:"_add",value:function(t,n){var e=this;t.rules.onUpdate((function(t,n){return e._updates.send(t,n)})),n&&this._updates.send(Nr(t),[])}},{key:"_remove",value:function(t){var n=Nr(this._root);this._updates.send([],n),n.forEach((function(n){n.rules._updates.done(t),n._spec.done(t)}))}}]),n}(Cr);function Nr(t){return Array.from(Vr(t))}function Vr(t){var n,e,r,i,u,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t;case 2:n=!0,e=!1,r=void 0,a.prev=5,i=t.rules.nested[Symbol.iterator]();case 7:if(n=(u=i.next()).done){a.next=13;break}return o=u.value,a.delegateYield(Nr(o),"t0",10);case 10:n=!0,a.next=7;break;case 13:a.next=19;break;case 15:a.prev=15,a.t1=a.catch(5),e=!0,r=a.t1;case 19:a.prev=19,a.prev=20,n||null==i.return||i.return();case 22:if(a.prev=22,!e){a.next=25;break}throw r;case 25:return a.finish(22);case 26:return a.finish(19);case 27:case"end":return a.stop()}}),fe,null,[[5,15,19,27],[20,,22,26]])}var Wr=function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this)))._updates=new Bt,e._byKey=new Map,e._all=new Lr(t,y(e)),e}return c(n,t),u(n,[{key:"read",value:function(t){return(this.read=It(this._updates.on().thru(x(this)),j(this)).F)(t)}},{key:"onUpdate",value:function(t){return(this.onUpdate=this._updates.on().F)(t)}},{key:Symbol.iterator,value:function(){return this._byKey.values()}},{key:"grab",value:function(t){return Ir(this,t)}},{key:"_rule",value:function(t){return this._byKey.get(t)}},{key:"_add",value:function(t,n,e){var r=this;this._byKey.set(t,n),n.rules.onUpdate((function(e,i){i[0]===n&&(r._byKey.delete(t),r._updates.send([],[n]))})),e&&this._updates.send([n],[]),this._all._add(n,e)}}]),n}(qr),Yr=function(t){function n(t,e,i){var u,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ie;return r(this,n),(u=p(this,s(n).call(this)))._root=t||y(u),u._selector=e,u._key=i,u._spec=en(o),u._nested=new Wr(y(u)),u}return c(n,t),u(n,[{key:"read",value:function(t){var n=this;return(this.read=this._spec.read().keepThru((function(t){return Yt(t(n))})).F)(t)}},{key:"set",value:function(t){return this._spec.it=t?function(n){return Le(n,t)}:Ie,this}},{key:"remove",value:function(t){return this.rules._remove(t),this}},{key:"root",get:function(){return this._root}},{key:"outer",get:function(){if(void 0!==this._outer)return this._outer;var t=function(t){var n=t.length-1;if(n<=0)return n?void 0:or;do{switch(t[--n]){case">":return t.slice(0,n);case"+":case"~":--n;continue;default:return t.slice(0,n+1)}}while(n>0)}(this.selector);return this._outer=t&&this.root.rules.get(t)||null}},{key:"selector",get:function(){return this._selector}},{key:"key",get:function(){return this._key}},{key:"empty",get:function(){return this._spec.it===Ie}},{key:"rules",get:function(){return this._nested._all}}]),n}(Ur);var Br=[];var Jr=function(t){function n(t,e,i){var u;return r(this,n),(u=p(this,s(n).call(this)))._root=t,u._selector=e,u._map=i,u}return c(n,t),u(n,[{key:"read",value:function(t){return(this.read=Nt({ms:this._map(this._root),ps:this._root.rules.watch(this._selector)}).keepThru((function(t){var n=g(t.ms,1)[0],e=g(t.ps,1)[0];return E(Ae.map(n,e))})).F)(t)}},{key:"add",value:function(t){return this._root.rules.add(this._selector,t),this}},{key:"set",value:function(t){return this._root.rules.add(this._selector).set(t),this}}]),n}(function(){function t(){r(this,t)}return u(t,[{key:dt,value:function(){return this.read()}},{key:"clear",value:function(){return this.set()}}]),t}());t("R",{by:function(t,n){var e;return e="function"==typeof n?function(t){return Gr(n(t))}:x(Gr(n)),function(n){return new Jr(n,t,e)}}});function Gr(t){return gt(t)?t:Wt(t)}t("c",function(){function t(n){r(this,t),this.refs=n}return u(t,[{key:"read",value:function(t){var n=Nt(this.refs);return(this.read=n.keepThru(Qr).F)(t)}},{key:dt,value:function(){return this.read()}}],[{key:"by",value:function(n,e){for(var r={},i=0,u=Object.keys(n);i<u.length;i++){var o=u[i];r[o]=n[o](e)}return new t(r)}}]),t}());function Qr(t){for(var n={},e=0,r=Object.keys(t);e<r.length;e++){var i=r[e];n[i]=t[i][0]}return n}var Zr=new $r((a(ie={},xt,(function(){return Jt})),a(ie,Symbol.iterator,(function(){return[][Symbol.iterator]()})),ie));function Hr(t){return"function"==typeof t?function(t){var n,e;return a(n={},Symbol.iterator,(function(){return r()[Symbol.iterator]()})),a(n,xt,(function(){return r()[xt]()})),n;function r(){return e||(e=ni(t()))}}(t):ni(t)}function Xr(t){return"function"==typeof t?function(t){var n,e=new Set,r=Ut((function(n){var r=ni(t());ei(r,e,n),r[xt]().to({supply:n.supply.whenOff((function(){return e.clear()})),receive:function(t,r,i){i.forEach((function(t){return e.delete(t)})),r.forEach((function(t){return e.add(t)})),n.receive(t,r,i)}})})).share();return a(n={},xt,(function(){return r})),a(n,Symbol.iterator,(function(){return e.values()})),n}(t):ni(t)}function ti(t){var n;if(1===t.length){var e=t[0];return e instanceof qr?e:new $r(e)}return new $r((a(n={},Symbol.iterator,regeneratorRuntime.mark((function n(){var e,r,i,u,o,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=!0,r=!1,i=void 0,n.prev=3,u=t[Symbol.iterator]();case 5:if(e=(o=u.next()).done){n.next=11;break}return a=o.value,n.delegateYield(a,"t0",8);case 8:e=!0,n.next=5;break;case 11:n.next=17;break;case 13:n.prev=13,n.t1=n.catch(3),r=!0,i=n.t1;case 17:n.prev=17,n.prev=18,e||null==u.return||u.return();case 20:if(n.prev=20,!r){n.next=23;break}throw i;case 23:return n.finish(20);case 24:return n.finish(17);case 25:case"end":return n.stop()}}),n,null,[[3,13,17,25],[18,,20,24]])}))),a(n,xt,(function(){return Ut((function(n){t.forEach((function(t){return Gt(t).to({supply:mt().needs(n.supply),receive:function(t,e,r){n.receive(t,e,r)}})}))})).share()})),n))}function ni(t){return t instanceof Ur?t.rules.self:jt(t)?t:function(t){var n,e=new Set,r=Ut((function(n){var r=Ft(),i=n.supply;i.cuts(r).whenOff((function(){return e.clear()})),t.then((function(t){if(!i.isOff){var u=t instanceof Ur?t.rules:t;ei(u,e,n),r=Gt(u).to({receive:function(t,r,i){i.forEach((function(t){return e.delete(t)})),r.forEach((function(t){return e.add(t)})),n.receive(t,r,i)}}).needs(i)}}))})).share();return a(n={},xt,(function(){return r})),a(n,Symbol.iterator,(function(){return e.values()})),n}(t)}function ei(t,n,e){var r=[];if(L(t,(function(t){r.push(t),n.add(t)})),r.length){var i=new St;i.on(e),i.send(r,[])}}var ri,ii,ui,oi,ai,ci,si,fi,li=function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this)))._added=new Set(t),e._removed=new Set,e._added.forEach((function(t){return e.add(t)})),e}return c(n,t),u(n,[{key:"add",value:function(t){return this.has(t)||(this._added.add(t),this._removed.delete(t),d(s(n.prototype),"add",this).call(this,t)),this}},{key:"delete",value:function(t){return!!d(s(n.prototype),"delete",this).call(this,t)&&(this._added.delete(t),this._removed.add(t),!0)}},{key:"clear",value:function(){var t=this;this._added.clear(),this.forEach((function(n){return t._removed.add(n)})),d(s(n.prototype),"clear",this).call(this)}},{key:"delta",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return hi(this)(t,n),this}},{key:"redelta",value:function(t){return("function"==typeof t?t:hi(t))(_(this._added),_(this._removed)),this}},{key:"undelta",value:function(){return this._added.clear(),this._removed.clear(),this}}]),n}(v(Set));function hi(t){return function(n,e){var r=!0,i=!1,u=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var c=o.value;t.delete(c)}}catch(t){i=!0,u=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw u}}var s=!0,f=!1,l=void 0;try{for(var h,v=n[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var y=h.value;t.add(y)}}catch(t){f=!0,l=t}finally{try{s||null==v.return||v.return()}finally{if(f)throw l}}}}var vi=Symbol("in-aspect"),yi={instance:null,convertTo:A};function pi(t,n,e,r,i){return void 0===r&&(r=e(t,i)),{instance:r,convertTo:function(r){return pi(r,n,e,void 0,t)},attachTo:function(r){return pi(r,n,e,t.aspect(n)||e(r))}}}function di(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return pi(t,n,x(null),e)}function gi(t){return{instance:t,convertTo:function(){return this}}}var ki=t("I",new fn("https://surol.github.io/input-aspects/ns","inasp","input-aspects")),_i={applyTo:function(){return gi(yn())}},bi=t("aF",(ri={},(ii={})[vi]=ii[vi]||{},ii[vi].get=function(){return _i},a(ri,"to",(function(t){return{applyAspect:function(n){return n===_i?gi(t):void 0}}})),o(ri,ii),ri)),mi={applyTo:function(){return gi(Rn)}},wi=t("aE",(ui={},(oi={})[vi]=oi[vi]||{},oi[vi].get=function(){return mi},a(ui,"to",(function(t){return{applyAspect:function(n){return n===mi?gi(t):void 0}}})),o(ui,oi),ui));function Oi(t){if(!t)return xi;for(var n=Ti(t),e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(!r.length)return n;var u=J(r,Ti);return function(t,e){var r=n(t,e),i=W(B([[r],Y(J(u,(function(n){return n(t,e)})),S)]),(function(t,n){return n.applyAspect?function(e){return t(e)||n.applyAspect(e)}:t}),A);return ji(r)?{applyAspect:i}:{set:r.set.bind(r),get:r.get.bind(r),applyAspect:i}}}function Ai(t){return t?(n=t,Array.isArray(n)?Oi.apply(void 0,_(t)):Oi(t)):Oi();var n}var Si={applyAspect:function(){}};function xi(){return Si}function ji(t){return!t.set}function Ti(t){return"function"==typeof t?t:x(t)}var Fi=t("aB",function(t){function n(){var t;return r(this,n),(t=p(this,s(n).apply(this,arguments)))._aspects=new Map,t}return c(n,t),u(n,[{key:"aspect",value:function(t){return this._aspect(t[vi]).instance}},{key:"setup",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;return Ri(t)?n(this.aspect(t),this):t(this),this}},{key:"convert",value:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return new Ei(this,Oi.apply(void 0,[t].concat(e)))}},{key:"_aspect",value:function(t){var n=this._aspects.get(t);if(n)return n;var e=this._applyAspect(t)||t.applyTo(this);return this._aspects.set(t,e),e}},{key:"_applyAspect",value:function(t){}}]),n}(tn));function Ri(t){return vi in t}var Ei=function(t){function n(t,e){var i;r(this,n),(i=p(this,s(n).call(this)))._on=new Bt,i._supply=mt().needs(t);var u,o,a,c,f=0,l=e(t,y(i));return ji(l)?(o=O,a=O,c=function(n){var e=t._aspect(n);return e.attachTo?e.attachTo(y(i)):e.convertTo(y(i))}):(o=l.set,a=l.get,c=function(n){return t._aspect(n).convertTo(y(i))}),i._applyAspect=function(t){var n;return(null===(n=l.applyAspect)||void 0===n?void 0:n.call(l,t))||c(t)},i._it=en([o(t.it),0]),bt(i._it).needs(i._supply),i._it.on((function(t,n){var e=g(t,1)[0],r=g(n,1)[0];e!==r&&i._on.send(e,r)})).cuts(i._on),t.on((function(t){t!==u&&(i._it.it=[o(t),++f])})).cuts(y(i)),i._it.on((function(n){var e=g(n,2),r=e[0],i=e[1];if(i!==f){f=i,u=a(r);try{t.it=u}finally{u=void 0}}})),i}return c(n,t),u(n,[{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:kt,get:function(){return this._supply}},{key:"it",get:function(){return this._it.it[0]},set:function(t){var n=g(this._it.it,2),e=n[0],r=n[1];t!==e&&(this._it.it=[t,r+1])}}]),n}(Fi),Di=function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this)))._control=t,e}return c(n,t),u(n,[{key:"on",value:function(t){return(this.on=this._control.on().F)(t)}},{key:kt,get:function(){return this._supply||(this._supply=mt().needs(this._control))}},{key:"it",get:function(){return this._control.it},set:function(t){this._control.it=t}}]),n}(Fi);var Mi=function(t){function n(t){var e,i,u=t.aspects;return r(this,n),(e=p(this,s(n).call(this)))._aspectConversion=Ai(u)((i=y(e),new Di(i)),y(e)),e}return c(n,t),u(n,[{key:"_applyAspect",value:function(t){return this._aspectConversion.applyAspect(t)||d(s(n.prototype),"_applyAspect",this).call(this,t)}}]),n}(Fi),zi={applyTo:function(t){return di(t,Pi)}},Pi=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"_applyAspect",value:function(t){return t===zi?di(this,n,this):d(s(n.prototype),"_applyAspect",this).call(this,t)}}],[{key:vi,get:function(){return zi}}]),n}(Mi),Ki=function(){function t(){r(this,t)}return u(t,[{key:xt,value:function(){return this.on()}},{key:dt,value:function(){return this.read()}}]),t}(),Ui={applyTo:function(t){return gi(new Ci(t))}},qi=function(){function t(){r(this,t)}return u(t,[{key:xt,value:function(){return this.on()}},{key:dt,value:function(){return this.read()}}],[{key:vi,get:function(){return Ui}}]),t}(),Ci=function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this)))._control=t,e._map=new Map,e._on=new Bt,bt(e._on).needs(e._control),e}return c(n,t),u(n,[{key:"add",value:function(t){var n=this,e=this._map.get(t);if(e)return e;var r=mt((function(){n._map.delete(t),n._on.send([],[t])}));return this._map.set(t,r),this._on.send([t],[]),r.needs(this._control).needs(t.parent)}},{key:"on",value:function(t){return(this.on=this._on.on().F)(t)}},{key:"read",value:function(t){var n=this,e=function(){return n._map.keys()};return(this.read=It(this.on().thru(e),(function(){return[e()]})).F)(t)}}]),n}(qi),$i={applyTo:function(t){return di(t,Ii)}},Ii=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"_applyAspect",value:function(t){return t===$i?di(this,n,this):d(s(n.prototype),"_applyAspect",this).call(this,t)}}],[{key:vi,get:function(){return $i}}]),n}(Mi),Li={applyTo:function(t){return pi(t,Ni,(function(t){return new Yi(t)}))}},Ni=function(){function t(){r(this,t)}return u(t,[{key:xt,value:function(){return this.on()}},{key:dt,value:function(){return this.read()}},{key:"done",value:function(t){return this.own.done(t),this}}],[{key:"hasData",value:function(t){return"off"!==t&&"-"!==t[0]}},{key:vi,get:function(){return Li}}]),t}(),Vi=function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this)))._tracker=en(t?function(t){return null!=t.getAttribute("disabled")?"off":null!=t.getAttribute("readonly")?"ro":"on"}(t.element):"on"),e}return c(n,t),u(n,[{key:"on",value:function(t){return(this.on=this._tracker.on().F)(t)}},{key:kt,get:function(){return bt(this._tracker)}},{key:"it",get:function(){return this._tracker.it},set:function(t){switch(t){case"off":case"ro":case"-on":case"-ro":break;default:t="on"}this._tracker.it=t}}]),n}(tn),Wi=function(){function t(){var n=this;r(this,t),this._all=new Set,this._on=new Bt;var e=It(this._on.on().thru((function(){return n._all})),j(this._all));this.read=e.keepThru((function(t){return Yt(Vt.apply(void 0,_(t)))}),Ji)}return u(t,[{key:"add",value:function(t){var n=this,e=mt((function(){n._all.delete(t),n._on.send()}));return this._all.add(t),this._on.send(),e}}]),t}(),Yi=function(t){function n(t){var e;r(this,n),(e=p(this,s(n).call(this)))._control=t,e._derived=new Wi;var i=t.aspect(Ii);return e.own=new Vi(i),bt(e.own).needs(t),e.derive(t.aspect(qi).read().keepThru_(Bi)),i&&e.read((function(t){return function(t,n){switch(n){case"off":t.setAttribute("disabled","");break;case"ro":case"-ro":t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly","");break;default:t.setAttribute("disabled",""),t.removeAttribute("disabled"),t.setAttribute("readonly",""),t.removeAttribute("readonly")}}(i.element,t)})),e}return c(n,t),u(n,[{key:"read",value:function(t){var n="on";return(this.read=It(Nt({derived:this._derived.read,own:this.own}).thru((function(t){var e,r=g(t.derived,1)[0],i=g(t.own,1)[0];if("off"===i||"off"===r)e="off";else{var u=!1;"-"===i[0]&&(u=!0,i=i.substring(1)),"-"===r[0]&&(u=!0,r=r.substring(1)),e="ro"===r?"ro":i,u&&(e="-"+e)}return n===e?z():D(n=e)})),j(n)).F)(t)}},{key:"on",value:function(t){var n="on";return(this.on=this.read().thru((function(t){var e=n;return e===t?z():D(n=t,e)})).F)(t)}},{key:"derive",value:function(t){return this._derived.add(Lt(gt(t)?t:t(this._control)).tillOff(this._control)).needs(this._control)}}]),n}(Ni);function Bi(t){var n=Array.from(t);if(!n.length)return D("on");var e=n.map((function(t){return t.parent.aspect(Ni)}));return Yt(Vt.apply(void 0,_(e)).keepThru_(Ji))}function Ji(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Gi.apply(void 0,_(B(n)))}function Gi(){for(var t=!1,n=!1,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var u=0,o=r;u<o.length;u++){var a=o[u];switch(a){case"off":return"off";case"ro":t=!0;break;case"-on":n=!0;break;case"-ro":n=!0,t=!0}}return n?t?"-ro":"-on":t?"ro":"on"}var Qi={applyTo:function(t){return pi(t,Zi,(function(t){return Nt({value:t,mode:t.aspect(Ni)}).keepThru((function(t){var n=g(t.value,1)[0],e=g(t.mode,1)[0];return Ni.hasData(e)?D(n):D()}))}))}},Zi=(ai={},(ci={})[vi]=ci[vi]||{},ci[vi].get=function(){return Qi},o(ai,ci),ai),Hi={applyTo:function(t){return di(t,Xi)}},Xi=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"_applyAspect",value:function(t){return t===Hi?di(this,n,this):d(s(n.prototype),"_applyAspect",this).call(this,t)}}],[{key:vi,get:function(){return Hi}}]),n}(Pi),tu=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,[{key:"remove",value:function(t){this.set(t,void 0)}}]),n}(Ki),nu={},eu=function(){function t(n){r(this,t),this._map=n}return u(t,[{key:"get",value:function(t){var n=this._map.get(t);return n&&n[0]}},{key:Symbol.iterator,value:function(){return q(J(this._map.values(),(function(t){return g(t,1)[0]})))}},{key:"entries",value:function(){return q(J(this._map.entries(),(function(t){var n=g(t,2);return[n[0],g(n[1],1)[0]]})))}}]),t}(),ru=function(){function t(n){r(this,t),this._controls=n,this._supply=mt(),this._map=new Map}return u(t,[{key:"set",value:function(t,n,e,r){var i,u=this._map.get(t);if(n){i=mt();var o=this.newEntry(t,n,i),a=!0;u&&(u[0]===n?a=!1:r.push([t,u])),a?(this.modify().set(t,o),e.push([t,o])):this._map.set(t,o)}else i=Ft(),u&&(r.push([t,u]),this.modify().delete(t));return u&&u[1].off(nu),i}},{key:"newEntry",value:function(t,n,e){var r=this;return[n,mt((function(n){n!==nu&&r._controls.remove(t)})).needs(this._supply).needs(e).whenOff((function(t){return e.off(t===nu?void 0:t)}))]}},{key:"modify",value:function(){if(this._shot){var t=new Map;L(this._map.entries(),(function(n){var e=g(n,2),r=e[0],i=e[1];return t.set(r,i)})),this._shot=void 0,this._map=t}return this._map}},{key:"snapshot",value:function(){return this._shot||(this._shot=new eu(this._map))}},{key:"clear",value:function(){var t=this,n=[],e=[];return L(this._map.keys(),(function(r){return t.set(r,void 0,n,e)})),e}}]),t}(),iu=function(t){function e(t){var n;r(this,e),(n=p(this,s(e).call(this)))._group=t,n._updates=new Bt;return n._map=new ru(y(n)),n._map._supply.needs(t.read((function(t){n.read().once((function(n){var e=new Set;L(it(t),(function(t){var r=g(t,2),i=r[0],u=r[1];e.add(i);var o=n.get(i);o&&(o.it=u)})),L(n.entries(),(function(t){var n=g(t,2),r=n[0],i=n[1];e.has(r)||(i.it=void 0)}))}))}))),n}return c(e,t),u(e,[{key:"on",value:function(t){return(this.on=this._updates.on().thru((function(t,n){return D(t.map(uu),n.map(uu))})).F)(t)}},{key:"read",value:function(t){var n=this;return(this.read=It(this._updates.on().thru((function(){return n._map.snapshot()})),(function(){return[n._map.snapshot()]})).F)(t)}},{key:"set",value:function(t,e){var r,i=this,u=this._group,o=[],c=[];return"object"===n(t)?(r=mt(),L(it(t),(function(t){var n=g(t,2),e=n[0],u=n[1];i._map.set(e,u,o,c).needs(r)}))):r=this._map.set(t,e,o,c),(o.length||c.length)&&(this._updates.send(o,c),o.length&&function(){var t;o.forEach((function(n){var e=g(n,2),r=e[0],i=g(e[1],2),o=i[0],c=i[1];o.aspect(qi).add({parent:u}).needs(c).cuts(c);var s=o.it;if(t)t[r]=s;else{var f=u.it;f[r]!==s&&(t=Object.assign(Object.assign({},f),a({},r,s)))}})),t&&(u.it=t);o.forEach((function(t){var n=g(t,2),e=n[0],r=g(n[1],2),i=r[0],o=r[1];i.read().tillOff(o).to((function(t){u.it[e]!==t&&(u.it=Object.assign(Object.assign({},u.it),a({},e,t)))})).cuts(o)}))}()),r}},{key:"clear",value:function(){var t=this._map.clear();t.length&&this._updates.send([],t)}}]),e}(tu);function uu(t){var n=g(t,2);return[n[0],g(n[1],1)[0]]}var ou=function(t){function n(t,e){var i;return r(this,n),(i=p(this,s(n).call(this,e)))._model=en(t),i.controls=new iu(y(i)),bt(y(i)).whenOff((function(){return i.controls.clear()})),i}return c(n,t),u(n,[{key:"on",value:function(t){return(this.on=this._model.on().F)(t)}},{key:"_applyAspect",value:function(t){return t===Zi[vi]?{instance:(e=this,Nt({cs:e.controls,model:e,mode:e.aspect(Ni)}).keepThru_(au)),convertTo:A}:d(s(n.prototype),"_applyAspect",this).call(this,t);var e}},{key:kt,get:function(){return bt(this._model)}},{key:"it",get:function(){return this._model.it},set:function(t){this._model.it=t}}]),n}(Xi);function au(t){var n=g(t.cs,1)[0],e=g(t.model,1)[0],r=g(t.mode,1)[0];if(!Ni.hasData(r))return D();var i={};return L(n.entries(),(function(t){var n=g(t,2),e=n[0],r=n[1];i[e]=r.aspect(Zi)})),Yt(Nt(i).keepThru((function(t){var n=Object.assign({},e);return L(it(t),(function(t){var e=g(t,2),r=e[0],i=g(e[1],1)[0];n[r]=i})),E(n)})))}var cu=Wt();function su(){return cu}function fu(t){return gt(t)?x(Lt(t)):"function"==typeof t?function(n){return Lt(t(n))}:function(n){return n.read().keepThru(function(t,n){return function(){var e=n.validate(t);return null==e?D():Array.isArray(e)?D.apply(void 0,_(e)):D(e)}}(n,t))}}var lu={},hu=function(){function t(n){r(this,t);var e=new Bt,i=new Map,u=new Map,o=A,a=A;this._messages=$t((function(t){var n=Lt(e,j()).to(t).whenOff((function(){o=A,a=A}));a=function(t,e){var r=t.to((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(e.length)u.set(t,e);else if(!u.delete(t))return;o()})).needs(e).whenOff((function(n){n!==lu&&e.off(n),u.delete(t)&&o()}));n.whenOff((function(){return r.off(lu)}))},L(i.entries(),(function(t){var n=g(t,2),e=n[0],r=n[1];return a(e,r)})),o=function(){e.send.apply(e,_(B(u.values(),O)))},u.size&&o()})).share().tillOff(n),this.from=function(t){var e=fu(t)(n),r=mt((function(){i.delete(e)}));return i.set(e,r),a(e,r),r.needs(n)}}return u(t,[{key:dt,value:function(){return this._messages}}]),t}();function vu(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=n.length;return 1===r?n[0]:r?function(t){var e=new hu(t);return n.forEach((function(t){return e.from(t)})),e}:su}var yu={applyTo:function(t){return pi(t,pu,(function(t,n){var e=new _u(t);if(n){var r=n.aspect(pu);e.by(r.read().keepThru((function(t){return D.apply(void 0,_(t.messages()))})))}return e}))}},pu=t("aJ",function(){function t(){r(this,t)}return u(t,[{key:dt,value:function(){return this.read()}}],[{key:vi,get:function(){return yu}}]),t}()),du=a({get ok(){return!0},messages:function(){return[]},has:function(){return!1},hasBut:function(){return!1}},Symbol.iterator,(function(){return[][Symbol.iterator]()})),gu=function(){function t(n){var e=this;r(this,t),this._byCode=new Map,this._all=[],L(n,(function(t){var n=!1;L(it(t),(function(r){var i=g(r,2),u=i[0];if(i[1]){n=!0;var o=e._byCode.get(u);o?o.push(t):e._byCode.set(u,[t])}})),n&&e._all.push(t)}))}return u(t,[{key:"messages",value:function(t){return null==t?this._all:this._byCode.get(t)||[]}},{key:"has",value:function(t){return null==t||this._byCode.has(t)}},{key:"hasBut",value:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this._all.some((function(t){return n.every((function(n){return!t[n]}))}))}},{key:Symbol.iterator,value:function(){return this._all[Symbol.iterator]()}},{key:"ok",get:function(){return!this._all.length}}]),t}();function ku(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.length?new gu(n):du}var _u=function(t){function n(t){var e;r(this,n),(e=p(this,s(n).call(this)))._messages=new hu(t);var i=t.aspect(Pi);return i&&e._messages.from(function(t){return t.controls.read().keepThru(bu,mu)}(i)),e}return c(n,t),u(n,[{key:"by",value:function(){return this._messages.from(vu.apply(void 0,arguments))}},{key:"read",value:function(t){return(this.read=Lt(this._messages).keepThru(ku).F)(t)}}]),n}(pu);function bu(t){return Yt(Vt.apply(void 0,_(J(t,(function(t){return t.aspect(pu)})))))}function mu(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return D.apply(void 0,_(B(J(n,(function(t){return t[0]})))))}var wu=function(t){function n(t,e){var i,u=e.aspects,o=e.get,a=e.set;r(this,n),(i=p(this,s(n).call(this,{aspects:u}))).element=t,i._input=new Bt;var c=y(i);i._get=o,i._set=a,i._value=i.it;var f=i._update=function(t,n){return l({value:t},n)};function l(t,n){for(;;){c._value=t.value;var e=void 0;c._update=function(n,r){e=[Object.assign(Object.assign({},t),{value:n}),r]};try{c._input.send(t,n)}finally{c._update=f}if(!e)break;var r=g(e,2);t=r[0],n=r[1]}}return i.events=new Pn(t),bt(i.events).needs(y(i)),i.listenForInput((function(t){return l(t,i._value)})),i}return c(n,t),u(n,[{key:"input",value:function(t){var n=this;return(this.input=It(this._input.on().thru(O),(function(){return[{value:n.it}]})).F)(t)}},{key:"on",value:function(t){return(this.on=this._input.on().thru((function(t,n){var e=t.value;return e===n?z():D(e,n)})).F)(t)}},{key:"listenForInput",value:function(t){var n=this,e=function(e){return t({value:n.it,event:e})};this.events.on("input").to(e),this.events.on("change").to(e)}},{key:kt,get:function(){return bt(this._input)}},{key:"it",get:function(){return this._get()},set:function(t){var n=this.it;t!==n&&(this._set(t),this._update(this._get(),n))}}]),n}(Ii);var Ou={applyTo:function(t){return pi(t,Au,(function(t){var n=t.aspect(Ii);return n&&new Su(n)}))}},Au=function(t){function n(){return r(this,n),p(this,s(n).apply(this,arguments))}return c(n,t),u(n,null,[{key:vi,get:function(){return Ou}}]),n}(tn),Su=function(t){function n(t){var e;r(this,n),e=p(this,s(n).call(this));var i=t.element,u=t.events,o=i.getRootNode?i.getRootNode():i.ownerDocument;return e._it=en(!!o&&o.activeElement===i),bt(y(e)).needs(t),u.on("focus").to((function(){return e._it.it=!0})),u.on("blur").to((function(){return e._it.it=!1})),e.on({receive:function(t,n){t.onRecurrent(A),n?i.focus():i.blur()}}),e}return c(n,t),u(n,[{key:"on",value:function(t){return(this.on=this._it.on().F)(t)}},{key:kt,get:function(){return bt(this._it)}},{key:"it",get:function(){return this._it.it},set:function(t){this._it.it=t}}]),n}(Au),xu={applyTo:function(t){return pi(t,ju,(function(t){var n=t.aspect(Pi);return null!=n?new Ru(n):new Fu(t)}))}},ju=function(){function t(){r(this,t)}return u(t,[{key:dt,value:function(){return this.read()}}],[{key:vi,get:function(){return xu}}]),t}(),Tu={hasFocus:!1,touched:!1,edited:!1},Fu=function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this)))._flags=en(Tu),bt(e._flags).needs(t),e._flags.by(function(t,n){var e=n.aspect(Ii);return Nt({hasFocus:n.aspect(Au)||Wt(!1),edited:e?e.input().keepThru((function(t){return!!t.event})):Wt(!1)}).keepThru((function(n){var e=g(n.hasFocus,1)[0],r=g(n.edited,1)[0];return function(t,n,e){t=n?Object.assign(Object.assign({},t),{hasFocus:n,touched:!0}):Object.assign(Object.assign({},t),{hasFocus:n});e&&(t=Object.assign(Object.assign({},t),{edited:e,touched:!0}));return t}(t.it,e,r)}))}(e._flags,t)),e}return c(n,t),u(n,[{key:"read",value:function(t){return(this.read=this._flags.read().F)(t)}},{key:"markTouched",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._flags.it;return t?n.touched||(this._flags.it=Object.assign(Object.assign({},n),{touched:t})):n.touched&&(this._flags.it=Object.assign(Object.assign({},n),{touched:n.hasFocus,edited:!1})),this}},{key:"markEdited",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._flags.it;return t?n.edited||(this._flags.it=Object.assign(Object.assign({},n),{touched:!0,edited:t})):n.edited&&(this._flags.it=Object.assign(Object.assign({},n),{edited:t})),this}}]),n}(ju);var Ru=function(t){function n(t){var e;return r(this,n),(e=p(this,s(n).call(this)))._container=t,e}return c(n,t),u(n,[{key:"read",value:function(t){return(this.read=(n=this._container,n.controls.read().tillOff(n).keepThru_((function(t){return Yt(Vt.apply(void 0,_(function(t){return J(t,(function(t){return t.aspect(ju)}))}(t))))}),Eu)).F)(t);var n}},{key:"markEdited",value:function(t){return this._container.controls.read().once((function(n){return L(n,(function(n){return n.aspect(ju).markEdited(t)}))})),this}},{key:"markTouched",value:function(t){return this._container.controls.read().once((function(n){return L(n,(function(n){return n.aspect(ju).markTouched(t)}))})),this}}]),n}(ju);function Eu(){for(var t={hasFocus:!1,touched:!1,edited:!1},n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return L(e,(function(n){var e=g(n,1)[0],r=e.hasFocus,i=e.touched,u=e.edited;i&&(t.touched=!0),r&&(t.hasFocus=t.touched=!0),u&&(t.edited=t.touched=!0)})),t}var Du={applyTo:function(t){var n=t.aspect(Ii);return n?gi(n.element):yi}},Mu=t("d",(si={},(fi={})[vi]=fi[vi]||{},fi[vi].get=function(){return Du},a(si,"to",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{applyAspect:function(n){return n===Du?gi(t):void 0}}})),o(si,fi),si)),zu={applyTo:function(t){return{instance:new qu(t),convertTo:A}}},Pu=t("e",function(){function t(){r(this,t)}return u(t,[{key:dt,value:function(){return this.read()}}],[{key:vi,get:function(){return zu}}]),t}()),Ku=Symbol("reason");function Uu(t){return t&&"object"===n(t)&&Ku in t}var qu=function(t){function n(t){var e;r(this,n),(e=p(this,s(n).call(this)))._control=t,e._sources=en([new Map]);var i=t.aspect(Mu);return i&&e.applyTo(i,e.schedule),bt(t).whenOff((function(t){return e.done(t)})),e}return c(n,t),u(n,[{key:"read",value:function(t){return(this.read=this._sources.read().tillOff(this._control).keepThru_((function(t){var n=g(t,1)[0];return Yt(Vt.apply(void 0,_(n.keys())))}),(function(){for(var t={},n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.forEach((function(n){return Cu(g(n,1)[0],t)})),t})).F)(t)}},{key:"track",value:function(t){var n=this;return(this.track=$t((function(t){t.supply.needs(n._control);var e=new li,r=new St,i=!1;return r.on(t),n.read((function(t){var n=new Set(e),u=[];L(Y(it(t),(function(t){return!!g(t,2)[1]})),(function(t){var e=g(t,1)[0];n.delete(e)||u.push(e)})),(!i||u.length||n.size)&&(e.delta(u,n),i=!0,e.redelta((function(t,n){return r.send(t,n)})).undelta())}))})).F)(t)}},{key:"specs",value:function(t){return Lt(gt(t)?t:t(this._control))}},{key:"resolve",value:function(t){var n=this._control.aspect(bi);return this.specs(t).keepThru((function(){for(var t={},e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach((function(e){ln(e)?t[sn.name(e,n)]=!0:Cu(e,t)})),t}))}},{key:"add",value:function(t){var n=this,e=bt(this._control);if(e.isOff)return e;var r=mt(),i=$t((function(e){var i=n.resolve(t).to({receive:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.receive.apply(e,[t].concat(r))}});e.supply.whenOff((function(t){r.off(a({},Ku,t))})),r.needs(i).whenOff((function(t){Uu(t)&&i.off(t[Ku])}))})).share(),u=g(this._sources.it,1)[0];return u.set(i,r),r.whenOff((function(t){Uu(t)||(u.delete(i),n._sources.it=[u])})),this._sources.it=[u],r.needs(e)}},{key:"applyTo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$u(this._control,t),e=t.classList,r=new li,i=function(){r.redelta((function(t,n){e.remove.apply(e,_(n)),e.add.apply(e,_(t))})).undelta()};return this.track((function(t,e){r.delta(t,e),n(i)})).whenOff((function(){r.size&&(r.clear(),n(i))}))}},{key:"done",value:function(t){return L(this._sources.it[0].values(),(function(n){return n.off(t)})),this._sources.done(t),this}},{key:"schedule",get:function(){return this._schedule||(this._schedule=$u(this._control,this._control.aspect(Mu)))}}]),n}(Pu);function Cu(t,n){L(it(t),(function(t){var e=g(t,2),r=e[0],i=e[1];null!=i&&(n[r]=i)}))}function $u(t,n){return t.aspect(wi)({node:n})}var Iu=[["has-error",ki]];function Lu(t){return!t.ok}}}}));//# sourceMappingURL=lib.ebf0e7c0.s.js.map
