System.register(["./lib.e9472dd6.s.js"],(function(e){"use strict";var t,n,r,u,i,o,a,c,f,s,h,l,v,p,d,y,g,m,w,k,b,_,x,O,S,R,C,D,A,E,j,P,T,U,q,N,L,M,I,z,B,K,V,F,H,$,Q,W,G,J,X,Y,Z,ee,te,ne,re,ue,ie,oe,ae,ce,fe,se,he,le,ve,pe,de,ye,ge,me,we,ke,be,_e,xe,Oe,Se,Re;return{setters:[function(e){t=e._,n=e.a,r=e.b,u=e.c,i=e.S,o=e.d,a=e.e,c=e.f,f=e.C,s=e.g,h=e.i,l=e.h,v=e.j,p=e.t,d=e.N,y=e.F,g=e.n,m=e.k,w=e.A,k=e.l,b=e.m,_=e.o,x=e.p,O=e.q,S=e.r,R=e.s,C=e.u,D=e.v,A=e.w,E=e.x,j=e.y,P=e.z,T=e.B,U=e.D,q=e.E,N=e.V,L=e.G,M=e.H,I=e.I,z=e.J,B=e.K,K=e.L,V=e.M,F=e.O,H=e.P,$=e.Q,Q=e.R,W=e.T,G=e.U,J=e.W,X=e.X,Y=e.Y,Z=e.Z,ee=e.$,te=e.a0,ne=e.a1,re=e.a2,ue=e.a3,ie=e.a4,oe=e.a5,ae=e.a6,ce=e.a7,fe=e.a8,se=e.a9,he=e.aa,le=e.ab,ve=e.ac,pe=e.ad,de=e.ae,ye=e.af,ge=e.ag,me=e.ah,we=e.ai,ke=e.aj,be=e.ak,_e=e.al,xe=e.am,Oe=e.an,Se=e.ao,Re=e.ap}],execute:function(){e({A:function(e){return tt({feature:{needs:sn},define:function(t){var n=t.get(on),r=function(e){"string"==typeof e?n(e,rn(e)):Object.keys(e).forEach((function(t){n(t,rn(t,e[t]))}))};Ne(e)?e.forEach(r):r(e)}})},C:tt,F:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return $e.define.apply($e,[e].concat(t))}},H:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handle?e.handle.bind(e):Or,n=new Le(e.event||"click");return tt({feature:{needs:vr},define:function(e){e.whenComponent((function(e){e.whenOn((function(r){var u=e.get(Yn);n.forEach((function(n){e.on(n)((function(n){return u.read.once((function(r){return t({event:n,page:r,context:e,navigation:u})}))})).needs(r)}))}))}))}})},I:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onResponse?e.onResponse.bind(e):P;return tt({feature:{needs:Fr},define:function(n){n.whenComponent((function(n){var r=n.get(Pe).document,u=n.get(qe)(),i=n.get(Yn),o=function(){var t=e.fragment;if(t)return t;var r=n.element,u=r.id,i=r.tagName;return u?{id:u}:{tag:i}};n.whenOn((function(e){var a=r.createRange();a.selectNodeContents(n.contentRoot),i.read.once((function(i){i.put(qr,{fragment:o(),receiver:{supply:e,receive:function(e,i){return function(e){e.ok?u((function(){a.deleteContents();var u=r.createDocumentFragment(),i=e.fragment;i&&(Rr(i,u),a.insertNode(u)),t({context:n,range:a,response:e})})):u((function(){return t({context:n,range:a,response:e})}))}(i)}}})}))}))}))}})},P:function(e){return function(t,n){var r=t.constructor;et.define(r,{setup:function(t){t.whenComponent((function(t){t.whenReady((function(r){var u=r.component,i=u[n];uu(t,"function"==typeof i?i.bind(u):i,e)}))}))},feature:{needs:[ru]}})}},R:function(e){return function(t,n){var r=t.constructor;et.define(r,{feature:{needs:pn},define:function(t){t.whenComponent((function(t){t.whenReady((function(){var r=t.component,u=r[n].bind(r);yn(t,u,e)}))}))}})}},a:function(e){return tt({define:function(t){t.whenComponent((function(t){var n=t.get(Nn).up;x({parent:n.keep.thru_((function(e){return e?S(e.get(yu)):fe({})})),aspects:t.get(du)}).keep.thru_((function(n){var r=l(n.parent,1)[0],u=l(n.aspects,1)[0];if(r.control){var i=e({control:r,context:t,aspects:u});if(i)return i instanceof _e?O(i):S(i)}return O()})).consume((function(e,n){if(e){var r=gu(t,e);return(n||I(e)).needs(r),r}}))}))}})},d:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.select,n=void 0===t?"a":t,r=e.pick,u=void 0===r?{all:!0,deep:!0}:r;return tt({feature:{needs:[Jn,vr]},define:function(t){t.whenComponent((function(t){var r=xr(t,e),i=yr(e),o=t.get(Yn),a=t.get(Ln);t.whenOn((function(e){var c=pr;o.read.consume((function(e){return a.select(n,u).read.keep.thru_((function(n){return S(R.apply(void 0,m(n.map((function(n){return i({node:n,context:t,page:e})})))))})).consume((function(){for(var n=arguments.length,u=new Array(n),i=0;i<n;i++)u[i]=arguments[i];var o=dr(u);return o?o!==c.node&&(c=r({node:o,context:t,page:e})):c=pr,c.supply()}))})).needs(e)}))}))}})},f:function(){for(var e=Ot.create(),t=en(e),n=t.bootstrapContext,r=t.complete,u=arguments.length,i=new Array(u),o=0;o<u;o++)i[o]=arguments[o];var a=1===i.length?i[0]:Zt(i);return n.get(Yt).request(a),n.get(It.of(a))((function(e){e.init().then(r)})),n},h:function(e){return function(t,n,r){var u=function(e,t,n){var r,u;if("string"==typeof n)u=rn(r=n);else{if(n&&n.name)r=n.name;else{if("string"!=typeof t)throw new TypeError("Attribute name is required, as property key is not a string: "+"".concat(e.constructor.name,".").concat(t.toString()));r=t}u=rn(r,n&&n.updateState)}return{name:r,updateState:u}}(t,n,e),i=u.name,o=u.updateState,a=t.constructor;$e.define(a,{needs:sn}),et.define(a,{define:function(e){e.get(on)(i,o)}});var c={get:function(){return at.of(this).element.getAttribute(i)},set:function(e){at.of(this).element.setAttribute(i,e)}};if(null!=r)return c;Object.defineProperty(t,n,c)}},i:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;return tt({setup:function(t){t.perComponent({a:gn,by:function(t){return t.get(wn)(t,e)}}),t.perComponent({a:ut,by:function(e){return e.get(gn,{or:null})}})},feature:{needs:bn}})},k:gu,t:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nn(t),i=e.element,f=e.get(ln).track(r),s=U(),h=f.onUpdate.thru((function(e,t,n){return O(t,n)})).tillOff(s),l=function(e){function r(){return o(this,r),a(this,c(r).apply(this,arguments))}return n(r,e),u(r,[{key:"on",get:function(){return h}},{key:q,get:function(){return s}},{key:"it",get:function(){return i.getAttribute(t)},set:function(e){s.isOff||(null==e?i.removeAttribute(t):i.setAttribute(t,e))}}]),r}(N);return new l}});var Ce=new i("bootstrap-context"),De=e("B",function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,null,[{key:f,get:function(){return Ce}}]),t}(s));function Ae(e){return function(t,n){var r=t.get(De);return t===r?e(r,n):r.get(n)}}var Ee=new i("component-factory"),je=function(){function e(){o(this,e)}return u(e,[{key:"connectTo",value:function(e){var t=this.mountTo(e);return t.connected=!0,t}}],[{key:f,get:function(){return Ee}}]),e}(),Pe=e("g",new i("window",{byDefault:function(){return window}})),Te=new i("bootstrap-root",{byDefault:function(e){return e.get(Pe).document.body}}),Ue=new i("default-namespace-aliaser"),qe=new y("default-render-scheduler",{byDefault:Ae((function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(Object.assign(Object.assign({},t),{window:t.window||e.get(Pe)}))}}))});function Ne(e){return Array.isArray(e)}var Le=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this))).items=null==e?new Set:Ne(e)?new Set(e):new Set([e]),n}return n(t,e),u(t,[{key:Symbol.iterator,value:function(){return this.items[Symbol.iterator]()}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return e.items.add(t)})),this}},{key:"merge",value:function(e){return null==e?this:Ne(e)?this.add.apply(this,m(e)):this.add(e)}},{key:"value",get:function(){switch(this.items.size){case 0:return;case 1:return this.items[Symbol.iterator]().next().value;default:return m(this.items)}}},{key:"size",get:function(){return this.items.size}}]),t}(w);function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=Object.getPrototypeOf(e.prototype);if(null!=n){var r=n.constructor;return t(r)?r:Me(r,t)}}function Ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return t};return e?t?function(){for(var r=arguments.length,u=new Array(r),i=0;i<r;i++)u[i]=arguments[i];return n(e.apply(this,u),t.apply(this,u))}:e:t}function ze(e){return e.nodeType===Node.ELEMENT_NODE}var Be=function(){function e(t){o(this,e),this.symbol=t}return u(e,[{key:"own",value:function(e){return e.hasOwnProperty(this.symbol)?e[this.symbol]:void 0}},{key:"of",value:function(e){var t=this.own(e),n=Me(e),r=n&&this.of(n);return t?r?this.merge([r,t]):t:r}},{key:"define",value:function(e,t){var n=this,r=this.own(e),u=C(t,(function(t){return n.meta(t,e)})),i=this.merge(r?K([[r],u]):u);return Object.defineProperty(e,this.symbol,{configurable:!0,value:i}),e}}]),e}(),Ke=function(){function e(){var t=this;o(this,e),this.promise=new Promise((function(e,n){t._resolve=e,t._reject=n}))}return u(e,[{key:"resolve",value:function(e){this._resolve(e)}},{key:"reject",value:function(e){this._reject(e)}}]),e}(),Ve=Symbol("feature-def"),Fe=new(function(e){function t(){return o(this,t),a(this,c(t).call(this,Ve))}return n(t,e),u(t,[{key:"merge",value:function(e){return h(e,(function(e,t){return{needs:new Le(e.needs).merge(t.needs).value,has:new Le(e.has).merge(t.has).value,setup:Ie(e.setup,t.setup),init:Ie(e.init,t.init)}}),{})}},{key:"meta",value:function(e,t){var n=e[Ve];return null==n?e:this.meta("function"==typeof n?e[Ve](t):n,t)}}]),t}(Be)),He=t({},Ve,(function(){return{}})),$e={of:function(e){return Fe.of(e)||{}},for:function(e,t){return Fe.meta(t,e)},merge:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fe.merge(t)},all:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h(n,(function(e,n){return t({},Ve,(function(t){return $e.merge($e.for(t,e),$e.for(t,n))}))}),He)},define:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fe.define(e,n)}};var Qe=new i("feature-context"),We=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:"whenDefined",value:function(e){return this.get(De).whenDefined(e)}},{key:"load",value:function(e){return this.get(De).load(e)}}],[{key:f,get:function(){return Qe}}]),t}(De),Ge=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this,"Circular feature needs: "+e.reduce((function(e,t){var n=l(t,3),r=n[0],u=n[1],i=n[2];return(e||r.name)+" ".concat(u," ").concat(i.name)}),"")))).needs=e,n}return n(t,e),t}(r(Error)),Je=function(){function e(){o(this,e)}return u(e,[{key:V,get:function(){return this.read}}]),e}(),Xe=Symbol("component-def"),Ye=new(function(e){function t(){return o(this,t),a(this,c(t).call(this,Xe))}return n(t,e),u(t,[{key:"merge",value:function(e){return h(e,(function(e,t){return Object.assign(Object.assign(Object.assign({},e),t),{setup:Ie(e.setup,t.setup),define:Ie(e.define,t.define),feature:e.feature?t.feature?$e.merge(e.feature,t.feature):e.feature:t.feature})}),{})}},{key:"meta",value:function(e,t){var n=e[Xe];return null!=n?this.meta("function"==typeof n?e[Xe](t):n,t):null!=e[Ve]?{feature:$e.for(t,e)}:L(e)?{name:e}:e}}]),t}(Be)),Ze=t({},Xe,(function(){return{}})),et={of:function(e){return Ye.of(e)||{}},for:function(e,t){return Ye.meta(t,e)},merge:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ye.merge(t)},all:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h(n,(function(e,n){return t({},Xe,(function(t){return et.merge(et.for(t,e),et.for(t,n))}))}),Ze)},define:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ye.define(e,n)}};function tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e){return et.define.apply(et,[e].concat(t))},u=r;return u[Xe]=function(){return et.all.apply(et,t)},r}var nt=new i("component-context"),rt=new i("component-event-dispatcher",{byDefault:function(e){var t=e.get(nt),n=new M(t.element);return I(n).needs(t),{dispatch:function(e){return n.dispatch(e)},on:function(e){return n.on(e)}}}}),ut=new i("content-root",{byDefault:function(e){return e.get(nt).element}}),it=new y("state-updater",{byDefault:z(P)}),ot=Symbol("component-context"),at=function(e){function t(){var e;return o(this,t),(e=a(this,c(t).apply(this,arguments))).updateState=ct.bind(k(e)),e}return n(t,e),u(t,[{key:"on",value:function(e){return this.get(rt).on(e)}},{key:"dispatchEvent",value:function(e){this.get(rt).dispatch(e)}},{key:"contentRoot",get:function(){return this.get(ut)}}],[{key:"of",value:function(e){var t=e[ot];if(!t)throw TypeError("No component context found in ".concat(e));return t}},{key:f,get:function(){return nt}}]),t}(s);function ct(e,t,n){this.get(it)(e,t,n)}var ft=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:"context",get:function(){return at.of(this.target)}}]),t}(r(Event)),st=function(){function e(){o(this,e)}return u(e,[{key:"component",get:function(){return this.context.component}},{key:"element",get:function(){return this.context.element}}]),e}();function ht(e){return e[ot]}var lt=new(function(e){function t(){var e;return o(this,t),(e=a(this,c(t).call(this,"element-adapter"))).upKey=e.createUpKey((function(e){return e.seed.keep.thru((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var u=n.reduce((function(e,t){return function(n){return e(n)||t(n)}}),ht),i=function(){return _(ht)};return u!==ht?u:S(e.byDefault(i)||i())}))})),e}return n(t,e),u(t,[{key:"grow",value:function(e){var t;return e.context.get(this.upKey,"or"in e?{or:null!=e.or?_(e.or):e.or}:void 0)((function(e){return t=e})),function(e){return t(e)}}}]),t}(A)),vt=new y("element-observer",{byDefault:Ae((function(e){var t=e.get(lt),i=function(e){function r(e){var n;return o(this,r),n=a(this,c(r).call(this,(function(r){r.forEach((function(e){$(Q(e.removedNodes),(function(e){var t;return null===(t=function(e){var t;return null===(t=e[ot])||void 0===t?void 0:t.mount}(e))||void 0===t?void 0:t.checkConnected()})),$(E(Q(e.addedNodes),ze),(function(e){var n,r;return null===(r=null===(n=t(e))||void 0===n?void 0:n.mount)||void 0===r?void 0:r.checkConnected()}))})),e(r,k(n))})))}return n(r,e),u(r,[{key:"observe",value:function(e,t){W(c(r.prototype),"observe",this).call(this,e,Object.assign(Object.assign({},t),{childList:!0}))}}]),r}(r(MutationObserver));return function(e){return new i(e)}}))});var pt=Symbol("component-factory");function dt(e){var t=e[pt];if(!t)throw new TypeError("Component is not defined: ".concat(e));return t}var yt=new i("custom-elements",{byDefault:function(e){var t=e.get(Pe).customElements,r=e.get(Ue);return new(function(e){function i(){return o(this,i),a(this,c(i).apply(this,arguments))}return n(i,e),u(i,[{key:"define",value:function(e,n){if(L(e))t.define(X.name(e,r),n);else{var u=dt(e).elementDef,i=u.name,o=u.extend;i?o&&o.name?t.define(X.name(i,r),n,{extends:o.name}):t.define(X.name(i,r),n):wt(e).resolve(void 0)}}},{key:"whenDefined",value:function(e){if(L(e))return t.whenDefined(X.name(e,r));var n=dt(e).elementDef.name;return n?t.whenDefined(X.name(n,r)):wt(e).promise}}]),i}(gt))}}),gt=function(){function e(){o(this,e)}return u(e,null,[{key:f,get:function(){return yt}}]),e}();var mt=Symbol("component-resolver");function wt(e){return e[mt]||(e[mt]=new Ke)}var kt=new i("definition-context"),bt=new i("element-def",{byDefault:function(e){var t=e.get(kt).componentType,n=et.of(t),r=n.name,u=n.extend,i={get type(){return u&&u.type||e.get(Pe).HTMLElement},get name(){return u&&u.name}};return{get name(){return r},get extend(){return i}}}}),_t=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:"elementDef",get:function(){return this.get(bt)}}],[{key:f,get:function(){return kt}}]),t}(s),xt=new i("bootstrap-context-registry"),Ot=function(e){function t(){var e;return o(this,t),(e=a(this,c(t).call(this))).provide({a:t,is:k(e)}),e.values=e.newValues(),e}return n(t,e),u(t,null,[{key:"create",value:function(){return new t}},{key:f,get:function(){return xt}}]),t}(v),St=new i("component-context-registry",{byDefault:Ae((function(){return new Rt}))}),Rt=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,null,[{key:f,get:function(){return St}}]),t}(v),Ct=new i("definition-context-registry",{byDefault:Ae((function(e){return new Dt(e)}))}),Dt=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,null,[{key:f,get:function(){return Ct}}]),t}(v);var At=Symbol("post-def-setup");function Et(e){if(e.hasOwnProperty(At))return e[At];var t=p(),n=new G,r=t.read.thru((function(e){return e?O(e):D()})),u=J(r,n),i=Me(e,(function(e){return Xe in e}));if(i){var o=Et(i);u((function(e){return o.send(e)}))}var a={on:u,send:function(e){n.send(e)},setup:function(e){t.it=e}};return Object.defineProperty(e,At,{value:a}),a}var jt=function e(){o(this,e);var t=p(0),n=new G;this.onCreated=H((function(e){var r=t.it+1;n.on({supply:e.supply,receive:function(t,n,u){u<r&&e.receive({onRecurrent:function(e){t.onRecurrent((function(t){return e(t)}))}},n)}}),++t.it})),this.readNotifier=t.read.keep.thru_((function(e){return function(t,r){return n.send(t,r),e}}))},Pt=new i("element-builder",{byDefault:Ae((function(e){var t=e.get(Dt),r=e.get(Rt),i=new G,f=new G;return{definitions:i,components:f,buildElement:function(e){var f,h,l,v,d=et.of(e),y=new jt,g=p(!1),m=g.read.thru((function(e){return e?O():D()}));function w(){return r.append(l)}var b=new(function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:"mountTo",value:function(e){if(e[ot])throw new Error("Element ".concat(e," already bound to component"));var t=s({definitionContext:v,whenComponent:y,registry:w(),element:e,elementSuper:function(t){return e[t]},createMount:function(t){return new(function(r){function i(){return o(this,i),a(this,c(i).apply(this,arguments))}return n(i,r),u(i,[{key:"checkConnected",value:function(){var t=e,n=t.ownerDocument;return this.connected=null!=n&&n.contains(t)}},{key:"context",get:function(){return t}},{key:"connected",get:function(){return 3===Ut(e).it},set:function(t){Ut(e).it=t?3:2}}]),i}(st))}}).mount;return t.checkConnected(),qt(t.context),t}},{key:"componentType",get:function(){return v.componentType}},{key:"elementType",get:function(){return v.elementType}},{key:"elementDef",get:function(){return v.elementDef}}]),t}(je));v=new(function(r){function i(){var n,r,u;o(this,i),n=a(this,c(i).call(this));var f=k(n);n.whenReady=m.thru_(z(k(n))).once;var s=new Dt(t.seedIn(k(n)));s.provide({a:_t,is:k(n)}),s.provide({a:je,is:b}),n.get=s.newValues().get,l=new Rt(s.seedIn(k(n)));var h={get componentType(){return e},get whenReady(){return f.whenReady},get whenComponent(){return f.whenComponent},perDefinition:function(e){return s.provide(e)},perComponent:function(e){return l.provide(e)}};return null===(u=(r=d).setup)||void 0===u||u.call(r,h),Et(e).setup(h),n}return n(i,r),u(i,[{key:"perComponent",value:function(e){return l.provide(e)}},{key:"componentType",get:function(){return e}},{key:"whenComponent",get:function(){return y.onCreated}},{key:"elementType",get:function(){throw new Error("Custom element class is not constructed yet. Consider to use a `whenReady()` callback")}}]),i}(_t)),null===(h=(f=d).define)||void 0===h||h.call(f,v),i.send(v);var _=function(e,t,r){return function(i){function f(){var n;return o(this,f),n=a(this,c(f).call(this)),qt(s({definitionContext:e,whenComponent:t,registry:r,element:k(n),createMount:P,elementSuper:function(e){return W(c(f.prototype),e,k(n))}})),n}return n(f,i),u(f,[{key:"connectedCallback",value:function(){Ut(this).it=3}},{key:"disconnectedCallback",value:function(){Ut(this).it=2}}]),f}(e.get(bt).extend.type)}(v,y,w());return Object.defineProperty(v,"elementType",{configurable:!0,enumerable:!0,value:_}),g.it=!0,b}};function s(e){var t=e.definitionContext,r=e.whenComponent,i=e.registry,s=e.element,h=e.createMount,l=e.elementSuper,v=p(0),d=p();v.on(P).whenOff((function(e){return d.it=[e]}));var y,g=d.read.thru((function(e){return e?O(e[0]):D()})).once,m=v.read.thru_((function(e){return 2===e?O():D()})),w=v.read.thru_((function(e){if(3!==e)return D();var t=U();return m.once((function(){return t.off()})),O(t)})),b=i.newValues(),_=new(function(e){function r(){var e;o(this,r),(e=a(this,c(r).call(this))).get=b.get,e.elementSuper=l;var t=v.read.thru((function(t){return t?O(k(e)):D()}));return e.whenReady=t.once,e}return n(r,e),u(r,[{key:"destroy",value:function(e){v.done(e)}},{key:"componentType",get:function(){return t.componentType}},{key:"element",get:function(){return s}},{key:"component",get:function(){throw new Error("The component is not constructed yet. Consider to use a `whenReady()` callback")}},{key:"mount",get:function(){return y||(y=h(this))}},{key:"connected",get:function(){return 3===v.it}},{key:q,get:function(){return I(v)}},{key:"whenOn",get:function(){return w}},{key:"whenOff",get:function(){return m}},{key:"whenDestroyed",get:function(){return g}}]),r}(at)),x=0;_.whenDestroyed((function(){return function(e){var t=e.element,n=e.mount;n&&(n.connected=!1);var r=t.parentElement;r&&r.removeChild(t)}(_)})),i.provide({a:at,is:_}),Object.defineProperty(s,ot,{value:_}),Object.defineProperty(s,Tt,{writable:!0,value:v}),r.readNotifier.once((function(e){return x=e(_,x)})),_.whenOn((function(e){r.readNotifier({supply:e,receive:function(e,t){x=t(_,x)}})})),f.send(_);var S=function(e,t){var n=e.prototype,r=n[ot];n[ot]=t;try{var u=new e(t);return Object.defineProperty(u,ot,{value:t}),u}finally{n[ot]=r}}(t.componentType,_);return Object.defineProperty(_,"component",{configurable:!0,enumerable:!0,value:S}),v.it=1,_}}))}),Tt=Symbol("component-status");function Ut(e){return e[Tt]}function qt(e){e.whenOn.once((function(){return e.dispatchEvent(new ft("wesib:component",{bubbles:!0}))}))}var Nt=z(P);var Lt=function(){function e(t){var n=this;o(this,e),this._context=t,this._definitionQueue=[],t.whenReady((function(){n._definitionQueue.forEach((function(e){return e()})),delete n._definitionQueue}))}return u(e,[{key:"define",value:function(e){var t=this;this._definitionQueue.push((function(){var n=t._context.get(Pt).buildElement(e);e[pt]=n,t.customElements.define(e,n.elementType)}))}},{key:"customElements",get:function(){return this._context.get(gt)}}]),e}(),Mt=Symbol("feature-key"),It=function(e){function t(e){return o(this,t),a(this,c(t).call(this,"feature:".concat(e.name)))}return n(t,e),u(t,[{key:"upKey",get:function(){return this}}],[{key:"of",value:function(e){return e.hasOwnProperty(Mt)?e[Mt]:e[Mt]=new t(e)}}]),u(t,[{key:"grow",value:function(e){return Bt(e.context.get(De),e.seed.keep.thru(zt))}}]),t}(A);function zt(){for(var e,t=!1,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];for(var i=0,o=r;i<o.length;i++){var a=o[i];switch(a[1]){case"is":t=!0,e||(e=a);break;case"has":e=a;break;case"needs":t=!0}}return t?e:void 0}function Bt(e,t){return b((function(n){var r,u=_(),i=Promise.resolve("idle");return x({clause:t,deps:Kt(e,t)}).keep.thru_((function(t){var n=l(t.clause,1)[0],o=t.deps;if(!n)return O();var a=l(n,3),c=a[0],f=a[2];if(c.feature===r)return S(u);if(f!==(r=c.feature))return S(u=e.get(It.of(r)).keep.thru_((function(e){return e.to(i),i=e.stage,e})));var s=new Ft(e,c,o).to(i),h=_(s);return S(u=b((function(e){return h(e).whenOff((function(){i=s.unload()}))})).share())}))(n)})).keep.thru((n=null,function(e){return n===e?D():(n=e,e?O(e):O())}));var n}function Kt(e,t){return t.keep.thru_((function(t){if(!t)return O();var n=l(t,1)[0].def,r=new Le(n.needs);return r.size?S(R.apply(void 0,m(C(r,(function(t){return e.get(It.of(t))})))).keep.thru_(Vt)):O()}))}function Vt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return O.apply(void 0,m(E(C(t,(function(e){return e[0]})),B)))}var Ft=function(){function e(t,n,r){var u=this;o(this,e),this.bsContext=t,this.request=n,this.deps=r,this.state=p(!1),this.down=new Promise((function(e){return u._down=e})),this._stage=Promise.resolve(new $t(this))}var t,n,r;return u(e,[{key:"to",value:function(e){var t=this._stage;return this._stage=e.then((function(e){return t.then((function(t){return t[e]()}))})),this}},{key:"setup",value:(r=F(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._stage=this._stage.then((function(e){return e.setup()}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"init",value:(n=F(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._stage=this._stage.then((function(e){return e.init()}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"unload",value:(t=F(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._stage,delete this._stage,e.next=4,t;case 4:return n=e.sent,e.next=7,n.stop();case 7:return r=e.sent,this._down(),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"stage",get:function(){return this._stage.then((function(e){return e.after}))}},{key:"ready",get:function(){return this.state.it}}]),e}(),Ht=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};o(this,e),this.loader=t,this._stop=n}return u(e,[{key:"idle",value:function(){return Promise.resolve(this)}},{key:"stop",value:function(){var e=this;return this._stop().then((function(){return e.after}))}},{key:"perDep",value:function(e){var t=this.loader.deps;return Promise.all(t.map((function(t){return e(t)})))}}]),e}(),$t=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}var r;return n(t,e),u(t,[{key:"setup",value:(r=F(regeneratorRuntime.mark((function e(){var t,n,r,u,i,o,a,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perDep((function(e){return e.setup()}));case 2:return r=this.loader,u=r.bsContext,i=r.request.def,o=Gt(u,this.loader),a=l(o,2),c=a[0],f=a[1],null===(n=(t=i).setup)||void 0===n||n.call(t,c),e.abrupt("return",new Qt(this.loader,c,(function(){return Promise.resolve(f.off())})));case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"init",value:function(){return this.setup().then((function(e){return e.init()}))}},{key:"after",get:function(){return"idle"}}]),t}(Ht),Qt=function(e){function t(e,n,r){var u;return o(this,t),(u=a(this,c(t).call(this,e,r)))._context=n,u}var r;return n(t,e),u(t,[{key:"setup",value:function(){return Promise.resolve(this)}},{key:"init",value:(r=F(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perDep((function(e){return e.init()}));case 2:return r=this.loader.request.def,null===(n=(t=r).init)||void 0===n||n.call(t,this._context),e.abrupt("return",new Wt(this));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"after",get:function(){return"setup"}}]),t}(Ht),Wt=function(e){function t(e){var n;return o(this,t),n=a(this,c(t).call(this,e.loader,(function(){return e.stop()}))),e.loader.state.it=!0,n}return n(t,e),u(t,[{key:"after",get:function(){return"init"}}]),u(t,[{key:"setup",value:function(){return Promise.resolve(this)}},{key:"init",value:function(){return Promise.resolve(this)}}]),t}(Ht);function Gt(e,t){var r,i,f,s=(r=[],i=function(e){var t=e();return r.push(t),t},{supply:U((function(){i=Nt,$(Q(r).reverse(),(function(e){return e()})),r.length=0})),add:function(e){return i(e)}}),h=e.get(Dt),d=e.get(Rt),y=new v(e),g=e.get(Pt),m=g.definitions.on.tillOff(s.supply),w=g.components.on.tillOff(s.supply);return[new(function(r){function i(){var n;o(this,i),(n=a(this,c(i).call(this))).get=y.newValues().get;var r=x({st:t.state,bs:p().by(e.whenReady)}).thru((function(e){var t=l(e.st,1)[0];return l(e.bs,1)[0]&&t?O(k(n)):D()}));return n.whenReady=r.once,y.provide({a:We,is:k(n)}),f=new Lt(k(n)),n}return n(i,r),u(i,[{key:"provide",value:function(t){return s.add((function(){return e.get(Ot).provide(t)}))}},{key:"perDefinition",value:function(e){return s.add((function(){return h.provide(e)}))}},{key:"perComponent",value:function(e){return s.add((function(){return d.provide(e)}))}},{key:"setupDefinition",value:function(e){return function(e,t){var n=Et(e).on;return H((function(e){n({supply:e.supply.needs(t.supply),receive:function(n,r){var u=r.whenReady.tillOff(t.supply),i=r.whenComponent.tillOff(t.supply);e.receive(n,{get componentType(){return r.componentType},get whenReady(){return u},get whenComponent(){return i},perDefinition:function(e){return t.add((function(){return r.perDefinition(e)}))},perComponent:function(e){return t.add((function(){return r.perComponent(e)}))}})}})}))}(e,s)}},{key:"define",value:function(e){f.define(e)}},{key:"feature",get:function(){return t.request.feature}},{key:"onDefinition",get:function(){return m}},{key:"onComponent",get:function(){return w}}]),i}(We)),s.supply]}var Jt=function(){function e(t,n,r){o(this,e),this._requester=t,this.feature=n,this._revoke=r,this._uses=0,this.def=function(e){var t=$e.of(e);if(Xe in e){t=$e.merge(t,{init:function(t){t.define(e)}});var n=et.of(e).feature;n&&(t=$e.merge(t,n))}return t}(n)}return u(e,[{key:"request",value:function(e){var t=this,n=this._requester,r=n.registry,u=[this,"is",this.feature];return this._revokeBy(r.provide({a:It.of(this.feature),is:u})),new Le(this.def.has).forEach((function(u){var i=[t,"has",u];t._revokeBy(r.provide({a:It.of(u),is:i}));var o=n.request(u,[].concat(m(e),[i]));t._revokeBy((function(){return o.unuse()}))})),new Le(this.def.needs).forEach((function(u){var i=[t,"needs",u],o=n.request(u,[].concat(m(e),[i]));t._revokeBy((function(){return o.unuse()})),t._revokeBy(r.provide({a:It.of(u),is:i}))})),this._uses=1,this}},{key:"reuse",value:function(e){if(!this._uses)throw new Ge(e.map((function(e){var t=l(e,3);return[t[0].feature,t[1],t[2]]})));return++this._uses,this}},{key:"unuse",value:function(){--this._uses||this._revoke()}},{key:"_revokeBy",value:function(e){this._revoke=Ie(e,this._revoke)}}]),e}();var Xt=new i("feature-requester",{byDefault:Ae((function(e){return new Yt(e)}))}),Yt=function(){function e(t){o(this,e),this._map=new Map,this.registry=t.get(Ot)}return u(e,[{key:"request",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this._map.get(e);if(r)return r.reuse(n);var u=new Jt(this,e,(function(){return t._map.delete(e)}));return this._map.set(e,u),u.request(n)}}],[{key:f,get:function(){return Xt}}]),e}();function Zt(e){return $e.define((function e(){o(this,e)}),{needs:e})}function en(e){var t=p(0),r=e.values,i=new(function(f){function s(){var n;o(this,s),(n=a(this,c(s).call(this))).get=r.get;var u=t.read.thru((function(e){return e?O(k(n)):D()}));return n.whenReady=u.once,e.provide({a:Ue,by:j}),e.provide({a:De,is:k(n)}),n}var h;return n(s,f),u(s,[{key:"whenDefined",value:(h=F(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return n.whenReady(e)}));case 2:return e.next=4,this.get(gt).whenDefined(t);case 4:return e.abrupt("return",dt(t));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"load",value:function(e){var t,r=this,f=b((function(t){var n=i.get(Yt).request(e),u=p({status:{feature:e,ready:!1}});r.get(It.of(e))({supply:t.supply,receive:function(e,t){var n=t;u.it={status:{feature:n.request.feature,ready:n.ready},down:n.down},n.ready||n.init().then((function(){u.it={status:{feature:n.request.feature,ready:!0},down:n.down}}))}}).whenOff((function(){n.unuse()})),u.read(t)})).share(),s=f((function(e){var n=e.down;t=n})),h=f.keep.thru((function(e){return e.status})).tillOff(s);return new(function(e){function r(){return o(this,r),a(this,c(r).apply(this,arguments))}return n(r,e),u(r,[{key:"dismiss",value:function(e){return s.off(e),t}},{key:"read",get:function(){return h}},{key:"down",get:function(){return t}}]),r}(Je))}}]),s}(De));return{bootstrapContext:i,complete:function(){t.it=1}}}var tn=Symbol("attribute");function nn(e){return[tn,e]}function rn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!1===t)return P;if(!0===t||"function"==typeof t){var n=nn(e),r=!0===t?un:t;return function(e,t){r.call(this,n,e,t)}}return function(e,n){at.of(this).updateState(t,e,n)}}function un(e,t,n){at.of(this).updateState(e,t,n)}var on=new i("attribute-registrar"),an=new i("attribute-registry"),cn=function(){function e(t){o(this,e),this._attrs={},this._MutationObserver=t.get(Pe).MutationObserver}return u(e,[{key:"add",value:function(e,t){this._attrs[e]=Ie(this._attrs[e],t)}},{key:"define",value:function(e){var t=this._attrs,n=Object.keys(t);n.length&&(Object.defineProperty(e,"observedAttributes",{configurable:!0,enumerable:!0,value:n}),Object.defineProperty(e.prototype,"attributeChangedCallback",{configurable:!0,enumerable:!0,value:function(e,n,r){t[e].call(at.of(this).component,r,n)}}))}},{key:"mount",value:function(e){var t=e.element,n=this._attrs,r=Object.keys(n);r.length&&new this._MutationObserver((function(e){return e.forEach((function(e){var r=e.attributeName;return n[r].call(at.of(t).component,t.getAttribute(r),e.oldValue)}))})).observe(t,{attributes:!0,attributeFilter:r,attributeOldValue:!0})}}],[{key:f,get:function(){return an}}]),e}(),fn={setup:function(e){e.perDefinition({as:cn}),e.perDefinition({a:on,by:function(e){return function(t,n){return e.add(t,n)}},with:[cn]}),e.onDefinition((function(e){e.whenReady((function(t){var n=t.elementType;return e.get(cn).define(n)}))})),e.onComponent((function(e){var t=e.mount;t&&e.get(cn).mount(t)}))}},sn=function(){function e(){o(this,e)}return u(e,null,[{key:Ve,get:function(){return fn}}]),e}();var hn=new i("component-state"),ln=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,null,[{key:f,get:function(){return hn}}]),t}(T),vn={setup:function(e){e.perComponent({a:ln,by:function(e){var t=new ln;return e.whenDestroyed((function(e){return t.done(e)})),t}}),e.perComponent({a:it,by:function(e){return e.update},with:[ln]})}},pn=function(){function e(){o(this,e)}return u(e,null,[{key:Ve,get:function(){return vn}}]),e}();var dn=Symbol("dom-property");var yn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.offline,u=n.path,i=void 0===u?[]:u,o=e.get(ln).track(i),a=e.get(qe)(),c=!1,f=o.onUpdate((function(){r||e.connected?s():c=!1}));function s(){c=!0,a(h)}function h(){for(;;){var e=t();if(e===t||"function"!=typeof e)break;t=e}}r?s():e.whenOn((function(){c||s()})).whenOff((function(e){f.off(e),c=!0}))};var gn=new i("shadow-content-root"),mn=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:"shadowRoot",get:function(){return this.target.shadowRoot}}]),t}(r(Event)),wn=new y("shadow-root-builder"),kn={setup:function(e){e.provide({a:wn,is:_n})}},bn=function(){function e(){o(this,e)}return u(e,null,[{key:Ve,get:function(){return kn}}]),e}();function _n(e,t){var n=function(e,t){var n=e.shadowRoot;if(n)return n;if("attachShadow"in e)return e.attachShadow(t);return}(e.element,t);return n&&(n[ot]=e,e.whenOn.once((function(){return e.dispatchEvent(new mn("wesib:shadowAttached",{bubbles:!0}))}))),n}var xn={mode:"open"};var On=e("W",new d("https://wesib.github.io/ns","b","wesib")),Sn=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this,e))).upKey=n.createUpKey((function(e){return e.seed.keep.thru((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n.length)return fe(Cn(n));var u=function(){return _(Rn)};return S(e.byDefault(u)||u())}))})),n}return n(t,e),u(t,[{key:"grow",value:function(e){var t;return e.context.get(this.upKey,"or"in e?{or:null!=e.or?_(e.or):e.or}:void 0)((function(e){return t=e})),function(e,n){return t(e,n)}}}]),t}(A);function Rn(e,t){return e(t)}function Cn(e){return function(t,n){return function n(r,u){var i=e[r];return i?se(i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return n(r+1,e)}),u)):t(u)}(0,n)}}var Dn=new Sn("http-fetch-agent"),An={};var En=new y("http-fetch",{byDefault:Ae((function(e){var t=e.get(Pe),n=e.get(Dn);return function(e,t){return n(r,new Request(e,t))};function r(e){return H((function(n){var r,u=new G;if("AbortController"in t){var i=new t.AbortController,o=i.signal;r=U((function(e){e===An&&i.abort()})),n.supply.whenOff((function(){return r.off(An)})).needs(r),u.on({supply:r,receive:function(e,t){n.receive(e,t)}});var a=e.signal;a&&(new M(a).on("abort").once((function(){return i.abort()})),a.aborted&&i.abort()),e=new Request(e,{signal:o})}else r=u.on(n);t.fetch(e).then((function(e){u.send(e),r.off()})).catch((function(e){return r.off(e)}))}))}}))});var jn=new i("hierarchy-root",{byDefault:function(e){var t=e.get(Te);return new M(t).on("wesib:component")((function(e){return e.context.get(Tn).issue()})),p()}}),Pn=new i("hierarchy-updates",{byDefault:function(e){return new Tn(e.get(at))}}),Tn=function(){function e(t){o(this,e);var n=new G,r=t.get(De).get(jn);this.on=n.on,this.send=function(){return n.send(t)},this.issue=function(){var n=Un(t);n?n[0].get(e).send():r.it=t}}return u(e,null,[{key:f,get:function(){return Pn}}]),e}();function Un(e){var t=e.get(De).get(Te),n=e.element,r=!0;if(n!==t)for(;;){var u=n.parentNode;if(!u)return;var i=u[ot];if(i)return[i,r];if(u===t)return;r=!1,n=u}}var qn=new i("hierarchy-context",{byDefault:function(e){return function(e){var t=e.get(De).get(jn),r=b((function(n){var r=p(),u=U().needs(n.supply),i=U().needs(n.supply),o=function(){var t=Un(e);if(t){var n=l(t,2),o=n[0],a=n[1];r.it=o.get(Nn),u.off(),a&&i.off()}else r.it=void 0};t.read({supply:u,receive:function(){return e.connected&&o()}}),r.read.consume((function(e){return e&&e.context.get(Tn).on(o)})).needs(i),r.read(n),e.whenOn({supply:n.supply,receive:function(t,n){o(),n.whenOff((function(){Promise.resolve().then((function(){return e.connected||(r.it=void 0)}))}))}})})).share(),i=function(e){return new v((function(t){return e.keep.thru((function(e){return e?S(e.get(t)):O()}))}))}(r),f=i.newValues();return new(function(t){function s(){var e;return o(this,s),(e=a(this,c(s).apply(this,arguments))).get=f.get,e}return n(s,t),u(s,[{key:"provide",value:function(e){return i.provide(e)}},{key:"context",get:function(){return e}},{key:"up",get:function(){return r}}]),s}(Nn))}(e.get(at))}}),Nn=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,null,[{key:f,get:function(){return qn}}]),t}(s);var Ln=e("j",new i("component-node")),Mn=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:ee,get:function(){return this.onUpdate}},{key:V,get:function(){return this.read}}]),t}(w),In={subtree:!0};function zn(e,t,r,i,f){var s,h,l=f.deep,v=f.all,p=new G,d=l?In:void 0,y=new Set;"string"==typeof r?h=r:e.whenDefined(r).then((function(t){var n=t.elementDef.name;if(s=void 0,n&&(h=X.name(n,e.get(Ue)),p.size)){var r=D();if(r.size){var u=Array.from(E(C(r,(function(e){return i(e)})),B));u.length&&p.send(u,[])}}}));var g,m=e.get(vt)((function(e){var t=[],n=[];e.forEach((function(e){$(E(C(Q(e.removedNodes),j),B),(function(e){return n.push(e)})),$(E(C(Q(e.addedNodes),A),B),(function(e){return t.push(e)}))})),(t.length||n.length)&&p.send(t,n)})),k=H((function(e){var n=!p.size,r=p.on(e);return n&&(D(),m.observe(t,d)),U((function(e){r.off(e),p.size||m.disconnect()})).needs(r)})),_=b(k.thru((function(){return g})),(function(){return[g]})),x=k.thru((function(e,t){return O(w.of(e),w.of(t))})),S=b((function(e){var t=new G;t.on(e),t.send(g,w.of([])),x(e)})),R=Y(_).keep.thru((function(e){return fe(ce(e))}));return v||t.addEventListener("wesib:component",(function(e){var t=e.target;if(y.has(t)){var n=i(t);p.send([n],[])}})),g=new(function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:Symbol.iterator,value:function(){return te(s||(s=E(C(p.size?y:D(),(function(e){return i(e)})),B)))}},{key:"onUpdate",get:function(){return k}},{key:"read",get:function(){return _}},{key:"track",get:function(){return S}},{key:"first",get:function(){return R}}]),t}(Mn));function D(){return s=void 0,y=function(){var e=h;if(!e)return new Set;if(l)return new Set(Q(t.querySelectorAll(e)));return new Set(E(Q(t.children),(function(t){return t.matches(e)})))}()}function A(e){if(ze(e))return h&&e.matches(h)&&!y.has(e)?(y.add(e),i(e)):void 0}function j(e){if(ze(e)&&y.delete(e))return i(e,!0)}}var Bn=function(){function e(t,n){o(this,e),this._bs=t,this.element=n,this._emitters=new Map}return u(e,[{key:"observe",value:function(e,t){var n=this,r=this,u=this.observer,i=this._emitter(e),o=ne(t),a=i.on({supply:U((function(){n._emitters.delete(e),u.disconnect(),n._emitters.size?c():n._observer=void 0})).needs(o.supply),receive:function(e,t,n){return o.receive(e,t,n)}});return u.disconnect(),c(),a;function c(){r._update(u.takeRecords()),u.observe(r.element,{attributes:!0,attributeOldValue:!0,attributeFilter:Array.from(r._emitters.keys())})}}},{key:"_update",value:function(e){var t=this;e.forEach((function(e){var n=e.attributeName,r=t._emitters.get(n);r&&r.send(t.element.getAttribute(n),e.oldValue)}))}},{key:"_emitter",value:function(e){var t=new G;return this._emitters.set(e,t),t}},{key:"observer",get:function(){var e=this;if(this._observer)return this._observer;var t=this._bs.get(Pe).MutationObserver;return this._observer=new t((function(t){return e._update(t)}))}}]),e}(),Kn=function(e){function t(e,n){var r;o(this,t),(r=a(this,c(t).call(this)))._observer=e,r._name=n,r._updates=new G;var u=le();return r.on=H((function(e){r._updates.size||(u=r._observer.observe(n,(function(e,t){return r._updates.send(e,t)}))),e.supply.needs(u),r._updates.on(e).whenOff((function(e){r._updates.size||u.off(e)}))})),r}return n(t,e),u(t,[{key:q,get:function(){return I(this._updates)}},{key:"it",get:function(){return this._observer.element.getAttribute(this._name)},set:function(e){this._observer.element.setAttribute(this._name,e)}}]),t}(N),Vn=function(){function e(t,n){o(this,e),this._attrs=new Map,this._observer=new Bn(t,n)}return u(e,[{key:"get",value:function(e){var t=this._attrs.get(e);if(t)return t;var n=new Kn(this._observer,e);return this._attrs.set(e,n),n}}]),e}(),Fn=function(e){function t(e,n){var r;return o(this,t),(r=a(this,c(t).call(this)))._element=e,r._key=n,r._updates=new G,r._supply=U(),r}return n(t,e),u(t,[{key:"done",value:function(e){return this._supply.off(e),this}},{key:"bind",value:function(e){var t,n=this,r=I(this),u=e.get(ln).track((t=this._key,[dn,t]));r.needs(u.onUpdate({supply:U().whenOff((function(e){return n._updates.done(e)})),receive:function(e,t,r,u){return n._updates.send(r,u)}}).needs(r))}},{key:"on",get:function(){return this._updates.on}},{key:q,get:function(){return this._supply}},{key:"it",get:function(){return this._element[this._key]},set:function(e){this._element[this._key]=e}}]),t}(N),Hn=function(){function e(t){o(this,e),this._element=t,this._props=new Map}return u(e,[{key:"bind",value:function(e){this._context=e,this._props.forEach((function(t){return t.bind(e)}))}},{key:"get",value:function(e){var t=this._props.get(e);if(t)return t;var n=new Fn(this._element,e);return this._context&&n.bind(this._context),this._props.set(e,n),n}}]),e}(),$n=Symbol("element-node"),Qn=function(){function e(t,n){var r=this;o(this,e),this._bs=t,this.element=n,this._attrs=new Vn(t,n),this._props=new Hn(n),n[$n]=this;var u=n[ot];u?this._bind(u):n.addEventListener("wesib:component",(function(e){return r._bind(e.context)}))}return u(e,[{key:"select",value:function(e,t){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(r.all)return zn(e,t,n,(function(t,n){return Wn(e,t,n)}),r);var u=e.get(lt);return zn(e,t,n,(function(t,n){return u(t)&&Wn(e,t,n)}),r)}(this._bs,this.element,e,t)}},{key:"attribute",value:function(e){return this._attrs.get(e)}},{key:"property",value:function(e){return this._props.get(e)}},{key:"_bind",value:function(e){this._props.bind(e)}},{key:"context",get:function(){return this.element[ot]}},{key:"parent",get:function(){var e=this.element.parentNode;return e&&Wn(this._bs,e)}}]),e}();function Wn(e,t,n){var r=t[$n];return r||n?r:new Qn(e,t)}var Gn={needs:pn,setup:function(e){e.perComponent({a:Ln,by:function(e){return Wn(e.get(De),e.element)}})}},Jn=e("b",function(){function e(){o(this,e)}return u(e,null,[{key:Ve,get:function(){return Gn}}]),e}()),Xn=new i("navigation"),Yn=function(){function e(){o(this,e)}return u(e,[{key:"back",value:function(){this.go(-1)}},{key:"forward",value:function(){this.go(1)}},{key:"reload",value:function(){this.go()}},{key:ee,get:function(){return this.on}},{key:V,get:function(){return this.read}}],[{key:f,get:function(){return Xn}}]),e}(),Zn=Symbol("page-param"),er=function(){function e(){o(this,e)}return u(e,[{key:Zn,get:function(){return this}}]),e}(),tr=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),t}(s),nr=new i("nav-history",{byDefault:Ae((function(e){return new ur(e)}))});function rr(e){return null==e||"object"!==he(e)?{data:e}:e["wesib:navigation:data"]}var ur=function(){function e(t){o(this,e),this._context=t,this._entries=new Map,this._lastId=0;var n=t.get(Pe);this._document=n.document,this._location=n.location,this._history=n.history,this._uid=btoa(String(Math.random()))}return u(e,[{key:"init",value:function(){var e=this,t=rr(this._history.state).data,n=this.newEntry({url:new URL(this._location.href),data:t,title:this._document.title});return this._entries.set(n.id,n),n.schedule((function(){n.enter("init"),e._history.replaceState(e._historyState(n),"")})),n}},{key:"newEntry",value:function(e){return new ir(this._context,++this._lastId,e)}},{key:"open",value:function(e,t){var n=e.page,r=n.title,u=void 0===r?"":r,i=n.url;this._history.pushState(this._historyState(e),u,i.href),this._enter("open",e,t)}},{key:"_enter",value:function(e,t,n){var r=n.it;this._entries.set(t.id,t);try{for(var u=r.next;u;u=u.next)this._forget(u)}finally{t.prev=r,r.next=t,t.schedule((function(){try{r.leave()}finally{t.enter(e)}})),n.it=t}}},{key:"replace",value:function(e,t){var n=this,r=t.it,u=e.page,i=u.title,o=void 0===i?"":i,a=u.url;this._history.replaceState(this._historyState(e),o,a.href),this._entries.set(e.id,e);var c=r.prev;c&&(e.prev=c,c.next=e),e.schedule((function(){try{r.leave()}finally{try{n._forget(r)}finally{e.enter("replace")}}})),t.it=e}},{key:"popState",value:function(e,t){var n=e.state;if(null==n)return null==this._history.state?this._changeHash(t):void 0;var r,u=t.it,i=rr(n),o=i.uid,a=i.data,c=i.id,f=o===this._uid&&null!=c?this._entries.get(c):void 0;return f?r=f:(r=this.newEntry({url:new URL(this._location.href),data:a,title:this._document.title}),u.transfer(r,"return"),this._entries.set(r.id,r),this._history.replaceState(this._historyState(r),"")),r.schedule((function(){try{u.leave()}finally{r.enter("return")}})),t.it=r,r}},{key:"hashChange",value:function(e){if(null==this._history.state)return this._changeHash(e)}},{key:"update",value:function(e,t){var n=e.it,r=new ir(this._context,++this._lastId,Object.assign(Object.assign({},n.page),{url:t}),n);return this._entries.set(r.id,r),this._history.replaceState(this._historyState(r),"",t.href),this._entries.delete(n.id),e.it=r}},{key:"_changeHash",value:function(e){var t=e.it,n=this.newEntry({url:new URL(this._location.href),data:null,title:this._document.title});try{t.transfer(n,"enter")}finally{this._history.replaceState(this._historyState(n),""),this._enter("enter",n,e)}return n}},{key:"_forget",value:function(e){this._entries.delete(e.id),e.forget()}},{key:"_historyState",value:function(e){var n=e.id,r=e.page.data;return t({},"wesib:navigation:data",{uid:this._uid,id:n,data:r})}}],[{key:f,get:function(){return nr}}]),e}(),ir=function(){function e(t,n,r,u){o(this,e),this._context=t,this.id=n,this._status=0,this._update=P,this._params=u?u._params:new Map;var i=this;this.page={url:r.url,title:r.title,data:r.data,get visited(){return!!i._status},get current(){return 2===i._status},get:function(e){return i.get(e)},put:function(e,t){i.put(e,t)}}}return u(e,[{key:"get",value:function(e){var t=this._params.get(e[Zn]);return t&&t.get()}},{key:"put",value:function(e,t){var r=e[Zn],u=this._params.get(r);if(u)return u.put(t),u.get();var i=new v(this._context),f=function(e){function t(){var e;return o(this,t),(e=a(this,c(t).apply(this,arguments))).get=i.newValues().get,e}return n(t,e),t}(tr),s=r.create(this.page,t,new f);return this._params.set(r,s),this.page.current&&s.enter&&s.enter(this.page,"init"),s.get()}},{key:"transfer",value:function(e,t){$(this._params.entries(),(function(n){var r=l(n,2),u=r[0],i=r[1];if(i.transfer){var o=i.transfer(e.page,t);o&&e._params.set(u,o)}}))}},{key:"stay",value:function(e){$(this._params.values(),(function(t){return t.stay&&t.stay(e)}))}},{key:"enter",value:function(e){var t=this;this._status=2,$(this._params.values(),(function(n){return n.enter&&n.enter(t.page,e)}))}},{key:"leave",value:function(){this._status=1,$(this._params.values(),(function(e){return e.leave&&e.leave()}))}},{key:"forget",value:function(){$(this._params.values(),(function(e){return e.forget&&e.forget()})),this._params.clear()}},{key:"schedule",value:function(e){this._update=e}},{key:"apply",value:function(){var e=this._update;this._update=P,e()}}]),e}();function or(e,t,n,r){e(r)}var ar=new(function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this,e))).upKey=n.createUpKey((function(e){var t=e.context.get(Pe).document;return e.seed.keep.thru((function(){for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];if(r.length)return fe(o);var i=function(){return _(or)};return S(e.byDefault(i)||i());function o(e,n,u,i){return function i(o,a){var c=r[o];if(!c)return e(a);c((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,n=e.url,r=void 0===n?a.url:n,u=e.title,c=void 0===u?a.title:u,f=e.data,s=void 0===f?a.data:f;return i(o+1,{url:new URL(String(r),t.baseURI),title:c,data:s,get visited(){return a.visited},get current(){return a.current},get:function(e){return a.get(e)},put:function(e,t){a.put(e,t)}})}),n,u,a)}(0,i)}}))})),n}return n(t,e),u(t,[{key:"grow",value:function(e){var t;return e.context.get(this.upKey,"or"in e?{or:null!=e.or?_(e.or):e.or}:void 0)((function(e){return t=e})),function(e,n,r,u){return t(e,n,r,u)}}}]),t}(A))("navigation-agent"),cr=function(e){function t(e,n){var r;return o(this,t),(r=a(this,c(t).call(this,e,Object.assign(Object.assign({},n),{cancelable:!1})))).when=n.when,r.to=n.to,r}return n(t,e),t}(r(Event)),fr=function(e){function t(e,n){var r;return o(this,t),(r=a(this,c(t).call(this,e,Object.assign(Object.assign({},n),{cancelable:!0})))).when=n.when,r.from=n.from,r.to=n.to,r}return n(t,e),t}(r(Event)),sr=function(e){function t(e,n){var r;return o(this,t),(r=a(this,c(t).call(this,e,Object.assign(Object.assign({},n),{cancelable:!0})))).from=n.from,r.to=n.to,r.reason=n.reason,r}return n(t,e),u(t,[{key:"when",get:function(){return"stay"}}]),t}(r(Event));function hr(e){var t=e.get(Pe),r=t.document,i=t.history,f=new M(t),s=e.get(ur),h=e.get(ar),l=f.on("wesib:enterPage"),v=f.on("wesib:leavePage"),d=f.on("wesib:stayOnPage"),y=J(l,v,d),g=p(s.init());g.read((function(e){return e.apply()}));var m=g.read.keep.thru((function(e){return e.page})),w=Promise.resolve();return f.on("popstate")((function(e){var t=s.popState(e,g);t&&f.dispatch(new cr("wesib:enterPage",{when:null!=e.state?"return":"enter",to:t.page}))})),f.on("hashchange")((function(){var e=s.hashChange(g);e&&f.dispatch(new cr("wesib:enterPage",{when:"enter",to:e.page}))})),new(function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:"go",value:function(e){i.go(e)}},{key:"open",value:function(e){return _("pre-open","open",e)}},{key:"replace",value:function(e){return _("pre-replace","replace",e)}},{key:"update",value:function(e){return s.update(g,k(e)).page}},{key:"with",value:function(e,t){return function e(t){return{with:function(n,r){return e(Ie(t,(function(e){return e.put(n,r)})))},open:function(e){return _("pre-open","open",e,t)},replace:function(e){return _("pre-replace","replace",e,t)}}}((function(n){return n.put(e,t)}))}},{key:"length",get:function(){return i.length}},{key:"onEnter",get:function(){return l}},{key:"onLeave",get:function(){return v}},{key:"onStay",get:function(){return d}},{key:"on",get:function(){return y}},{key:"read",get:function(){return m}}]),t}(Yn));function k(e){return"string"==typeof e?new URL(e,r.baseURI):e||g.it.page.url}function b(e){return"string"==typeof e||e instanceof URL?{url:k(e)}:e.url instanceof URL?e:Object.assign(Object.assign({},e),{url:k(e.url)})}function _(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P,u=b(n),i=w=w.then(o,o);return i;function o(){var e=void 0;try{var n=a();return n?(e=n,s[t](e,g),f.dispatch(new cr("wesib:enterPage",{when:t,to:e.page})),e.page):n}catch(t){throw c(e,t),t}}function a(){if(w!==i)return c();var t=g.it,n=s.newEntry(u);t.transfer(n,e);var o,a=new fr("wesib:leavePage",{when:e,from:t.page,to:n.page});return r(n.page),f.dispatch(a)&&w===i?(h((function(e){return o=e}),e,a.from,a.to),o?n:c(n)):c(n)}function c(e,t){return e&&e.stay(g.it.page),f.dispatch(new sr("wesib:stayOnPage",{from:g.it.page,to:u,reason:t})),null}}}var lr={setup:function(e){e.provide({a:Yn,by:hr})}},vr=function(){function e(){o(this,e)}return u(e,null,[{key:Ve,get:function(){return lr}}]),e}(),pr={supply:P};function dr(e){var t,n=0;return e.forEach((function(e){var r=l(e,2),u=r[0],i=r[1];i>n&&(n=i,t=u)})),t}function yr(e){return e.weigh?function(t){var n=e.weigh(t);if("number"==typeof n)return _(t.node,n);var r=Y(n).keep.thru_((function(e){return O(t.node,e)}));return b((function(e){r({supply:U().needs(e.supply).whenOff((function(){(r=_(t.node,0))(e)})),receive:e.receive.bind(e)})}))}:gr}function gr(e){var t=e.node,n=e.page,r=t.element,u=r.getAttribute("href");if(null==u)return _(t,-1);var i=new URL(u,r.ownerDocument.baseURI);return _(t,function e(t,n){if(t.origin!==n.origin)return-1;var r=mr(t),u=mr(n);if(t.hash)return r!==u?-1:kr(t,n)<0||kr(n,t)<0?-1:e(wr(t),wr(n));var i=kr(t,n);if(i)return i<0?-1:r!==u?-1:i;if(!u.startsWith(r))return-1;return t.pathname.length}(i,n.url))}function mr(e){var t=e.pathname;return t.endsWith("/")?t:t+"/"}function wr(e){var t=e.hash;return"/"!==(t=t.substring(1))[0]&&(t="/"+t),new URL(t,e)}function kr(e,t){var n=e.searchParams,r=t.searchParams,u=0;return n.forEach((function(e,t){var i=new Set(r.getAll(t));u>=0&&(n.getAll(t).every((function(e){return i.has(e)}))?u+=1:u=-1)})),u}var br=Symbol("nav-link-render-schedule"),_r=["active",On];function xr(e,t){var n=e.get(qe),r=t.active,u=void 0===r?_r:r,i=Z.name(u,e.get(Ue)),o=t.activate?t.activate.bind(t):P;return function(e){var t,r=e.node.element,u=r[br]||(r[br]=n({node:r})),a=function(t){u((function(){return function(e,t){var n=t.node.element.classList;e?n.add(i):n.remove(i)}(t,e)})),o(t,e)};return a(!0),{node:e.node,supply:function(){var e=t=U((function(){t===e&&a(!1)}));return e}}}}function Or(e){var t=e.event,n=e.page,r=e.navigation,u=t.target,i=u.getAttribute("href");if(null!=i){var o=n.url,a=new URL(i,u.ownerDocument.baseURI);a.origin===o.origin&&(t.preventDefault(),o.href!==a.href&&r.open(i))}}function Sr(e,t,n){var r,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rr;"function"==typeof n?(u=n,r=null):r=n||null;var i=t.ownerDocument;if(ze(e)){var o=i.createElement(e.tagName.toLowerCase());return e.getAttributeNames().forEach((function(t){return o.setAttribute(t,e.getAttribute(t))})),u(e,o),t.insertBefore(o,r),o}var a=i.importNode(e,!1);return t.insertBefore(a,r),a}function Rr(e,t){$(Q(e.childNodes),(function(e){return Sr(e,t)}))}function Cr(e){var t;return function(n){var r,u=function(e){return new URL("",e.url).href}(n);if(t){if(t.url===u)return t.on;t.sup.off()}var i=U().whenOff((function(){t=void 0,r=void 0})),o=H((function(t){if(!r){var u=e(n),o=p(),a=u((function(e){o.it=e})).whenOff((function(e){null!=e&&i.off(e)}));i.whenOff((function(e){a.off(e),o.done(e)})),r={on:o.read.thru_((function(e){return e?O(e):D()})),num:0}}var c=r;return++c.num,c.on(t).needs(i).whenOff((function(e){--c.num||Promise.resolve().then((function(){c.num||c!==r||i.off(e)}))}))}));return t={url:u,on:o,sup:i},o}}var Dr=function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),t}(r(Error)),Ar=new(function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:"create",value:function(e,t){return{get:function(){return t},put:P}}}]),t}(er)),Er=function(){function e(t,n){o(this,e),this._navigation=t,this._loader=n,this._map=new Map}return u(e,[{key:Symbol.iterator,value:function(){return te(K(this._map.values()))}},{key:"handle",value:function(){var e=this,t=U(),n=le();return{get:function(){},put:function(t){e._add(t)},transfer:function(t){var n=e._transfer();return t.put(Ar,n),n.handle()},enter:function(r,u){if("init"!==u){n=U().needs(t);var i=H((function(t){var u=new G,i=u.on(t);return e._loader(r)((function(e){return u.send(e)})).whenOff((function(e){void 0===e||e instanceof Dr||u.send({ok:!1,page:r,error:e})})).needs(n),i})).share();$(e,(function(e){var t=e.fragment,n=e.receiver;return function(e,t){return t?e.thru_((function(e){return e.ok?Object.assign(Object.assign({},e),{fragment:(null!=t.tag?e.document.getElementsByTagName(t.tag)[0]:e.document.getElementById(t.id))||void 0}):e})):e}(i,t)({supply:U().needs(n.supply),receive:function(e,t){n.receive(e,t)}})}))}},leave:function(){n.off(new Dr("page left"))},stay:function(){t.off(new Dr("navigation cancelled"))},forget:function(){t.off(new Dr("page forgotten"))}}}},{key:"_add",value:function(e){var t=this,n=Object.assign(Object.assign({},e),{receiver:ne(e.receiver)}),r=n.receiver.supply,u=this._map.get(r);u?u.push(n):(this._map.set(r,[n]),r.whenOff((function(){return t._map.delete(r)})))}},{key:"_transfer",value:function(){var t=new e(this._navigation,this._loader),n=!0,r=!1,u=void 0;try{for(var i,o=this._map.entries()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=l(i.value,2),c=a[0],f=a[1];t._map.set(c,Array.from(f))}}catch(e){r=!0,u=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw u}}return t}},{key:"fragments",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var u,i=this[Symbol.iterator]();!(t=(u=i.next()).done);t=!0){var o=u.value;if(!o.fragment)return[];e.push(o.fragment)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}}]),e}();var jr=new Sn("page-load-agent"),Pr=new y("page-load-url",{byDefault:z(P)}),Tr=new i("page-loader",{byDefault:Ae((function(e){var t=e.get(Pe),n=e.get(En),r=e.get(Pr),u=e.get(jr),i=new t.DOMParser;return function(e){var t=new URL(e.url.href);r(t);var o=new Request(t.href,{mode:"same-origin",credentials:"same-origin",headers:new Headers({Accept:"text/html"})});return H((function(e){return u(a,o)(e)}));function a(r){return function(e,t){var n,r=null===(n=e.get(Ar))||void 0===n?void 0:n.fragments;r&&r.length&&t.headers.set("Accept-Fragment",h(r,(function(e,t){return(e?e+", ":"")+(null!=t.tag?"tag="+oe(t.tag):"id="+oe(t.id))}),""))}(e,r),H((function(u){var o=new re;o.on(u),o.send({page:e}),ue(n(r).thru_((function(e){return Promise.all([e,e.text()])}))).thru_((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ie(t)}),(function(n){var r=l(n,2),u=r[0],o=r[1];if(!u.ok)return{ok:!1,page:e,response:u,error:u.status};try{return{ok:!0,page:e,response:u,document:Ur(i,t,u,o)}}catch(t){return{ok:!1,page:e,response:u,error:t}}}))(u)}))}}}))});function Ur(e,t,n,r){var u=e.parseFromString(r,ae(n.headers.get("Content-Type")||"text/html")[0].v);if(u.head){var i=u.head.querySelector("base");if(i)i.href=new URL(i.getAttribute("href"),t).href;else{var o=u.createElement("base");o.href=t.href,u.head.appendChild(o)}}return u}var qr=new(function(e){function t(){return o(this,t),a(this,c(t).apply(this,arguments))}return n(t,e),u(t,[{key:"create",value:function(e,t,n){var r=new Er(n.get(Yn),Cr(n.get(Tr))),u=r.handle();return e.put(Ar,r),u.put(t),u}}]),t}(er)),Nr=new i("page-cache-buster",{byDefault:Ae((function(e){return new Lr(e)}))}),Lr=function(){function e(t){o(this,e);var n=Mr(t.get(Pe).document);if(n){var r=t.get(Yn);this.urlModifier=_((function(e){return e.searchParams.set("__wesib_app_rev__",n)})),this.agent=_((function(e,t){return e(new Request(t.url,t)).thru_((function(e){if(e.ok){var t=Mr(e.document);if(t&&t!==n){var u=new URL(e.page.url.href);u.searchParams.set("__wesib_app_rev__",t),r.update(u),r.reload()}}return e}))}))}else this.urlModifier=_(),this.agent=_()}return u(e,null,[{key:f,get:function(){return Nr}}]),e}();function Mr(e){var t;return null===(t=e.querySelector("meta[name=wesib-app-rev]"))||void 0===t?void 0:t.getAttribute("content")}function Ir(e){var t=e.get(Pe).document;return function(e){return e().thru_((function(e){if(e.ok){var n=new Set(C(zr(t,Q(t.scripts)),(function(e){return l(e,1)[0]})));$(E(zr(e.document,Q(e.document.querySelectorAll("script"))),(function(e){var t=l(e,1)[0];return!n.has(t)})),(function(e){var r=l(e,2),u=r[0];Sr(r[1],t.head,(function(e,t){return t.src=u})),n.add(u)}))}return e}))}}function zr(e,t){return C(E(t,(function(e){return!!e.src})),(function(t){return[new URL(t.src,e.baseURI).href,t]}))}function Br(e){var t=e.get(Pe).document;return function(e){return e().thru_((function(e){if(!e.ok)return e;var n=e.document.querySelectorAll("link[rel=stylesheet]");if(!n.length)return e;var r=t.head,u=null,i=t.querySelectorAll("link[rel=stylesheet]"),o=new Map,a=i.item(0);return a&&(r=a.parentNode,u=a,$(Q(i),(function(e){return o.set(new URL(e.href,t.baseURI).href,e)}))),$(Q(n),(function(e){var n=new URL(e.href,t.baseURI).href,i=o.get(n);i?(ce(o.keys())===n?(r=i.parentNode,u=i.nextSibling):r.insertBefore(i,u),o.delete(n)):Sr(e,r,u,(function(e,t){return t.href=n}))})),$(o.values(),(function(e){return e.parentNode.removeChild(e)})),e}))}}function Kr(e){var t=e.get(Pe).document;return function(e){return e().thru_((function(e){if(e.ok){var n=e.document.getElementsByTagName("title").item(0);n&&n.textContent&&(t.title=n.textContent)}return e}))}}var Vr={needs:vr,setup:function(e){e.provide({a:Pr,by:function(e){return e.urlModifier},with:[Lr]}),e.provide({a:jr,by:function(e){return e.agent},with:[Lr]}),e.provide({a:jr,by:Ir}),e.provide({a:jr,by:Br}),e.provide({a:jr,by:Kr})}},Fr=e("e",function(){function e(){o(this,e)}return u(e,null,[{key:Ve,get:function(){return Vr}}]),e}());var Hr=new i("component-style-producer"),$r=new we("component-styp-render"),Qr=new d("https://wesib.github.io/ns/element-id-class","elic","element-id-class"),Wr=new i("unique-element-class",{byDefault:function(e){var t=e.get(Ue),n=e.get(at),r=n.get(bt),u=r.name?X.name(r.name,t):"component",i="".concat(u,"#").concat(++Gr),o=Qr.name(t(Qr),i,Z);return n.element.classList.add(o),o}}),Gr=0;var Jr=new i("component-style-producer:impl"),Xr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke;o(this,e),this._context=t,this._produce=n}return u(e,[{key:"produce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._context,r=n.get(gn,{or:null});return this._produce(e,Object.assign(Object.assign({},t),{document:t.document||n.get(Pe).document,parent:t.parent||n.contentRoot,rootSelector:[],scheduler:t.scheduler||n.get(qe),nsAlias:t.nsAlias||n.get(Ue),render:u()}));function u(){var e,u=t.render,i=(e=new Le(u)).add.apply(e,m(n.get($r))),o=t.hostSelector?ye(t.hostSelector)[0]:void 0;return i.add(r?Yr(o):Zr(o||{c:[n.get(Wr)]})),i.value}}}],[{key:f,get:function(){return Jr}}]),e}();function Yr(e){return{order:-100,render:function(t,n){var r=t.selector;if(r.length){if(e){var u=eu(r),i=l(u,2),o=i[0],a=i[1];a&&(r=a.length?[{u:[[":","host",tu(a,e)]]}].concat(m(o)):[{u:[[":","host",[e]]]}].concat(m(o)))}}else r=[e||{u:[[":","host"]]}];t.render(n,{selector:r})}}}function Zr(e){return{order:-100,render:function(t,n){var r=t.selector;if(r.length){var u=eu(r),i=l(u,2),o=i[0],a=i[1];r=a&&a.length?[].concat(m(tu(a,e)),m(o)):[e].concat(m(o))}else r=[e];t.render(n,{selector:r})}}}function eu(e){if("string"!=typeof e[0]){var t=ge(e),n=t[0],r=n.ns,u=n.e,i=n.i,o=n.c,a=n.u,c=n.s,f=n.$,s=t.slice(1);if(!r&&!u&&!i&&!o&&!c&&a){var h,v=l(a,1),p=ge(v[0]),d=p[0],y=p[1],g=p.slice(2);if(":"===d&&"host"===y)return g.length?(h=Array.from(g[0]))[0].$=f:h=f?[{$:f}]:[],[s,h]}}return[e]}function tu(e,t){var n=t.ns,r=t.e,u=t.i,i=t.c,o=t.u,a=t.s,c=ge(e),f=c[0],s=c.slice(1);return[{ns:f.e||f.ns?f.ns:n,e:f.e||f.ns?f.e:r,i:f.i||u,c:f.c?i?[].concat(m(f.c),m(i)):f.c:i,u:f.u?o?[].concat(m(f.u),m(o)):f.u:o,s:(f.s||"")+(a||"")||void 0,$:f.$}].concat(m(s))}var nu={setup:function(e){e.perComponent({as:Xr}),e.perComponent({a:Hr,by:function(e){return function(t,n){return e.produce(t,n)}},with:[Xr]})}},ru=function(){function e(){o(this,e)}return u(e,null,[{key:Ve,get:function(){return nu}}]),e}(),uu=function(e,t,n){var r,u=ve(t),i=n&&n.offline,o=e.get(Hr),a=le(),c=U((function(e){r=P,a.off(e)}));switch(r=function(){a=o(u,n).needs(c)},i){case"always":e.whenReady(r);break;case!1:e.whenOn((function(e){r(),a.needs(e)}));break;default:e.whenOn.once(r)}return e.whenDestroyed((function(e){return c.off(e)})),c};var iu={has:ru,setup:function(e){e.perComponent({a:Xr,by:function(e){return new Xr(e,me)}}),e.perComponent({a:Hr,by:function(e){return function(t,n){return e.produce(t,n)}},with:[Xr]})}},ou=(e("S",function(){function e(){o(this,e)}return u(e,null,[{key:Ve,get:function(){return iu}}]),e}()),new i("theme")),au=e("T",function(){function e(){o(this,e)}return u(e,[{key:"ref",value:function(e){return e(this.root)}}],[{key:f,get:function(){return ou}}]),e}()),cu=new i("theme-factory"),fu=function(){function e(){o(this,e)}return u(e,null,[{key:f,get:function(){return cu}}]),e}(),su=new(function(e){function t(){return o(this,t),a(this,c(t).call(this,"theme-style"))}return n(t,e),u(t,[{key:"grow",value:function(e){var t=new Map;return e.seed.forEach((function(e){var n,r,u;"function"==typeof e?(n=r=e,u=!0):(n=e.style,r=e.provide.bind(e),u=!1);var i=t.get(n);if(i){var o=l(i,2),a=o[0],c=o[1];t.set(n,[u?hu(r,a):hu(a,r),u||c])}else t.set(n,[r,u])})),t.size?n:e.byDefault((function(){return n}));function n(e){var n=t.get(e);if(!n)return e;var r=l(n,2),u=r[0];return r[1]?u:hu(e,u)}}}]),t}(de));function hu(e,t){return function(n){return pe(e(n),t(n))}}var lu=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this)))._styles=e,n.root=be(),n._rules=new Map,n}return n(t,e),u(t,[{key:"style",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ve.apply(void 0,m(n.reduce(u,[])));function u(t,n){var r=e._rules.get(n);if(r)t.push(r);else{var u=e._styles(n)(e);e._rules.set(n,u),t.push(u)}return t}}}]),t}(au),vu=function(e){function t(e){var n;return o(this,t),(n=a(this,c(t).call(this)))._styles=e,n}return n(t,e),u(t,[{key:"newTheme",value:function(){return new lu(this._styles)}}]),t}(fu),pu={needs:ru,setup:function(e){e.provide({a:fu,as:vu,with:[su]}),e.provide({a:au,by:function(e){return e.newTheme()},with:[fu]})}},du=(e("c",function(){function e(){o(this,e)}return u(e,null,[{key:Ve,get:function(){return pu}}]),e}()),e("D",new(function(e){function t(){return o(this,t),a(this,c(t).call(this,"default-in-aspects"))}return n(t,e),u(t,[{key:"upKey",get:function(){return this}}]),u(t,[{key:"grow",value:function(e){var t=e.context.get(Ue);return x({scheduler:e.context.get(qe[f].upKey),fns:e.seed}).keep.thru((function(e){var n=l(e.scheduler,1)[0],r=e.fns;return Oe.apply(void 0,m(r).concat([Se.to(n),Re.to(t)]))}))}}]),t}(A)))),yu=new xe("input-receiver",{byDefault:function(){return{}}});function gu(e,t){var n=e.get(Nn).provide({a:yu,by:function(){return{root:e,control:t}}});return U(n).needs(t)}}}}));//# sourceMappingURL=wesib.be8e59ad.s.js.map
